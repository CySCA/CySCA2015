function getCookie(e){var t,i,n,s=document.cookie.split(";");for(t=0;t<s.length;t++)if(i=s[t].substr(0,s[t].indexOf("=")),n=s[t].substr(s[t].indexOf("=")+1),i=i.replace(/^\s+|\s+$/g,""),i==e)return unescape(n)}function setCookie(e,t,i,n){if(void 0===n&&(n={}),i){var s=new Date;s.setHours(s.getHours()+24*i)}document.cookie=e+"="+escape(t)+(i?";expires="+s.toGMTString():"")+(n.path?";path="+n.path:"")+(n.domain?";domain="+n.domain:"")+(n.secure?";secure":"")}function deleteCookie(e,t,i){getCookie(e)&&(document.cookie=e+"="+(t?";path="+t:"")+(i?";domain="+i:"")+";expires=Thu, 01-Jan-1970 00:00:01 GMT")}function readCookie(e){for(var t=e+"=",i=document.cookie.split(";"),n=0;n<i.length;n++){for(var s=i[n];" "==s.charAt(0);)s=s.substring(1,s.length);if(0==s.indexOf(t))return s.substring(t.length,s.length)}return null}function overlay_ad(){var e=readCookie("inc_splash"),t=this.location.href,i=t.indexOf("?partner=");if(!(i>0||e||"dev"==environment)){console.log("readref"+document.referrer);var n=document.referrer;1!=getCookie("inc_splash")&&(setCookie("inc_splash",1,.5,{path:"/",domain:cookieDomain}),setCookie("inc_referrer",n,.1,{path:"/",domain:cookieDomain}),window.location="http://www.inc.com/welcome.html?destination="+encodeURI(window.location.href))}}function countdown(){var e=counter-1;counter=e,$("#sec_count").html(e),e>0?setTimeout(countdown,1e3):hideAdOverlay()}function getUrlVars(){for(var e,t=[],i=window.location.href.slice(window.location.href.indexOf("?")+1).split("&"),n=0;n<i.length;n++)e=i[n].split("="),t.push(e[0]),t[e[0]]=e[1];return t}function ttracker(e){var t=e.attr("data-model-id"),i="mustread",n=Inc.Pages.Inc5000Profile.isPrototypeOf(inc.currentController)?0:inc.currentController.sections[inc.currentController.currentSectionIndex].model.getID(),s=(Inc.Pages.Inc5000Profile.isPrototypeOf(inc.currentController)?0:autid,inc.scrollMonitor.scrollPosition),o=e.attr("slot"),a="article";"undefined"!=typeof Inc.Utilities.getCookie("incrnd")&&(tempid=Inc.Utilities.getCookie("incrnd")),"undefined"!=typeof Inc.Utilities.getCookie("incab")&&(abgroup=Inc.Utilities.getCookie("incab")),console.clear();try{$.post("http://tempo.inc.com/intentionintercept",{slot:o,thattype:a,usrid:usrid,tempid:tempid,position:i,scroll:s,thisincid:n,thatincid:t,abgroup:abgroup}).done(function(){location.href=redirectURL}).fail(function(){location.href=redirectURL})}catch(r){console.log(r)}}function mtracker(e){e.forEach(function(e){console.log(e)})}(function(){var e=this,t=e._,i=Array.prototype,n=Object.prototype,s=Function.prototype,o=i.push,a=i.slice,r=i.concat,l=n.toString,c=n.hasOwnProperty,h=Array.isArray,d=Object.keys,u=s.bind,p=function(e){return e instanceof p?e:this instanceof p?void(this._wrapped=e):new p(e)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=p),exports._=p):e._=p,p.VERSION="1.7.0";var m=function(e,t,i){if(void 0===t)return e;switch(null==i?3:i){case 1:return function(i){return e.call(t,i)};case 2:return function(i,n){return e.call(t,i,n)};case 3:return function(i,n,s){return e.call(t,i,n,s)};case 4:return function(i,n,s,o){return e.call(t,i,n,s,o)}}return function(){return e.apply(t,arguments)}};p.iteratee=function(e,t,i){return null==e?p.identity:p.isFunction(e)?m(e,t,i):p.isObject(e)?p.matches(e):p.property(e)},p.each=p.forEach=function(e,t,i){if(null==e)return e;t=m(t,i);var n,s=e.length;if(s===+s)for(n=0;s>n;n++)t(e[n],n,e);else{var o=p.keys(e);for(n=0,s=o.length;s>n;n++)t(e[o[n]],o[n],e)}return e},p.map=p.collect=function(e,t,i){if(null==e)return[];t=p.iteratee(t,i);for(var n,s=e.length!==+e.length&&p.keys(e),o=(s||e).length,a=Array(o),r=0;o>r;r++)n=s?s[r]:r,a[r]=t(e[n],n,e);return a};var f="Reduce of empty array with no initial value";p.reduce=p.foldl=p.inject=function(e,t,i,n){null==e&&(e=[]),t=m(t,n,4);var s,o=e.length!==+e.length&&p.keys(e),a=(o||e).length,r=0;if(arguments.length<3){if(!a)throw new TypeError(f);i=e[o?o[r++]:r++]}for(;a>r;r++)s=o?o[r]:r,i=t(i,e[s],s,e);return i},p.reduceRight=p.foldr=function(e,t,i,n){null==e&&(e=[]),t=m(t,n,4);var s,o=e.length!==+e.length&&p.keys(e),a=(o||e).length;if(arguments.length<3){if(!a)throw new TypeError(f);i=e[o?o[--a]:--a]}for(;a--;)s=o?o[a]:a,i=t(i,e[s],s,e);return i},p.find=p.detect=function(e,t,i){var n;return t=p.iteratee(t,i),p.some(e,function(e,i,s){return t(e,i,s)?(n=e,!0):void 0}),n},p.filter=p.select=function(e,t,i){var n=[];return null==e?n:(t=p.iteratee(t,i),p.each(e,function(e,i,s){t(e,i,s)&&n.push(e)}),n)},p.reject=function(e,t,i){return p.filter(e,p.negate(p.iteratee(t)),i)},p.every=p.all=function(e,t,i){if(null==e)return!0;t=p.iteratee(t,i);var n,s,o=e.length!==+e.length&&p.keys(e),a=(o||e).length;for(n=0;a>n;n++)if(s=o?o[n]:n,!t(e[s],s,e))return!1;return!0},p.some=p.any=function(e,t,i){if(null==e)return!1;t=p.iteratee(t,i);var n,s,o=e.length!==+e.length&&p.keys(e),a=(o||e).length;for(n=0;a>n;n++)if(s=o?o[n]:n,t(e[s],s,e))return!0;return!1},p.contains=p.include=function(e,t){return null==e?!1:(e.length!==+e.length&&(e=p.values(e)),p.indexOf(e,t)>=0)},p.invoke=function(e,t){var i=a.call(arguments,2),n=p.isFunction(t);return p.map(e,function(e){return(n?t:e[t]).apply(e,i)})},p.pluck=function(e,t){return p.map(e,p.property(t))},p.where=function(e,t){return p.filter(e,p.matches(t))},p.findWhere=function(e,t){return p.find(e,p.matches(t))},p.max=function(e,t,i){var n,s,o=-(1/0),a=-(1/0);if(null==t&&null!=e){e=e.length===+e.length?e:p.values(e);for(var r=0,l=e.length;l>r;r++)n=e[r],n>o&&(o=n)}else t=p.iteratee(t,i),p.each(e,function(e,i,n){s=t(e,i,n),(s>a||s===-(1/0)&&o===-(1/0))&&(o=e,a=s)});return o},p.min=function(e,t,i){var n,s,o=1/0,a=1/0;if(null==t&&null!=e){e=e.length===+e.length?e:p.values(e);for(var r=0,l=e.length;l>r;r++)n=e[r],o>n&&(o=n)}else t=p.iteratee(t,i),p.each(e,function(e,i,n){s=t(e,i,n),(a>s||s===1/0&&o===1/0)&&(o=e,a=s)});return o},p.shuffle=function(e){for(var t,i=e&&e.length===+e.length?e:p.values(e),n=i.length,s=Array(n),o=0;n>o;o++)t=p.random(0,o),t!==o&&(s[o]=s[t]),s[t]=i[o];return s},p.sample=function(e,t,i){return null==t||i?(e.length!==+e.length&&(e=p.values(e)),e[p.random(e.length-1)]):p.shuffle(e).slice(0,Math.max(0,t))},p.sortBy=function(e,t,i){return t=p.iteratee(t,i),p.pluck(p.map(e,function(e,i,n){return{value:e,index:i,criteria:t(e,i,n)}}).sort(function(e,t){var i=e.criteria,n=t.criteria;if(i!==n){if(i>n||void 0===i)return 1;if(n>i||void 0===n)return-1}return e.index-t.index}),"value")};var g=function(e){return function(t,i,n){var s={};return i=p.iteratee(i,n),p.each(t,function(n,o){var a=i(n,o,t);e(s,n,a)}),s}};p.groupBy=g(function(e,t,i){p.has(e,i)?e[i].push(t):e[i]=[t]}),p.indexBy=g(function(e,t,i){e[i]=t}),p.countBy=g(function(e,t,i){p.has(e,i)?e[i]++:e[i]=1}),p.sortedIndex=function(e,t,i,n){i=p.iteratee(i,n,1);for(var s=i(t),o=0,a=e.length;a>o;){var r=o+a>>>1;i(e[r])<s?o=r+1:a=r}return o},p.toArray=function(e){return e?p.isArray(e)?a.call(e):e.length===+e.length?p.map(e,p.identity):p.values(e):[]},p.size=function(e){return null==e?0:e.length===+e.length?e.length:p.keys(e).length},p.partition=function(e,t,i){t=p.iteratee(t,i);var n=[],s=[];return p.each(e,function(e,i,o){(t(e,i,o)?n:s).push(e)}),[n,s]},p.first=p.head=p.take=function(e,t,i){return null==e?void 0:null==t||i?e[0]:0>t?[]:a.call(e,0,t)},p.initial=function(e,t,i){return a.call(e,0,Math.max(0,e.length-(null==t||i?1:t)))},p.last=function(e,t,i){return null==e?void 0:null==t||i?e[e.length-1]:a.call(e,Math.max(e.length-t,0))},p.rest=p.tail=p.drop=function(e,t,i){return a.call(e,null==t||i?1:t)},p.compact=function(e){return p.filter(e,p.identity)};var v=function(e,t,i,n){if(t&&p.every(e,p.isArray))return r.apply(n,e);for(var s=0,a=e.length;a>s;s++){var l=e[s];p.isArray(l)||p.isArguments(l)?t?o.apply(n,l):v(l,t,i,n):i||n.push(l)}return n};p.flatten=function(e,t){return v(e,t,!1,[])},p.without=function(e){return p.difference(e,a.call(arguments,1))},p.uniq=p.unique=function(e,t,i,n){if(null==e)return[];p.isBoolean(t)||(n=i,i=t,t=!1),null!=i&&(i=p.iteratee(i,n));for(var s=[],o=[],a=0,r=e.length;r>a;a++){var l=e[a];if(t)a&&o===l||s.push(l),o=l;else if(i){var c=i(l,a,e);p.indexOf(o,c)<0&&(o.push(c),s.push(l))}else p.indexOf(s,l)<0&&s.push(l)}return s},p.union=function(){return p.uniq(v(arguments,!0,!0,[]))},p.intersection=function(e){if(null==e)return[];for(var t=[],i=arguments.length,n=0,s=e.length;s>n;n++){var o=e[n];if(!p.contains(t,o)){for(var a=1;i>a&&p.contains(arguments[a],o);a++);a===i&&t.push(o)}}return t},p.difference=function(e){var t=v(a.call(arguments,1),!0,!0,[]);return p.filter(e,function(e){return!p.contains(t,e)})},p.zip=function(e){if(null==e)return[];for(var t=p.max(arguments,"length").length,i=Array(t),n=0;t>n;n++)i[n]=p.pluck(arguments,n);return i},p.object=function(e,t){if(null==e)return{};for(var i={},n=0,s=e.length;s>n;n++)t?i[e[n]]=t[n]:i[e[n][0]]=e[n][1];return i},p.indexOf=function(e,t,i){if(null==e)return-1;var n=0,s=e.length;if(i){if("number"!=typeof i)return n=p.sortedIndex(e,t),e[n]===t?n:-1;n=0>i?Math.max(0,s+i):i}for(;s>n;n++)if(e[n]===t)return n;return-1},p.lastIndexOf=function(e,t,i){if(null==e)return-1;var n=e.length;for("number"==typeof i&&(n=0>i?n+i+1:Math.min(n,i+1));--n>=0;)if(e[n]===t)return n;return-1},p.range=function(e,t,i){arguments.length<=1&&(t=e||0,e=0),i=i||1;for(var n=Math.max(Math.ceil((t-e)/i),0),s=Array(n),o=0;n>o;o++,e+=i)s[o]=e;return s};var b=function(){};p.bind=function(e,t){var i,n;if(u&&e.bind===u)return u.apply(e,a.call(arguments,1));if(!p.isFunction(e))throw new TypeError("Bind must be called on a function");return i=a.call(arguments,2),n=function(){if(!(this instanceof n))return e.apply(t,i.concat(a.call(arguments)));b.prototype=e.prototype;var s=new b;b.prototype=null;var o=e.apply(s,i.concat(a.call(arguments)));return p.isObject(o)?o:s}},p.partial=function(e){var t=a.call(arguments,1);return function(){for(var i=0,n=t.slice(),s=0,o=n.length;o>s;s++)n[s]===p&&(n[s]=arguments[i++]);for(;i<arguments.length;)n.push(arguments[i++]);return e.apply(this,n)}},p.bindAll=function(e){var t,i,n=arguments.length;if(1>=n)throw new Error("bindAll must be passed function names");for(t=1;n>t;t++)i=arguments[t],e[i]=p.bind(e[i],e);return e},p.memoize=function(e,t){var i=function(n){var s=i.cache,o=t?t.apply(this,arguments):n;return p.has(s,o)||(s[o]=e.apply(this,arguments)),s[o]};return i.cache={},i},p.delay=function(e,t){var i=a.call(arguments,2);return setTimeout(function(){return e.apply(null,i)},t)},p.defer=function(e){return p.delay.apply(p,[e,1].concat(a.call(arguments,1)))},p.throttle=function(e,t,i){var n,s,o,a=null,r=0;i||(i={});var l=function(){r=i.leading===!1?0:p.now(),a=null,o=e.apply(n,s),a||(n=s=null)};return function(){var c=p.now();r||i.leading!==!1||(r=c);var h=t-(c-r);return n=this,s=arguments,0>=h||h>t?(clearTimeout(a),a=null,r=c,o=e.apply(n,s),a||(n=s=null)):a||i.trailing===!1||(a=setTimeout(l,h)),o}},p.debounce=function(e,t,i){var n,s,o,a,r,l=function(){var c=p.now()-a;t>c&&c>0?n=setTimeout(l,t-c):(n=null,i||(r=e.apply(o,s),n||(o=s=null)))};return function(){o=this,s=arguments,a=p.now();var c=i&&!n;return n||(n=setTimeout(l,t)),c&&(r=e.apply(o,s),o=s=null),r}},p.wrap=function(e,t){return p.partial(t,e)},p.negate=function(e){return function(){return!e.apply(this,arguments)}},p.compose=function(){var e=arguments,t=e.length-1;return function(){for(var i=t,n=e[t].apply(this,arguments);i--;)n=e[i].call(this,n);return n}},p.after=function(e,t){return function(){return--e<1?t.apply(this,arguments):void 0}},p.before=function(e,t){var i;return function(){return--e>0?i=t.apply(this,arguments):t=null,i}},p.once=p.partial(p.before,2),p.keys=function(e){if(!p.isObject(e))return[];if(d)return d(e);var t=[];for(var i in e)p.has(e,i)&&t.push(i);return t},p.values=function(e){for(var t=p.keys(e),i=t.length,n=Array(i),s=0;i>s;s++)n[s]=e[t[s]];return n},p.pairs=function(e){for(var t=p.keys(e),i=t.length,n=Array(i),s=0;i>s;s++)n[s]=[t[s],e[t[s]]];return n},p.invert=function(e){for(var t={},i=p.keys(e),n=0,s=i.length;s>n;n++)t[e[i[n]]]=i[n];return t},p.functions=p.methods=function(e){var t=[];for(var i in e)p.isFunction(e[i])&&t.push(i);return t.sort()},p.extend=function(e){if(!p.isObject(e))return e;for(var t,i,n=1,s=arguments.length;s>n;n++){t=arguments[n];for(i in t)c.call(t,i)&&(e[i]=t[i])}return e},p.pick=function(e,t,i){var n,s={};if(null==e)return s;if(p.isFunction(t)){t=m(t,i);for(n in e){var o=e[n];t(o,n,e)&&(s[n]=o)}}else{var l=r.apply([],a.call(arguments,1));e=new Object(e);for(var c=0,h=l.length;h>c;c++)n=l[c],n in e&&(s[n]=e[n])}return s},p.omit=function(e,t,i){if(p.isFunction(t))t=p.negate(t);else{var n=p.map(r.apply([],a.call(arguments,1)),String);t=function(e,t){return!p.contains(n,t)}}return p.pick(e,t,i)},p.defaults=function(e){if(!p.isObject(e))return e;for(var t=1,i=arguments.length;i>t;t++){var n=arguments[t];for(var s in n)void 0===e[s]&&(e[s]=n[s])}return e},p.clone=function(e){return p.isObject(e)?p.isArray(e)?e.slice():p.extend({},e):e},p.tap=function(e,t){return t(e),e};var y=function(e,t,i,n){if(e===t)return 0!==e||1/e===1/t;if(null==e||null==t)return e===t;e instanceof p&&(e=e._wrapped),t instanceof p&&(t=t._wrapped);var s=l.call(e);if(s!==l.call(t))return!1;switch(s){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!==+e?+t!==+t:0===+e?1/+e===1/t:+e===+t;case"[object Date]":case"[object Boolean]":return+e===+t}if("object"!=typeof e||"object"!=typeof t)return!1;for(var o=i.length;o--;)if(i[o]===e)return n[o]===t;var a=e.constructor,r=t.constructor;if(a!==r&&"constructor"in e&&"constructor"in t&&!(p.isFunction(a)&&a instanceof a&&p.isFunction(r)&&r instanceof r))return!1;i.push(e),n.push(t);var c,h;if("[object Array]"===s){if(c=e.length,h=c===t.length)for(;c--&&(h=y(e[c],t[c],i,n)););}else{var d,u=p.keys(e);if(c=u.length,h=p.keys(t).length===c)for(;c--&&(d=u[c],h=p.has(t,d)&&y(e[d],t[d],i,n)););}return i.pop(),n.pop(),h};p.isEqual=function(e,t){return y(e,t,[],[])},p.isEmpty=function(e){if(null==e)return!0;if(p.isArray(e)||p.isString(e)||p.isArguments(e))return 0===e.length;for(var t in e)if(p.has(e,t))return!1;return!0},p.isElement=function(e){return!(!e||1!==e.nodeType)},p.isArray=h||function(e){return"[object Array]"===l.call(e)},p.isObject=function(e){var t=typeof e;return"function"===t||"object"===t&&!!e},p.each(["Arguments","Function","String","Number","Date","RegExp"],function(e){p["is"+e]=function(t){return l.call(t)==="[object "+e+"]"}}),p.isArguments(arguments)||(p.isArguments=function(e){return p.has(e,"callee")}),"function"!=typeof/./&&(p.isFunction=function(e){return"function"==typeof e||!1}),p.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},p.isNaN=function(e){return p.isNumber(e)&&e!==+e},p.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"===l.call(e)},p.isNull=function(e){return null===e},p.isUndefined=function(e){return void 0===e},p.has=function(e,t){return null!=e&&c.call(e,t)},p.noConflict=function(){return e._=t,this},p.identity=function(e){return e},p.constant=function(e){return function(){return e}},p.noop=function(){},p.property=function(e){return function(t){return t[e]}},p.matches=function(e){var t=p.pairs(e),i=t.length;return function(e){if(null==e)return!i;e=new Object(e);for(var n=0;i>n;n++){var s=t[n],o=s[0];if(s[1]!==e[o]||!(o in e))return!1}return!0}},p.times=function(e,t,i){var n=Array(Math.max(0,e));t=m(t,i,1);for(var s=0;e>s;s++)n[s]=t(s);return n},p.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},p.now=Date.now||function(){return(new Date).getTime()};var w={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},_=p.invert(w),k=function(e){var t=function(t){return e[t]},i="(?:"+p.keys(e).join("|")+")",n=RegExp(i),s=RegExp(i,"g");return function(e){return e=null==e?"":""+e,n.test(e)?e.replace(s,t):e}};p.escape=k(w),p.unescape=k(_),p.result=function(e,t){if(null==e)return void 0;var i=e[t];return p.isFunction(i)?e[t]():i};var I=0;p.uniqueId=function(e){var t=++I+"";return e?e+t:t},p.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var C=/(.)^/,$={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},x=/\\|'|\r|\n|\u2028|\u2029/g,S=function(e){return"\\"+$[e]};p.template=function(e,t,i){!t&&i&&(t=i),t=p.defaults({},t,p.templateSettings);var n=RegExp([(t.escape||C).source,(t.interpolate||C).source,(t.evaluate||C).source].join("|")+"|$","g"),s=0,o="__p+='";e.replace(n,function(t,i,n,a,r){return o+=e.slice(s,r).replace(x,S),s=r+t.length,i?o+="'+\n((__t=("+i+"))==null?'':_.escape(__t))+\n'":n?o+="'+\n((__t=("+n+"))==null?'':__t)+\n'":a&&(o+="';\n"+a+"\n__p+='"),t}),o+="';\n",t.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{var a=new Function(t.variable||"obj","_",o)}catch(r){throw r.source=o,r}var l=function(e){return a.call(this,e,p)},c=t.variable||"obj";return l.source="function("+c+"){\n"+o+"}",l},p.chain=function(e){var t=p(e);return t._chain=!0,t};var T=function(e){return this._chain?p(e).chain():e};p.mixin=function(e){p.each(p.functions(e),function(t){var i=p[t]=e[t];p.prototype[t]=function(){var e=[this._wrapped];return o.apply(e,arguments),T.call(this,i.apply(p,e))}})},p.mixin(p),p.each(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=i[e];p.prototype[e]=function(){var i=this._wrapped;return t.apply(i,arguments),"shift"!==e&&"splice"!==e||0!==i.length||delete i[0],T.call(this,i)}}),p.each(["concat","join","slice"],function(e){var t=i[e];p.prototype[e]=function(){return T.call(this,t.apply(this._wrapped,arguments))}}),p.prototype.value=function(){return this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return p})}).call(this),function(){function e(e){var i=!1;return function(){if(i)throw new Error("Callback was already called.");i=!0,e.apply(t,arguments)}}var t,i,n={};t=this,null!=t&&(i=t.async),n.noConflict=function(){return t.async=i,n};var s=Object.prototype.toString,o=Array.isArray||function(e){return"[object Array]"===s.call(e)},a=function(e,t){for(var i=0;i<e.length;i+=1)t(e[i],i,e)},r=function(e,t){if(e.map)return e.map(t);var i=[];return a(e,function(e,n,s){i.push(t(e,n,s))}),i},l=function(e,t,i){return e.reduce?e.reduce(t,i):(a(e,function(e,n,s){i=t(i,e,n,s)}),i)},c=function(e){if(Object.keys)return Object.keys(e);var t=[];for(var i in e)e.hasOwnProperty(i)&&t.push(i);return t};"undefined"!=typeof process&&process.nextTick?(n.nextTick=process.nextTick,"undefined"!=typeof setImmediate?n.setImmediate=function(e){setImmediate(e)}:n.setImmediate=n.nextTick):"function"==typeof setImmediate?(n.nextTick=function(e){setImmediate(e)},n.setImmediate=n.nextTick):(n.nextTick=function(e){setTimeout(e,0)},n.setImmediate=n.nextTick),n.each=function(t,i,n){function s(e){e?(n(e),n=function(){}):(o+=1,o>=t.length&&n())}if(n=n||function(){},!t.length)return n();var o=0;a(t,function(t){i(t,e(s))})},n.forEach=n.each,n.eachSeries=function(e,t,i){if(i=i||function(){},!e.length)return i();var n=0,s=function(){t(e[n],function(t){t?(i(t),i=function(){}):(n+=1,n>=e.length?i():s())})};s()},n.forEachSeries=n.eachSeries,n.eachLimit=function(e,t,i,n){var s=h(t);s.apply(null,[e,i,n])},n.forEachLimit=n.eachLimit;var h=function(e){return function(t,i,n){if(n=n||function(){},!t.length||0>=e)return n();var s=0,o=0,a=0;!function r(){if(s>=t.length)return n();for(;e>a&&o<t.length;)o+=1,a+=1,i(t[o-1],function(e){e?(n(e),n=function(){}):(s+=1,a-=1,s>=t.length?n():r())})}()}},d=function(e){return function(){var t=Array.prototype.slice.call(arguments);return e.apply(null,[n.each].concat(t))}},u=function(e,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,[h(e)].concat(i))}},p=function(e){return function(){var t=Array.prototype.slice.call(arguments);return e.apply(null,[n.eachSeries].concat(t))}},m=function(e,t,i,n){if(t=r(t,function(e,t){return{index:t,value:e}}),n){var s=[];e(t,function(e,t){i(e.value,function(i,n){s[e.index]=n,t(i)})},function(e){n(e,s)})}else e(t,function(e,t){i(e.value,function(e){t(e)})})};n.map=d(m),n.mapSeries=p(m),n.mapLimit=function(e,t,i,n){return f(t)(e,i,n)};var f=function(e){return u(e,m)};n.reduce=function(e,t,i,s){n.eachSeries(e,function(e,n){i(t,e,function(e,i){t=i,n(e)})},function(e){s(e,t)})},n.inject=n.reduce,n.foldl=n.reduce,n.reduceRight=function(e,t,i,s){var o=r(e,function(e){return e}).reverse();n.reduce(o,t,i,s)},n.foldr=n.reduceRight;var g=function(e,t,i,n){var s=[];t=r(t,function(e,t){return{index:t,value:e}}),e(t,function(e,t){i(e.value,function(i){i&&s.push(e),t()})},function(e){n(r(s.sort(function(e,t){return e.index-t.index}),function(e){return e.value}))})};n.filter=d(g),n.filterSeries=p(g),n.select=n.filter,n.selectSeries=n.filterSeries;var v=function(e,t,i,n){var s=[];t=r(t,function(e,t){return{index:t,value:e}}),e(t,function(e,t){i(e.value,function(i){i||s.push(e),t()})},function(e){n(r(s.sort(function(e,t){return e.index-t.index}),function(e){return e.value}))})};n.reject=d(v),n.rejectSeries=p(v);var b=function(e,t,i,n){e(t,function(e,t){i(e,function(i){i?(n(e),n=function(){}):t()})},function(e){n()})};n.detect=d(b),n.detectSeries=p(b),n.some=function(e,t,i){n.each(e,function(e,n){t(e,function(e){e&&(i(!0),i=function(){}),n()})},function(e){i(!1)})},n.any=n.some,n.every=function(e,t,i){n.each(e,function(e,n){t(e,function(e){e||(i(!1),i=function(){}),n()})},function(e){i(!0)})},n.all=n.every,n.sortBy=function(e,t,i){n.map(e,function(e,i){t(e,function(t,n){t?i(t):i(null,{value:e,criteria:n})})},function(e,t){if(e)return i(e);var n=function(e,t){var i=e.criteria,n=t.criteria;return n>i?-1:i>n?1:0};i(null,r(t.sort(n),function(e){return e.value}))})},n.auto=function(e,t){t=t||function(){};var i=c(e),s=i.length;if(!s)return t();var r={},h=[],d=function(e){h.unshift(e)},u=function(e){for(var t=0;t<h.length;t+=1)if(h[t]===e)return void h.splice(t,1)},p=function(){s--,a(h.slice(0),function(e){e()})};d(function(){if(!s){var e=t;t=function(){},e(null,r)}}),a(i,function(i){var s=o(e[i])?e[i]:[e[i]],h=function(e){var s=Array.prototype.slice.call(arguments,1);if(s.length<=1&&(s=s[0]),e){var o={};a(c(r),function(e){o[e]=r[e]}),o[i]=s,t(e,o),t=function(){}}else r[i]=s,n.setImmediate(p)},m=s.slice(0,Math.abs(s.length-1))||[],f=function(){return l(m,function(e,t){return e&&r.hasOwnProperty(t)},!0)&&!r.hasOwnProperty(i)};if(f())s[s.length-1](h,r);else{var g=function(){f()&&(u(g),s[s.length-1](h,r))};d(g)}})},n.retry=function(e,t,i){var s=5,o=[];"function"==typeof e&&(i=t,t=e,e=s),e=parseInt(e,10)||s;var a=function(s,a){for(var r=function(e,t){return function(i){e(function(e,n){i(!e||t,{err:e,result:n})},a)}};e;)o.push(r(t,!(e-=1)));n.series(o,function(e,t){t=t[t.length-1],(s||i)(t.err,t.result)})};return i?a():a},n.waterfall=function(e,t){if(t=t||function(){},!o(e)){var i=new Error("First argument to waterfall must be an array of functions");return t(i)}if(!e.length)return t();var s=function(e){return function(i){if(i)t.apply(null,arguments),t=function(){};else{var o=Array.prototype.slice.call(arguments,1),a=e.next();a?o.push(s(a)):o.push(t),n.setImmediate(function(){e.apply(null,o)})}}};s(n.iterator(e))()};var y=function(e,t,i){if(i=i||function(){},o(t))e.map(t,function(e,t){e&&e(function(e){var i=Array.prototype.slice.call(arguments,1);i.length<=1&&(i=i[0]),t.call(null,e,i)})},i);else{var n={};e.each(c(t),function(e,i){t[e](function(t){var s=Array.prototype.slice.call(arguments,1);s.length<=1&&(s=s[0]),n[e]=s,i(t)})},function(e){i(e,n)})}};n.parallel=function(e,t){y({map:n.map,each:n.each},e,t)},n.parallelLimit=function(e,t,i){y({map:f(t),each:h(t)},e,i)},n.series=function(e,t){if(t=t||function(){},o(e))n.mapSeries(e,function(e,t){e&&e(function(e){var i=Array.prototype.slice.call(arguments,1);i.length<=1&&(i=i[0]),t.call(null,e,i)})},t);else{var i={};n.eachSeries(c(e),function(t,n){e[t](function(e){var s=Array.prototype.slice.call(arguments,1);s.length<=1&&(s=s[0]),i[t]=s,n(e)})},function(e){t(e,i)})}},n.iterator=function(e){var t=function(i){var n=function(){return e.length&&e[i].apply(null,arguments),n.next()};return n.next=function(){return i<e.length-1?t(i+1):null},n};return t(0)},n.apply=function(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t.concat(Array.prototype.slice.call(arguments)))}};var w=function(e,t,i,n){var s=[];e(t,function(e,t){i(e,function(e,i){s=s.concat(i||[]),t(e)})},function(e){n(e,s)})};n.concat=d(w),n.concatSeries=p(w),n.whilst=function(e,t,i){e()?t(function(s){return s?i(s):void n.whilst(e,t,i)}):i()},n.doWhilst=function(e,t,i){e(function(s){if(s)return i(s);var o=Array.prototype.slice.call(arguments,1);t.apply(null,o)?n.doWhilst(e,t,i):i()})},n.until=function(e,t,i){e()?i():t(function(s){return s?i(s):void n.until(e,t,i)})},n.doUntil=function(e,t,i){e(function(s){if(s)return i(s);var o=Array.prototype.slice.call(arguments,1);t.apply(null,o)?i():n.doUntil(e,t,i)})},n.queue=function(t,i){function s(e,t,i,s){return e.started||(e.started=!0),o(t)||(t=[t]),0==t.length?n.setImmediate(function(){e.drain&&e.drain()}):void a(t,function(t){var o={data:t,callback:"function"==typeof s?s:null};i?e.tasks.unshift(o):e.tasks.push(o),e.saturated&&e.tasks.length===e.concurrency&&e.saturated(),n.setImmediate(e.process)})}void 0===i&&(i=1);var r=0,l={tasks:[],concurrency:i,saturated:null,empty:null,drain:null,started:!1,paused:!1,push:function(e,t){s(l,e,!1,t)},kill:function(){l.drain=null,l.tasks=[]},unshift:function(e,t){s(l,e,!0,t)},process:function(){if(!l.paused&&r<l.concurrency&&l.tasks.length){var i=l.tasks.shift();l.empty&&0===l.tasks.length&&l.empty(),r+=1;var n=function(){r-=1,i.callback&&i.callback.apply(i,arguments),l.drain&&l.tasks.length+r===0&&l.drain(),l.process()},s=e(n);t(i.data,s)}},length:function(){return l.tasks.length},running:function(){return r},idle:function(){return l.tasks.length+r===0},pause:function(){l.paused!==!0&&(l.paused=!0)},resume:function(){if(l.paused!==!1){l.paused=!1;for(var e=1;e<=l.concurrency;e++)n.setImmediate(l.process)}}};return l},n.priorityQueue=function(e,t){function i(e,t){return e.priority-t.priority}function s(e,t,i){for(var n=-1,s=e.length-1;s>n;){var o=n+(s-n+1>>>1);i(t,e[o])>=0?n=o:s=o-1}return n}function r(e,t,r,l){return e.started||(e.started=!0),o(t)||(t=[t]),0==t.length?n.setImmediate(function(){e.drain&&e.drain()}):void a(t,function(t){var o={data:t,priority:r,callback:"function"==typeof l?l:null};e.tasks.splice(s(e.tasks,o,i)+1,0,o),e.saturated&&e.tasks.length===e.concurrency&&e.saturated(),n.setImmediate(e.process)})}var l=n.queue(e,t);return l.push=function(e,t,i){r(l,e,t,i)},delete l.unshift,l},n.cargo=function(e,t){var i=!1,s=[],l={tasks:s,payload:t,saturated:null,empty:null,drain:null,drained:!0,push:function(e,i){o(e)||(e=[e]),a(e,function(e){s.push({data:e,callback:"function"==typeof i?i:null}),l.drained=!1,l.saturated&&s.length===t&&l.saturated()}),n.setImmediate(l.process)},process:function c(){if(!i){if(0===s.length)return l.drain&&!l.drained&&l.drain(),void(l.drained=!0);var n="number"==typeof t?s.splice(0,t):s.splice(0,s.length),o=r(n,function(e){return e.data});l.empty&&l.empty(),i=!0,e(o,function(){i=!1;var e=arguments;a(n,function(t){t.callback&&t.callback.apply(null,e)}),c()})}},length:function(){return s.length},running:function(){return i}};return l};var _=function(e){return function(t){var i=Array.prototype.slice.call(arguments,1);t.apply(null,i.concat([function(t){var i=Array.prototype.slice.call(arguments,1);"undefined"!=typeof console&&(t?console.error&&console.error(t):console[e]&&a(i,function(t){console[e](t)}))}]))}};n.log=_("log"),n.dir=_("dir"),n.memoize=function(e,t){var i={},s={};t=t||function(e){return e};var o=function(){var o=Array.prototype.slice.call(arguments),a=o.pop(),r=t.apply(null,o);r in i?n.nextTick(function(){a.apply(null,i[r])}):r in s?s[r].push(a):(s[r]=[a],e.apply(null,o.concat([function(){i[r]=arguments;var e=s[r];delete s[r];for(var t=0,n=e.length;n>t;t++)e[t].apply(null,arguments)}])))};return o.memo=i,o.unmemoized=e,o},n.unmemoize=function(e){return function(){return(e.unmemoized||e).apply(null,arguments)}},n.times=function(e,t,i){for(var s=[],o=0;e>o;o++)s.push(o);return n.map(s,t,i)},n.timesSeries=function(e,t,i){for(var s=[],o=0;e>o;o++)s.push(o);return n.mapSeries(s,t,i)},n.seq=function(){var e=arguments;return function(){var t=this,i=Array.prototype.slice.call(arguments),s=i.pop();n.reduce(e,i,function(e,i,n){i.apply(t,e.concat([function(){var e=arguments[0],t=Array.prototype.slice.call(arguments,1);n(e,t)}]))},function(e,i){s.apply(t,[e].concat(i))})}},n.compose=function(){return n.seq.apply(null,Array.prototype.reverse.call(arguments))};var k=function(e,t){var i=function(){var i=this,n=Array.prototype.slice.call(arguments),s=n.pop();return e(t,function(e,t){e.apply(i,n.concat([t]))},s)};if(arguments.length>2){var n=Array.prototype.slice.call(arguments,2);return i.apply(this,n)}return i};n.applyEach=d(k),n.applyEachSeries=p(k),n.forever=function(e,t){function i(n){if(n){if(t)return t(n);throw n}e(i)}i()},"undefined"!=typeof module&&module.exports?module.exports=n:"undefined"!=typeof define&&define.amd?define([],function(){return n}):t.async=n}(),function(e,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){function i(e){var t=e.length,i=se.type(e);return"function"===i||se.isWindow(e)?!1:1===e.nodeType&&t?!0:"array"===i||0===t||"number"==typeof t&&t>0&&t-1 in e}function n(e,t,i){if(se.isFunction(t))return se.grep(e,function(e,n){return!!t.call(e,n,e)!==i});if(t.nodeType)return se.grep(e,function(e){return e===t!==i});if("string"==typeof t){if(ue.test(t))return se.filter(t,e,i);t=se.filter(t,e)}return se.grep(e,function(e){return se.inArray(e,t)>=0!==i})}function s(e,t){do e=e[t];while(e&&1!==e.nodeType);return e}function o(e){var t=we[e]={};return se.each(e.match(ye)||[],function(e,i){t[i]=!0}),t}function a(){me.addEventListener?(me.removeEventListener("DOMContentLoaded",r,!1),e.removeEventListener("load",r,!1)):(me.detachEvent("onreadystatechange",r),e.detachEvent("onload",r))}function r(){(me.addEventListener||"load"===event.type||"complete"===me.readyState)&&(a(),se.ready())}function l(e,t,i){if(void 0===i&&1===e.nodeType){var n="data-"+t.replace($e,"-$1").toLowerCase();if(i=e.getAttribute(n),"string"==typeof i){try{i="true"===i?!0:"false"===i?!1:"null"===i?null:+i+""===i?+i:Ce.test(i)?se.parseJSON(i):i}catch(s){}se.data(e,t,i)}else i=void 0}return i}function c(e){var t;for(t in e)if(("data"!==t||!se.isEmptyObject(e[t]))&&"toJSON"!==t)return!1;return!0}function h(e,t,i,n){if(se.acceptData(e)){var s,o,a=se.expando,r=e.nodeType,l=r?se.cache:e,c=r?e[a]:e[a]&&a;if(c&&l[c]&&(n||l[c].data)||void 0!==i||"string"!=typeof t)return c||(c=r?e[a]=Y.pop()||se.guid++:a),l[c]||(l[c]=r?{}:{toJSON:se.noop}),("object"==typeof t||"function"==typeof t)&&(n?l[c]=se.extend(l[c],t):l[c].data=se.extend(l[c].data,t)),o=l[c],n||(o.data||(o.data={}),o=o.data),void 0!==i&&(o[se.camelCase(t)]=i),"string"==typeof t?(s=o[t],null==s&&(s=o[se.camelCase(t)])):s=o,s}}function d(e,t,i){if(se.acceptData(e)){var n,s,o=e.nodeType,a=o?se.cache:e,r=o?e[se.expando]:se.expando;if(a[r]){if(t&&(n=i?a[r]:a[r].data)){se.isArray(t)?t=t.concat(se.map(t,se.camelCase)):t in n?t=[t]:(t=se.camelCase(t),t=t in n?[t]:t.split(" ")),s=t.length;for(;s--;)delete n[t[s]];if(i?!c(n):!se.isEmptyObject(n))return}(i||(delete a[r].data,c(a[r])))&&(o?se.cleanData([e],!0):ie.deleteExpando||a!=a.window?delete a[r]:a[r]=null)}}}function u(){return!0}function p(){return!1}function m(){try{return me.activeElement}catch(e){}}function f(e){var t=Oe.split("|"),i=e.createDocumentFragment();if(i.createElement)for(;t.length;)i.createElement(t.pop());return i}function g(e,t){var i,n,s=0,o=typeof e.getElementsByTagName!==Ie?e.getElementsByTagName(t||"*"):typeof e.querySelectorAll!==Ie?e.querySelectorAll(t||"*"):void 0;
if(!o)for(o=[],i=e.childNodes||e;null!=(n=i[s]);s++)!t||se.nodeName(n,t)?o.push(n):se.merge(o,g(n,t));return void 0===t||t&&se.nodeName(e,t)?se.merge([e],o):o}function v(e){Me.test(e.type)&&(e.defaultChecked=e.checked)}function b(e,t){return se.nodeName(e,"table")&&se.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function y(e){return e.type=(null!==se.find.attr(e,"type"))+"/"+e.type,e}function w(e){var t=Ge.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function _(e,t){for(var i,n=0;null!=(i=e[n]);n++)se._data(i,"globalEval",!t||se._data(t[n],"globalEval"))}function k(e,t){if(1===t.nodeType&&se.hasData(e)){var i,n,s,o=se._data(e),a=se._data(t,o),r=o.events;if(r){delete a.handle,a.events={};for(i in r)for(n=0,s=r[i].length;s>n;n++)se.event.add(t,i,r[i][n])}a.data&&(a.data=se.extend({},a.data))}}function I(e,t){var i,n,s;if(1===t.nodeType){if(i=t.nodeName.toLowerCase(),!ie.noCloneEvent&&t[se.expando]){s=se._data(t);for(n in s.events)se.removeEvent(t,n,s.handle);t.removeAttribute(se.expando)}"script"===i&&t.text!==e.text?(y(t).text=e.text,w(t)):"object"===i?(t.parentNode&&(t.outerHTML=e.outerHTML),ie.html5Clone&&e.innerHTML&&!se.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):"input"===i&&Me.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):"option"===i?t.defaultSelected=t.selected=e.defaultSelected:("input"===i||"textarea"===i)&&(t.defaultValue=e.defaultValue)}}function C(t,i){var n,s=se(i.createElement(t)).appendTo(i.body),o=e.getDefaultComputedStyle&&(n=e.getDefaultComputedStyle(s[0]))?n.display:se.css(s[0],"display");return s.detach(),o}function $(e){var t=me,i=Ze[e];return i||(i=C(e,t),"none"!==i&&i||(Je=(Je||se("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement),t=(Je[0].contentWindow||Je[0].contentDocument).document,t.write(),t.close(),i=C(e,t),Je.detach()),Ze[e]=i),i}function x(e,t){return{get:function(){var i=e();if(null!=i)return i?void delete this.get:(this.get=t).apply(this,arguments)}}}function S(e,t){if(t in e)return t;for(var i=t.charAt(0).toUpperCase()+t.slice(1),n=t,s=ut.length;s--;)if(t=ut[s]+i,t in e)return t;return n}function T(e,t){for(var i,n,s,o=[],a=0,r=e.length;r>a;a++)n=e[a],n.style&&(o[a]=se._data(n,"olddisplay"),i=n.style.display,t?(o[a]||"none"!==i||(n.style.display=""),""===n.style.display&&Te(n)&&(o[a]=se._data(n,"olddisplay",$(n.nodeName)))):(s=Te(n),(i&&"none"!==i||!s)&&se._data(n,"olddisplay",s?i:se.css(n,"display"))));for(a=0;r>a;a++)n=e[a],n.style&&(t&&"none"!==n.style.display&&""!==n.style.display||(n.style.display=t?o[a]||"":"none"));return e}function A(e,t,i){var n=lt.exec(t);return n?Math.max(0,n[1]-(i||0))+(n[2]||"px"):t}function M(e,t,i,n,s){for(var o=i===(n?"border":"content")?4:"width"===t?1:0,a=0;4>o;o+=2)"margin"===i&&(a+=se.css(e,i+Se[o],!0,s)),n?("content"===i&&(a-=se.css(e,"padding"+Se[o],!0,s)),"margin"!==i&&(a-=se.css(e,"border"+Se[o]+"Width",!0,s))):(a+=se.css(e,"padding"+Se[o],!0,s),"padding"!==i&&(a+=se.css(e,"border"+Se[o]+"Width",!0,s)));return a}function P(e,t,i){var n=!0,s="width"===t?e.offsetWidth:e.offsetHeight,o=et(e),a=ie.boxSizing&&"border-box"===se.css(e,"boxSizing",!1,o);if(0>=s||null==s){if(s=tt(e,t,o),(0>s||null==s)&&(s=e.style[t]),nt.test(s))return s;n=a&&(ie.boxSizingReliable()||s===e.style[t]),s=parseFloat(s)||0}return s+M(e,t,i||(a?"border":"content"),n,o)+"px"}function E(e,t,i,n,s){return new E.prototype.init(e,t,i,n,s)}function N(){return setTimeout(function(){pt=void 0}),pt=se.now()}function D(e,t){var i,n={height:e},s=0;for(t=t?1:0;4>s;s+=2-t)i=Se[s],n["margin"+i]=n["padding"+i]=e;return t&&(n.opacity=n.width=e),n}function R(e,t,i){for(var n,s=(yt[t]||[]).concat(yt["*"]),o=0,a=s.length;a>o;o++)if(n=s[o].call(i,t,e))return n}function O(e,t,i){var n,s,o,a,r,l,c,h,d=this,u={},p=e.style,m=e.nodeType&&Te(e),f=se._data(e,"fxshow");i.queue||(r=se._queueHooks(e,"fx"),null==r.unqueued&&(r.unqueued=0,l=r.empty.fire,r.empty.fire=function(){r.unqueued||l()}),r.unqueued++,d.always(function(){d.always(function(){r.unqueued--,se.queue(e,"fx").length||r.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(i.overflow=[p.overflow,p.overflowX,p.overflowY],c=se.css(e,"display"),h="none"===c?se._data(e,"olddisplay")||$(e.nodeName):c,"inline"===h&&"none"===se.css(e,"float")&&(ie.inlineBlockNeedsLayout&&"inline"!==$(e.nodeName)?p.zoom=1:p.display="inline-block")),i.overflow&&(p.overflow="hidden",ie.shrinkWrapBlocks()||d.always(function(){p.overflow=i.overflow[0],p.overflowX=i.overflow[1],p.overflowY=i.overflow[2]}));for(n in t)if(s=t[n],ft.exec(s)){if(delete t[n],o=o||"toggle"===s,s===(m?"hide":"show")){if("show"!==s||!f||void 0===f[n])continue;m=!0}u[n]=f&&f[n]||se.style(e,n)}else c=void 0;if(se.isEmptyObject(u))"inline"===("none"===c?$(e.nodeName):c)&&(p.display=c);else{f?"hidden"in f&&(m=f.hidden):f=se._data(e,"fxshow",{}),o&&(f.hidden=!m),m?se(e).show():d.done(function(){se(e).hide()}),d.done(function(){var t;se._removeData(e,"fxshow");for(t in u)se.style(e,t,u[t])});for(n in u)a=R(m?f[n]:0,n,d),n in f||(f[n]=a.start,m&&(a.end=a.start,a.start="width"===n||"height"===n?1:0))}}function L(e,t){var i,n,s,o,a;for(i in e)if(n=se.camelCase(i),s=t[n],o=e[i],se.isArray(o)&&(s=o[1],o=e[i]=o[0]),i!==n&&(e[n]=o,delete e[i]),a=se.cssHooks[n],a&&"expand"in a){o=a.expand(o),delete e[n];for(i in o)i in e||(e[i]=o[i],t[i]=s)}else t[n]=s}function B(e,t,i){var n,s,o=0,a=bt.length,r=se.Deferred().always(function(){delete l.elem}),l=function(){if(s)return!1;for(var t=pt||N(),i=Math.max(0,c.startTime+c.duration-t),n=i/c.duration||0,o=1-n,a=0,l=c.tweens.length;l>a;a++)c.tweens[a].run(o);return r.notifyWith(e,[c,o,i]),1>o&&l?i:(r.resolveWith(e,[c]),!1)},c=r.promise({elem:e,props:se.extend({},t),opts:se.extend(!0,{specialEasing:{}},i),originalProperties:t,originalOptions:i,startTime:pt||N(),duration:i.duration,tweens:[],createTween:function(t,i){var n=se.Tween(e,c.opts,t,i,c.opts.specialEasing[t]||c.opts.easing);return c.tweens.push(n),n},stop:function(t){var i=0,n=t?c.tweens.length:0;if(s)return this;for(s=!0;n>i;i++)c.tweens[i].run(1);return t?r.resolveWith(e,[c,t]):r.rejectWith(e,[c,t]),this}}),h=c.props;for(L(h,c.opts.specialEasing);a>o;o++)if(n=bt[o].call(c,e,h,c.opts))return n;return se.map(h,R,c),se.isFunction(c.opts.start)&&c.opts.start.call(e,c),se.fx.timer(se.extend(l,{elem:e,anim:c,queue:c.opts.queue})),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always)}function F(e){return function(t,i){"string"!=typeof t&&(i=t,t="*");var n,s=0,o=t.toLowerCase().match(ye)||[];if(se.isFunction(i))for(;n=o[s++];)"+"===n.charAt(0)?(n=n.slice(1)||"*",(e[n]=e[n]||[]).unshift(i)):(e[n]=e[n]||[]).push(i)}}function U(e,t,i,n){function s(r){var l;return o[r]=!0,se.each(e[r]||[],function(e,r){var c=r(t,i,n);return"string"!=typeof c||a||o[c]?a?!(l=c):void 0:(t.dataTypes.unshift(c),s(c),!1)}),l}var o={},a=e===jt;return s(t.dataTypes[0])||!o["*"]&&s("*")}function z(e,t){var i,n,s=se.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((s[n]?e:i||(i={}))[n]=t[n]);return i&&se.extend(!0,e,i),e}function H(e,t,i){for(var n,s,o,a,r=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===s&&(s=e.mimeType||t.getResponseHeader("Content-Type"));if(s)for(a in r)if(r[a]&&r[a].test(s)){l.unshift(a);break}if(l[0]in i)o=l[0];else{for(a in i){if(!l[0]||e.converters[a+" "+l[0]]){o=a;break}n||(n=a)}o=o||n}return o?(o!==l[0]&&l.unshift(o),i[o]):void 0}function j(e,t,i,n){var s,o,a,r,l,c={},h=e.dataTypes.slice();if(h[1])for(a in e.converters)c[a.toLowerCase()]=e.converters[a];for(o=h.shift();o;)if(e.responseFields[o]&&(i[e.responseFields[o]]=t),!l&&n&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=o,o=h.shift())if("*"===o)o=l;else if("*"!==l&&l!==o){if(a=c[l+" "+o]||c["* "+o],!a)for(s in c)if(r=s.split(" "),r[1]===o&&(a=c[l+" "+r[0]]||c["* "+r[0]])){a===!0?a=c[s]:c[s]!==!0&&(o=r[0],h.unshift(r[1]));break}if(a!==!0)if(a&&e["throws"])t=a(t);else try{t=a(t)}catch(d){return{state:"parsererror",error:a?d:"No conversion from "+l+" to "+o}}}return{state:"success",data:t}}function V(e,t,i,n){var s;if(se.isArray(t))se.each(t,function(t,s){i||Gt.test(e)?n(e,s):V(e+"["+("object"==typeof s?t:"")+"]",s,i,n)});else if(i||"object"!==se.type(t))n(e,t);else for(s in t)V(e+"["+s+"]",t[s],i,n)}function W(){try{return new e.XMLHttpRequest}catch(t){}}function q(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function G(e){return se.isWindow(e)?e:9===e.nodeType?e.defaultView||e.parentWindow:!1}var Y=[],K=Y.slice,X=Y.concat,Q=Y.push,J=Y.indexOf,Z={},ee=Z.toString,te=Z.hasOwnProperty,ie={},ne="1.11.1",se=function(e,t){return new se.fn.init(e,t)},oe=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,ae=/^-ms-/,re=/-([\da-z])/gi,le=function(e,t){return t.toUpperCase()};se.fn=se.prototype={jquery:ne,constructor:se,selector:"",length:0,toArray:function(){return K.call(this)},get:function(e){return null!=e?0>e?this[e+this.length]:this[e]:K.call(this)},pushStack:function(e){var t=se.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return se.each(this,e,t)},map:function(e){return this.pushStack(se.map(this,function(t,i){return e.call(t,i,t)}))},slice:function(){return this.pushStack(K.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,i=+e+(0>e?t:0);return this.pushStack(i>=0&&t>i?[this[i]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:Q,sort:Y.sort,splice:Y.splice},se.extend=se.fn.extend=function(){var e,t,i,n,s,o,a=arguments[0]||{},r=1,l=arguments.length,c=!1;for("boolean"==typeof a&&(c=a,a=arguments[r]||{},r++),"object"==typeof a||se.isFunction(a)||(a={}),r===l&&(a=this,r--);l>r;r++)if(null!=(s=arguments[r]))for(n in s)e=a[n],i=s[n],a!==i&&(c&&i&&(se.isPlainObject(i)||(t=se.isArray(i)))?(t?(t=!1,o=e&&se.isArray(e)?e:[]):o=e&&se.isPlainObject(e)?e:{},a[n]=se.extend(c,o,i)):void 0!==i&&(a[n]=i));return a},se.extend({expando:"jQuery"+(ne+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===se.type(e)},isArray:Array.isArray||function(e){return"array"===se.type(e)},isWindow:function(e){return null!=e&&e==e.window},isNumeric:function(e){return!se.isArray(e)&&e-parseFloat(e)>=0},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},isPlainObject:function(e){var t;if(!e||"object"!==se.type(e)||e.nodeType||se.isWindow(e))return!1;try{if(e.constructor&&!te.call(e,"constructor")&&!te.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(i){return!1}if(ie.ownLast)for(t in e)return te.call(e,t);for(t in e);return void 0===t||te.call(e,t)},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?Z[ee.call(e)]||"object":typeof e},globalEval:function(t){t&&se.trim(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(ae,"ms-").replace(re,le)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,n){var s,o=0,a=e.length,r=i(e);if(n){if(r)for(;a>o&&(s=t.apply(e[o],n),s!==!1);o++);else for(o in e)if(s=t.apply(e[o],n),s===!1)break}else if(r)for(;a>o&&(s=t.call(e[o],o,e[o]),s!==!1);o++);else for(o in e)if(s=t.call(e[o],o,e[o]),s===!1)break;return e},trim:function(e){return null==e?"":(e+"").replace(oe,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(i(Object(e))?se.merge(n,"string"==typeof e?[e]:e):Q.call(n,e)),n},inArray:function(e,t,i){var n;if(t){if(J)return J.call(t,e,i);for(n=t.length,i=i?0>i?Math.max(0,n+i):i:0;n>i;i++)if(i in t&&t[i]===e)return i}return-1},merge:function(e,t){for(var i=+t.length,n=0,s=e.length;i>n;)e[s++]=t[n++];if(i!==i)for(;void 0!==t[n];)e[s++]=t[n++];return e.length=s,e},grep:function(e,t,i){for(var n,s=[],o=0,a=e.length,r=!i;a>o;o++)n=!t(e[o],o),n!==r&&s.push(e[o]);return s},map:function(e,t,n){var s,o=0,a=e.length,r=i(e),l=[];if(r)for(;a>o;o++)s=t(e[o],o,n),null!=s&&l.push(s);else for(o in e)s=t(e[o],o,n),null!=s&&l.push(s);return X.apply([],l)},guid:1,proxy:function(e,t){var i,n,s;return"string"==typeof t&&(s=e[t],t=e,e=s),se.isFunction(e)?(i=K.call(arguments,2),n=function(){return e.apply(t||this,i.concat(K.call(arguments)))},n.guid=e.guid=e.guid||se.guid++,n):void 0},now:function(){return+new Date},support:ie}),se.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){Z["[object "+t+"]"]=t.toLowerCase()});var ce=function(e){function t(e,t,i,n){var s,o,a,r,l,c,d,p,m,f;if((t?t.ownerDocument||t:U)!==E&&P(t),t=t||E,i=i||[],!e||"string"!=typeof e)return i;if(1!==(r=t.nodeType)&&9!==r)return[];if(D&&!n){if(s=be.exec(e))if(a=s[1]){if(9===r){if(o=t.getElementById(a),!o||!o.parentNode)return i;if(o.id===a)return i.push(o),i}else if(t.ownerDocument&&(o=t.ownerDocument.getElementById(a))&&B(t,o)&&o.id===a)return i.push(o),i}else{if(s[2])return Z.apply(i,t.getElementsByTagName(e)),i;if((a=s[3])&&_.getElementsByClassName&&t.getElementsByClassName)return Z.apply(i,t.getElementsByClassName(a)),i}if(_.qsa&&(!R||!R.test(e))){if(p=d=F,m=t,f=9===r&&e,1===r&&"object"!==t.nodeName.toLowerCase()){for(c=$(e),(d=t.getAttribute("id"))?p=d.replace(we,"\\$&"):t.setAttribute("id",p),p="[id='"+p+"'] ",l=c.length;l--;)c[l]=p+u(c[l]);m=ye.test(e)&&h(t.parentNode)||t,f=c.join(",")}if(f)try{return Z.apply(i,m.querySelectorAll(f)),i}catch(g){}finally{d||t.removeAttribute("id")}}}return S(e.replace(le,"$1"),t,i,n)}function i(){function e(i,n){return t.push(i+" ")>k.cacheLength&&delete e[t.shift()],e[i+" "]=n}var t=[];return e}function n(e){return e[F]=!0,e}function s(e){var t=E.createElement("div");try{return!!e(t)}catch(i){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function o(e,t){for(var i=e.split("|"),n=e.length;n--;)k.attrHandle[i[n]]=t}function a(e,t){var i=t&&e,n=i&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||Y)-(~e.sourceIndex||Y);if(n)return n;if(i)for(;i=i.nextSibling;)if(i===t)return-1;return e?1:-1}function r(e){return function(t){var i=t.nodeName.toLowerCase();return"input"===i&&t.type===e}}function l(e){return function(t){var i=t.nodeName.toLowerCase();return("input"===i||"button"===i)&&t.type===e}}function c(e){return n(function(t){return t=+t,n(function(i,n){for(var s,o=e([],i.length,t),a=o.length;a--;)i[s=o[a]]&&(i[s]=!(n[s]=i[s]))})})}function h(e){return e&&typeof e.getElementsByTagName!==G&&e}function d(){}function u(e){for(var t=0,i=e.length,n="";i>t;t++)n+=e[t].value;return n}function p(e,t,i){var n=t.dir,s=i&&"parentNode"===n,o=H++;return t.first?function(t,i,o){for(;t=t[n];)if(1===t.nodeType||s)return e(t,i,o)}:function(t,i,a){var r,l,c=[z,o];if(a){for(;t=t[n];)if((1===t.nodeType||s)&&e(t,i,a))return!0}else for(;t=t[n];)if(1===t.nodeType||s){if(l=t[F]||(t[F]={}),(r=l[n])&&r[0]===z&&r[1]===o)return c[2]=r[2];if(l[n]=c,c[2]=e(t,i,a))return!0}}}function m(e){return e.length>1?function(t,i,n){for(var s=e.length;s--;)if(!e[s](t,i,n))return!1;return!0}:e[0]}function f(e,i,n){for(var s=0,o=i.length;o>s;s++)t(e,i[s],n);return n}function g(e,t,i,n,s){for(var o,a=[],r=0,l=e.length,c=null!=t;l>r;r++)(o=e[r])&&(!i||i(o,n,s))&&(a.push(o),c&&t.push(r));return a}function v(e,t,i,s,o,a){return s&&!s[F]&&(s=v(s)),o&&!o[F]&&(o=v(o,a)),n(function(n,a,r,l){var c,h,d,u=[],p=[],m=a.length,v=n||f(t||"*",r.nodeType?[r]:r,[]),b=!e||!n&&t?v:g(v,u,e,r,l),y=i?o||(n?e:m||s)?[]:a:b;if(i&&i(b,y,r,l),s)for(c=g(y,p),s(c,[],r,l),h=c.length;h--;)(d=c[h])&&(y[p[h]]=!(b[p[h]]=d));if(n){if(o||e){if(o){for(c=[],h=y.length;h--;)(d=y[h])&&c.push(b[h]=d);o(null,y=[],c,l)}for(h=y.length;h--;)(d=y[h])&&(c=o?te.call(n,d):u[h])>-1&&(n[c]=!(a[c]=d))}}else y=g(y===a?y.splice(m,y.length):y),o?o(null,a,y,l):Z.apply(a,y)})}function b(e){for(var t,i,n,s=e.length,o=k.relative[e[0].type],a=o||k.relative[" "],r=o?1:0,l=p(function(e){return e===t},a,!0),c=p(function(e){return te.call(t,e)>-1},a,!0),h=[function(e,i,n){return!o&&(n||i!==T)||((t=i).nodeType?l(e,i,n):c(e,i,n))}];s>r;r++)if(i=k.relative[e[r].type])h=[p(m(h),i)];else{if(i=k.filter[e[r].type].apply(null,e[r].matches),i[F]){for(n=++r;s>n&&!k.relative[e[n].type];n++);return v(r>1&&m(h),r>1&&u(e.slice(0,r-1).concat({value:" "===e[r-2].type?"*":""})).replace(le,"$1"),i,n>r&&b(e.slice(r,n)),s>n&&b(e=e.slice(n)),s>n&&u(e))}h.push(i)}return m(h)}function y(e,i){var s=i.length>0,o=e.length>0,a=function(n,a,r,l,c){var h,d,u,p=0,m="0",f=n&&[],v=[],b=T,y=n||o&&k.find.TAG("*",c),w=z+=null==b?1:Math.random()||.1,_=y.length;for(c&&(T=a!==E&&a);m!==_&&null!=(h=y[m]);m++){if(o&&h){for(d=0;u=e[d++];)if(u(h,a,r)){l.push(h);break}c&&(z=w)}s&&((h=!u&&h)&&p--,n&&f.push(h))}if(p+=m,s&&m!==p){for(d=0;u=i[d++];)u(f,v,a,r);if(n){if(p>0)for(;m--;)f[m]||v[m]||(v[m]=Q.call(l));v=g(v)}Z.apply(l,v),c&&!n&&v.length>0&&p+i.length>1&&t.uniqueSort(l)}return c&&(z=w,T=b),f};return s?n(a):a}var w,_,k,I,C,$,x,S,T,A,M,P,E,N,D,R,O,L,B,F="sizzle"+-new Date,U=e.document,z=0,H=0,j=i(),V=i(),W=i(),q=function(e,t){return e===t&&(M=!0),0},G="undefined",Y=1<<31,K={}.hasOwnProperty,X=[],Q=X.pop,J=X.push,Z=X.push,ee=X.slice,te=X.indexOf||function(e){for(var t=0,i=this.length;i>t;t++)if(this[t]===e)return t;return-1},ie="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ne="[\\x20\\t\\r\\n\\f]",se="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",oe=se.replace("w","w#"),ae="\\["+ne+"*("+se+")(?:"+ne+"*([*^$|!~]?=)"+ne+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+oe+"))|)"+ne+"*\\]",re=":("+se+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+ae+")*)|.*)\\)|)",le=new RegExp("^"+ne+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ne+"+$","g"),ce=new RegExp("^"+ne+"*,"+ne+"*"),he=new RegExp("^"+ne+"*([>+~]|"+ne+")"+ne+"*"),de=new RegExp("="+ne+"*([^\\]'\"]*?)"+ne+"*\\]","g"),ue=new RegExp(re),pe=new RegExp("^"+oe+"$"),me={ID:new RegExp("^#("+se+")"),CLASS:new RegExp("^\\.("+se+")"),TAG:new RegExp("^("+se.replace("w","w*")+")"),ATTR:new RegExp("^"+ae),PSEUDO:new RegExp("^"+re),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ne+"*(even|odd|(([+-]|)(\\d*)n|)"+ne+"*(?:([+-]|)"+ne+"*(\\d+)|))"+ne+"*\\)|)","i"),bool:new RegExp("^(?:"+ie+")$","i"),needsContext:new RegExp("^"+ne+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ne+"*((?:-\\d)?\\d*)"+ne+"*\\)|)(?=[^-]|$)","i")},fe=/^(?:input|select|textarea|button)$/i,ge=/^h\d$/i,ve=/^[^{]+\{\s*\[native \w/,be=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ye=/[+~]/,we=/'|\\/g,_e=new RegExp("\\\\([\\da-f]{1,6}"+ne+"?|("+ne+")|.)","ig"),ke=function(e,t,i){var n="0x"+t-65536;return n!==n||i?t:0>n?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320)};try{Z.apply(X=ee.call(U.childNodes),U.childNodes),X[U.childNodes.length].nodeType}catch(Ie){Z={apply:X.length?function(e,t){J.apply(e,ee.call(t))}:function(e,t){for(var i=e.length,n=0;e[i++]=t[n++];);e.length=i-1}}}_=t.support={},C=t.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},P=t.setDocument=function(e){var t,i=e?e.ownerDocument||e:U,n=i.defaultView;return i!==E&&9===i.nodeType&&i.documentElement?(E=i,N=i.documentElement,D=!C(i),n&&n!==n.top&&(n.addEventListener?n.addEventListener("unload",function(){P()},!1):n.attachEvent&&n.attachEvent("onunload",function(){P()})),_.attributes=s(function(e){return e.className="i",!e.getAttribute("className")}),_.getElementsByTagName=s(function(e){return e.appendChild(i.createComment("")),!e.getElementsByTagName("*").length}),_.getElementsByClassName=ve.test(i.getElementsByClassName)&&s(function(e){return e.innerHTML="<div class='a'></div><div class='a i'></div>",e.firstChild.className="i",2===e.getElementsByClassName("i").length}),_.getById=s(function(e){return N.appendChild(e).id=F,!i.getElementsByName||!i.getElementsByName(F).length}),_.getById?(k.find.ID=function(e,t){if(typeof t.getElementById!==G&&D){var i=t.getElementById(e);return i&&i.parentNode?[i]:[]}},k.filter.ID=function(e){var t=e.replace(_e,ke);return function(e){return e.getAttribute("id")===t}}):(delete k.find.ID,k.filter.ID=function(e){var t=e.replace(_e,ke);return function(e){var i=typeof e.getAttributeNode!==G&&e.getAttributeNode("id");return i&&i.value===t}}),k.find.TAG=_.getElementsByTagName?function(e,t){return typeof t.getElementsByTagName!==G?t.getElementsByTagName(e):void 0}:function(e,t){var i,n=[],s=0,o=t.getElementsByTagName(e);if("*"===e){for(;i=o[s++];)1===i.nodeType&&n.push(i);return n}return o},k.find.CLASS=_.getElementsByClassName&&function(e,t){return typeof t.getElementsByClassName!==G&&D?t.getElementsByClassName(e):void 0},O=[],R=[],(_.qsa=ve.test(i.querySelectorAll))&&(s(function(e){e.innerHTML="<select msallowclip=''><option selected=''></option></select>",e.querySelectorAll("[msallowclip^='']").length&&R.push("[*^$]="+ne+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||R.push("\\["+ne+"*(?:value|"+ie+")"),e.querySelectorAll(":checked").length||R.push(":checked")}),s(function(e){var t=i.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&R.push("name"+ne+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||R.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),R.push(",.*:")})),(_.matchesSelector=ve.test(L=N.matches||N.webkitMatchesSelector||N.mozMatchesSelector||N.oMatchesSelector||N.msMatchesSelector))&&s(function(e){_.disconnectedMatch=L.call(e,"div"),L.call(e,"[s!='']:x"),O.push("!=",re)}),R=R.length&&new RegExp(R.join("|")),O=O.length&&new RegExp(O.join("|")),t=ve.test(N.compareDocumentPosition),B=t||ve.test(N.contains)?function(e,t){var i=9===e.nodeType?e.documentElement:e,n=t&&t.parentNode;return e===n||!(!n||1!==n.nodeType||!(i.contains?i.contains(n):e.compareDocumentPosition&&16&e.compareDocumentPosition(n)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},q=t?function(e,t){if(e===t)return M=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n?n:(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&n||!_.sortDetached&&t.compareDocumentPosition(e)===n?e===i||e.ownerDocument===U&&B(U,e)?-1:t===i||t.ownerDocument===U&&B(U,t)?1:A?te.call(A,e)-te.call(A,t):0:4&n?-1:1)}:function(e,t){if(e===t)return M=!0,0;var n,s=0,o=e.parentNode,r=t.parentNode,l=[e],c=[t];if(!o||!r)return e===i?-1:t===i?1:o?-1:r?1:A?te.call(A,e)-te.call(A,t):0;if(o===r)return a(e,t);for(n=e;n=n.parentNode;)l.unshift(n);for(n=t;n=n.parentNode;)c.unshift(n);for(;l[s]===c[s];)s++;return s?a(l[s],c[s]):l[s]===U?-1:c[s]===U?1:0},i):E},t.matches=function(e,i){return t(e,null,null,i)},t.matchesSelector=function(e,i){if((e.ownerDocument||e)!==E&&P(e),i=i.replace(de,"='$1']"),_.matchesSelector&&D&&(!O||!O.test(i))&&(!R||!R.test(i)))try{var n=L.call(e,i);if(n||_.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(s){}return t(i,E,null,[e]).length>0},t.contains=function(e,t){return(e.ownerDocument||e)!==E&&P(e),B(e,t)},t.attr=function(e,t){(e.ownerDocument||e)!==E&&P(e);var i=k.attrHandle[t.toLowerCase()],n=i&&K.call(k.attrHandle,t.toLowerCase())?i(e,t,!D):void 0;return void 0!==n?n:_.attributes||!D?e.getAttribute(t):(n=e.getAttributeNode(t))&&n.specified?n.value:null},t.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},t.uniqueSort=function(e){var t,i=[],n=0,s=0;if(M=!_.detectDuplicates,A=!_.sortStable&&e.slice(0),e.sort(q),M){for(;t=e[s++];)t===e[s]&&(n=i.push(s));for(;n--;)e.splice(i[n],1)}return A=null,e},I=t.getText=function(e){var t,i="",n=0,s=e.nodeType;if(s){if(1===s||9===s||11===s){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)i+=I(e)}else if(3===s||4===s)return e.nodeValue}else for(;t=e[n++];)i+=I(t);return i},k=t.selectors={cacheLength:50,createPseudo:n,match:me,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(_e,ke),e[3]=(e[3]||e[4]||e[5]||"").replace(_e,ke),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||t.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&t.error(e[0]),e},PSEUDO:function(e){var t,i=!e[6]&&e[2];return me.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":i&&ue.test(i)&&(t=$(i,!0))&&(t=i.indexOf(")",i.length-t)-i.length)&&(e[0]=e[0].slice(0,t),e[2]=i.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(_e,ke).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=j[e+" "];return t||(t=new RegExp("(^|"+ne+")"+e+"("+ne+"|$)"))&&j(e,function(e){return t.test("string"==typeof e.className&&e.className||typeof e.getAttribute!==G&&e.getAttribute("class")||"")})},ATTR:function(e,i,n){return function(s){var o=t.attr(s,e);return null==o?"!="===i:i?(o+="","="===i?o===n:"!="===i?o!==n:"^="===i?n&&0===o.indexOf(n):"*="===i?n&&o.indexOf(n)>-1:"$="===i?n&&o.slice(-n.length)===n:"~="===i?(" "+o+" ").indexOf(n)>-1:"|="===i?o===n||o.slice(0,n.length+1)===n+"-":!1):!0}},CHILD:function(e,t,i,n,s){var o="nth"!==e.slice(0,3),a="last"!==e.slice(-4),r="of-type"===t;return 1===n&&0===s?function(e){return!!e.parentNode}:function(t,i,l){var c,h,d,u,p,m,f=o!==a?"nextSibling":"previousSibling",g=t.parentNode,v=r&&t.nodeName.toLowerCase(),b=!l&&!r;if(g){if(o){for(;f;){for(d=t;d=d[f];)if(r?d.nodeName.toLowerCase()===v:1===d.nodeType)return!1;m=f="only"===e&&!m&&"nextSibling"}return!0}if(m=[a?g.firstChild:g.lastChild],a&&b){for(h=g[F]||(g[F]={}),c=h[e]||[],p=c[0]===z&&c[1],u=c[0]===z&&c[2],d=p&&g.childNodes[p];d=++p&&d&&d[f]||(u=p=0)||m.pop();)if(1===d.nodeType&&++u&&d===t){h[e]=[z,p,u];break}}else if(b&&(c=(t[F]||(t[F]={}))[e])&&c[0]===z)u=c[1];else for(;(d=++p&&d&&d[f]||(u=p=0)||m.pop())&&((r?d.nodeName.toLowerCase()!==v:1!==d.nodeType)||!++u||(b&&((d[F]||(d[F]={}))[e]=[z,u]),d!==t)););return u-=s,u===n||u%n===0&&u/n>=0}}},PSEUDO:function(e,i){var s,o=k.pseudos[e]||k.setFilters[e.toLowerCase()]||t.error("unsupported pseudo: "+e);return o[F]?o(i):o.length>1?(s=[e,e,"",i],k.setFilters.hasOwnProperty(e.toLowerCase())?n(function(e,t){for(var n,s=o(e,i),a=s.length;a--;)n=te.call(e,s[a]),e[n]=!(t[n]=s[a])}):function(e){return o(e,0,s)}):o}},pseudos:{not:n(function(e){var t=[],i=[],s=x(e.replace(le,"$1"));return s[F]?n(function(e,t,i,n){for(var o,a=s(e,null,n,[]),r=e.length;r--;)(o=a[r])&&(e[r]=!(t[r]=o))}):function(e,n,o){return t[0]=e,s(t,null,o,i),!i.pop()}}),has:n(function(e){return function(i){return t(e,i).length>0}}),contains:n(function(e){return function(t){return(t.textContent||t.innerText||I(t)).indexOf(e)>-1}}),lang:n(function(e){return pe.test(e||"")||t.error("unsupported lang: "+e),e=e.replace(_e,ke).toLowerCase(),function(t){var i;do if(i=D?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return i=i.toLowerCase(),i===e||0===i.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var i=e.location&&e.location.hash;return i&&i.slice(1)===t.id},root:function(e){return e===N},focus:function(e){return e===E.activeElement&&(!E.hasFocus||E.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!k.pseudos.empty(e)},header:function(e){return ge.test(e.nodeName)},input:function(e){return fe.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:c(function(){return[0]}),last:c(function(e,t){return[t-1]}),eq:c(function(e,t,i){return[0>i?i+t:i]}),even:c(function(e,t){for(var i=0;t>i;i+=2)e.push(i);return e}),odd:c(function(e,t){for(var i=1;t>i;i+=2)e.push(i);return e}),lt:c(function(e,t,i){for(var n=0>i?i+t:i;--n>=0;)e.push(n);return e}),gt:c(function(e,t,i){for(var n=0>i?i+t:i;++n<t;)e.push(n);return e})}},k.pseudos.nth=k.pseudos.eq;for(w in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})k.pseudos[w]=r(w);for(w in{submit:!0,reset:!0})k.pseudos[w]=l(w);return d.prototype=k.filters=k.pseudos,k.setFilters=new d,$=t.tokenize=function(e,i){var n,s,o,a,r,l,c,h=V[e+" "];if(h)return i?0:h.slice(0);for(r=e,l=[],c=k.preFilter;r;){(!n||(s=ce.exec(r)))&&(s&&(r=r.slice(s[0].length)||r),l.push(o=[])),n=!1,(s=he.exec(r))&&(n=s.shift(),o.push({value:n,type:s[0].replace(le," ")}),r=r.slice(n.length));for(a in k.filter)!(s=me[a].exec(r))||c[a]&&!(s=c[a](s))||(n=s.shift(),o.push({value:n,type:a,matches:s}),r=r.slice(n.length));if(!n)break}return i?r.length:r?t.error(e):V(e,l).slice(0)},x=t.compile=function(e,t){var i,n=[],s=[],o=W[e+" "];if(!o){for(t||(t=$(e)),i=t.length;i--;)o=b(t[i]),o[F]?n.push(o):s.push(o);o=W(e,y(s,n)),o.selector=e}return o},S=t.select=function(e,t,i,n){var s,o,a,r,l,c="function"==typeof e&&e,d=!n&&$(e=c.selector||e);if(i=i||[],1===d.length){if(o=d[0]=d[0].slice(0),o.length>2&&"ID"===(a=o[0]).type&&_.getById&&9===t.nodeType&&D&&k.relative[o[1].type]){if(t=(k.find.ID(a.matches[0].replace(_e,ke),t)||[])[0],!t)return i;c&&(t=t.parentNode),e=e.slice(o.shift().value.length)}for(s=me.needsContext.test(e)?0:o.length;s--&&(a=o[s],!k.relative[r=a.type]);)if((l=k.find[r])&&(n=l(a.matches[0].replace(_e,ke),ye.test(o[0].type)&&h(t.parentNode)||t))){if(o.splice(s,1),e=n.length&&u(o),!e)return Z.apply(i,n),i;break}}return(c||x(e,d))(n,t,!D,i,ye.test(e)&&h(t.parentNode)||t),i},_.sortStable=F.split("").sort(q).join("")===F,_.detectDuplicates=!!M,P(),_.sortDetached=s(function(e){return 1&e.compareDocumentPosition(E.createElement("div"))}),s(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||o("type|href|height|width",function(e,t,i){return i?void 0:e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),_.attributes&&s(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||o("value",function(e,t,i){return i||"input"!==e.nodeName.toLowerCase()?void 0:e.defaultValue}),s(function(e){return null==e.getAttribute("disabled")})||o(ie,function(e,t,i){var n;return i?void 0:e[t]===!0?t.toLowerCase():(n=e.getAttributeNode(t))&&n.specified?n.value:null}),t}(e);se.find=ce,se.expr=ce.selectors,se.expr[":"]=se.expr.pseudos,se.unique=ce.uniqueSort,se.text=ce.getText,se.isXMLDoc=ce.isXML,se.contains=ce.contains;var he=se.expr.match.needsContext,de=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,ue=/^.[^:#\[\.,]*$/;se.filter=function(e,t,i){var n=t[0];return i&&(e=":not("+e+")"),1===t.length&&1===n.nodeType?se.find.matchesSelector(n,e)?[n]:[]:se.find.matches(e,se.grep(t,function(e){return 1===e.nodeType}))},se.fn.extend({find:function(e){var t,i=[],n=this,s=n.length;if("string"!=typeof e)return this.pushStack(se(e).filter(function(){for(t=0;s>t;t++)if(se.contains(n[t],this))return!0}));for(t=0;s>t;t++)se.find(e,n[t],i);return i=this.pushStack(s>1?se.unique(i):i),i.selector=this.selector?this.selector+" "+e:e,i},filter:function(e){return this.pushStack(n(this,e||[],!1))},not:function(e){return this.pushStack(n(this,e||[],!0))},is:function(e){return!!n(this,"string"==typeof e&&he.test(e)?se(e):e||[],!1).length}});var pe,me=e.document,fe=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,ge=se.fn.init=function(e,t){var i,n;if(!e)return this;if("string"==typeof e){if(i="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:fe.exec(e),
!i||!i[1]&&t)return!t||t.jquery?(t||pe).find(e):this.constructor(t).find(e);if(i[1]){if(t=t instanceof se?t[0]:t,se.merge(this,se.parseHTML(i[1],t&&t.nodeType?t.ownerDocument||t:me,!0)),de.test(i[1])&&se.isPlainObject(t))for(i in t)se.isFunction(this[i])?this[i](t[i]):this.attr(i,t[i]);return this}if(n=me.getElementById(i[2]),n&&n.parentNode){if(n.id!==i[2])return pe.find(e);this.length=1,this[0]=n}return this.context=me,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):se.isFunction(e)?"undefined"!=typeof pe.ready?pe.ready(e):e(se):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),se.makeArray(e,this))};ge.prototype=se.fn,pe=se(me);var ve=/^(?:parents|prev(?:Until|All))/,be={children:!0,contents:!0,next:!0,prev:!0};se.extend({dir:function(e,t,i){for(var n=[],s=e[t];s&&9!==s.nodeType&&(void 0===i||1!==s.nodeType||!se(s).is(i));)1===s.nodeType&&n.push(s),s=s[t];return n},sibling:function(e,t){for(var i=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&i.push(e);return i}}),se.fn.extend({has:function(e){var t,i=se(e,this),n=i.length;return this.filter(function(){for(t=0;n>t;t++)if(se.contains(this,i[t]))return!0})},closest:function(e,t){for(var i,n=0,s=this.length,o=[],a=he.test(e)||"string"!=typeof e?se(e,t||this.context):0;s>n;n++)for(i=this[n];i&&i!==t;i=i.parentNode)if(i.nodeType<11&&(a?a.index(i)>-1:1===i.nodeType&&se.find.matchesSelector(i,e))){o.push(i);break}return this.pushStack(o.length>1?se.unique(o):o)},index:function(e){return e?"string"==typeof e?se.inArray(this[0],se(e)):se.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(se.unique(se.merge(this.get(),se(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),se.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return se.dir(e,"parentNode")},parentsUntil:function(e,t,i){return se.dir(e,"parentNode",i)},next:function(e){return s(e,"nextSibling")},prev:function(e){return s(e,"previousSibling")},nextAll:function(e){return se.dir(e,"nextSibling")},prevAll:function(e){return se.dir(e,"previousSibling")},nextUntil:function(e,t,i){return se.dir(e,"nextSibling",i)},prevUntil:function(e,t,i){return se.dir(e,"previousSibling",i)},siblings:function(e){return se.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return se.sibling(e.firstChild)},contents:function(e){return se.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:se.merge([],e.childNodes)}},function(e,t){se.fn[e]=function(i,n){var s=se.map(this,t,i);return"Until"!==e.slice(-5)&&(n=i),n&&"string"==typeof n&&(s=se.filter(n,s)),this.length>1&&(be[e]||(s=se.unique(s)),ve.test(e)&&(s=s.reverse())),this.pushStack(s)}});var ye=/\S+/g,we={};se.Callbacks=function(e){e="string"==typeof e?we[e]||o(e):se.extend({},e);var t,i,n,s,a,r,l=[],c=!e.once&&[],h=function(o){for(i=e.memory&&o,n=!0,a=r||0,r=0,s=l.length,t=!0;l&&s>a;a++)if(l[a].apply(o[0],o[1])===!1&&e.stopOnFalse){i=!1;break}t=!1,l&&(c?c.length&&h(c.shift()):i?l=[]:d.disable())},d={add:function(){if(l){var n=l.length;!function o(t){se.each(t,function(t,i){var n=se.type(i);"function"===n?e.unique&&d.has(i)||l.push(i):i&&i.length&&"string"!==n&&o(i)})}(arguments),t?s=l.length:i&&(r=n,h(i))}return this},remove:function(){return l&&se.each(arguments,function(e,i){for(var n;(n=se.inArray(i,l,n))>-1;)l.splice(n,1),t&&(s>=n&&s--,a>=n&&a--)}),this},has:function(e){return e?se.inArray(e,l)>-1:!(!l||!l.length)},empty:function(){return l=[],s=0,this},disable:function(){return l=c=i=void 0,this},disabled:function(){return!l},lock:function(){return c=void 0,i||d.disable(),this},locked:function(){return!c},fireWith:function(e,i){return!l||n&&!c||(i=i||[],i=[e,i.slice?i.slice():i],t?c.push(i):h(i)),this},fire:function(){return d.fireWith(this,arguments),this},fired:function(){return!!n}};return d},se.extend({Deferred:function(e){var t=[["resolve","done",se.Callbacks("once memory"),"resolved"],["reject","fail",se.Callbacks("once memory"),"rejected"],["notify","progress",se.Callbacks("memory")]],i="pending",n={state:function(){return i},always:function(){return s.done(arguments).fail(arguments),this},then:function(){var e=arguments;return se.Deferred(function(i){se.each(t,function(t,o){var a=se.isFunction(e[t])&&e[t];s[o[1]](function(){var e=a&&a.apply(this,arguments);e&&se.isFunction(e.promise)?e.promise().done(i.resolve).fail(i.reject).progress(i.notify):i[o[0]+"With"](this===n?i.promise():this,a?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?se.extend(e,n):n}},s={};return n.pipe=n.then,se.each(t,function(e,o){var a=o[2],r=o[3];n[o[1]]=a.add,r&&a.add(function(){i=r},t[1^e][2].disable,t[2][2].lock),s[o[0]]=function(){return s[o[0]+"With"](this===s?n:this,arguments),this},s[o[0]+"With"]=a.fireWith}),n.promise(s),e&&e.call(s,s),s},when:function(e){var t,i,n,s=0,o=K.call(arguments),a=o.length,r=1!==a||e&&se.isFunction(e.promise)?a:0,l=1===r?e:se.Deferred(),c=function(e,i,n){return function(s){i[e]=this,n[e]=arguments.length>1?K.call(arguments):s,n===t?l.notifyWith(i,n):--r||l.resolveWith(i,n)}};if(a>1)for(t=new Array(a),i=new Array(a),n=new Array(a);a>s;s++)o[s]&&se.isFunction(o[s].promise)?o[s].promise().done(c(s,n,o)).fail(l.reject).progress(c(s,i,t)):--r;return r||l.resolveWith(n,o),l.promise()}});var _e;se.fn.ready=function(e){return se.ready.promise().done(e),this},se.extend({isReady:!1,readyWait:1,holdReady:function(e){e?se.readyWait++:se.ready(!0)},ready:function(e){if(e===!0?!--se.readyWait:!se.isReady){if(!me.body)return setTimeout(se.ready);se.isReady=!0,e!==!0&&--se.readyWait>0||(_e.resolveWith(me,[se]),se.fn.triggerHandler&&(se(me).triggerHandler("ready"),se(me).off("ready")))}}}),se.ready.promise=function(t){if(!_e)if(_e=se.Deferred(),"complete"===me.readyState)setTimeout(se.ready);else if(me.addEventListener)me.addEventListener("DOMContentLoaded",r,!1),e.addEventListener("load",r,!1);else{me.attachEvent("onreadystatechange",r),e.attachEvent("onload",r);var i=!1;try{i=null==e.frameElement&&me.documentElement}catch(n){}i&&i.doScroll&&!function s(){if(!se.isReady){try{i.doScroll("left")}catch(e){return setTimeout(s,50)}a(),se.ready()}}()}return _e.promise(t)};var ke,Ie="undefined";for(ke in se(ie))break;ie.ownLast="0"!==ke,ie.inlineBlockNeedsLayout=!1,se(function(){var e,t,i,n;i=me.getElementsByTagName("body")[0],i&&i.style&&(t=me.createElement("div"),n=me.createElement("div"),n.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",i.appendChild(n).appendChild(t),typeof t.style.zoom!==Ie&&(t.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1",ie.inlineBlockNeedsLayout=e=3===t.offsetWidth,e&&(i.style.zoom=1)),i.removeChild(n))}),function(){var e=me.createElement("div");if(null==ie.deleteExpando){ie.deleteExpando=!0;try{delete e.test}catch(t){ie.deleteExpando=!1}}e=null}(),se.acceptData=function(e){var t=se.noData[(e.nodeName+" ").toLowerCase()],i=+e.nodeType||1;return 1!==i&&9!==i?!1:!t||t!==!0&&e.getAttribute("classid")===t};var Ce=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,$e=/([A-Z])/g;se.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(e){return e=e.nodeType?se.cache[e[se.expando]]:e[se.expando],!!e&&!c(e)},data:function(e,t,i){return h(e,t,i)},removeData:function(e,t){return d(e,t)},_data:function(e,t,i){return h(e,t,i,!0)},_removeData:function(e,t){return d(e,t,!0)}}),se.fn.extend({data:function(e,t){var i,n,s,o=this[0],a=o&&o.attributes;if(void 0===e){if(this.length&&(s=se.data(o),1===o.nodeType&&!se._data(o,"parsedAttrs"))){for(i=a.length;i--;)a[i]&&(n=a[i].name,0===n.indexOf("data-")&&(n=se.camelCase(n.slice(5)),l(o,n,s[n])));se._data(o,"parsedAttrs",!0)}return s}return"object"==typeof e?this.each(function(){se.data(this,e)}):arguments.length>1?this.each(function(){se.data(this,e,t)}):o?l(o,e,se.data(o,e)):void 0},removeData:function(e){return this.each(function(){se.removeData(this,e)})}}),se.extend({queue:function(e,t,i){var n;return e?(t=(t||"fx")+"queue",n=se._data(e,t),i&&(!n||se.isArray(i)?n=se._data(e,t,se.makeArray(i)):n.push(i)),n||[]):void 0},dequeue:function(e,t){t=t||"fx";var i=se.queue(e,t),n=i.length,s=i.shift(),o=se._queueHooks(e,t),a=function(){se.dequeue(e,t)};"inprogress"===s&&(s=i.shift(),n--),s&&("fx"===t&&i.unshift("inprogress"),delete o.stop,s.call(e,a,o)),!n&&o&&o.empty.fire()},_queueHooks:function(e,t){var i=t+"queueHooks";return se._data(e,i)||se._data(e,i,{empty:se.Callbacks("once memory").add(function(){se._removeData(e,t+"queue"),se._removeData(e,i)})})}}),se.fn.extend({queue:function(e,t){var i=2;return"string"!=typeof e&&(t=e,e="fx",i--),arguments.length<i?se.queue(this[0],e):void 0===t?this:this.each(function(){var i=se.queue(this,e,t);se._queueHooks(this,e),"fx"===e&&"inprogress"!==i[0]&&se.dequeue(this,e)})},dequeue:function(e){return this.each(function(){se.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var i,n=1,s=se.Deferred(),o=this,a=this.length,r=function(){--n||s.resolveWith(o,[o])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";a--;)i=se._data(o[a],e+"queueHooks"),i&&i.empty&&(n++,i.empty.add(r));return r(),s.promise(t)}});var xe=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Se=["Top","Right","Bottom","Left"],Te=function(e,t){return e=t||e,"none"===se.css(e,"display")||!se.contains(e.ownerDocument,e)},Ae=se.access=function(e,t,i,n,s,o,a){var r=0,l=e.length,c=null==i;if("object"===se.type(i)){s=!0;for(r in i)se.access(e,t,r,i[r],!0,o,a)}else if(void 0!==n&&(s=!0,se.isFunction(n)||(a=!0),c&&(a?(t.call(e,n),t=null):(c=t,t=function(e,t,i){return c.call(se(e),i)})),t))for(;l>r;r++)t(e[r],i,a?n:n.call(e[r],r,t(e[r],i)));return s?e:c?t.call(e):l?t(e[0],i):o},Me=/^(?:checkbox|radio)$/i;!function(){var e=me.createElement("input"),t=me.createElement("div"),i=me.createDocumentFragment();if(t.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",ie.leadingWhitespace=3===t.firstChild.nodeType,ie.tbody=!t.getElementsByTagName("tbody").length,ie.htmlSerialize=!!t.getElementsByTagName("link").length,ie.html5Clone="<:nav></:nav>"!==me.createElement("nav").cloneNode(!0).outerHTML,e.type="checkbox",e.checked=!0,i.appendChild(e),ie.appendChecked=e.checked,t.innerHTML="<textarea>x</textarea>",ie.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue,i.appendChild(t),t.innerHTML="<input type='radio' checked='checked' name='t'/>",ie.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,ie.noCloneEvent=!0,t.attachEvent&&(t.attachEvent("onclick",function(){ie.noCloneEvent=!1}),t.cloneNode(!0).click()),null==ie.deleteExpando){ie.deleteExpando=!0;try{delete t.test}catch(n){ie.deleteExpando=!1}}}(),function(){var t,i,n=me.createElement("div");for(t in{submit:!0,change:!0,focusin:!0})i="on"+t,(ie[t+"Bubbles"]=i in e)||(n.setAttribute(i,"t"),ie[t+"Bubbles"]=n.attributes[i].expando===!1);n=null}();var Pe=/^(?:input|select|textarea)$/i,Ee=/^key/,Ne=/^(?:mouse|pointer|contextmenu)|click/,De=/^(?:focusinfocus|focusoutblur)$/,Re=/^([^.]*)(?:\.(.+)|)$/;se.event={global:{},add:function(e,t,i,n,s){var o,a,r,l,c,h,d,u,p,m,f,g=se._data(e);if(g){for(i.handler&&(l=i,i=l.handler,s=l.selector),i.guid||(i.guid=se.guid++),(a=g.events)||(a=g.events={}),(h=g.handle)||(h=g.handle=function(e){return typeof se===Ie||e&&se.event.triggered===e.type?void 0:se.event.dispatch.apply(h.elem,arguments)},h.elem=e),t=(t||"").match(ye)||[""],r=t.length;r--;)o=Re.exec(t[r])||[],p=f=o[1],m=(o[2]||"").split(".").sort(),p&&(c=se.event.special[p]||{},p=(s?c.delegateType:c.bindType)||p,c=se.event.special[p]||{},d=se.extend({type:p,origType:f,data:n,handler:i,guid:i.guid,selector:s,needsContext:s&&se.expr.match.needsContext.test(s),namespace:m.join(".")},l),(u=a[p])||(u=a[p]=[],u.delegateCount=0,c.setup&&c.setup.call(e,n,m,h)!==!1||(e.addEventListener?e.addEventListener(p,h,!1):e.attachEvent&&e.attachEvent("on"+p,h))),c.add&&(c.add.call(e,d),d.handler.guid||(d.handler.guid=i.guid)),s?u.splice(u.delegateCount++,0,d):u.push(d),se.event.global[p]=!0);e=null}},remove:function(e,t,i,n,s){var o,a,r,l,c,h,d,u,p,m,f,g=se.hasData(e)&&se._data(e);if(g&&(h=g.events)){for(t=(t||"").match(ye)||[""],c=t.length;c--;)if(r=Re.exec(t[c])||[],p=f=r[1],m=(r[2]||"").split(".").sort(),p){for(d=se.event.special[p]||{},p=(n?d.delegateType:d.bindType)||p,u=h[p]||[],r=r[2]&&new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"),l=o=u.length;o--;)a=u[o],!s&&f!==a.origType||i&&i.guid!==a.guid||r&&!r.test(a.namespace)||n&&n!==a.selector&&("**"!==n||!a.selector)||(u.splice(o,1),a.selector&&u.delegateCount--,d.remove&&d.remove.call(e,a));l&&!u.length&&(d.teardown&&d.teardown.call(e,m,g.handle)!==!1||se.removeEvent(e,p,g.handle),delete h[p])}else for(p in h)se.event.remove(e,p+t[c],i,n,!0);se.isEmptyObject(h)&&(delete g.handle,se._removeData(e,"events"))}},trigger:function(t,i,n,s){var o,a,r,l,c,h,d,u=[n||me],p=te.call(t,"type")?t.type:t,m=te.call(t,"namespace")?t.namespace.split("."):[];if(r=h=n=n||me,3!==n.nodeType&&8!==n.nodeType&&!De.test(p+se.event.triggered)&&(p.indexOf(".")>=0&&(m=p.split("."),p=m.shift(),m.sort()),a=p.indexOf(":")<0&&"on"+p,t=t[se.expando]?t:new se.Event(p,"object"==typeof t&&t),t.isTrigger=s?2:3,t.namespace=m.join("."),t.namespace_re=t.namespace?new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=n),i=null==i?[t]:se.makeArray(i,[t]),c=se.event.special[p]||{},s||!c.trigger||c.trigger.apply(n,i)!==!1)){if(!s&&!c.noBubble&&!se.isWindow(n)){for(l=c.delegateType||p,De.test(l+p)||(r=r.parentNode);r;r=r.parentNode)u.push(r),h=r;h===(n.ownerDocument||me)&&u.push(h.defaultView||h.parentWindow||e)}for(d=0;(r=u[d++])&&!t.isPropagationStopped();)t.type=d>1?l:c.bindType||p,o=(se._data(r,"events")||{})[t.type]&&se._data(r,"handle"),o&&o.apply(r,i),o=a&&r[a],o&&o.apply&&se.acceptData(r)&&(t.result=o.apply(r,i),t.result===!1&&t.preventDefault());if(t.type=p,!s&&!t.isDefaultPrevented()&&(!c._default||c._default.apply(u.pop(),i)===!1)&&se.acceptData(n)&&a&&n[p]&&!se.isWindow(n)){h=n[a],h&&(n[a]=null),se.event.triggered=p;try{n[p]()}catch(f){}se.event.triggered=void 0,h&&(n[a]=h)}return t.result}},dispatch:function(e){e=se.event.fix(e);var t,i,n,s,o,a=[],r=K.call(arguments),l=(se._data(this,"events")||{})[e.type]||[],c=se.event.special[e.type]||{};if(r[0]=e,e.delegateTarget=this,!c.preDispatch||c.preDispatch.call(this,e)!==!1){for(a=se.event.handlers.call(this,e,l),t=0;(s=a[t++])&&!e.isPropagationStopped();)for(e.currentTarget=s.elem,o=0;(n=s.handlers[o++])&&!e.isImmediatePropagationStopped();)(!e.namespace_re||e.namespace_re.test(n.namespace))&&(e.handleObj=n,e.data=n.data,i=((se.event.special[n.origType]||{}).handle||n.handler).apply(s.elem,r),void 0!==i&&(e.result=i)===!1&&(e.preventDefault(),e.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,e),e.result}},handlers:function(e,t){var i,n,s,o,a=[],r=t.delegateCount,l=e.target;if(r&&l.nodeType&&(!e.button||"click"!==e.type))for(;l!=this;l=l.parentNode||this)if(1===l.nodeType&&(l.disabled!==!0||"click"!==e.type)){for(s=[],o=0;r>o;o++)n=t[o],i=n.selector+" ",void 0===s[i]&&(s[i]=n.needsContext?se(i,this).index(l)>=0:se.find(i,this,null,[l]).length),s[i]&&s.push(n);s.length&&a.push({elem:l,handlers:s})}return r<t.length&&a.push({elem:this,handlers:t.slice(r)}),a},fix:function(e){if(e[se.expando])return e;var t,i,n,s=e.type,o=e,a=this.fixHooks[s];for(a||(this.fixHooks[s]=a=Ne.test(s)?this.mouseHooks:Ee.test(s)?this.keyHooks:{}),n=a.props?this.props.concat(a.props):this.props,e=new se.Event(o),t=n.length;t--;)i=n[t],e[i]=o[i];return e.target||(e.target=o.srcElement||me),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,a.filter?a.filter(e,o):e},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var i,n,s,o=t.button,a=t.fromElement;return null==e.pageX&&null!=t.clientX&&(n=e.target.ownerDocument||me,s=n.documentElement,i=n.body,e.pageX=t.clientX+(s&&s.scrollLeft||i&&i.scrollLeft||0)-(s&&s.clientLeft||i&&i.clientLeft||0),e.pageY=t.clientY+(s&&s.scrollTop||i&&i.scrollTop||0)-(s&&s.clientTop||i&&i.clientTop||0)),!e.relatedTarget&&a&&(e.relatedTarget=a===e.target?t.toElement:a),e.which||void 0===o||(e.which=1&o?1:2&o?3:4&o?2:0),e}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==m()&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){return this===m()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return se.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):void 0},_default:function(e){return se.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,i,n){var s=se.extend(new se.Event,i,{type:e,isSimulated:!0,originalEvent:{}});n?se.event.trigger(s,null,t):se.event.dispatch.call(t,s),s.isDefaultPrevented()&&i.preventDefault()}},se.removeEvent=me.removeEventListener?function(e,t,i){e.removeEventListener&&e.removeEventListener(t,i,!1)}:function(e,t,i){var n="on"+t;e.detachEvent&&(typeof e[n]===Ie&&(e[n]=null),e.detachEvent(n,i))},se.Event=function(e,t){return this instanceof se.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&e.returnValue===!1?u:p):this.type=e,t&&se.extend(this,t),this.timeStamp=e&&e.timeStamp||se.now(),void(this[se.expando]=!0)):new se.Event(e,t)},se.Event.prototype={isDefaultPrevented:p,isPropagationStopped:p,isImmediatePropagationStopped:p,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=u,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=u,e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=u,e&&e.stopImmediatePropagation&&e.stopImmediatePropagation(),this.stopPropagation()}},se.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){se.event.special[e]={delegateType:t,bindType:t,handle:function(e){var i,n=this,s=e.relatedTarget,o=e.handleObj;return(!s||s!==n&&!se.contains(n,s))&&(e.type=o.origType,i=o.handler.apply(this,arguments),e.type=t),i}}}),ie.submitBubbles||(se.event.special.submit={setup:function(){return se.nodeName(this,"form")?!1:void se.event.add(this,"click._submit keypress._submit",function(e){var t=e.target,i=se.nodeName(t,"input")||se.nodeName(t,"button")?t.form:void 0;i&&!se._data(i,"submitBubbles")&&(se.event.add(i,"submit._submit",function(e){e._submit_bubble=!0}),se._data(i,"submitBubbles",!0))})},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&se.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){return se.nodeName(this,"form")?!1:void se.event.remove(this,"._submit")}}),ie.changeBubbles||(se.event.special.change={setup:function(){return Pe.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(se.event.add(this,"propertychange._change",function(e){"checked"===e.originalEvent.propertyName&&(this._just_changed=!0)}),se.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),se.event.simulate("change",this,e,!0)})),!1):void se.event.add(this,"beforeactivate._change",function(e){var t=e.target;Pe.test(t.nodeName)&&!se._data(t,"changeBubbles")&&(se.event.add(t,"change._change",function(e){!this.parentNode||e.isSimulated||e.isTrigger||se.event.simulate("change",this.parentNode,e,!0)}),se._data(t,"changeBubbles",!0))})},handle:function(e){var t=e.target;return this!==t||e.isSimulated||e.isTrigger||"radio"!==t.type&&"checkbox"!==t.type?e.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return se.event.remove(this,"._change"),!Pe.test(this.nodeName)}}),ie.focusinBubbles||se.each({focus:"focusin",blur:"focusout"},function(e,t){var i=function(e){se.event.simulate(t,e.target,se.event.fix(e),!0)};se.event.special[t]={setup:function(){var n=this.ownerDocument||this,s=se._data(n,t);s||n.addEventListener(e,i,!0),se._data(n,t,(s||0)+1)},teardown:function(){var n=this.ownerDocument||this,s=se._data(n,t)-1;s?se._data(n,t,s):(n.removeEventListener(e,i,!0),se._removeData(n,t))}}}),se.fn.extend({on:function(e,t,i,n,s){var o,a;if("object"==typeof e){"string"!=typeof t&&(i=i||t,t=void 0);for(o in e)this.on(o,t,i,e[o],s);return this}if(null==i&&null==n?(n=t,i=t=void 0):null==n&&("string"==typeof t?(n=i,i=void 0):(n=i,i=t,t=void 0)),n===!1)n=p;else if(!n)return this;return 1===s&&(a=n,n=function(e){return se().off(e),a.apply(this,arguments)},n.guid=a.guid||(a.guid=se.guid++)),this.each(function(){se.event.add(this,e,n,i,t)})},one:function(e,t,i,n){return this.on(e,t,i,n,1)},off:function(e,t,i){var n,s;if(e&&e.preventDefault&&e.handleObj)return n=e.handleObj,se(e.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this;if("object"==typeof e){for(s in e)this.off(s,t,e[s]);return this}return(t===!1||"function"==typeof t)&&(i=t,t=void 0),i===!1&&(i=p),this.each(function(){se.event.remove(this,e,i,t)})},trigger:function(e,t){return this.each(function(){se.event.trigger(e,t,this)})},triggerHandler:function(e,t){var i=this[0];return i?se.event.trigger(e,t,i,!0):void 0}});var Oe="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",Le=/ jQuery\d+="(?:null|\d+)"/g,Be=new RegExp("<(?:"+Oe+")[\\s/>]","i"),Fe=/^\s+/,Ue=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,ze=/<([\w:]+)/,He=/<tbody/i,je=/<|&#?\w+;/,Ve=/<(?:script|style|link)/i,We=/checked\s*(?:[^=]|=\s*.checked.)/i,qe=/^$|\/(?:java|ecma)script/i,Ge=/^true\/(.*)/,Ye=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Ke={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:ie.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},Xe=f(me),Qe=Xe.appendChild(me.createElement("div"));Ke.optgroup=Ke.option,Ke.tbody=Ke.tfoot=Ke.colgroup=Ke.caption=Ke.thead,Ke.th=Ke.td,se.extend({clone:function(e,t,i){var n,s,o,a,r,l=se.contains(e.ownerDocument,e);if(ie.html5Clone||se.isXMLDoc(e)||!Be.test("<"+e.nodeName+">")?o=e.cloneNode(!0):(Qe.innerHTML=e.outerHTML,Qe.removeChild(o=Qe.firstChild)),!(ie.noCloneEvent&&ie.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||se.isXMLDoc(e)))for(n=g(o),r=g(e),a=0;null!=(s=r[a]);++a)n[a]&&I(s,n[a]);if(t)if(i)for(r=r||g(e),n=n||g(o),a=0;null!=(s=r[a]);a++)k(s,n[a]);else k(e,o);return n=g(o,"script"),n.length>0&&_(n,!l&&g(e,"script")),n=r=s=null,o},buildFragment:function(e,t,i,n){for(var s,o,a,r,l,c,h,d=e.length,u=f(t),p=[],m=0;d>m;m++)if(o=e[m],o||0===o)if("object"===se.type(o))se.merge(p,o.nodeType?[o]:o);else if(je.test(o)){for(r=r||u.appendChild(t.createElement("div")),l=(ze.exec(o)||["",""])[1].toLowerCase(),h=Ke[l]||Ke._default,r.innerHTML=h[1]+o.replace(Ue,"<$1></$2>")+h[2],s=h[0];s--;)r=r.lastChild;if(!ie.leadingWhitespace&&Fe.test(o)&&p.push(t.createTextNode(Fe.exec(o)[0])),!ie.tbody)for(o="table"!==l||He.test(o)?"<table>"!==h[1]||He.test(o)?0:r:r.firstChild,s=o&&o.childNodes.length;s--;)se.nodeName(c=o.childNodes[s],"tbody")&&!c.childNodes.length&&o.removeChild(c);for(se.merge(p,r.childNodes),r.textContent="";r.firstChild;)r.removeChild(r.firstChild);r=u.lastChild}else p.push(t.createTextNode(o));for(r&&u.removeChild(r),ie.appendChecked||se.grep(g(p,"input"),v),m=0;o=p[m++];)if((!n||-1===se.inArray(o,n))&&(a=se.contains(o.ownerDocument,o),r=g(u.appendChild(o),"script"),a&&_(r),i))for(s=0;o=r[s++];)qe.test(o.type||"")&&i.push(o);return r=null,u},cleanData:function(e,t){for(var i,n,s,o,a=0,r=se.expando,l=se.cache,c=ie.deleteExpando,h=se.event.special;null!=(i=e[a]);a++)if((t||se.acceptData(i))&&(s=i[r],o=s&&l[s])){if(o.events)for(n in o.events)h[n]?se.event.remove(i,n):se.removeEvent(i,n,o.handle);l[s]&&(delete l[s],c?delete i[r]:typeof i.removeAttribute!==Ie?i.removeAttribute(r):i[r]=null,Y.push(s))}}}),se.fn.extend({text:function(e){return Ae(this,function(e){return void 0===e?se.text(this):this.empty().append((this[0]&&this[0].ownerDocument||me).createTextNode(e))},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=b(this,e);t.appendChild(e)}})},prepend:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=b(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){for(var i,n=e?se.filter(e,this):this,s=0;null!=(i=n[s]);s++)t||1!==i.nodeType||se.cleanData(g(i)),i.parentNode&&(t&&se.contains(i.ownerDocument,i)&&_(g(i,"script")),i.parentNode.removeChild(i));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++){for(1===e.nodeType&&se.cleanData(g(e,!1));e.firstChild;)e.removeChild(e.firstChild);e.options&&se.nodeName(e,"select")&&(e.options.length=0)}return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return se.clone(this,e,t)})},html:function(e){return Ae(this,function(e){var t=this[0]||{},i=0,n=this.length;if(void 0===e)return 1===t.nodeType?t.innerHTML.replace(Le,""):void 0;if("string"==typeof e&&!Ve.test(e)&&(ie.htmlSerialize||!Be.test(e))&&(ie.leadingWhitespace||!Fe.test(e))&&!Ke[(ze.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(Ue,"<$1></$2>");try{for(;n>i;i++)t=this[i]||{},1===t.nodeType&&(se.cleanData(g(t,!1)),t.innerHTML=e);t=0}catch(s){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=arguments[0];return this.domManip(arguments,function(t){e=this.parentNode,se.cleanData(g(this)),e&&e.replaceChild(t,this)}),e&&(e.length||e.nodeType)?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(e,t){e=X.apply([],e);var i,n,s,o,a,r,l=0,c=this.length,h=this,d=c-1,u=e[0],p=se.isFunction(u);if(p||c>1&&"string"==typeof u&&!ie.checkClone&&We.test(u))return this.each(function(i){var n=h.eq(i);p&&(e[0]=u.call(this,i,n.html())),n.domManip(e,t)});if(c&&(r=se.buildFragment(e,this[0].ownerDocument,!1,this),i=r.firstChild,1===r.childNodes.length&&(r=i),i)){for(o=se.map(g(r,"script"),y),s=o.length;c>l;l++)n=r,l!==d&&(n=se.clone(n,!0,!0),s&&se.merge(o,g(n,"script"))),t.call(this[l],n,l);if(s)for(a=o[o.length-1].ownerDocument,se.map(o,w),l=0;s>l;l++)n=o[l],qe.test(n.type||"")&&!se._data(n,"globalEval")&&se.contains(a,n)&&(n.src?se._evalUrl&&se._evalUrl(n.src):se.globalEval((n.text||n.textContent||n.innerHTML||"").replace(Ye,"")));r=i=null}return this}}),se.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){se.fn[e]=function(e){for(var i,n=0,s=[],o=se(e),a=o.length-1;a>=n;n++)i=n===a?this:this.clone(!0),se(o[n])[t](i),Q.apply(s,i.get());return this.pushStack(s)}});var Je,Ze={};!function(){var e;ie.shrinkWrapBlocks=function(){if(null!=e)return e;e=!1;var t,i,n;return i=me.getElementsByTagName("body")[0],i&&i.style?(t=me.createElement("div"),n=me.createElement("div"),n.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",i.appendChild(n).appendChild(t),typeof t.style.zoom!==Ie&&(t.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:1px;width:1px;zoom:1",t.appendChild(me.createElement("div")).style.width="5px",e=3!==t.offsetWidth),i.removeChild(n),e):void 0}}();var et,tt,it=/^margin/,nt=new RegExp("^("+xe+")(?!px)[a-z%]+$","i"),st=/^(top|right|bottom|left)$/;e.getComputedStyle?(et=function(e){return e.ownerDocument.defaultView.getComputedStyle(e,null)},tt=function(e,t,i){var n,s,o,a,r=e.style;return i=i||et(e),a=i?i.getPropertyValue(t)||i[t]:void 0,i&&(""!==a||se.contains(e.ownerDocument,e)||(a=se.style(e,t)),nt.test(a)&&it.test(t)&&(n=r.width,s=r.minWidth,o=r.maxWidth,r.minWidth=r.maxWidth=r.width=a,a=i.width,r.width=n,r.minWidth=s,r.maxWidth=o)),void 0===a?a:a+""}):me.documentElement.currentStyle&&(et=function(e){return e.currentStyle},tt=function(e,t,i){var n,s,o,a,r=e.style;return i=i||et(e),a=i?i[t]:void 0,null==a&&r&&r[t]&&(a=r[t]),nt.test(a)&&!st.test(t)&&(n=r.left,s=e.runtimeStyle,o=s&&s.left,o&&(s.left=e.currentStyle.left),r.left="fontSize"===t?"1em":a,a=r.pixelLeft+"px",r.left=n,o&&(s.left=o)),void 0===a?a:a+""||"auto"}),function(){function t(){var t,i,n,s;i=me.getElementsByTagName("body")[0],i&&i.style&&(t=me.createElement("div"),n=me.createElement("div"),n.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",i.appendChild(n).appendChild(t),t.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",o=a=!1,l=!0,e.getComputedStyle&&(o="1%"!==(e.getComputedStyle(t,null)||{}).top,a="4px"===(e.getComputedStyle(t,null)||{width:"4px"}).width,s=t.appendChild(me.createElement("div")),s.style.cssText=t.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",s.style.marginRight=s.style.width="0",t.style.width="1px",l=!parseFloat((e.getComputedStyle(s,null)||{}).marginRight)),t.innerHTML="<table><tr><td></td><td>t</td></tr></table>",s=t.getElementsByTagName("td"),s[0].style.cssText="margin:0;border:0;padding:0;display:none",r=0===s[0].offsetHeight,r&&(s[0].style.display="",s[1].style.display="none",r=0===s[0].offsetHeight),i.removeChild(n))}var i,n,s,o,a,r,l;i=me.createElement("div"),i.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",s=i.getElementsByTagName("a")[0],n=s&&s.style,n&&(n.cssText="float:left;opacity:.5",ie.opacity="0.5"===n.opacity,ie.cssFloat=!!n.cssFloat,i.style.backgroundClip="content-box",i.cloneNode(!0).style.backgroundClip="",ie.clearCloneStyle="content-box"===i.style.backgroundClip,ie.boxSizing=""===n.boxSizing||""===n.MozBoxSizing||""===n.WebkitBoxSizing,se.extend(ie,{reliableHiddenOffsets:function(){return null==r&&t(),r},boxSizingReliable:function(){return null==a&&t(),a},pixelPosition:function(){return null==o&&t(),o},reliableMarginRight:function(){return null==l&&t(),l}}))}(),se.swap=function(e,t,i,n){var s,o,a={};for(o in t)a[o]=e.style[o],e.style[o]=t[o];s=i.apply(e,n||[]);for(o in t)e.style[o]=a[o];return s};var ot=/alpha\([^)]*\)/i,at=/opacity\s*=\s*([^)]*)/,rt=/^(none|table(?!-c[ea]).+)/,lt=new RegExp("^("+xe+")(.*)$","i"),ct=new RegExp("^([+-])=("+xe+")","i"),ht={position:"absolute",visibility:"hidden",display:"block"},dt={letterSpacing:"0",fontWeight:"400"},ut=["Webkit","O","Moz","ms"];se.extend({cssHooks:{opacity:{get:function(e,t){if(t){var i=tt(e,"opacity");return""===i?"1":i}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,
lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":ie.cssFloat?"cssFloat":"styleFloat"},style:function(e,t,i,n){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var s,o,a,r=se.camelCase(t),l=e.style;if(t=se.cssProps[r]||(se.cssProps[r]=S(l,r)),a=se.cssHooks[t]||se.cssHooks[r],void 0===i)return a&&"get"in a&&void 0!==(s=a.get(e,!1,n))?s:l[t];if(o=typeof i,"string"===o&&(s=ct.exec(i))&&(i=(s[1]+1)*s[2]+parseFloat(se.css(e,t)),o="number"),null!=i&&i===i&&("number"!==o||se.cssNumber[r]||(i+="px"),ie.clearCloneStyle||""!==i||0!==t.indexOf("background")||(l[t]="inherit"),!(a&&"set"in a&&void 0===(i=a.set(e,i,n)))))try{l[t]=i}catch(c){}}},css:function(e,t,i,n){var s,o,a,r=se.camelCase(t);return t=se.cssProps[r]||(se.cssProps[r]=S(e.style,r)),a=se.cssHooks[t]||se.cssHooks[r],a&&"get"in a&&(o=a.get(e,!0,i)),void 0===o&&(o=tt(e,t,n)),"normal"===o&&t in dt&&(o=dt[t]),""===i||i?(s=parseFloat(o),i===!0||se.isNumeric(s)?s||0:o):o}}),se.each(["height","width"],function(e,t){se.cssHooks[t]={get:function(e,i,n){return i?rt.test(se.css(e,"display"))&&0===e.offsetWidth?se.swap(e,ht,function(){return P(e,t,n)}):P(e,t,n):void 0},set:function(e,i,n){var s=n&&et(e);return A(e,i,n?M(e,t,n,ie.boxSizing&&"border-box"===se.css(e,"boxSizing",!1,s),s):0)}}}),ie.opacity||(se.cssHooks.opacity={get:function(e,t){return at.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var i=e.style,n=e.currentStyle,s=se.isNumeric(t)?"alpha(opacity="+100*t+")":"",o=n&&n.filter||i.filter||"";i.zoom=1,(t>=1||""===t)&&""===se.trim(o.replace(ot,""))&&i.removeAttribute&&(i.removeAttribute("filter"),""===t||n&&!n.filter)||(i.filter=ot.test(o)?o.replace(ot,s):o+" "+s)}}),se.cssHooks.marginRight=x(ie.reliableMarginRight,function(e,t){return t?se.swap(e,{display:"inline-block"},tt,[e,"marginRight"]):void 0}),se.each({margin:"",padding:"",border:"Width"},function(e,t){se.cssHooks[e+t]={expand:function(i){for(var n=0,s={},o="string"==typeof i?i.split(" "):[i];4>n;n++)s[e+Se[n]+t]=o[n]||o[n-2]||o[0];return s}},it.test(e)||(se.cssHooks[e+t].set=A)}),se.fn.extend({css:function(e,t){return Ae(this,function(e,t,i){var n,s,o={},a=0;if(se.isArray(t)){for(n=et(e),s=t.length;s>a;a++)o[t[a]]=se.css(e,t[a],!1,n);return o}return void 0!==i?se.style(e,t,i):se.css(e,t)},e,t,arguments.length>1)},show:function(){return T(this,!0)},hide:function(){return T(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){Te(this)?se(this).show():se(this).hide()})}}),se.Tween=E,E.prototype={constructor:E,init:function(e,t,i,n,s,o){this.elem=e,this.prop=i,this.easing=s||"swing",this.options=t,this.start=this.now=this.cur(),this.end=n,this.unit=o||(se.cssNumber[i]?"":"px")},cur:function(){var e=E.propHooks[this.prop];return e&&e.get?e.get(this):E.propHooks._default.get(this)},run:function(e){var t,i=E.propHooks[this.prop];return this.options.duration?this.pos=t=se.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):E.propHooks._default.set(this),this}},E.prototype.init.prototype=E.prototype,E.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=se.css(e.elem,e.prop,""),t&&"auto"!==t?t:0):e.elem[e.prop]},set:function(e){se.fx.step[e.prop]?se.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[se.cssProps[e.prop]]||se.cssHooks[e.prop])?se.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},E.propHooks.scrollTop=E.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},se.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},se.fx=E.prototype.init,se.fx.step={};var pt,mt,ft=/^(?:toggle|show|hide)$/,gt=new RegExp("^(?:([+-])=|)("+xe+")([a-z%]*)$","i"),vt=/queueHooks$/,bt=[O],yt={"*":[function(e,t){var i=this.createTween(e,t),n=i.cur(),s=gt.exec(t),o=s&&s[3]||(se.cssNumber[e]?"":"px"),a=(se.cssNumber[e]||"px"!==o&&+n)&&gt.exec(se.css(i.elem,e)),r=1,l=20;if(a&&a[3]!==o){o=o||a[3],s=s||[],a=+n||1;do r=r||".5",a/=r,se.style(i.elem,e,a+o);while(r!==(r=i.cur()/n)&&1!==r&&--l)}return s&&(a=i.start=+a||+n||0,i.unit=o,i.end=s[1]?a+(s[1]+1)*s[2]:+s[2]),i}]};se.Animation=se.extend(B,{tweener:function(e,t){se.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var i,n=0,s=e.length;s>n;n++)i=e[n],yt[i]=yt[i]||[],yt[i].unshift(t)},prefilter:function(e,t){t?bt.unshift(e):bt.push(e)}}),se.speed=function(e,t,i){var n=e&&"object"==typeof e?se.extend({},e):{complete:i||!i&&t||se.isFunction(e)&&e,duration:e,easing:i&&t||t&&!se.isFunction(t)&&t};return n.duration=se.fx.off?0:"number"==typeof n.duration?n.duration:n.duration in se.fx.speeds?se.fx.speeds[n.duration]:se.fx.speeds._default,(null==n.queue||n.queue===!0)&&(n.queue="fx"),n.old=n.complete,n.complete=function(){se.isFunction(n.old)&&n.old.call(this),n.queue&&se.dequeue(this,n.queue)},n},se.fn.extend({fadeTo:function(e,t,i,n){return this.filter(Te).css("opacity",0).show().end().animate({opacity:t},e,i,n)},animate:function(e,t,i,n){var s=se.isEmptyObject(e),o=se.speed(t,i,n),a=function(){var t=B(this,se.extend({},e),o);(s||se._data(this,"finish"))&&t.stop(!0)};return a.finish=a,s||o.queue===!1?this.each(a):this.queue(o.queue,a)},stop:function(e,t,i){var n=function(e){var t=e.stop;delete e.stop,t(i)};return"string"!=typeof e&&(i=t,t=e,e=void 0),t&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,s=null!=e&&e+"queueHooks",o=se.timers,a=se._data(this);if(s)a[s]&&a[s].stop&&n(a[s]);else for(s in a)a[s]&&a[s].stop&&vt.test(s)&&n(a[s]);for(s=o.length;s--;)o[s].elem!==this||null!=e&&o[s].queue!==e||(o[s].anim.stop(i),t=!1,o.splice(s,1));(t||!i)&&se.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,i=se._data(this),n=i[e+"queue"],s=i[e+"queueHooks"],o=se.timers,a=n?n.length:0;for(i.finish=!0,se.queue(this,e,[]),s&&s.stop&&s.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;a>t;t++)n[t]&&n[t].finish&&n[t].finish.call(this);delete i.finish})}}),se.each(["toggle","show","hide"],function(e,t){var i=se.fn[t];se.fn[t]=function(e,n,s){return null==e||"boolean"==typeof e?i.apply(this,arguments):this.animate(D(t,!0),e,n,s)}}),se.each({slideDown:D("show"),slideUp:D("hide"),slideToggle:D("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){se.fn[e]=function(e,i,n){return this.animate(t,e,i,n)}}),se.timers=[],se.fx.tick=function(){var e,t=se.timers,i=0;for(pt=se.now();i<t.length;i++)e=t[i],e()||t[i]!==e||t.splice(i--,1);t.length||se.fx.stop(),pt=void 0},se.fx.timer=function(e){se.timers.push(e),e()?se.fx.start():se.timers.pop()},se.fx.interval=13,se.fx.start=function(){mt||(mt=setInterval(se.fx.tick,se.fx.interval))},se.fx.stop=function(){clearInterval(mt),mt=null},se.fx.speeds={slow:600,fast:200,_default:400},se.fn.delay=function(e,t){return e=se.fx?se.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,i){var n=setTimeout(t,e);i.stop=function(){clearTimeout(n)}})},function(){var e,t,i,n,s;t=me.createElement("div"),t.setAttribute("className","t"),t.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",n=t.getElementsByTagName("a")[0],i=me.createElement("select"),s=i.appendChild(me.createElement("option")),e=t.getElementsByTagName("input")[0],n.style.cssText="top:1px",ie.getSetAttribute="t"!==t.className,ie.style=/top/.test(n.getAttribute("style")),ie.hrefNormalized="/a"===n.getAttribute("href"),ie.checkOn=!!e.value,ie.optSelected=s.selected,ie.enctype=!!me.createElement("form").enctype,i.disabled=!0,ie.optDisabled=!s.disabled,e=me.createElement("input"),e.setAttribute("value",""),ie.input=""===e.getAttribute("value"),e.value="t",e.setAttribute("type","radio"),ie.radioValue="t"===e.value}();var wt=/\r/g;se.fn.extend({val:function(e){var t,i,n,s=this[0];{if(arguments.length)return n=se.isFunction(e),this.each(function(i){var s;1===this.nodeType&&(s=n?e.call(this,i,se(this).val()):e,null==s?s="":"number"==typeof s?s+="":se.isArray(s)&&(s=se.map(s,function(e){return null==e?"":e+""})),t=se.valHooks[this.type]||se.valHooks[this.nodeName.toLowerCase()],t&&"set"in t&&void 0!==t.set(this,s,"value")||(this.value=s))});if(s)return t=se.valHooks[s.type]||se.valHooks[s.nodeName.toLowerCase()],t&&"get"in t&&void 0!==(i=t.get(s,"value"))?i:(i=s.value,"string"==typeof i?i.replace(wt,""):null==i?"":i)}}}),se.extend({valHooks:{option:{get:function(e){var t=se.find.attr(e,"value");return null!=t?t:se.trim(se.text(e))}},select:{get:function(e){for(var t,i,n=e.options,s=e.selectedIndex,o="select-one"===e.type||0>s,a=o?null:[],r=o?s+1:n.length,l=0>s?r:o?s:0;r>l;l++)if(i=n[l],(i.selected||l===s)&&(ie.optDisabled?!i.disabled:null===i.getAttribute("disabled"))&&(!i.parentNode.disabled||!se.nodeName(i.parentNode,"optgroup"))){if(t=se(i).val(),o)return t;a.push(t)}return a},set:function(e,t){for(var i,n,s=e.options,o=se.makeArray(t),a=s.length;a--;)if(n=s[a],se.inArray(se.valHooks.option.get(n),o)>=0)try{n.selected=i=!0}catch(r){n.scrollHeight}else n.selected=!1;return i||(e.selectedIndex=-1),s}}}}),se.each(["radio","checkbox"],function(){se.valHooks[this]={set:function(e,t){return se.isArray(t)?e.checked=se.inArray(se(e).val(),t)>=0:void 0}},ie.checkOn||(se.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var _t,kt,It=se.expr.attrHandle,Ct=/^(?:checked|selected)$/i,$t=ie.getSetAttribute,xt=ie.input;se.fn.extend({attr:function(e,t){return Ae(this,se.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){se.removeAttr(this,e)})}}),se.extend({attr:function(e,t,i){var n,s,o=e.nodeType;if(e&&3!==o&&8!==o&&2!==o)return typeof e.getAttribute===Ie?se.prop(e,t,i):(1===o&&se.isXMLDoc(e)||(t=t.toLowerCase(),n=se.attrHooks[t]||(se.expr.match.bool.test(t)?kt:_t)),void 0===i?n&&"get"in n&&null!==(s=n.get(e,t))?s:(s=se.find.attr(e,t),null==s?void 0:s):null!==i?n&&"set"in n&&void 0!==(s=n.set(e,i,t))?s:(e.setAttribute(t,i+""),i):void se.removeAttr(e,t))},removeAttr:function(e,t){var i,n,s=0,o=t&&t.match(ye);if(o&&1===e.nodeType)for(;i=o[s++];)n=se.propFix[i]||i,se.expr.match.bool.test(i)?xt&&$t||!Ct.test(i)?e[n]=!1:e[se.camelCase("default-"+i)]=e[n]=!1:se.attr(e,i,""),e.removeAttribute($t?i:n)},attrHooks:{type:{set:function(e,t){if(!ie.radioValue&&"radio"===t&&se.nodeName(e,"input")){var i=e.value;return e.setAttribute("type",t),i&&(e.value=i),t}}}}}),kt={set:function(e,t,i){return t===!1?se.removeAttr(e,i):xt&&$t||!Ct.test(i)?e.setAttribute(!$t&&se.propFix[i]||i,i):e[se.camelCase("default-"+i)]=e[i]=!0,i}},se.each(se.expr.match.bool.source.match(/\w+/g),function(e,t){var i=It[t]||se.find.attr;It[t]=xt&&$t||!Ct.test(t)?function(e,t,n){var s,o;return n||(o=It[t],It[t]=s,s=null!=i(e,t,n)?t.toLowerCase():null,It[t]=o),s}:function(e,t,i){return i?void 0:e[se.camelCase("default-"+t)]?t.toLowerCase():null}}),xt&&$t||(se.attrHooks.value={set:function(e,t,i){return se.nodeName(e,"input")?void(e.defaultValue=t):_t&&_t.set(e,t,i)}}),$t||(_t={set:function(e,t,i){var n=e.getAttributeNode(i);return n||e.setAttributeNode(n=e.ownerDocument.createAttribute(i)),n.value=t+="","value"===i||t===e.getAttribute(i)?t:void 0}},It.id=It.name=It.coords=function(e,t,i){var n;return i?void 0:(n=e.getAttributeNode(t))&&""!==n.value?n.value:null},se.valHooks.button={get:function(e,t){var i=e.getAttributeNode(t);return i&&i.specified?i.value:void 0},set:_t.set},se.attrHooks.contenteditable={set:function(e,t,i){_t.set(e,""===t?!1:t,i)}},se.each(["width","height"],function(e,t){se.attrHooks[t]={set:function(e,i){return""===i?(e.setAttribute(t,"auto"),i):void 0}}})),ie.style||(se.attrHooks.style={get:function(e){return e.style.cssText||void 0},set:function(e,t){return e.style.cssText=t+""}});var St=/^(?:input|select|textarea|button|object)$/i,Tt=/^(?:a|area)$/i;se.fn.extend({prop:function(e,t){return Ae(this,se.prop,e,t,arguments.length>1)},removeProp:function(e){return e=se.propFix[e]||e,this.each(function(){try{this[e]=void 0,delete this[e]}catch(t){}})}}),se.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(e,t,i){var n,s,o,a=e.nodeType;if(e&&3!==a&&8!==a&&2!==a)return o=1!==a||!se.isXMLDoc(e),o&&(t=se.propFix[t]||t,s=se.propHooks[t]),void 0!==i?s&&"set"in s&&void 0!==(n=s.set(e,i,t))?n:e[t]=i:s&&"get"in s&&null!==(n=s.get(e,t))?n:e[t]},propHooks:{tabIndex:{get:function(e){var t=se.find.attr(e,"tabindex");return t?parseInt(t,10):St.test(e.nodeName)||Tt.test(e.nodeName)&&e.href?0:-1}}}}),ie.hrefNormalized||se.each(["href","src"],function(e,t){se.propHooks[t]={get:function(e){return e.getAttribute(t,4)}}}),ie.optSelected||(se.propHooks.selected={get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}}),se.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){se.propFix[this.toLowerCase()]=this}),ie.enctype||(se.propFix.enctype="encoding");var At=/[\t\r\n\f]/g;se.fn.extend({addClass:function(e){var t,i,n,s,o,a,r=0,l=this.length,c="string"==typeof e&&e;if(se.isFunction(e))return this.each(function(t){se(this).addClass(e.call(this,t,this.className))});if(c)for(t=(e||"").match(ye)||[];l>r;r++)if(i=this[r],n=1===i.nodeType&&(i.className?(" "+i.className+" ").replace(At," "):" ")){for(o=0;s=t[o++];)n.indexOf(" "+s+" ")<0&&(n+=s+" ");a=se.trim(n),i.className!==a&&(i.className=a)}return this},removeClass:function(e){var t,i,n,s,o,a,r=0,l=this.length,c=0===arguments.length||"string"==typeof e&&e;if(se.isFunction(e))return this.each(function(t){se(this).removeClass(e.call(this,t,this.className))});if(c)for(t=(e||"").match(ye)||[];l>r;r++)if(i=this[r],n=1===i.nodeType&&(i.className?(" "+i.className+" ").replace(At," "):"")){for(o=0;s=t[o++];)for(;n.indexOf(" "+s+" ")>=0;)n=n.replace(" "+s+" "," ");a=e?se.trim(n):"",i.className!==a&&(i.className=a)}return this},toggleClass:function(e,t){var i=typeof e;return"boolean"==typeof t&&"string"===i?t?this.addClass(e):this.removeClass(e):se.isFunction(e)?this.each(function(i){se(this).toggleClass(e.call(this,i,this.className,t),t)}):this.each(function(){if("string"===i)for(var t,n=0,s=se(this),o=e.match(ye)||[];t=o[n++];)s.hasClass(t)?s.removeClass(t):s.addClass(t);else(i===Ie||"boolean"===i)&&(this.className&&se._data(this,"__className__",this.className),this.className=this.className||e===!1?"":se._data(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",i=0,n=this.length;n>i;i++)if(1===this[i].nodeType&&(" "+this[i].className+" ").replace(At," ").indexOf(t)>=0)return!0;return!1}}),se.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){se.fn[t]=function(e,i){return arguments.length>0?this.on(t,null,e,i):this.trigger(t)}}),se.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,i){return this.on(e,null,t,i)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,i,n){return this.on(t,e,i,n)},undelegate:function(e,t,i){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",i)}});var Mt=se.now(),Pt=/\?/,Et=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;se.parseJSON=function(t){if(e.JSON&&e.JSON.parse)return e.JSON.parse(t+"");var i,n=null,s=se.trim(t+"");return s&&!se.trim(s.replace(Et,function(e,t,s,o){return i&&t&&(n=0),0===n?e:(i=s||t,n+=!o-!s,"")}))?Function("return "+s)():se.error("Invalid JSON: "+t)},se.parseXML=function(t){var i,n;if(!t||"string"!=typeof t)return null;try{e.DOMParser?(n=new DOMParser,i=n.parseFromString(t,"text/xml")):(i=new ActiveXObject("Microsoft.XMLDOM"),i.async="false",i.loadXML(t))}catch(s){i=void 0}return i&&i.documentElement&&!i.getElementsByTagName("parsererror").length||se.error("Invalid XML: "+t),i};var Nt,Dt,Rt=/#.*$/,Ot=/([?&])_=[^&]*/,Lt=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Bt=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Ft=/^(?:GET|HEAD)$/,Ut=/^\/\//,zt=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,Ht={},jt={},Vt="*/".concat("*");try{Dt=location.href}catch(Wt){Dt=me.createElement("a"),Dt.href="",Dt=Dt.href}Nt=zt.exec(Dt.toLowerCase())||[],se.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Dt,type:"GET",isLocal:Bt.test(Nt[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Vt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":se.parseJSON,"text xml":se.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?z(z(e,se.ajaxSettings),t):z(se.ajaxSettings,e)},ajaxPrefilter:F(Ht),ajaxTransport:F(jt),ajax:function(e,t){function i(e,t,i,n){var s,h,v,b,w,k=t;2!==y&&(y=2,r&&clearTimeout(r),c=void 0,a=n||"",_.readyState=e>0?4:0,s=e>=200&&300>e||304===e,i&&(b=H(d,_,i)),b=j(d,b,_,s),s?(d.ifModified&&(w=_.getResponseHeader("Last-Modified"),w&&(se.lastModified[o]=w),w=_.getResponseHeader("etag"),w&&(se.etag[o]=w)),204===e||"HEAD"===d.type?k="nocontent":304===e?k="notmodified":(k=b.state,h=b.data,v=b.error,s=!v)):(v=k,(e||!k)&&(k="error",0>e&&(e=0))),_.status=e,_.statusText=(t||k)+"",s?m.resolveWith(u,[h,k,_]):m.rejectWith(u,[_,k,v]),_.statusCode(g),g=void 0,l&&p.trigger(s?"ajaxSuccess":"ajaxError",[_,d,s?h:v]),f.fireWith(u,[_,k]),l&&(p.trigger("ajaxComplete",[_,d]),--se.active||se.event.trigger("ajaxStop")))}"object"==typeof e&&(t=e,e=void 0),t=t||{};var n,s,o,a,r,l,c,h,d=se.ajaxSetup({},t),u=d.context||d,p=d.context&&(u.nodeType||u.jquery)?se(u):se.event,m=se.Deferred(),f=se.Callbacks("once memory"),g=d.statusCode||{},v={},b={},y=0,w="canceled",_={readyState:0,getResponseHeader:function(e){var t;if(2===y){if(!h)for(h={};t=Lt.exec(a);)h[t[1].toLowerCase()]=t[2];t=h[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===y?a:null},setRequestHeader:function(e,t){var i=e.toLowerCase();return y||(e=b[i]=b[i]||e,v[e]=t),this},overrideMimeType:function(e){return y||(d.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>y)for(t in e)g[t]=[g[t],e[t]];else _.always(e[_.status]);return this},abort:function(e){var t=e||w;return c&&c.abort(t),i(0,t),this}};if(m.promise(_).complete=f.add,_.success=_.done,_.error=_.fail,d.url=((e||d.url||Dt)+"").replace(Rt,"").replace(Ut,Nt[1]+"//"),d.type=t.method||t.type||d.method||d.type,d.dataTypes=se.trim(d.dataType||"*").toLowerCase().match(ye)||[""],null==d.crossDomain&&(n=zt.exec(d.url.toLowerCase()),d.crossDomain=!(!n||n[1]===Nt[1]&&n[2]===Nt[2]&&(n[3]||("http:"===n[1]?"80":"443"))===(Nt[3]||("http:"===Nt[1]?"80":"443")))),d.data&&d.processData&&"string"!=typeof d.data&&(d.data=se.param(d.data,d.traditional)),U(Ht,d,t,_),2===y)return _;l=d.global,l&&0===se.active++&&se.event.trigger("ajaxStart"),d.type=d.type.toUpperCase(),d.hasContent=!Ft.test(d.type),o=d.url,d.hasContent||(d.data&&(o=d.url+=(Pt.test(o)?"&":"?")+d.data,delete d.data),d.cache===!1&&(d.url=Ot.test(o)?o.replace(Ot,"$1_="+Mt++):o+(Pt.test(o)?"&":"?")+"_="+Mt++)),d.ifModified&&(se.lastModified[o]&&_.setRequestHeader("If-Modified-Since",se.lastModified[o]),se.etag[o]&&_.setRequestHeader("If-None-Match",se.etag[o])),(d.data&&d.hasContent&&d.contentType!==!1||t.contentType)&&_.setRequestHeader("Content-Type",d.contentType),_.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+("*"!==d.dataTypes[0]?", "+Vt+"; q=0.01":""):d.accepts["*"]);for(s in d.headers)_.setRequestHeader(s,d.headers[s]);if(d.beforeSend&&(d.beforeSend.call(u,_,d)===!1||2===y))return _.abort();w="abort";for(s in{success:1,error:1,complete:1})_[s](d[s]);if(c=U(jt,d,t,_)){_.readyState=1,l&&p.trigger("ajaxSend",[_,d]),d.async&&d.timeout>0&&(r=setTimeout(function(){_.abort("timeout")},d.timeout));try{y=1,c.send(v,i)}catch(k){if(!(2>y))throw k;i(-1,k)}}else i(-1,"No Transport");return _},getJSON:function(e,t,i){return se.get(e,t,i,"json")},getScript:function(e,t){return se.get(e,void 0,t,"script")}}),se.each(["get","post"],function(e,t){se[t]=function(e,i,n,s){return se.isFunction(i)&&(s=s||n,n=i,i=void 0),se.ajax({url:e,type:t,dataType:s,data:i,success:n})}}),se.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){se.fn[t]=function(e){return this.on(t,e)}}),se._evalUrl=function(e){return se.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},se.fn.extend({wrapAll:function(e){if(se.isFunction(e))return this.each(function(t){se(this).wrapAll(e.call(this,t))});if(this[0]){var t=se(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstChild&&1===e.firstChild.nodeType;)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return se.isFunction(e)?this.each(function(t){se(this).wrapInner(e.call(this,t))}):this.each(function(){var t=se(this),i=t.contents();i.length?i.wrapAll(e):t.append(e)})},wrap:function(e){var t=se.isFunction(e);return this.each(function(i){se(this).wrapAll(t?e.call(this,i):e)})},unwrap:function(){return this.parent().each(function(){se.nodeName(this,"body")||se(this).replaceWith(this.childNodes)}).end()}}),se.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0||!ie.reliableHiddenOffsets()&&"none"===(e.style&&e.style.display||se.css(e,"display"))},se.expr.filters.visible=function(e){return!se.expr.filters.hidden(e)};var qt=/%20/g,Gt=/\[\]$/,Yt=/\r?\n/g,Kt=/^(?:submit|button|image|reset|file)$/i,Xt=/^(?:input|select|textarea|keygen)/i;se.param=function(e,t){var i,n=[],s=function(e,t){t=se.isFunction(t)?t():null==t?"":t,n[n.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===t&&(t=se.ajaxSettings&&se.ajaxSettings.traditional),se.isArray(e)||e.jquery&&!se.isPlainObject(e))se.each(e,function(){s(this.name,this.value)});else for(i in e)V(i,e[i],t,s);return n.join("&").replace(qt,"+")},se.fn.extend({serialize:function(){return se.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=se.prop(this,"elements");return e?se.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!se(this).is(":disabled")&&Xt.test(this.nodeName)&&!Kt.test(e)&&(this.checked||!Me.test(e))}).map(function(e,t){var i=se(this).val();return null==i?null:se.isArray(i)?se.map(i,function(e){return{name:t.name,value:e.replace(Yt,"\r\n")}}):{name:t.name,value:i.replace(Yt,"\r\n")}}).get()}}),se.ajaxSettings.xhr=void 0!==e.ActiveXObject?function(){return!this.isLocal&&/^(get|post|head|put|delete|options)$/i.test(this.type)&&W()||q()}:W;var Qt=0,Jt={},Zt=se.ajaxSettings.xhr();e.ActiveXObject&&se(e).on("unload",function(){for(var e in Jt)Jt[e](void 0,!0)}),ie.cors=!!Zt&&"withCredentials"in Zt,Zt=ie.ajax=!!Zt,Zt&&se.ajaxTransport(function(e){if(!e.crossDomain||ie.cors){var t;return{send:function(i,n){var s,o=e.xhr(),a=++Qt;if(o.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(s in e.xhrFields)o[s]=e.xhrFields[s];e.mimeType&&o.overrideMimeType&&o.overrideMimeType(e.mimeType),e.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest");for(s in i)void 0!==i[s]&&o.setRequestHeader(s,i[s]+"");o.send(e.hasContent&&e.data||null),t=function(i,s){var r,l,c;if(t&&(s||4===o.readyState))if(delete Jt[a],t=void 0,o.onreadystatechange=se.noop,s)4!==o.readyState&&o.abort();else{c={},r=o.status,"string"==typeof o.responseText&&(c.text=o.responseText);try{l=o.statusText}catch(h){l=""}r||!e.isLocal||e.crossDomain?1223===r&&(r=204):r=c.text?200:404}c&&n(r,l,c,o.getAllResponseHeaders())},e.async?4===o.readyState?setTimeout(t):o.onreadystatechange=Jt[a]=t:t()},abort:function(){t&&t(void 0,!0)}}}}),se.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return se.globalEval(e),e}}}),se.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),se.ajaxTransport("script",function(e){if(e.crossDomain){var t,i=me.head||se("head")[0]||me.documentElement;return{send:function(n,s){t=me.createElement("script"),t.async=!0,e.scriptCharset&&(t.charset=e.scriptCharset),t.src=e.url,t.onload=t.onreadystatechange=function(e,i){(i||!t.readyState||/loaded|complete/.test(t.readyState))&&(t.onload=t.onreadystatechange=null,t.parentNode&&t.parentNode.removeChild(t),t=null,i||s(200,"success"))},i.insertBefore(t,i.firstChild)},abort:function(){t&&t.onload(void 0,!0)}}}});var ei=[],ti=/(=)\?(?=&|$)|\?\?/;se.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=ei.pop()||se.expando+"_"+Mt++;return this[e]=!0,e}}),se.ajaxPrefilter("json jsonp",function(t,i,n){var s,o,a,r=t.jsonp!==!1&&(ti.test(t.url)?"url":"string"==typeof t.data&&!(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&ti.test(t.data)&&"data");return r||"jsonp"===t.dataTypes[0]?(s=t.jsonpCallback=se.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,r?t[r]=t[r].replace(ti,"$1"+s):t.jsonp!==!1&&(t.url+=(Pt.test(t.url)?"&":"?")+t.jsonp+"="+s),t.converters["script json"]=function(){return a||se.error(s+" was not called"),a[0]},t.dataTypes[0]="json",o=e[s],e[s]=function(){a=arguments},n.always(function(){e[s]=o,t[s]&&(t.jsonpCallback=i.jsonpCallback,ei.push(s)),a&&se.isFunction(o)&&o(a[0]),a=o=void 0}),"script"):void 0}),se.parseHTML=function(e,t,i){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(i=t,t=!1),t=t||me;var n=de.exec(e),s=!i&&[];return n?[t.createElement(n[1])]:(n=se.buildFragment([e],t,s),s&&s.length&&se(s).remove(),se.merge([],n.childNodes))};var ii=se.fn.load;se.fn.load=function(e,t,i){if("string"!=typeof e&&ii)return ii.apply(this,arguments);var n,s,o,a=this,r=e.indexOf(" ");return r>=0&&(n=se.trim(e.slice(r,e.length)),e=e.slice(0,r)),se.isFunction(t)?(i=t,t=void 0):t&&"object"==typeof t&&(o="POST"),a.length>0&&se.ajax({url:e,type:o,dataType:"html",data:t}).done(function(e){s=arguments,a.html(n?se("<div>").append(se.parseHTML(e)).find(n):e)}).complete(i&&function(e,t){a.each(i,s||[e.responseText,t,e])}),this},se.expr.filters.animated=function(e){return se.grep(se.timers,function(t){return e===t.elem}).length};var ni=e.document.documentElement;se.offset={setOffset:function(e,t,i){var n,s,o,a,r,l,c,h=se.css(e,"position"),d=se(e),u={};"static"===h&&(e.style.position="relative"),r=d.offset(),o=se.css(e,"top"),l=se.css(e,"left"),c=("absolute"===h||"fixed"===h)&&se.inArray("auto",[o,l])>-1,c?(n=d.position(),a=n.top,s=n.left):(a=parseFloat(o)||0,s=parseFloat(l)||0),se.isFunction(t)&&(t=t.call(e,i,r)),null!=t.top&&(u.top=t.top-r.top+a),null!=t.left&&(u.left=t.left-r.left+s),"using"in t?t.using.call(e,u):d.css(u)}},se.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){se.offset.setOffset(this,e,t)});var t,i,n={top:0,left:0},s=this[0],o=s&&s.ownerDocument;if(o)return t=o.documentElement,se.contains(t,s)?(typeof s.getBoundingClientRect!==Ie&&(n=s.getBoundingClientRect()),i=G(o),{top:n.top+(i.pageYOffset||t.scrollTop)-(t.clientTop||0),left:n.left+(i.pageXOffset||t.scrollLeft)-(t.clientLeft||0)}):n},position:function(){if(this[0]){var e,t,i={top:0,left:0},n=this[0];return"fixed"===se.css(n,"position")?t=n.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),se.nodeName(e[0],"html")||(i=e.offset()),i.top+=se.css(e[0],"borderTopWidth",!0),i.left+=se.css(e[0],"borderLeftWidth",!0)),{top:t.top-i.top-se.css(n,"marginTop",!0),left:t.left-i.left-se.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||ni;e&&!se.nodeName(e,"html")&&"static"===se.css(e,"position");)e=e.offsetParent;return e||ni})}}),se.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var i=/Y/.test(t);se.fn[e]=function(n){return Ae(this,function(e,n,s){var o=G(e);return void 0===s?o?t in o?o[t]:o.document.documentElement[n]:e[n]:void(o?o.scrollTo(i?se(o).scrollLeft():s,i?s:se(o).scrollTop()):e[n]=s)},e,n,arguments.length,null)}}),se.each(["top","left"],function(e,t){se.cssHooks[t]=x(ie.pixelPosition,function(e,i){return i?(i=tt(e,t),nt.test(i)?se(e).position()[t]+"px":i):void 0})}),se.each({Height:"height",Width:"width"},function(e,t){se.each({padding:"inner"+e,content:t,"":"outer"+e},function(i,n){se.fn[n]=function(n,s){var o=arguments.length&&(i||"boolean"!=typeof n),a=i||(n===!0||s===!0?"margin":"border");return Ae(this,function(t,i,n){var s;return se.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(s=t.documentElement,Math.max(t.body["scroll"+e],s["scroll"+e],t.body["offset"+e],s["offset"+e],s["client"+e])):void 0===n?se.css(t,i,a):se.style(t,i,n,a)},t,o?n:void 0,o,null)}})}),se.fn.size=function(){return this.length},se.fn.andSelf=se.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return se});var si=e.jQuery,oi=e.$;return se.noConflict=function(t){return e.$===se&&(e.$=oi),t&&e.jQuery===se&&(e.jQuery=si),se},typeof t===Ie&&(e.jQuery=e.$=se),se}),function(e){"use strict";function t(e){var t=i(e);return t?"</"+t+">":""}function i(e){var t=(e||"").match(/<\/*([a-z0-9\:\-\_]+)/i);return t?t[1]:null}var n=["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"],s=["p","ul","ol","pre","blockquote","h1","h2","h3","h4","h5","h6"],o=function(e,o,a){function r(){var e=0;if(p.unitCount<b.limit)return!1;if(!b.keepContext)return!0;for(;e<c.length;e++)if(~b.contextualTags.indexOf(i(c[e])))return!1;return!0}function l(e){switch(b.countingType){case v:!!y.test(e+"")!==p.countState&&(p.countState=!!y.test(e+""),p.countState||p.unitCount++);break;case g:""!==e&&p.unitCount++}}var c=[],h=0,d="",u=0,p={unitCount:0,countState:!1},m="",f="",g=-1,v=-2,b=o&&"object"==typeof o?o:{},y=b.wordChars instanceof RegExp?b.wordChars:new XRegExp("[\\p{L}0-9\\-\\']","i");b.countingType=isNaN(Number(b.words))?g:v,b.round&&(b.contextualTags=s),b.keepContext=!!b.contextualTags,b.contextualTags=b.keepContext&&Array.isArray(b.contextualTags)?b.contextualTags:[],b.limit=b.countingType===v?Number(b.words):Number(b.characters),b.limit=isNaN(b.limit)?1/0:b.limit;for(var w=0,_=1,k=-1,I=-2,C=-3,$=!1;h<e.length&&!$;h++){switch(u!==w&&(m+=e[h]),e[h]){case"<":if(u===w&&e[h+1].match(/[a-z0-9\-\_\/\!]/)){if(r()){$=!0;break}u=_,m+=e[h]}break;case"!":u===_&&"<"===e[h-1]&&(u=C);break;case"-":u===C&&(u=C);break;case'"':if(u===k)u=_;else{if(u===I)break;u!==w&&(u=k)}break;case"'":if(u===I)u=_;else{if(u===k)break;u!==w&&(u=I)}break;case">":if(u===_){if(u=w,f+=m,d=i(m),m.match(/<\s*\//)?i(c[c.length-1])===d&&c.pop():n.indexOf(d)<0&&!m.match(/\/\s*>$/)&&c.push(m),m="",!r()){l("");continue}}else if(u===C&&"--"===e.substring(h-2,h)&&(u=w,f+=m,m="",!r())){l("");continue}}if(u===w){if(r())break;l(e[h]),f+=e[h]}}for(f=f.trim(),b.append&&r()&&(f+=b.append),f+=m;c.length;)f+=t(c.pop());return f};return"undefined"!=typeof module&&module.exports?module.exports=o:void(e.downsize=o)}(this),window.matchMedia||(window.matchMedia=function(e){"use strict";var t=e.document,i=t.documentElement,n=[],s=0,o="",a={},r=/\s*(only|not)?\s*(screen|print|[a-z\-]+)\s*(and)?\s*/i,l=/^\s*\(\s*(-[a-z]+-)?(min-|max-)?([a-z\-]+)\s*(:?\s*([0-9]+(\.[0-9]+)?|portrait|landscape)(px|em|dppx|dpcm|rem|%|in|cm|mm|ex|pt|pc|\/([0-9]+(\.[0-9]+)?))?)?\s*\)\s*$/,c=0,h=function(e){var t=-1!==e.indexOf(",")&&e.split(",")||[e],i=t.length-1,n=i,s=null,c=null,h="",d=0,u=!1,p="",m="",f=null,g=0,v=0,b=null,y="",w="",_="",k="",I="",C=!1;
if(""===e)return!0;do if(s=t[n-i],u=!1,c=s.match(r),c&&(h=c[0],d=c.index),!c||-1===s.substring(0,d).indexOf("(")&&(d||!c[3]&&h!==c.input))C=!1;else{if(m=s,u="not"===c[1],d||(p=c[2],m=s.substring(h.length)),C=p===o||"all"===p||""===p,f=-1!==m.indexOf(" and ")&&m.split(" and ")||[m],g=f.length-1,v=g,C&&g>=0&&""!==m)do{if(b=f[g].match(l),!b||!a[b[3]]){C=!1;break}if(y=b[2],w=b[5],k=w,_=b[7],I=a[b[3]],_&&(k="px"===_?Number(w):"em"===_||"rem"===_?16*w:b[8]?(w/b[8]).toFixed(2):"dppx"===_?96*w:"dpcm"===_?.3937*w:Number(w)),C="min-"===y&&k?I>=k:"max-"===y&&k?k>=I:k?I===k:!!I,!C)break}while(g--);if(C)break}while(i--);return u?!C:C},d=function(){var t=e.innerWidth||i.clientWidth,n=e.innerHeight||i.clientHeight,s=e.screen.width,o=e.screen.height,r=e.screen.colorDepth,l=e.devicePixelRatio;a.width=t,a.height=n,a["aspect-ratio"]=(t/n).toFixed(2),a["device-width"]=s,a["device-height"]=o,a["device-aspect-ratio"]=(s/o).toFixed(2),a.color=r,a["color-index"]=Math.pow(2,r),a.orientation=n>=t?"portrait":"landscape",a.resolution=l&&96*l||e.screen.deviceXDPI||96,a["device-pixel-ratio"]=l||1},u=function(){clearTimeout(c),c=setTimeout(function(){var t=null,i=s-1,o=i,a=!1;if(i>=0){d();do if(t=n[o-i],t&&(a=h(t.mql.media),(a&&!t.mql.matches||!a&&t.mql.matches)&&(t.mql.matches=a,t.listeners)))for(var r=0,l=t.listeners.length;l>r;r++)t.listeners[r]&&t.listeners[r].call(e,t.mql);while(i--)}},10)},p=function(){var i=t.getElementsByTagName("head")[0],n=t.createElement("style"),s=null,a=["screen","print","speech","projection","handheld","tv","braille","embossed","tty"],r=0,l=a.length,c="#mediamatchjs { position: relative; z-index: 0; }",h="",p=e.addEventListener||(h="on")&&e.attachEvent;for(n.type="text/css",n.id="mediamatchjs",i.appendChild(n),s=e.getComputedStyle&&e.getComputedStyle(n)||n.currentStyle;l>r;r++)c+="@media "+a[r]+" { #mediamatchjs { position: relative; z-index: "+r+" } }";n.styleSheet?n.styleSheet.cssText=c:n.textContent=c,o=a[1*s.zIndex||0],i.removeChild(n),d(),p(h+"resize",u),p(h+"orientationchange",u)};return p(),function(e){var t=s,i={matches:!1,media:e,addListener:function(e){n[t].listeners||(n[t].listeners=[]),e&&n[t].listeners.push(e)},removeListener:function(e){var i=n[t],s=0,o=0;if(i)for(o=i.listeners.length;o>s;s++)i.listeners[s]===e&&i.listeners.splice(s,1)}};return""===e?(i.matches=!0,i):(i.matches=h(e),s=n.push({mql:i,listeners:null}),i)}}(window)),window.Modernizr=function(e,t,i){function n(e){y.cssText=e}function s(e,t){return n(I.join(e+";")+(t||""))}function o(e,t){return typeof e===t}function a(e,t){return!!~(""+e).indexOf(t)}function r(e,t){for(var n in e){var s=e[n];if(!a(s,"-")&&y[s]!==i)return"pfx"==t?s:!0}return!1}function l(e,t,n){for(var s in e){var a=t[e[s]];if(a!==i)return n===!1?e[s]:o(a,"function")?a.bind(n||t):a}return!1}function c(e,t,i){var n=e.charAt(0).toUpperCase()+e.slice(1),s=(e+" "+$.join(n+" ")+n).split(" ");return o(t,"string")||o(t,"undefined")?r(s,t):(s=(e+" "+x.join(n+" ")+n).split(" "),l(s,t,i))}function h(){m.input=function(i){for(var n=0,s=i.length;s>n;n++)M[i[n]]=i[n]in w;return M.list&&(M.list=!!t.createElement("datalist")&&!!e.HTMLDataListElement),M}("autocomplete autofocus list placeholder max min multiple pattern required step".split(" ")),m.inputtypes=function(e){for(var n,s,o,a=0,r=e.length;r>a;a++)w.setAttribute("type",s=e[a]),n="text"!==w.type,n&&(w.value=_,w.style.cssText="position:absolute;visibility:hidden;",/^range$/.test(s)&&w.style.WebkitAppearance!==i?(g.appendChild(w),o=t.defaultView,n=o.getComputedStyle&&"textfield"!==o.getComputedStyle(w,null).WebkitAppearance&&0!==w.offsetHeight,g.removeChild(w)):/^(search|tel)$/.test(s)||(n=/^(url|email)$/.test(s)?w.checkValidity&&w.checkValidity()===!1:w.value!=_)),A[e[a]]=!!n;return A}("search tel url email datetime date month week time datetime-local number range color".split(" "))}var d,u,p="2.8.2",m={},f=!0,g=t.documentElement,v="modernizr",b=t.createElement(v),y=b.style,w=t.createElement("input"),_=":)",k={}.toString,I=" -webkit- -moz- -o- -ms- ".split(" "),C="Webkit Moz O ms",$=C.split(" "),x=C.toLowerCase().split(" "),S={svg:"http://www.w3.org/2000/svg"},T={},A={},M={},P=[],E=P.slice,N=function(e,i,n,s){var o,a,r,l,c=t.createElement("div"),h=t.body,d=h||t.createElement("body");if(parseInt(n,10))for(;n--;)r=t.createElement("div"),r.id=s?s[n]:v+(n+1),c.appendChild(r);return o=["&#173;",'<style id="s',v,'">',e,"</style>"].join(""),c.id=v,(h?c:d).innerHTML+=o,d.appendChild(c),h||(d.style.background="",d.style.overflow="hidden",l=g.style.overflow,g.style.overflow="hidden",g.appendChild(d)),a=i(c,e),h?c.parentNode.removeChild(c):(d.parentNode.removeChild(d),g.style.overflow=l),!!a},D=function(){function e(e,s){s=s||t.createElement(n[e]||"div"),e="on"+e;var a=e in s;return a||(s.setAttribute||(s=t.createElement("div")),s.setAttribute&&s.removeAttribute&&(s.setAttribute(e,""),a=o(s[e],"function"),o(s[e],"undefined")||(s[e]=i),s.removeAttribute(e))),s=null,a}var n={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return e}(),R={}.hasOwnProperty;u=o(R,"undefined")||o(R.call,"undefined")?function(e,t){return t in e&&o(e.constructor.prototype[t],"undefined")}:function(e,t){return R.call(e,t)},Function.prototype.bind||(Function.prototype.bind=function(e){var t=this;if("function"!=typeof t)throw new TypeError;var i=E.call(arguments,1),n=function(){if(this instanceof n){var s=function(){};s.prototype=t.prototype;var o=new s,a=t.apply(o,i.concat(E.call(arguments)));return Object(a)===a?a:o}return t.apply(e,i.concat(E.call(arguments)))};return n}),T.flexbox=function(){return c("flexWrap")},T.flexboxlegacy=function(){return c("boxDirection")},T.canvas=function(){var e=t.createElement("canvas");return!!e.getContext&&!!e.getContext("2d")},T.canvastext=function(){return!!m.canvas&&!!o(t.createElement("canvas").getContext("2d").fillText,"function")},T.webgl=function(){return!!e.WebGLRenderingContext},T.touch=function(){var i;return"ontouchstart"in e||e.DocumentTouch&&t instanceof DocumentTouch?i=!0:N(["@media (",I.join("touch-enabled),("),v,")","{#modernizr{top:9px;position:absolute}}"].join(""),function(e){i=9===e.offsetTop}),i},T.geolocation=function(){return"geolocation"in navigator},T.postmessage=function(){return!!e.postMessage},T.websqldatabase=function(){return!!e.openDatabase},T.indexedDB=function(){return!!c("indexedDB",e)},T.hashchange=function(){return D("hashchange",e)&&(t.documentMode===i||t.documentMode>7)},T.history=function(){return!!e.history&&!!history.pushState},T.draganddrop=function(){var e=t.createElement("div");return"draggable"in e||"ondragstart"in e&&"ondrop"in e},T.websockets=function(){return"WebSocket"in e||"MozWebSocket"in e},T.rgba=function(){return n("background-color:rgba(150,255,150,.5)"),a(y.backgroundColor,"rgba")},T.hsla=function(){return n("background-color:hsla(120,40%,100%,.5)"),a(y.backgroundColor,"rgba")||a(y.backgroundColor,"hsla")},T.multiplebgs=function(){return n("background:url(https://),url(https://),red url(https://)"),/(url\s*\(.*?){3}/.test(y.background)},T.backgroundsize=function(){return c("backgroundSize")},T.borderimage=function(){return c("borderImage")},T.borderradius=function(){return c("borderRadius")},T.boxshadow=function(){return c("boxShadow")},T.textshadow=function(){return""===t.createElement("div").style.textShadow},T.opacity=function(){return s("opacity:.55"),/^0.55$/.test(y.opacity)},T.cssanimations=function(){return c("animationName")},T.csscolumns=function(){return c("columnCount")},T.cssgradients=function(){var e="background-image:",t="gradient(linear,left top,right bottom,from(#9f9),to(white));",i="linear-gradient(left top,#9f9, white);";return n((e+"-webkit- ".split(" ").join(t+e)+I.join(i+e)).slice(0,-e.length)),a(y.backgroundImage,"gradient")},T.cssreflections=function(){return c("boxReflect")},T.csstransforms=function(){return!!c("transform")},T.csstransforms3d=function(){var e=!!c("perspective");return e&&"webkitPerspective"in g.style&&N("@media (transform-3d),(-webkit-transform-3d){#modernizr{left:9px;position:absolute;height:3px;}}",function(t,i){e=9===t.offsetLeft&&3===t.offsetHeight}),e},T.csstransitions=function(){return c("transition")},T.fontface=function(){var e;return N('@font-face {font-family:"font";src:url("https://")}',function(i,n){var s=t.getElementById("smodernizr"),o=s.sheet||s.styleSheet,a=o?o.cssRules&&o.cssRules[0]?o.cssRules[0].cssText:o.cssText||"":"";e=/src/i.test(a)&&0===a.indexOf(n.split(" ")[0])}),e},T.generatedcontent=function(){var e;return N(["#",v,"{font:0/0 a}#",v,':after{content:"',_,'";visibility:hidden;font:3px/1 a}'].join(""),function(t){e=t.offsetHeight>=3}),e},T.video=function(){var e=t.createElement("video"),i=!1;try{(i=!!e.canPlayType)&&(i=new Boolean(i),i.ogg=e.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,""),i.h264=e.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,""),i.webm=e.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,""))}catch(n){}return i},T.audio=function(){var e=t.createElement("audio"),i=!1;try{(i=!!e.canPlayType)&&(i=new Boolean(i),i.ogg=e.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),i.mp3=e.canPlayType("audio/mpeg;").replace(/^no$/,""),i.wav=e.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),i.m4a=(e.canPlayType("audio/x-m4a;")||e.canPlayType("audio/aac;")).replace(/^no$/,""))}catch(n){}return i},T.localstorage=function(){try{return localStorage.setItem(v,v),localStorage.removeItem(v),!0}catch(e){return!1}},T.sessionstorage=function(){try{return sessionStorage.setItem(v,v),sessionStorage.removeItem(v),!0}catch(e){return!1}},T.webworkers=function(){return!!e.Worker},T.applicationcache=function(){return!!e.applicationCache},T.svg=function(){return!!t.createElementNS&&!!t.createElementNS(S.svg,"svg").createSVGRect},T.inlinesvg=function(){var e=t.createElement("div");return e.innerHTML="<svg/>",(e.firstChild&&e.firstChild.namespaceURI)==S.svg},T.smil=function(){return!!t.createElementNS&&/SVGAnimate/.test(k.call(t.createElementNS(S.svg,"animate")))},T.svgclippaths=function(){return!!t.createElementNS&&/SVGClipPath/.test(k.call(t.createElementNS(S.svg,"clipPath")))};for(var O in T)u(T,O)&&(d=O.toLowerCase(),m[d]=T[O](),P.push((m[d]?"":"no-")+d));return m.input||h(),m.addTest=function(e,t){if("object"==typeof e)for(var n in e)u(e,n)&&m.addTest(n,e[n]);else{if(e=e.toLowerCase(),m[e]!==i)return m;t="function"==typeof t?t():t,"undefined"!=typeof f&&f&&(g.className+=" "+(t?"":"no-")+e),m[e]=t}return m},n(""),b=w=null,function(e,t){function i(e,t){var i=e.createElement("p"),n=e.getElementsByTagName("head")[0]||e.documentElement;return i.innerHTML="x<style>"+t+"</style>",n.insertBefore(i.lastChild,n.firstChild)}function n(){var e=b.elements;return"string"==typeof e?e.split(" "):e}function s(e){var t=v[e[f]];return t||(t={},g++,e[f]=g,v[g]=t),t}function o(e,i,n){if(i||(i=t),h)return i.createElement(e);n||(n=s(i));var o;return o=n.cache[e]?n.cache[e].cloneNode():m.test(e)?(n.cache[e]=n.createElem(e)).cloneNode():n.createElem(e),!o.canHaveChildren||p.test(e)||o.tagUrn?o:n.frag.appendChild(o)}function a(e,i){if(e||(e=t),h)return e.createDocumentFragment();i=i||s(e);for(var o=i.frag.cloneNode(),a=0,r=n(),l=r.length;l>a;a++)o.createElement(r[a]);return o}function r(e,t){t.cache||(t.cache={},t.createElem=e.createElement,t.createFrag=e.createDocumentFragment,t.frag=t.createFrag()),e.createElement=function(i){return b.shivMethods?o(i,e,t):t.createElem(i)},e.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+n().join().replace(/[\w\-]+/g,function(e){return t.createElem(e),t.frag.createElement(e),'c("'+e+'")'})+");return n}")(b,t.frag)}function l(e){e||(e=t);var n=s(e);return b.shivCSS&&!c&&!n.hasCSS&&(n.hasCSS=!!i(e,"article,aside,dialog,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}mark{background:#FF0;color:#000}template{display:none}")),h||r(e,n),e}var c,h,d="3.7.0",u=e.html5||{},p=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,m=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,f="_html5shiv",g=0,v={};!function(){try{var e=t.createElement("a");e.innerHTML="<xyz></xyz>",c="hidden"in e,h=1==e.childNodes.length||function(){t.createElement("a");var e=t.createDocumentFragment();return"undefined"==typeof e.cloneNode||"undefined"==typeof e.createDocumentFragment||"undefined"==typeof e.createElement}()}catch(i){c=!0,h=!0}}();var b={elements:u.elements||"abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output progress section summary template time video",version:d,shivCSS:u.shivCSS!==!1,supportsUnknownElements:h,shivMethods:u.shivMethods!==!1,type:"default",shivDocument:l,createElement:o,createDocumentFragment:a};e.html5=b,l(t)}(this,t),m._version=p,m._prefixes=I,m._domPrefixes=x,m._cssomPrefixes=$,m.hasEvent=D,m.testProp=function(e){return r([e])},m.testAllProps=c,m.testStyles=N,g.className=g.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(f?" js "+P.join(" "):""),m}(this,this.document),function(e,t,i){function n(e){return"[object Function]"==g.call(e)}function s(e){return"string"==typeof e}function o(){}function a(e){return!e||"loaded"==e||"complete"==e||"uninitialized"==e}function r(){var e=v.shift();b=1,e?e.t?m(function(){("c"==e.t?u.injectCss:u.injectJs)(e.s,0,e.a,e.x,e.e,1)},0):(e(),r()):b=0}function l(e,i,n,s,o,l,c){function h(t){if(!p&&a(d.readyState)&&(y.r=p=1,!b&&r(),d.onload=d.onreadystatechange=null,t)){"img"!=e&&m(function(){_.removeChild(d)},50);for(var n in x[i])x[i].hasOwnProperty(n)&&x[i][n].onload()}}var c=c||u.errorTimeout,d=t.createElement(e),p=0,g=0,y={t:n,s:i,e:o,a:l,x:c};1===x[i]&&(g=1,x[i]=[]),"object"==e?d.data=i:(d.src=i,d.type=e),d.width=d.height="0",d.onerror=d.onload=d.onreadystatechange=function(){h.call(this,g)},v.splice(s,0,y),"img"!=e&&(g||2===x[i]?(_.insertBefore(d,w?null:f),m(h,c)):x[i].push(d))}function c(e,t,i,n,o){return b=0,t=t||"j",s(e)?l("c"==t?I:k,e,t,this.i++,i,n,o):(v.splice(this.i++,0,e),1==v.length&&r()),this}function h(){var e=u;return e.loader={load:c,i:0},e}var d,u,p=t.documentElement,m=e.setTimeout,f=t.getElementsByTagName("script")[0],g={}.toString,v=[],b=0,y="MozAppearance"in p.style,w=y&&!!t.createRange().compareNode,_=w?p:f.parentNode,p=e.opera&&"[object Opera]"==g.call(e.opera),p=!!t.attachEvent&&!p,k=y?"object":p?"script":"img",I=p?"script":k,C=Array.isArray||function(e){return"[object Array]"==g.call(e)},$=[],x={},S={timeout:function(e,t){return t.length&&(e.timeout=t[0]),e}};u=function(e){function t(e){var t,i,n,e=e.split("!"),s=$.length,o=e.pop(),a=e.length,o={url:o,origUrl:o,prefixes:e};for(i=0;a>i;i++)n=e[i].split("="),(t=S[n.shift()])&&(o=t(o,n));for(i=0;s>i;i++)o=$[i](o);return o}function a(e,s,o,a,r){var l=t(e),c=l.autoCallback;l.url.split(".").pop().split("?").shift(),l.bypass||(s&&(s=n(s)?s:s[e]||s[a]||s[e.split("/").pop().split("?")[0]]),l.instead?l.instead(e,s,o,a,r):(x[l.url]?l.noexec=!0:x[l.url]=1,o.load(l.url,l.forceCSS||!l.forceJS&&"css"==l.url.split(".").pop().split("?").shift()?"c":i,l.noexec,l.attrs,l.timeout),(n(s)||n(c))&&o.load(function(){h(),s&&s(l.origUrl,r,a),c&&c(l.origUrl,r,a),x[l.url]=2})))}function r(e,t){function i(e,i){if(e){if(s(e))i||(d=function(){var e=[].slice.call(arguments);u.apply(this,e),p()}),a(e,d,t,0,c);else if(Object(e)===e)for(l in r=function(){var t,i=0;for(t in e)e.hasOwnProperty(t)&&i++;return i}(),e)e.hasOwnProperty(l)&&(!i&&!--r&&(n(d)?d=function(){var e=[].slice.call(arguments);u.apply(this,e),p()}:d[l]=function(e){return function(){var t=[].slice.call(arguments);e&&e.apply(this,t),p()}}(u[l])),a(e[l],d,t,l,c))}else!i&&p()}var r,l,c=!!e.test,h=e.load||e.both,d=e.callback||o,u=d,p=e.complete||o;i(c?e.yep:e.nope,!!h),h&&i(h)}var l,c,d=this.yepnope.loader;if(s(e))a(e,0,d,0);else if(C(e))for(l=0;l<e.length;l++)c=e[l],s(c)?a(c,0,d,0):C(c)?u(c):Object(c)===c&&r(c,d);else Object(e)===e&&r(e,d)},u.addPrefix=function(e,t){S[e]=t},u.addFilter=function(e){$.push(e)},u.errorTimeout=1e4,null==t.readyState&&t.addEventListener&&(t.readyState="loading",t.addEventListener("DOMContentLoaded",d=function(){t.removeEventListener("DOMContentLoaded",d,0),t.readyState="complete"},0)),e.yepnope=h(),e.yepnope.executeStack=r,e.yepnope.injectJs=function(e,i,n,s,l,c){var h,d,p=t.createElement("script"),s=s||u.errorTimeout;p.src=e;for(d in n)p.setAttribute(d,n[d]);i=c?r:i||o,p.onreadystatechange=p.onload=function(){!h&&a(p.readyState)&&(h=1,i(),p.onload=p.onreadystatechange=null)},m(function(){h||(h=1,i(1))},s),l?p.onload():f.parentNode.insertBefore(p,f)},e.yepnope.injectCss=function(e,i,n,s,a,l){var c,s=t.createElement("link"),i=l?r:i||o;s.href=e,s.rel="stylesheet",s.type="text/css";for(c in n)s.setAttribute(c,n[c]);a||(f.parentNode.insertBefore(s,f),m(i,0))}}(this,document),Modernizr.load=function(){yepnope.apply(window,[].slice.call(arguments,0))},function(e,t,i){var n=window.matchMedia;"undefined"!=typeof module&&module.exports?module.exports=i(n):"function"==typeof define&&define.amd?define(function(){return t[e]=i(n)}):t[e]=i(n)}("enquire",this,function(e){"use strict";function t(e,t){var i,n=0,s=e.length;for(n;s>n&&(i=t(e[n],n),i!==!1);n++);}function i(e){return"[object Array]"===Object.prototype.toString.apply(e)}function n(e){return"function"==typeof e}function s(e){this.options=e,!e.deferSetup&&this.setup()}function o(t,i){this.query=t,this.isUnconditional=i,this.handlers=[],this.mql=e(t);var n=this;this.listener=function(e){n.mql=e,n.assess()},this.mql.addListener(this.listener)}function a(){if(!e)throw new Error("matchMedia not present, legacy browsers require a polyfill");this.queries={},this.browserIsIncapable=!e("only all").matches}return s.prototype={setup:function(){this.options.setup&&this.options.setup(),this.initialised=!0},on:function(){!this.initialised&&this.setup(),this.options.match&&this.options.match()},off:function(){this.options.unmatch&&this.options.unmatch()},destroy:function(){this.options.destroy?this.options.destroy():this.off()},equals:function(e){return this.options===e||this.options.match===e}},o.prototype={addHandler:function(e){var t=new s(e);this.handlers.push(t),this.matches()&&t.on()},removeHandler:function(e){var i=this.handlers;t(i,function(t,n){return t.equals(e)?(t.destroy(),!i.splice(n,1)):void 0})},matches:function(){return this.mql.matches||this.isUnconditional},clear:function(){t(this.handlers,function(e){e.destroy()}),this.mql.removeListener(this.listener),this.handlers.length=0},assess:function(){var e=this.matches()?"on":"off";t(this.handlers,function(t){t[e]()})}},a.prototype={register:function(e,s,a){var r=this.queries,l=a&&this.browserIsIncapable;return r[e]||(r[e]=new o(e,l)),n(s)&&(s={match:s}),i(s)||(s=[s]),t(s,function(t){n(t)&&(t={match:t}),r[e].addHandler(t)}),this},unregister:function(e,t){var i=this.queries[e];return i&&(t?i.removeHandler(t):(i.clear(),delete this.queries[e])),this}},new a}),function(e,t){if("function"==typeof define&&define.amd)define(["underscore","jquery","exports"],function(i,n,s){e.Backbone=t(e,s,i,n)});else if("undefined"!=typeof exports){var i=require("underscore");t(e,exports,i)}else e.Backbone=t(e,{},e._,e.jQuery||e.Zepto||e.ender||e.$)}(this,function(e,t,i,n){var s=e.Backbone,o=[],a=o.slice;t.VERSION="1.1.2",t.$=n,t.noConflict=function(){return e.Backbone=s,this},t.emulateHTTP=!1,t.emulateJSON=!1;var r=t.Events={on:function(e,t,i){if(!c(this,"on",e,[t,i])||!t)return this;this._events||(this._events={});var n=this._events[e]||(this._events[e]=[]);return n.push({callback:t,context:i,ctx:i||this}),this},once:function(e,t,n){if(!c(this,"once",e,[t,n])||!t)return this;var s=this,o=i.once(function(){s.off(e,o),t.apply(this,arguments)});return o._callback=t,this.on(e,o,n)},off:function(e,t,n){if(!this._events||!c(this,"off",e,[t,n]))return this;if(!e&&!t&&!n)return this._events=void 0,this;for(var s=e?[e]:i.keys(this._events),o=0,a=s.length;a>o;o++){e=s[o];var r=this._events[e];if(r)if(t||n){for(var l=[],h=0,d=r.length;d>h;h++){var u=r[h];(t&&t!==u.callback&&t!==u.callback._callback||n&&n!==u.context)&&l.push(u)}l.length?this._events[e]=l:delete this._events[e]}else delete this._events[e]}return this},trigger:function(e){if(!this._events)return this;var t=a.call(arguments,1);if(!c(this,"trigger",e,t))return this;var i=this._events[e],n=this._events.all;return i&&h(i,t),n&&h(n,arguments),this},stopListening:function(e,t,n){var s=this._listeningTo;if(!s)return this;var o=!t&&!n;n||"object"!=typeof t||(n=this),e&&((s={})[e._listenId]=e);for(var a in s)e=s[a],e.off(t,n,this),(o||i.isEmpty(e._events))&&delete this._listeningTo[a];return this}},l=/\s+/,c=function(e,t,i,n){if(!i)return!0;if("object"==typeof i){for(var s in i)e[t].apply(e,[s,i[s]].concat(n));return!1}if(l.test(i)){for(var o=i.split(l),a=0,r=o.length;r>a;a++)e[t].apply(e,[o[a]].concat(n));return!1}return!0},h=function(e,t){var i,n=-1,s=e.length,o=t[0],a=t[1],r=t[2];switch(t.length){case 0:for(;++n<s;)(i=e[n]).callback.call(i.ctx);return;case 1:for(;++n<s;)(i=e[n]).callback.call(i.ctx,o);return;case 2:for(;++n<s;)(i=e[n]).callback.call(i.ctx,o,a);return;case 3:for(;++n<s;)(i=e[n]).callback.call(i.ctx,o,a,r);return;default:for(;++n<s;)(i=e[n]).callback.apply(i.ctx,t);return}},d={listenTo:"on",listenToOnce:"once"};i.each(d,function(e,t){r[t]=function(t,n,s){var o=this._listeningTo||(this._listeningTo={}),a=t._listenId||(t._listenId=i.uniqueId("l"));return o[a]=t,s||"object"!=typeof n||(s=this),t[e](n,s,this),this}}),r.bind=r.on,r.unbind=r.off,i.extend(t,r);var u=t.Model=function(e,t){var n=e||{};t||(t={}),this.cid=i.uniqueId("c"),this.attributes={},t.collection&&(this.collection=t.collection),t.parse&&(n=this.parse(n,t)||{}),n=i.defaults({},n,i.result(this,"defaults")),this.set(n,t),this.changed={},this.initialize.apply(this,arguments)};i.extend(u.prototype,r,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(e){return i.clone(this.attributes)},sync:function(){return t.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return i.escape(this.get(e))},has:function(e){return null!=this.get(e)},set:function(e,t,n){var s,o,a,r,l,c,h,d;if(null==e)return this;if("object"==typeof e?(o=e,n=t):(o={})[e]=t,n||(n={}),!this._validate(o,n))return!1;a=n.unset,l=n.silent,r=[],c=this._changing,this._changing=!0,c||(this._previousAttributes=i.clone(this.attributes),this.changed={}),d=this.attributes,h=this._previousAttributes,this.idAttribute in o&&(this.id=o[this.idAttribute]);for(s in o)t=o[s],i.isEqual(d[s],t)||r.push(s),i.isEqual(h[s],t)?delete this.changed[s]:this.changed[s]=t,a?delete d[s]:d[s]=t;if(!l){r.length&&(this._pending=n);for(var u=0,p=r.length;p>u;u++)this.trigger("change:"+r[u],this,d[r[u]],n)}if(c)return this;if(!l)for(;this._pending;)n=this._pending,this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,i.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var n in this.attributes)t[n]=void 0;return this.set(t,i.extend({},e,{unset:!0}))},hasChanged:function(e){return null==e?!i.isEmpty(this.changed):i.has(this.changed,e)},changedAttributes:function(e){if(!e)return this.hasChanged()?i.clone(this.changed):!1;var t,n=!1,s=this._changing?this._previousAttributes:this.attributes;for(var o in e)i.isEqual(s[o],t=e[o])||((n||(n={}))[o]=t);return n},previous:function(e){return null!=e&&this._previousAttributes?this._previousAttributes[e]:null},previousAttributes:function(){return i.clone(this._previousAttributes)},fetch:function(e){e=e?i.clone(e):{},void 0===e.parse&&(e.parse=!0);var t=this,n=e.success;return e.success=function(i){return t.set(t.parse(i,e),e)?(n&&n(t,i,e),void t.trigger("sync",t,i,e)):!1},R(this,e),this.sync("read",this,e)},save:function(e,t,n){var s,o,a,r=this.attributes;if(null==e||"object"==typeof e?(s=e,n=t):(s={})[e]=t,n=i.extend({validate:!0},n),s&&!n.wait){if(!this.set(s,n))return!1}else if(!this._validate(s,n))return!1;s&&n.wait&&(this.attributes=i.extend({},r,s)),void 0===n.parse&&(n.parse=!0);var l=this,c=n.success;return n.success=function(e){l.attributes=r;var t=l.parse(e,n);return n.wait&&(t=i.extend(s||{},t)),i.isObject(t)&&!l.set(t,n)?!1:(c&&c(l,e,n),void l.trigger("sync",l,e,n))},R(this,n),o=this.isNew()?"create":n.patch?"patch":"update","patch"===o&&(n.attrs=s),a=this.sync(o,this,n),s&&n.wait&&(this.attributes=r),a},destroy:function(e){e=e?i.clone(e):{};var t=this,n=e.success,s=function(){t.trigger("destroy",t,t.collection,e)};if(e.success=function(i){(e.wait||t.isNew())&&s(),n&&n(t,i,e),t.isNew()||t.trigger("sync",t,i,e)},this.isNew())return e.success(),!1;R(this,e);var o=this.sync("delete",this,e);return e.wait||s(),o},url:function(){var e=i.result(this,"urlRoot")||i.result(this.collection,"url")||D();return this.isNew()?e:e.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(e,t){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(e){return this._validate({},i.extend(e||{},{validate:!0}))},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=i.extend({},this.attributes,e);var n=this.validationError=this.validate(e,t)||null;return n?(this.trigger("invalid",this,n,i.extend(t,{validationError:n})),!1):!0}});var p=["keys","values","pairs","invert","pick","omit"];i.each(p,function(e){i[e]&&(u.prototype[e]=function(){var t=a.call(arguments);return t.unshift(this.attributes),i[e].apply(i,t)})});var m=t.Collection=function(e,t){t||(t={}),t.model&&(this.model=t.model),void 0!==t.comparator&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,i.extend({silent:!0},t))},f={add:!0,remove:!0,merge:!0},g={add:!0,remove:!1};i.extend(m.prototype,r,{model:u,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return t.sync.apply(this,arguments)},add:function(e,t){return this.set(e,i.extend({merge:!1},t,g))},remove:function(e,t){var n=!i.isArray(e);e=n?[e]:i.clone(e),t||(t={});for(var s=0,o=e.length;o>s;s++){var a=e[s]=this.get(e[s]);if(a){delete this._byId[a.id],delete this._byId[a.cid];var r=this.indexOf(a);this.models.splice(r,1),this.length--,t.silent||(t.index=r,a.trigger("remove",a,this,t)),this._removeReference(a,t)}}return n?e[0]:e},set:function(e,t){t=i.defaults({},t,f),t.parse&&(e=this.parse(e,t));var n=!i.isArray(e);e=n?e?[e]:[]:e.slice();for(var s,o,a,r,l,c=t.at,h=this.comparator&&null==c&&t.sort!==!1,d=i.isString(this.comparator)?this.comparator:null,u=[],p=[],m={},g=t.add,v=t.merge,b=t.remove,y=!h&&g&&b?[]:!1,w=0,_=e.length;_>w;w++){if(a=e[w]||{},s=this._isModel(a)?o=a:a[this.model.prototype.idAttribute||"id"],r=this.get(s))b&&(m[r.cid]=!0),v&&(a=a===o?o.attributes:a,t.parse&&(a=r.parse(a,t)),r.set(a,t),h&&!l&&r.hasChanged(d)&&(l=!0)),e[w]=r;else if(g){if(o=e[w]=this._prepareModel(a,t),!o)continue;u.push(o),this._addReference(o,t)}o=r||o,o&&(!y||!o.isNew()&&m[o.id]||y.push(o),m[o.id]=!0)}if(b){for(var w=0,_=this.length;_>w;w++)m[(o=this.models[w]).cid]||p.push(o);p.length&&this.remove(p,t)}if(u.length||y&&y.length)if(h&&(l=!0),this.length+=u.length,null!=c)for(var w=0,_=u.length;_>w;w++)this.models.splice(c+w,0,u[w]);else{y&&(this.models.length=0);for(var k=y||u,w=0,_=k.length;_>w;w++)this.models.push(k[w])}if(l&&this.sort({silent:!0}),!t.silent){for(var w=0,_=u.length;_>w;w++)(o=u[w]).trigger("add",o,this,t);(l||y&&y.length)&&this.trigger("sort",this,t)}return n?e[0]:e},reset:function(e,t){t||(t={});for(var n=0,s=this.models.length;s>n;n++)this._removeReference(this.models[n],t);return t.previousModels=this.models,this._reset(),e=this.add(e,i.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),e},push:function(e,t){return this.add(e,i.extend({at:this.length},t))},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e),t},unshift:function(e,t){return this.add(e,i.extend({at:0},t))},shift:function(e){var t=this.at(0);return this.remove(t,e),t},slice:function(){return a.apply(this.models,arguments)},get:function(e){return null==e?void 0:this._byId[e]||this._byId[e.id]||this._byId[e.cid]},at:function(e){return this.models[e]},where:function(e,t){return i.isEmpty(e)?t?void 0:[]:this[t?"find":"filter"](function(t){for(var i in e)if(e[i]!==t.get(i))return!1;return!0})},findWhere:function(e){return this.where(e,!0)},sort:function(e){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return e||(e={}),i.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(i.bind(this.comparator,this)),e.silent||this.trigger("sort",this,e),this},pluck:function(e){return i.invoke(this.models,"get",e)},fetch:function(e){e=e?i.clone(e):{},void 0===e.parse&&(e.parse=!0);var t=e.success,n=this;return e.success=function(i){var s=e.reset?"reset":"set";n[s](i,e),t&&t(n,i,e),n.trigger("sync",n,i,e)},R(this,e),this.sync("read",this,e)},create:function(e,t){if(t=t?i.clone(t):{},!(e=this._prepareModel(e,t)))return!1;t.wait||this.add(e,t);var n=this,s=t.success;return t.success=function(e,i){t.wait&&n.add(e,t),s&&s(e,i,t)},e.save(null,t),e},parse:function(e,t){return e},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(e,t){if(this._isModel(e))return e.collection||(e.collection=this),e;t=t?i.clone(t):{},t.collection=this;var n=new this.model(e,t);return n.validationError?(this.trigger("invalid",this,n.validationError,t),!1):n},_isModel:function(e){return e instanceof u},_addReference:function(e,t){this._byId[e.cid]=e,null!=e.id&&(this._byId[e.id]=e),e.on("all",this._onModelEvent,this)},_removeReference:function(e,t){this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,i,n){("add"!==e&&"remove"!==e||i===this)&&("destroy"===e&&this.remove(t,n),t&&e==="change:"+t.idAttribute&&(delete this._byId[t.previous(t.idAttribute)],null!=t.id&&(this._byId[t.id]=t)),this.trigger.apply(this,arguments))}});var v=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain","sample","partition"];i.each(v,function(e){i[e]&&(m.prototype[e]=function(){var t=a.call(arguments);return t.unshift(this.models),i[e].apply(i,t)})});var b=["groupBy","countBy","sortBy","indexBy"];i.each(b,function(e){i[e]&&(m.prototype[e]=function(t,n){var s=i.isFunction(t)?t:function(e){return e.get(t)};return i[e](this.models,s,n)})});var y=t.View=function(e){this.cid=i.uniqueId("view"),e||(e={}),i.extend(this,i.pick(e,_)),this._ensureElement(),this.initialize.apply(this,arguments)},w=/^(\S+)\s*(.*)$/,_=["model","collection","el","id","attributes","className","tagName","events"];i.extend(y.prototype,r,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(e){return this.undelegateEvents(),this._setElement(e),this.delegateEvents(),this},_setElement:function(e){this.$el=e instanceof t.$?e:t.$(e),this.el=this.$el[0]},delegateEvents:function(e){if(!e&&!(e=i.result(this,"events")))return this;this.undelegateEvents();for(var t in e){var n=e[t];if(i.isFunction(n)||(n=this[e[t]]),n){var s=t.match(w);this.delegate(s[1],s[2],i.bind(n,this))}}return this},delegate:function(e,t,i){this.$el.on(e+".delegateEvents"+this.cid,t,i)},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),
this},undelegate:function(e,t,i){this.$el.off(e+".delegateEvents"+this.cid,t,i)},_createElement:function(e){return document.createElement(e)},_ensureElement:function(){if(this.el)this.setElement(i.result(this,"el"));else{var e=i.extend({},i.result(this,"attributes"));this.id&&(e.id=i.result(this,"id")),this.className&&(e["class"]=i.result(this,"className")),this.setElement(this._createElement(i.result(this,"tagName"))),this._setAttributes(e)}},_setAttributes:function(e){this.$el.attr(e)}}),t.sync=function(e,n,s){var o=I[e];i.defaults(s||(s={}),{emulateHTTP:t.emulateHTTP,emulateJSON:t.emulateJSON});var a={type:o,dataType:"json"};if(s.url||(a.url=i.result(n,"url")||D()),"InlineImageModel"==n.type&&"POST"===o&&(a.url="http://sitemanager.inc.com/getty/proxy-api.php"),null!=s.data||!n||"create"!==e&&"update"!==e&&"patch"!==e||(a.contentType="application/json",a.data=JSON.stringify(s.attrs||n.toJSON(s))),s.emulateJSON&&(a.contentType="application/x-www-form-urlencoded",a.data=a.data?{model:a.data}:{},"InlineImageModel"==n.type&&"POST"===o&&(a.data.proxy_type="uploadinline")),s.emulateHTTP&&("PUT"===o||"DELETE"===o||"PATCH"===o)){a.type="POST",s.emulateJSON&&(a.data._method=o);var r=s.beforeSend;s.beforeSend=function(e){return e.setRequestHeader("X-HTTP-Method-Override",o),r?r.apply(this,arguments):void 0}}"GET"===a.type||s.emulateJSON||(a.processData=!1),"PATCH"===a.type&&k&&(a.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var l=s.error;s.error=function(e,t,i){s.textStatus=t,s.errorThrown=i,l&&l.apply(this,arguments)};var c=s.xhr=t.ajax(i.extend(a,s));return n.trigger("request",n,c,s),c};var k=!("undefined"==typeof window||!window.ActiveXObject||window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent),I={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};t.ajax=function(){return t.$.ajax.apply(t.$,arguments)};var C=t.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},$=/\((.*?)\)/g,x=/(\(\?)?:\w+/g,S=/\*\w+/g,T=/[\-{}\[\]+?.,\\\^$|#\s]/g;i.extend(C.prototype,r,{initialize:function(){},route:function(e,n,s){i.isRegExp(e)||(e=this._routeToRegExp(e)),i.isFunction(n)&&(s=n,n=""),s||(s=this[n]);var o=this;return t.history.route(e,function(i){var a=o._extractParameters(e,i);o.execute(s,a,n)!==!1&&(o.trigger.apply(o,["route:"+n].concat(a)),o.trigger("route",n,a),t.history.trigger("route",o,n,a))}),this},execute:function(e,t,i){e&&e.apply(this,t)},navigate:function(e,i){return t.history.navigate(e,i),this},_bindRoutes:function(){if(this.routes){this.routes=i.result(this,"routes");for(var e,t=i.keys(this.routes);null!=(e=t.pop());)this.route(e,this.routes[e])}},_routeToRegExp:function(e){return e=e.replace(T,"\\$&").replace($,"(?:$1)?").replace(x,function(e,t){return t?e:"([^/?]+)"}).replace(S,"([^?]*?)"),new RegExp("^"+e+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(e,t){var n=e.exec(t).slice(1);return i.map(n,function(e,t){return t===n.length-1?e||null:e?decodeURIComponent(e):null})}});var A=t.History=function(){this.handlers=[],i.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},M=/^[#\/]|\s+$/g,P=/^\/+|\/+$/g,E=/#.*$/;A.started=!1,i.extend(A.prototype,r,{interval:50,atRoot:function(){var e=this.location.pathname.replace(/[^\/]$/,"$&/");return e===this.root&&!this.location.search},getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getPath:function(){var e=decodeURI(this.location.pathname+this.location.search),t=this.root.slice(0,-1);return e.indexOf(t)||(e=e.slice(t.length)),e.slice(1)},getFragment:function(e){return null==e&&(e=this._hasPushState||!this._wantsHashChange?this.getPath():this.getHash()),e.replace(M,"")},start:function(e){if(A.started)throw new Error("Backbone.history has already been started");A.started=!0,this.options=i.extend({root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._hasHashChange="onhashchange"in window,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState),this.fragment=this.getFragment();var t=window.addEventListener||function(e,t){return attachEvent("on"+e,t)};if(this.root=("/"+this.root+"/").replace(P,"/"),!this._hasHashChange&&this._wantsHashChange&&(!this._wantsPushState||!this._hasPushState)){var n=document.createElement("iframe");n.src="javascript:0",n.style.display="none",n.tabIndex=-1;var s=document.body;this.iframe=s.insertBefore(n,s.firstChild).contentWindow,this.navigate(this.fragment)}if(this._hasPushState?t("popstate",this.checkUrl,!1):this._wantsHashChange&&this._hasHashChange&&!this.iframe?t("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot())return this.location.replace(this.root+"#"+this.getPath()),!0;this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0})}return this.options.silent?void 0:this.loadUrl()},stop:function(){var e=window.removeEventListener||function(e,t){return detachEvent("on"+e,t)};this._hasPushState?e("popstate",this.checkUrl,!1):this._wantsHashChange&&this._hasHashChange&&!this.iframe&&e("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe.frameElement),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),A.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(e){var t=this.getFragment();return t===this.fragment&&this.iframe&&(t=this.getHash(this.iframe)),t===this.fragment?!1:(this.iframe&&this.navigate(t),void this.loadUrl())},loadUrl:function(e){return e=this.fragment=this.getFragment(e),i.any(this.handlers,function(t){return t.route.test(e)?(t.callback(e),!0):void 0})},navigate:function(e,t){if(!A.started)return!1;t&&t!==!0||(t={trigger:!!t});var i=this.root+(e=this.getFragment(e||""));if(e=decodeURI(e.replace(E,"")),this.fragment!==e){if(this.fragment=e,""===e&&"/"!==i&&(i=i.slice(0,-1)),this._hasPushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,i);else{if(!this._wantsHashChange)return this.location.assign(i);this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getHash(this.iframe)&&(t.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,e,t.replace))}return t.trigger?this.loadUrl(e):void 0}},_updateHash:function(e,t,i){if(i){var n=e.href.replace(/(javascript:|#).*$/,"");e.replace(n+"#"+t)}else e.hash="#"+t}}),t.history=new A;var N=function(e,t){var n,s=this;n=e&&i.has(e,"constructor")?e.constructor:function(){return s.apply(this,arguments)},i.extend(n,s,t);var o=function(){this.constructor=n};return o.prototype=s.prototype,n.prototype=new o,e&&i.extend(n.prototype,e),n.__super__=s.prototype,n};u.extend=m.extend=C.extend=y.extend=A.extend=N;var D=function(){throw new Error('A "url" property or function must be specified')},R=function(e,t){var i=t.error;t.error=function(n){i&&i(e,n,t),e.trigger("error",e,n,t)}};return t}),function(e){function t(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function i(e,t){function i(){le.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}var n=!0;return l(function(){return n&&(i(),n=!1),t.apply(this,arguments)},t)}function n(e,t){return function(i){return d(e.call(this,i),t)}}function s(e,t){return function(i){return this.lang().ordinal(e.call(this,i),t)}}function o(){}function a(e){C(e),l(this,e)}function r(e){var t=v(e),i=t.year||0,n=t.quarter||0,s=t.month||0,o=t.week||0,a=t.day||0,r=t.hour||0,l=t.minute||0,c=t.second||0,h=t.millisecond||0;this._milliseconds=+h+1e3*c+6e4*l+36e5*r,this._days=+a+7*o,this._months=+s+3*n+12*i,this._data={},this._bubble()}function l(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return t.hasOwnProperty("toString")&&(e.toString=t.toString),t.hasOwnProperty("valueOf")&&(e.valueOf=t.valueOf),e}function c(e){var t,i={};for(t in e)e.hasOwnProperty(t)&&ke.hasOwnProperty(t)&&(i[t]=e[t]);return i}function h(e){return 0>e?Math.ceil(e):Math.floor(e)}function d(e,t,i){for(var n=""+Math.abs(e),s=e>=0;n.length<t;)n="0"+n;return(s?i?"+":"":"-")+n}function u(e,t,i,n){var s=t._milliseconds,o=t._days,a=t._months;n=null==n?!0:n,s&&e._d.setTime(+e._d+s*i),o&&ne(e,"Date",ie(e,"Date")+o*i),a&&te(e,ie(e,"Month")+a*i),n&&le.updateOffset(e,o||a)}function p(e){return"[object Array]"===Object.prototype.toString.call(e)}function m(e){return"[object Date]"===Object.prototype.toString.call(e)||e instanceof Date}function f(e,t,i){var n,s=Math.min(e.length,t.length),o=Math.abs(e.length-t.length),a=0;for(n=0;s>n;n++)(i&&e[n]!==t[n]||!i&&y(e[n])!==y(t[n]))&&a++;return a+o}function g(e){if(e){var t=e.toLowerCase().replace(/(.)s$/,"$1");e=Qe[e]||Je[t]||t}return e}function v(e){var t,i,n={};for(i in e)e.hasOwnProperty(i)&&(t=g(i),t&&(n[t]=e[i]));return n}function b(t){var i,n;if(0===t.indexOf("week"))i=7,n="day";else{if(0!==t.indexOf("month"))return;i=12,n="month"}le[t]=function(s,o){var a,r,l=le.fn._lang[t],c=[];if("number"==typeof s&&(o=s,s=e),r=function(e){var t=le().utc().set(n,e);return l.call(le.fn._lang,t,s||"")},null!=o)return r(o);for(a=0;i>a;a++)c.push(r(a));return c}}function y(e){var t=+e,i=0;return 0!==t&&isFinite(t)&&(i=t>=0?Math.floor(t):Math.ceil(t)),i}function w(e,t){return new Date(Date.UTC(e,t+1,0)).getUTCDate()}function _(e,t,i){return J(le([e,11,31+t-i]),t,i).week}function k(e){return I(e)?366:365}function I(e){return e%4===0&&e%100!==0||e%400===0}function C(e){var t;e._a&&-2===e._pf.overflow&&(t=e._a[fe]<0||e._a[fe]>11?fe:e._a[ge]<1||e._a[ge]>w(e._a[me],e._a[fe])?ge:e._a[ve]<0||e._a[ve]>23?ve:e._a[be]<0||e._a[be]>59?be:e._a[ye]<0||e._a[ye]>59?ye:e._a[we]<0||e._a[we]>999?we:-1,e._pf._overflowDayOfYear&&(me>t||t>ge)&&(t=ge),e._pf.overflow=t)}function $(e){return null==e._isValid&&(e._isValid=!isNaN(e._d.getTime())&&e._pf.overflow<0&&!e._pf.empty&&!e._pf.invalidMonth&&!e._pf.nullInput&&!e._pf.invalidFormat&&!e._pf.userInvalidated,e._strict&&(e._isValid=e._isValid&&0===e._pf.charsLeftOver&&0===e._pf.unusedTokens.length)),e._isValid}function x(e){return e?e.toLowerCase().replace("_","-"):e}function S(e,t){return t._isUTC?le(e).zone(t._offset||0):le(e).local()}function T(e,t){return t.abbr=e,_e[e]||(_e[e]=new o),_e[e].set(t),_e[e]}function A(e){delete _e[e]}function M(e){var t,i,n,s,o=0,a=function(e){if(!_e[e]&&Ie)try{require("./lang/"+e)}catch(t){}return _e[e]};if(!e)return le.fn._lang;if(!p(e)){if(i=a(e))return i;e=[e]}for(;o<e.length;){for(s=x(e[o]).split("-"),t=s.length,n=x(e[o+1]),n=n?n.split("-"):null;t>0;){if(i=a(s.slice(0,t).join("-")))return i;if(n&&n.length>=t&&f(s,n,!0)>=t-1)break;t--}o++}return le.fn._lang}function P(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function E(e){var t,i,n=e.match(Se);for(t=0,i=n.length;i>t;t++)n[t]=it[n[t]]?it[n[t]]:P(n[t]);return function(s){var o="";for(t=0;i>t;t++)o+=n[t]instanceof Function?n[t].call(s,e):n[t];return o}}function N(e,t){return e.isValid()?(t=D(t,e.lang()),Ze[t]||(Ze[t]=E(t)),Ze[t](e)):e.lang().invalidDate()}function D(e,t){function i(e){return t.longDateFormat(e)||e}var n=5;for(Te.lastIndex=0;n>=0&&Te.test(e);)e=e.replace(Te,i),Te.lastIndex=0,n-=1;return e}function R(e,t){var i,n=t._strict;switch(e){case"Q":return Fe;case"DDDD":return ze;case"YYYY":case"GGGG":case"gggg":return n?He:Pe;case"Y":case"G":case"g":return Ve;case"YYYYYY":case"YYYYY":case"GGGGG":case"ggggg":return n?je:Ee;case"S":if(n)return Fe;case"SS":if(n)return Ue;case"SSS":if(n)return ze;case"DDD":return Me;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return De;case"a":case"A":return M(t._l)._meridiemParse;case"X":return Le;case"Z":case"ZZ":return Re;case"T":return Oe;case"SSSS":return Ne;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"ww":case"WW":return n?Ue:Ae;case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"W":case"e":case"E":return Ae;case"Do":return Be;default:return i=new RegExp(j(H(e.replace("\\","")),"i"))}}function O(e){e=e||"";var t=e.match(Re)||[],i=t[t.length-1]||[],n=(i+"").match(Ke)||["-",0,0],s=+(60*n[1])+y(n[2]);return"+"===n[0]?-s:s}function L(e,t,i){var n,s=i._a;switch(e){case"Q":null!=t&&(s[fe]=3*(y(t)-1));break;case"M":case"MM":null!=t&&(s[fe]=y(t)-1);break;case"MMM":case"MMMM":n=M(i._l).monthsParse(t),null!=n?s[fe]=n:i._pf.invalidMonth=t;break;case"D":case"DD":null!=t&&(s[ge]=y(t));break;case"Do":null!=t&&(s[ge]=y(parseInt(t,10)));break;case"DDD":case"DDDD":null!=t&&(i._dayOfYear=y(t));break;case"YY":s[me]=le.parseTwoDigitYear(t);break;case"YYYY":case"YYYYY":case"YYYYYY":s[me]=y(t);break;case"a":case"A":i._isPm=M(i._l).isPM(t);break;case"H":case"HH":case"h":case"hh":s[ve]=y(t);break;case"m":case"mm":s[be]=y(t);break;case"s":case"ss":s[ye]=y(t);break;case"S":case"SS":case"SSS":case"SSSS":s[we]=y(1e3*("0."+t));break;case"X":i._d=new Date(1e3*parseFloat(t));break;case"Z":case"ZZ":i._useUTC=!0,i._tzm=O(t);break;case"w":case"ww":case"W":case"WW":case"d":case"dd":case"ddd":case"dddd":case"e":case"E":e=e.substr(0,1);case"gg":case"gggg":case"GG":case"GGGG":case"GGGGG":e=e.substr(0,2),t&&(i._w=i._w||{},i._w[e]=t)}}function B(e){var t,i,n,s,o,a,r,l,c,h,d=[];if(!e._d){for(n=U(e),e._w&&null==e._a[ge]&&null==e._a[fe]&&(o=function(t){var i=parseInt(t,10);return t?t.length<3?i>68?1900+i:2e3+i:i:null==e._a[me]?le().weekYear():e._a[me]},a=e._w,null!=a.GG||null!=a.W||null!=a.E?r=Z(o(a.GG),a.W||1,a.E,4,1):(l=M(e._l),c=null!=a.d?K(a.d,l):null!=a.e?parseInt(a.e,10)+l._week.dow:0,h=parseInt(a.w,10)||1,null!=a.d&&c<l._week.dow&&h++,r=Z(o(a.gg),h,c,l._week.doy,l._week.dow)),e._a[me]=r.year,e._dayOfYear=r.dayOfYear),e._dayOfYear&&(s=null==e._a[me]?n[me]:e._a[me],e._dayOfYear>k(s)&&(e._pf._overflowDayOfYear=!0),i=Y(s,0,e._dayOfYear),e._a[fe]=i.getUTCMonth(),e._a[ge]=i.getUTCDate()),t=0;3>t&&null==e._a[t];++t)e._a[t]=d[t]=n[t];for(;7>t;t++)e._a[t]=d[t]=null==e._a[t]?2===t?1:0:e._a[t];d[ve]+=y((e._tzm||0)/60),d[be]+=y((e._tzm||0)%60),e._d=(e._useUTC?Y:G).apply(null,d)}}function F(e){var t;e._d||(t=v(e._i),e._a=[t.year,t.month,t.day,t.hour,t.minute,t.second,t.millisecond],B(e))}function U(e){var t=new Date;return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function z(e){e._a=[],e._pf.empty=!0;var t,i,n,s,o,a=M(e._l),r=""+e._i,l=r.length,c=0;for(n=D(e._f,a).match(Se)||[],t=0;t<n.length;t++)s=n[t],i=(r.match(R(s,e))||[])[0],i&&(o=r.substr(0,r.indexOf(i)),o.length>0&&e._pf.unusedInput.push(o),r=r.slice(r.indexOf(i)+i.length),c+=i.length),it[s]?(i?e._pf.empty=!1:e._pf.unusedTokens.push(s),L(s,i,e)):e._strict&&!i&&e._pf.unusedTokens.push(s);e._pf.charsLeftOver=l-c,r.length>0&&e._pf.unusedInput.push(r),e._isPm&&e._a[ve]<12&&(e._a[ve]+=12),e._isPm===!1&&12===e._a[ve]&&(e._a[ve]=0),B(e),C(e)}function H(e){return e.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,i,n,s){return t||i||n||s})}function j(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function V(e){var i,n,s,o,a;if(0===e._f.length)return e._pf.invalidFormat=!0,void(e._d=new Date(NaN));for(o=0;o<e._f.length;o++)a=0,i=l({},e),i._pf=t(),i._f=e._f[o],z(i),$(i)&&(a+=i._pf.charsLeftOver,a+=10*i._pf.unusedTokens.length,i._pf.score=a,(null==s||s>a)&&(s=a,n=i));l(e,n||i)}function W(e){var t,i,n=e._i,s=We.exec(n);if(s){for(e._pf.iso=!0,t=0,i=Ge.length;i>t;t++)if(Ge[t][1].exec(n)){e._f=Ge[t][0]+(s[6]||" ");break}for(t=0,i=Ye.length;i>t;t++)if(Ye[t][1].exec(n)){e._f+=Ye[t][0];break}n.match(Re)&&(e._f+="Z"),z(e)}else le.createFromInputFallback(e)}function q(t){var i=t._i,n=Ce.exec(i);i===e?t._d=new Date:n?t._d=new Date(+n[1]):"string"==typeof i?W(t):p(i)?(t._a=i.slice(0),B(t)):m(i)?t._d=new Date(+i):"object"==typeof i?F(t):"number"==typeof i?t._d=new Date(i):le.createFromInputFallback(t)}function G(e,t,i,n,s,o,a){var r=new Date(e,t,i,n,s,o,a);return 1970>e&&r.setFullYear(e),r}function Y(e){var t=new Date(Date.UTC.apply(null,arguments));return 1970>e&&t.setUTCFullYear(e),t}function K(e,t){if("string"==typeof e)if(isNaN(e)){if(e=t.weekdaysParse(e),"number"!=typeof e)return null}else e=parseInt(e,10);return e}function X(e,t,i,n,s){return s.relativeTime(t||1,!!i,e,n)}function Q(e,t,i){var n=pe(Math.abs(e)/1e3),s=pe(n/60),o=pe(s/60),a=pe(o/24),r=pe(a/365),l=45>n&&["s",n]||1===s&&["m"]||45>s&&["mm",s]||1===o&&["h"]||22>o&&["hh",o]||1===a&&["d"]||25>=a&&["dd",a]||45>=a&&["M"]||345>a&&["MM",pe(a/30)]||1===r&&["y"]||["yy",r];return l[2]=t,l[3]=e>0,l[4]=i,X.apply({},l)}function J(e,t,i){var n,s=i-t,o=i-e.day();return o>s&&(o-=7),s-7>o&&(o+=7),n=le(e).add("d",o),{week:Math.ceil(n.dayOfYear()/7),year:n.year()}}function Z(e,t,i,n,s){var o,a,r=Y(e,0,1).getUTCDay();return i=null!=i?i:s,o=s-r+(r>n?7:0)-(s>r?7:0),a=7*(t-1)+(i-s)+o+1,{year:a>0?e:e-1,dayOfYear:a>0?a:k(e-1)+a}}function ee(t){var i=t._i,n=t._f;return null===i||n===e&&""===i?le.invalid({nullInput:!0}):("string"==typeof i&&(t._i=i=M().preparse(i)),le.isMoment(i)?(t=c(i),t._d=new Date(+i._d)):n?p(n)?V(t):z(t):q(t),new a(t))}function te(e,t){var i;return"string"==typeof t&&(t=e.lang().monthsParse(t),"number"!=typeof t)?e:(i=Math.min(e.date(),w(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,i),e)}function ie(e,t){return e._d["get"+(e._isUTC?"UTC":"")+t]()}function ne(e,t,i){return"Month"===t?te(e,i):e._d["set"+(e._isUTC?"UTC":"")+t](i)}function se(e,t){return function(i){return null!=i?(ne(this,e,i),le.updateOffset(this,t),this):ie(this,e)}}function oe(e){le.duration.fn[e]=function(){return this._data[e]}}function ae(e,t){le.duration.fn["as"+e]=function(){return+this/t}}function re(e){"undefined"==typeof ender&&(ce=ue.moment,ue.moment=e?i("Accessing Moment through the global scope is deprecated, and will be removed in an upcoming release.",le):le)}for(var le,ce,he,de="2.6.0",ue="undefined"!=typeof global?global:this,pe=Math.round,me=0,fe=1,ge=2,ve=3,be=4,ye=5,we=6,_e={},ke={_isAMomentObject:null,_i:null,_f:null,_l:null,_strict:null,_isUTC:null,_offset:null,_pf:null,_lang:null},Ie="undefined"!=typeof module&&module.exports,Ce=/^\/?Date\((\-?\d+)/i,$e=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,xe=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,Se=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|X|zz?|ZZ?|.)/g,Te=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,Ae=/\d\d?/,Me=/\d{1,3}/,Pe=/\d{1,4}/,Ee=/[+\-]?\d{1,6}/,Ne=/\d+/,De=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,Re=/Z|[\+\-]\d\d:?\d\d/gi,Oe=/T/i,Le=/[\+\-]?\d+(\.\d{1,3})?/,Be=/\d{1,2}/,Fe=/\d/,Ue=/\d\d/,ze=/\d{3}/,He=/\d{4}/,je=/[+-]?\d{6}/,Ve=/[+-]?\d+/,We=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,qe="YYYY-MM-DDTHH:mm:ssZ",Ge=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],Ye=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],Ke=/([\+\-]|\d\d)/gi,Xe=("Date|Hours|Minutes|Seconds|Milliseconds".split("|"),{Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6}),Qe={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",Q:"quarter",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},Je={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},Ze={},et="DDD w W M D d".split(" "),tt="M D H h m s w W".split(" "),it={M:function(){return this.month()+1},MMM:function(e){return this.lang().monthsShort(this,e)},MMMM:function(e){return this.lang().months(this,e)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(e){return this.lang().weekdaysMin(this,e)},ddd:function(e){return this.lang().weekdaysShort(this,e)},dddd:function(e){return this.lang().weekdays(this,e)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return d(this.year()%100,2)},YYYY:function(){return d(this.year(),4)},YYYYY:function(){return d(this.year(),5)},YYYYYY:function(){var e=this.year(),t=e>=0?"+":"-";return t+d(Math.abs(e),6)},gg:function(){return d(this.weekYear()%100,2)},gggg:function(){return d(this.weekYear(),4)},ggggg:function(){return d(this.weekYear(),5)},GG:function(){return d(this.isoWeekYear()%100,2)},GGGG:function(){return d(this.isoWeekYear(),4)},GGGGG:function(){return d(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.lang().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.lang().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return y(this.milliseconds()/100)},SS:function(){return d(y(this.milliseconds()/10),2)},SSS:function(){return d(this.milliseconds(),3)},SSSS:function(){return d(this.milliseconds(),3)},Z:function(){var e=-this.zone(),t="+";return 0>e&&(e=-e,t="-"),t+d(y(e/60),2)+":"+d(y(e)%60,2)},ZZ:function(){var e=-this.zone(),t="+";return 0>e&&(e=-e,t="-"),t+d(y(e/60),2)+d(y(e)%60,2)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},X:function(){return this.unix()},Q:function(){return this.quarter()}},nt=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"];et.length;)he=et.pop(),it[he+"o"]=s(it[he],he);for(;tt.length;)he=tt.pop(),it[he+he]=n(it[he],2);for(it.DDDD=n(it.DDD,3),l(o.prototype,{set:function(e){var t,i;for(i in e)t=e[i],"function"==typeof t?this[i]=t:this["_"+i]=t},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(e){return this._months[e.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(e){return this._monthsShort[e.month()]},monthsParse:function(e){var t,i,n;for(this._monthsParse||(this._monthsParse=[]),t=0;12>t;t++)if(this._monthsParse[t]||(i=le.utc([2e3,t]),n="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[t]=new RegExp(n.replace(".",""),"i")),this._monthsParse[t].test(e))return t},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(e){return this._weekdays[e.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(e){return this._weekdaysShort[e.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(e){return this._weekdaysMin[e.day()]},weekdaysParse:function(e){var t,i,n;for(this._weekdaysParse||(this._weekdaysParse=[]),t=0;7>t;t++)if(this._weekdaysParse[t]||(i=le([2e3,1]).day(t),n="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,""),this._weekdaysParse[t]=new RegExp(n.replace(".",""),"i")),this._weekdaysParse[t].test(e))return t},_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},longDateFormat:function(e){var t=this._longDateFormat[e];return!t&&this._longDateFormat[e.toUpperCase()]&&(t=this._longDateFormat[e.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e]=t),t},isPM:function(e){return"p"===(e+"").toLowerCase().charAt(0)},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(e,t,i){return e>11?i?"pm":"PM":i?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(e,t){var i=this._calendar[e];return"function"==typeof i?i.apply(t):i},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(e,t,i,n){var s=this._relativeTime[i];return"function"==typeof s?s(e,t,i,n):s.replace(/%d/i,e)},pastFuture:function(e,t){var i=this._relativeTime[e>0?"future":"past"];return"function"==typeof i?i(t):i.replace(/%s/i,t)},ordinal:function(e){return this._ordinal.replace("%d",e)},_ordinal:"%d",preparse:function(e){return e},postformat:function(e){return e},week:function(e){return J(e,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}}),le=function(i,n,s,o){var a;return"boolean"==typeof s&&(o=s,s=e),a={},a._isAMomentObject=!0,a._i=i,a._f=n,a._l=s,a._strict=o,a._isUTC=!1,a._pf=t(),ee(a)},le.suppressDeprecationWarnings=!1,le.createFromInputFallback=i("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(e){e._d=new Date(e._i)}),le.utc=function(i,n,s,o){var a;return"boolean"==typeof s&&(o=s,s=e),a={},a._isAMomentObject=!0,a._useUTC=!0,a._isUTC=!0,a._l=s,a._i=i,a._f=n,a._strict=o,a._pf=t(),ee(a).utc()},le.unix=function(e){return le(1e3*e)},le.duration=function(e,t){var i,n,s,o=e,a=null;return le.isDuration(e)?o={ms:e._milliseconds,d:e._days,M:e._months}:"number"==typeof e?(o={},t?o[t]=e:o.milliseconds=e):(a=$e.exec(e))?(i="-"===a[1]?-1:1,o={y:0,d:y(a[ge])*i,h:y(a[ve])*i,m:y(a[be])*i,s:y(a[ye])*i,ms:y(a[we])*i}):(a=xe.exec(e))&&(i="-"===a[1]?-1:1,s=function(e){var t=e&&parseFloat(e.replace(",","."));return(isNaN(t)?0:t)*i},o={y:s(a[2]),M:s(a[3]),d:s(a[4]),h:s(a[5]),m:s(a[6]),s:s(a[7]),w:s(a[8])}),n=new r(o),le.isDuration(e)&&e.hasOwnProperty("_lang")&&(n._lang=e._lang),n},le.version=de,le.defaultFormat=qe,le.momentProperties=ke,le.updateOffset=function(){},le.lang=function(e,t){var i;return e?(t?T(x(e),t):null===t?(A(e),e="en"):_e[e]||M(e),i=le.duration.fn._lang=le.fn._lang=M(e),i._abbr):le.fn._lang._abbr},le.langData=function(e){return e&&e._lang&&e._lang._abbr&&(e=e._lang._abbr),M(e)},le.isMoment=function(e){return e instanceof a||null!=e&&e.hasOwnProperty("_isAMomentObject")},le.isDuration=function(e){return e instanceof r},he=nt.length-1;he>=0;--he)b(nt[he]);le.normalizeUnits=function(e){return g(e)},le.invalid=function(e){var t=le.utc(NaN);return null!=e?l(t._pf,e):t._pf.userInvalidated=!0,t},le.parseZone=function(){return le.apply(null,arguments).parseZone()},le.parseTwoDigitYear=function(e){return y(e)+(y(e)>68?1900:2e3)},l(le.fn=a.prototype,{clone:function(){return le(this)},valueOf:function(){return+this._d+6e4*(this._offset||0)},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.clone().lang("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){var e=le(this).utc();return 0<e.year()&&e.year()<=9999?N(e,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):N(e,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var e=this;return[e.year(),e.month(),e.date(),e.hours(),e.minutes(),e.seconds(),e.milliseconds()]},isValid:function(){return $(this)},isDSTShifted:function(){return this._a?this.isValid()&&f(this._a,(this._isUTC?le.utc(this._a):le(this._a)).toArray())>0:!1},parsingFlags:function(){return l({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(){return this.zone(0)},local:function(){return this.zone(0),this._isUTC=!1,this},format:function(e){var t=N(this,e||le.defaultFormat);return this.lang().postformat(t)},add:function(e,t){var i;return i="string"==typeof e?le.duration(+t,e):le.duration(e,t),u(this,i,1),this},subtract:function(e,t){var i;return i="string"==typeof e?le.duration(+t,e):le.duration(e,t),u(this,i,-1),this},diff:function(e,t,i){var n,s,o=S(e,this),a=6e4*(this.zone()-o.zone());return t=g(t),"year"===t||"month"===t?(n=432e5*(this.daysInMonth()+o.daysInMonth()),s=12*(this.year()-o.year())+(this.month()-o.month()),s+=(this-le(this).startOf("month")-(o-le(o).startOf("month")))/n,s-=6e4*(this.zone()-le(this).startOf("month").zone()-(o.zone()-le(o).startOf("month").zone()))/n,"year"===t&&(s/=12)):(n=this-o,s="second"===t?n/1e3:"minute"===t?n/6e4:"hour"===t?n/36e5:"day"===t?(n-a)/864e5:"week"===t?(n-a)/6048e5:n),i?s:h(s)},from:function(e,t){return le.duration(this.diff(e)).lang(this.lang()._abbr).humanize(!t)},fromNow:function(e){return this.from(le(),e)},calendar:function(){var e=S(le(),this).startOf("day"),t=this.diff(e,"days",!0),i=-6>t?"sameElse":-1>t?"lastWeek":0>t?"lastDay":1>t?"sameDay":2>t?"nextDay":7>t?"nextWeek":"sameElse";return this.format(this.lang().calendar(i,this))},isLeapYear:function(){return I(this.year())},isDST:function(){return this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone()},day:function(e){var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=K(e,this.lang()),this.add({d:e-t})):t},month:se("Month",!0),startOf:function(e){switch(e=g(e)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===e?this.weekday(0):"isoWeek"===e&&this.isoWeekday(1),"quarter"===e&&this.month(3*Math.floor(this.month()/3)),this},endOf:function(e){return e=g(e),this.startOf(e).add("isoWeek"===e?"week":e,1).subtract("ms",1)},isAfter:function(e,t){return t="undefined"!=typeof t?t:"millisecond",+this.clone().startOf(t)>+le(e).startOf(t)},isBefore:function(e,t){return t="undefined"!=typeof t?t:"millisecond",+this.clone().startOf(t)<+le(e).startOf(t)},isSame:function(e,t){return t=t||"ms",+this.clone().startOf(t)===+S(e,this).startOf(t)},min:function(e){return e=le.apply(null,arguments),this>e?this:e},max:function(e){return e=le.apply(null,arguments),e>this?this:e},zone:function(e,t){var i=this._offset||0;return null==e?this._isUTC?i:this._d.getTimezoneOffset():("string"==typeof e&&(e=O(e)),Math.abs(e)<16&&(e=60*e),this._offset=e,this._isUTC=!0,i!==e&&(!t||this._changeInProgress?u(this,le.duration(i-e,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,le.updateOffset(this,!0),this._changeInProgress=null)),this)},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){return this._tzm?this.zone(this._tzm):"string"==typeof this._i&&this.zone(this._i),this},hasAlignedHourOffset:function(e){return e=e?le(e).zone():0,(this.zone()-e)%60===0},daysInMonth:function(){return w(this.year(),this.month())},dayOfYear:function(e){var t=pe((le(this).startOf("day")-le(this).startOf("year"))/864e5)+1;return null==e?t:this.add("d",e-t)},quarter:function(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)},weekYear:function(e){var t=J(this,this.lang()._week.dow,this.lang()._week.doy).year;return null==e?t:this.add("y",e-t)},isoWeekYear:function(e){var t=J(this,1,4).year;return null==e?t:this.add("y",e-t)},week:function(e){var t=this.lang().week(this);return null==e?t:this.add("d",7*(e-t))},isoWeek:function(e){var t=J(this,1,4).week;return null==e?t:this.add("d",7*(e-t))},weekday:function(e){var t=(this.day()+7-this.lang()._week.dow)%7;return null==e?t:this.add("d",e-t)},isoWeekday:function(e){return null==e?this.day()||7:this.day(this.day()%7?e:e-7)},isoWeeksInYear:function(){return _(this.year(),1,4)},weeksInYear:function(){var e=this._lang._week;return _(this.year(),e.dow,e.doy)},get:function(e){return e=g(e),this[e]()},set:function(e,t){
return e=g(e),"function"==typeof this[e]&&this[e](t),this},lang:function(t){return t===e?this._lang:(this._lang=M(t),this)}}),le.fn.millisecond=le.fn.milliseconds=se("Milliseconds",!1),le.fn.second=le.fn.seconds=se("Seconds",!1),le.fn.minute=le.fn.minutes=se("Minutes",!1),le.fn.hour=le.fn.hours=se("Hours",!0),le.fn.date=se("Date",!0),le.fn.dates=i("dates accessor is deprecated. Use date instead.",se("Date",!0)),le.fn.year=se("FullYear",!0),le.fn.years=i("years accessor is deprecated. Use year instead.",se("FullYear",!0)),le.fn.days=le.fn.day,le.fn.months=le.fn.month,le.fn.weeks=le.fn.week,le.fn.isoWeeks=le.fn.isoWeek,le.fn.quarters=le.fn.quarter,le.fn.toJSON=le.fn.toISOString,l(le.duration.fn=r.prototype,{_bubble:function(){var e,t,i,n,s=this._milliseconds,o=this._days,a=this._months,r=this._data;r.milliseconds=s%1e3,e=h(s/1e3),r.seconds=e%60,t=h(e/60),r.minutes=t%60,i=h(t/60),r.hours=i%24,o+=h(i/24),r.days=o%30,a+=h(o/30),r.months=a%12,n=h(a/12),r.years=n},weeks:function(){return h(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*y(this._months/12)},humanize:function(e){var t=+this,i=Q(t,!e,this.lang());return e&&(i=this.lang().pastFuture(t,i)),this.lang().postformat(i)},add:function(e,t){var i=le.duration(e,t);return this._milliseconds+=i._milliseconds,this._days+=i._days,this._months+=i._months,this._bubble(),this},subtract:function(e,t){var i=le.duration(e,t);return this._milliseconds-=i._milliseconds,this._days-=i._days,this._months-=i._months,this._bubble(),this},get:function(e){return e=g(e),this[e.toLowerCase()+"s"]()},as:function(e){return e=g(e),this["as"+e.charAt(0).toUpperCase()+e.slice(1)+"s"]()},lang:le.fn.lang,toIsoString:function(){var e=Math.abs(this.years()),t=Math.abs(this.months()),i=Math.abs(this.days()),n=Math.abs(this.hours()),s=Math.abs(this.minutes()),o=Math.abs(this.seconds()+this.milliseconds()/1e3);return this.asSeconds()?(this.asSeconds()<0?"-":"")+"P"+(e?e+"Y":"")+(t?t+"M":"")+(i?i+"D":"")+(n||s||o?"T":"")+(n?n+"H":"")+(s?s+"M":"")+(o?o+"S":""):"P0D"}});for(he in Xe)Xe.hasOwnProperty(he)&&(ae(he,Xe[he]),oe(he.toLowerCase()));ae("Weeks",6048e5),le.duration.fn.asMonths=function(){return(+this-31536e6*this.years())/2592e6+12*this.years()},le.lang("en",{ordinal:function(e){var t=e%10,i=1===y(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th";return e+i}}),Ie?module.exports=le:"function"==typeof define&&define.amd?(define("moment",function(e,t,i){return i.config&&i.config()&&i.config().noGlobal===!0&&(ue.moment=ce),le}),re(!0)):re()}.call(this),function(){function e(e){function i(e){e+="";var t=e.split(":"),i=~e.indexOf("-")?-1:1,n=Math.abs(+t[0]),s=parseInt(t[1],10)||0,o=parseInt(t[2],10)||0;return i*(60*n+s+o/60)}function n(e,t,n,s,o,a,r,l,c,d){this.name=e,this.startYear=+t,this.endYear=+n,this.month=+s,this.day=+o,this.dayRule=+a,this.time=i(r),this.timeRule=+l,this.offset=i(c),this.letters=d||"",this.date=h(this.date),this.weekdayAfter=h(this.weekdayAfter),this.lastWeekday=h(this.lastWeekday)}function s(e,t){this.rule=t,this.start=t.start(e)}function o(e,t){return e.isLast?-1:t.isLast?1:t.start-e.start}function a(e){this.name=e,this.rules=[],this.lastYearRule=h(this.lastYearRule)}function r(t,n,s,o,a,r){var l,c="string"==typeof a?a.split("_"):[9999];for(this.name=t,this.offset=i(n),this.ruleSet=s,this.letters=o,this.lastRule=h(this.lastRule),l=0;l<c.length;l++)c[l]=+c[l];this.until=e.utc(c).subtract("m",i(r))}function l(e,t){return e.until-t.until}function c(e){this.name=p(e),this.displayName=e,this.zones=[],this.zoneAndRule=h(this.zoneAndRule,function(e){return+e})}function h(e,t){var i={};return function(n){var s=t?t.apply(this,arguments):n;return s in i?i[s]:i[s]=e.apply(this,arguments)}}function d(e){var t,i,n;for(t in e)for(n=e[t],i=0;i<n.length;i++)u(t+"	"+n[i])}function u(e){if(C[e])return C[e];var t=e.split(/\s/),i=p(t[0]),s=new n(i,t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10]);return C[e]=s,v(i).add(s),s}function p(e){return(e||"").toLowerCase().replace(/\//g,"_")}function m(e){var t,i,n;for(t in e)for(n=e[t],i=0;i<n.length;i++)g(t+"	"+n[i])}function f(e){var t;for(t in e)T[p(t)]=p(e[t])}function g(e){if(x[e])return x[e];var t=e.split(/\s/),i=p(t[0]),n=new r(i,t[1],v(t[2]),t[3],t[4],t[5]);return x[e]=n,b(t[0]).add(n),n}function v(e){return e=p(e),$[e]||($[e]=new a(e)),$[e]}function b(e){var t=p(e);return T[t]&&(t=T[t]),S[t]||(S[t]=new c(e)),S[t]}function y(e){e&&(e.zones&&m(e.zones),e.rules&&d(e.rules),e.links&&f(e.links))}function w(){var e,t=[];for(e in S)t.push(S[e]);return t}var _,k=e.fn.zoneName,I=e.fn.zoneAbbr,C={},$={},x={},S={},T={},A=1,M=2,P=7,E=8;return void 0!==e.tz?e:(n.prototype={contains:function(e){return e>=this.startYear&&e<=this.endYear},start:function(t){return t=Math.min(Math.max(t,this.startYear),this.endYear),e.utc([t,this.month,this.date(t),0,this.time])},date:function(e){return this.dayRule===P?this.day:this.dayRule===E?this.lastWeekday(e):this.weekdayAfter(e)},weekdayAfter:function(t){for(var i=this.day,n=e([t,this.month,1]).day(),s=this.dayRule+1-n;i>s;)s+=7;return s},lastWeekday:function(t){var i=this.day,n=i%7,s=e([t,this.month+1,1]).day(),o=e([t,this.month,1]).daysInMonth(),a=o+(n-(s-1))-7*~~(i/7);return n>=s&&(a-=7),a}},s.prototype={equals:function(e){return e&&e.rule===this.rule?Math.abs(e.start-this.start)<864e5:!1}},a.prototype={add:function(e){this.rules.push(e)},ruleYears:function(e,t){var i,n,a,r=e.year(),l=[];for(i=0;i<this.rules.length;i++)n=this.rules[i],n.contains(r)?l.push(new s(r,n)):n.contains(r+1)&&l.push(new s(r+1,n));return l.push(new s(r-1,this.lastYearRule(r-1))),t&&(a=new s(r-1,t.lastRule()),a.start=t.until.clone().utc(),a.isLast=t.ruleSet!==this,l.push(a)),l.sort(o),l},rule:function(e,t,i){var n,s,o,a,r,l=this.ruleYears(e,i),c=0;for(i&&(s=i.offset+i.lastRule().offset,o=9e4*Math.abs(s)),r=l.length-1;r>-1;r--)a=n,n=l[r],n.equals(a)||(i&&!n.isLast&&Math.abs(n.start-i.until)<=o&&(c+=s-t),n.rule.timeRule===M&&(c=t),n.rule.timeRule!==A&&n.start.add("m",-c),c=n.rule.offset+t);for(r=0;r<l.length;r++)if(n=l[r],e>=n.start&&!n.isLast)return n.rule;return _},lastYearRule:function(e){var t,i,n,s=_,o=-1e30;for(t=0;t<this.rules.length;t++)i=this.rules[t],e>=i.startYear&&(n=i.start(e),n>o&&(o=n,s=i));return s}},r.prototype={rule:function(e,t){return this.ruleSet.rule(e,this.offset,t)},lastRule:function(){return this.rule(this.until)},format:function(e){return this.letters.replace("%s",e.letters)}},c.prototype={zoneAndRule:function(e){var t,i,n;for(e=e.clone().utc(),t=0;t<this.zones.length&&(i=this.zones[t],!(e<i.until));t++)n=i;return[i,i.rule(e,n)]},add:function(e){this.zones.push(e),this.zones.sort(l)},format:function(e){var t=this.zoneAndRule(e);return t[0].format(t[1])},offset:function(e){var t=this.zoneAndRule(e);return-(t[0].offset+t[1].offset)}},e.updateOffset=function(e,t){var i;e._z&&(i=e._z.offset(e),Math.abs(i)<16&&(i/=60),e.zone(i,t))},e.fn.tz=function(t){return t?(this._z=b(t),this._z&&e.updateOffset(this),this):this._z?this._z.displayName:void 0},e.fn.zoneName=function(){return this._z?this._z.format(this):k.call(this)},e.fn.zoneAbbr=function(){return this._z?this._z.format(this):I.call(this)},e.momentProperties._z=null,e.tz=function(){var t,i=[],n=arguments.length-1;for(t=0;n>t;t++)i[t]=arguments[t];var s=e.apply(null,i),o=s.zone();return s.tz(arguments[n]),s.add("minutes",s.zone()-o)},e.tz.add=y,e.tz.addRule=u,e.tz.addZone=g,e.tz.zones=w,e.tz.version=t,e.tz.zoneExists=function(e){return b(e).zones.length>0},_=u("- 0 9999 0 0 0 0 0 0"),e)}var t="0.0.6";"function"==typeof define&&define.amd?define("moment-timezone",["moment"],e):"undefined"!=typeof module?module.exports=e(require("moment")):"undefined"!=typeof window&&window.moment&&e(window.moment)}.apply(this),function(){"use strict";var e="undefined"!=typeof module&&module.exports,t="undefined"!=typeof Element&&"ALLOW_KEYBOARD_INPUT"in Element,i=function(){for(var e,t,i=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],n=0,s=i.length,o={};s>n;n++)if(e=i[n],e&&e[1]in document){for(n=0,t=e.length;t>n;n++)o[i[0][n]]=e[n];return o}return!1}(),n={request:function(e){var n=i.requestFullscreen;e=e||document.documentElement,/5\.1[\.\d]* Safari/.test(navigator.userAgent)?e[n]():e[n](t&&Element.ALLOW_KEYBOARD_INPUT)},exit:function(){document[i.exitFullscreen]()},toggle:function(e){this.isFullscreen?this.exit():this.request(e)},onchange:function(){},onerror:function(){},raw:i};return i?(Object.defineProperties(n,{isFullscreen:{get:function(){return!!document[i.fullscreenElement]}},element:{enumerable:!0,get:function(){return document[i.fullscreenElement]}},enabled:{enumerable:!0,get:function(){return!!document[i.fullscreenEnabled]}}}),document.addEventListener(i.fullscreenchange,function(e){n.onchange.call(n,e)}),document.addEventListener(i.fullscreenerror,function(e){n.onerror.call(n,e)}),void(e?module.exports=n:window.screenfull=n)):void(e?module.exports=!1:window.screenfull=!1)}(),!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.io=e()}}(function(){var e;return function t(e,i,n){function s(a,r){if(!i[a]){if(!e[a]){var l="function"==typeof require&&require;if(!r&&l)return l(a,!0);if(o)return o(a,!0);throw new Error("Cannot find module '"+a+"'")}var c=i[a]={exports:{}};e[a][0].call(c.exports,function(t){var i=e[a][1][t];return s(i?i:t)},c,c.exports,t,e,i,n)}return i[a].exports}for(var o="function"==typeof require&&require,a=0;a<n.length;a++)s(n[a]);return s}({1:[function(e,t,i){t.exports=e("./lib/")},{"./lib/":2}],2:[function(e,t,i){function n(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var i,n=s(e),o=n.source,c=n.id;return t.forceNew||t["force new connection"]||!1===t.multiplex?(r("ignoring socket cache for %s",o),i=a(o,t)):(l[c]||(r("new io instance for %s",o),l[c]=a(o,t)),i=l[c]),i.socket(n.path)}var s=e("./url"),o=e("socket.io-parser"),a=e("./manager"),r=e("debug")("socket.io-client");t.exports=i=n;var l=i.managers={};i.protocol=o.protocol,i.connect=n,i.Manager=e("./manager"),i.Socket=e("./socket")},{"./manager":3,"./socket":5,"./url":6,debug:9,"socket.io-parser":40}],3:[function(e,t,i){function n(e,t){return this instanceof n?(e&&"object"==typeof e&&(t=e,e=void 0),t=t||{},t.path=t.path||"/socket.io",this.nsps={},this.subs=[],this.opts=t,this.reconnection(t.reconnection!==!1),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.timeout(null==t.timeout?2e4:t.timeout),this.readyState="closed",this.uri=e,this.connected=0,this.attempts=0,this.encoding=!1,this.packetBuffer=[],this.encoder=new r.Encoder,this.decoder=new r.Decoder,this.autoConnect=t.autoConnect!==!1,void(this.autoConnect&&this.open())):new n(e,t)}var s=(e("./url"),e("engine.io-client")),o=e("./socket"),a=e("component-emitter"),r=e("socket.io-parser"),l=e("./on"),c=e("component-bind"),h=(e("object-component"),e("debug")("socket.io-client:manager"));t.exports=n,n.prototype.emitAll=function(){this.emit.apply(this,arguments);for(var e in this.nsps)this.nsps[e].emit.apply(this.nsps[e],arguments)},a(n.prototype),n.prototype.reconnection=function(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection},n.prototype.reconnectionAttempts=function(e){return arguments.length?(this._reconnectionAttempts=e,this):this._reconnectionAttempts},n.prototype.reconnectionDelay=function(e){return arguments.length?(this._reconnectionDelay=e,this):this._reconnectionDelay},n.prototype.reconnectionDelayMax=function(e){return arguments.length?(this._reconnectionDelayMax=e,this):this._reconnectionDelayMax},n.prototype.timeout=function(e){return arguments.length?(this._timeout=e,this):this._timeout},n.prototype.maybeReconnectOnOpen=function(){this.openReconnect||this.reconnecting||!this._reconnection||0!==this.attempts||(this.openReconnect=!0,this.reconnect())},n.prototype.open=n.prototype.connect=function(e){if(h("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;h("opening %s",this.uri),this.engine=s(this.uri,this.opts);var t=this.engine,i=this;this.readyState="opening";var n=l(t,"open",function(){i.onopen(),e&&e()}),o=l(t,"error",function(t){if(h("connect_error"),i.cleanup(),i.readyState="closed",i.emitAll("connect_error",t),e){var n=new Error("Connection error");n.data=t,e(n)}i.maybeReconnectOnOpen()});if(!1!==this._timeout){var a=this._timeout;h("connect attempt will timeout after %d",a);var r=setTimeout(function(){h("connect attempt timed out after %d",a),n.destroy(),t.close(),t.emit("error","timeout"),i.emitAll("connect_timeout",a)},a);this.subs.push({destroy:function(){clearTimeout(r)}})}return this.subs.push(n),this.subs.push(o),this},n.prototype.onopen=function(){h("open"),this.cleanup(),this.readyState="open",this.emit("open");var e=this.engine;this.subs.push(l(e,"data",c(this,"ondata"))),this.subs.push(l(this.decoder,"decoded",c(this,"ondecoded"))),this.subs.push(l(e,"error",c(this,"onerror"))),this.subs.push(l(e,"close",c(this,"onclose")))},n.prototype.ondata=function(e){this.decoder.add(e)},n.prototype.ondecoded=function(e){this.emit("packet",e)},n.prototype.onerror=function(e){h("error",e),this.emitAll("error",e)},n.prototype.socket=function(e){var t=this.nsps[e];if(!t){t=new o(this,e),this.nsps[e]=t;var i=this;t.on("connect",function(){i.connected++})}return t},n.prototype.destroy=function(e){--this.connected||this.close()},n.prototype.packet=function(e){h("writing packet %j",e);var t=this;t.encoding?t.packetBuffer.push(e):(t.encoding=!0,this.encoder.encode(e,function(e){for(var i=0;i<e.length;i++)t.engine.write(e[i]);t.encoding=!1,t.processPacketQueue()}))},n.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var e=this.packetBuffer.shift();this.packet(e)}},n.prototype.cleanup=function(){for(var e;e=this.subs.shift();)e.destroy();this.packetBuffer=[],this.encoding=!1,this.decoder.destroy()},n.prototype.close=n.prototype.disconnect=function(){this.skipReconnect=!0,this.engine.close()},n.prototype.onclose=function(e){h("close"),this.cleanup(),this.readyState="closed",this.emit("close",e),this._reconnection&&!this.skipReconnect&&this.reconnect()},n.prototype.reconnect=function(){if(this.reconnecting)return this;var e=this;if(this.attempts++,this.attempts>this._reconnectionAttempts)h("reconnect failed"),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var t=this.attempts*this.reconnectionDelay();t=Math.min(t,this.reconnectionDelayMax()),h("will wait %dms before reconnect attempt",t),this.reconnecting=!0;var i=setTimeout(function(){h("attempting reconnect"),e.emitAll("reconnect_attempt",e.attempts),e.emitAll("reconnecting",e.attempts),e.open(function(t){t?(h("reconnect attempt error"),e.reconnecting=!1,e.reconnect(),e.emitAll("reconnect_error",t.data)):(h("reconnect success"),e.onreconnect())})},t);this.subs.push({destroy:function(){clearTimeout(i)}})}},n.prototype.onreconnect=function(){var e=this.attempts;this.attempts=0,this.reconnecting=!1,this.emitAll("reconnect",e)}},{"./on":4,"./socket":5,"./url":6,"component-bind":7,"component-emitter":8,debug:9,"engine.io-client":10,"object-component":37,"socket.io-parser":40}],4:[function(e,t,i){function n(e,t,i){return e.on(t,i),{destroy:function(){e.removeListener(t,i)}}}t.exports=n},{}],5:[function(e,t,i){function n(e,t){this.io=e,this.nsp=t,this.json=this,this.ids=0,this.acks={},this.io.autoConnect&&this.open(),this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,this.subEvents()}var s=e("socket.io-parser"),o=e("component-emitter"),a=e("to-array"),r=e("./on"),l=e("component-bind"),c=e("debug")("socket.io-client:socket"),h=e("has-binary");e("indexof");t.exports=i=n;var d={connect:1,connect_error:1,connect_timeout:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1},u=o.prototype.emit;o(n.prototype),n.prototype.subEvents=function(){var e=this.io;this.subs=[r(e,"open",l(this,"onopen")),r(e,"packet",l(this,"onpacket")),r(e,"close",l(this,"onclose"))]},n.prototype.open=n.prototype.connect=function(){return this.connected?this:(this.io.open(),"open"==this.io.readyState&&this.onopen(),this)},n.prototype.send=function(){var e=a(arguments);return e.unshift("message"),this.emit.apply(this,e),this},n.prototype.emit=function(e){if(d.hasOwnProperty(e))return u.apply(this,arguments),this;var t=a(arguments),i=s.EVENT;h(t)&&(i=s.BINARY_EVENT);var n={type:i,data:t};return"function"==typeof t[t.length-1]&&(c("emitting packet with ack id %d",this.ids),this.acks[this.ids]=t.pop(),n.id=this.ids++),this.connected?this.packet(n):this.sendBuffer.push(n),this},n.prototype.packet=function(e){e.nsp=this.nsp,this.io.packet(e)},n.prototype.onopen=function(){c("transport is open - connecting"),"/"!=this.nsp&&this.packet({type:s.CONNECT})},n.prototype.onclose=function(e){c("close (%s)",e),this.connected=!1,this.disconnected=!0,this.emit("disconnect",e)},n.prototype.onpacket=function(e){if(e.nsp==this.nsp)switch(e.type){case s.CONNECT:this.onconnect();break;case s.EVENT:this.onevent(e);break;case s.BINARY_EVENT:this.onevent(e);break;case s.ACK:this.onack(e);break;case s.BINARY_ACK:this.onack(e);break;case s.DISCONNECT:this.ondisconnect();break;case s.ERROR:this.emit("error",e.data)}},n.prototype.onevent=function(e){var t=e.data||[];c("emitting event %j",t),null!=e.id&&(c("attaching ack callback to event"),t.push(this.ack(e.id))),this.connected?u.apply(this,t):this.receiveBuffer.push(t)},n.prototype.ack=function(e){var t=this,i=!1;return function(){if(!i){i=!0;var n=a(arguments);c("sending ack %j",n);var o=h(n)?s.BINARY_ACK:s.ACK;t.packet({type:o,id:e,data:n})}}},n.prototype.onack=function(e){c("calling ack %s with %j",e.id,e.data);var t=this.acks[e.id];t.apply(this,e.data),delete this.acks[e.id]},n.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},n.prototype.emitBuffered=function(){var e;for(e=0;e<this.receiveBuffer.length;e++)u.apply(this,this.receiveBuffer[e]);for(this.receiveBuffer=[],e=0;e<this.sendBuffer.length;e++)this.packet(this.sendBuffer[e]);this.sendBuffer=[]},n.prototype.ondisconnect=function(){c("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},n.prototype.destroy=function(){for(var e=0;e<this.subs.length;e++)this.subs[e].destroy();this.io.destroy(this)},n.prototype.close=n.prototype.disconnect=function(){return this.connected?(c("performing disconnect (%s)",this.nsp),this.packet({type:s.DISCONNECT}),this.destroy(),this.onclose("io client disconnect"),this):this}},{"./on":4,"component-bind":7,"component-emitter":8,debug:9,"has-binary":32,indexof:36,"socket.io-parser":40,"to-array":44}],6:[function(e,t,i){(function(i){function n(e,t){var n=e,t=t||i.location;return null==e&&(e=t.protocol+"//"+t.hostname),"string"==typeof e&&("/"==e.charAt(0)&&"undefined"!=typeof t&&(e=t.hostname+e),/^(https?|wss?):\/\//.test(e)||(o("protocol-less url %s",e),e="undefined"!=typeof t?t.protocol+"//"+e:"https://"+e),o("parse %s",e),n=s(e)),n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443")),n.path=n.path||"/",n.id=n.protocol+"://"+n.host+":"+n.port,n.href=n.protocol+"://"+n.host+(t&&t.port==n.port?"":":"+n.port),n}var s=e("parseuri"),o=e("debug")("socket.io-client:url");t.exports=n}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{debug:9,parseuri:38}],7:[function(e,t,i){var n=[].slice;t.exports=function(e,t){if("string"==typeof t&&(t=e[t]),"function"!=typeof t)throw new Error("bind() requires a function");var i=n.call(arguments,2);return function(){return t.apply(e,i.concat(n.call(arguments)))}}},{}],8:[function(e,t,i){function n(e){return e?s(e):void 0}function s(e){for(var t in n.prototype)e[t]=n.prototype[t];return e}t.exports=n,n.prototype.on=n.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks[e]=this._callbacks[e]||[]).push(t),this},n.prototype.once=function(e,t){function i(){n.off(e,i),t.apply(this,arguments)}var n=this;return this._callbacks=this._callbacks||{},i.fn=t,this.on(e,i),this},n.prototype.off=n.prototype.removeListener=n.prototype.removeAllListeners=n.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var i=this._callbacks[e];if(!i)return this;if(1==arguments.length)return delete this._callbacks[e],this;for(var n,s=0;s<i.length;s++)if(n=i[s],n===t||n.fn===t){i.splice(s,1);break}return this},n.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),i=this._callbacks[e];if(i){i=i.slice(0);for(var n=0,s=i.length;s>n;++n)i[n].apply(this,t)}return this},n.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks[e]||[]},n.prototype.hasListeners=function(e){return!!this.listeners(e).length}},{}],9:[function(e,t,i){function n(e){return n.enabled(e)?function(t){t=s(t);var i=new Date,o=i-(n[e]||i);n[e]=i,t=e+" "+t+" +"+n.humanize(o),window.console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}:function(){}}function s(e){return e instanceof Error?e.stack||e.message:e}t.exports=n,n.names=[],n.skips=[],n.enable=function(e){try{localStorage.debug=e}catch(t){}for(var i=(e||"").split(/[\s,]+/),s=i.length,o=0;s>o;o++)e=i[o].replace("*",".*?"),"-"===e[0]?n.skips.push(new RegExp("^"+e.substr(1)+"$")):n.names.push(new RegExp("^"+e+"$"))},n.disable=function(){n.enable("")},n.humanize=function(e){var t=1e3,i=6e4,n=60*i;return e>=n?(e/n).toFixed(1)+"h":e>=i?(e/i).toFixed(1)+"m":e>=t?(e/t|0)+"s":e+"ms"},n.enabled=function(e){for(var t=0,i=n.skips.length;i>t;t++)if(n.skips[t].test(e))return!1;for(var t=0,i=n.names.length;i>t;t++)if(n.names[t].test(e))return!0;return!1};try{window.localStorage&&n.enable(localStorage.debug)}catch(o){}},{}],10:[function(e,t,i){t.exports=e("./lib/")},{"./lib/":11}],11:[function(e,t,i){t.exports=e("./socket"),t.exports.parser=e("engine.io-parser")},{"./socket":12,"engine.io-parser":21}],12:[function(e,t,i){(function(i){function n(e,t){if(!(this instanceof n))return new n(e,t);if(t=t||{},e&&"object"==typeof e&&(t=e,e=null),e&&(e=h(e),t.host=e.host,t.secure="https"==e.protocol||"wss"==e.protocol,t.port=e.port,e.query&&(t.query=e.query)),this.secure=null!=t.secure?t.secure:i.location&&"https:"==location.protocol,t.host){var s=t.host.split(":");t.hostname=s.shift(),s.length&&(t.port=s.pop())}this.agent=t.agent||!1,this.hostname=t.hostname||(i.location?location.hostname:"localhost"),this.port=t.port||(i.location&&location.port?location.port:this.secure?443:80),this.query=t.query||{},"string"==typeof this.query&&(this.query=u.decode(this.query)),this.upgrade=!1!==t.upgrade,this.path=(t.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!t.forceJSONP,this.jsonp=!1!==t.jsonp,this.forceBase64=!!t.forceBase64,this.enablesXDR=!!t.enablesXDR,this.timestampParam=t.timestampParam||"t",this.timestampRequests=t.timestampRequests,this.transports=t.transports||["polling","websocket"],this.readyState="",this.writeBuffer=[],this.callbackBuffer=[],this.policyPort=t.policyPort||843,this.rememberUpgrade=t.rememberUpgrade||!1,this.open(),this.binaryType=null,this.onlyBinaryUpgrades=t.onlyBinaryUpgrades}function s(e){var t={};for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t}var o=e("./transports"),a=e("component-emitter"),r=e("debug")("engine.io-client:socket"),l=e("indexof"),c=e("engine.io-parser"),h=e("parseuri"),d=e("parsejson"),u=e("parseqs");t.exports=n,n.priorWebsocketSuccess=!1,a(n.prototype),n.protocol=c.protocol,n.Socket=n,n.Transport=e("./transport"),n.transports=e("./transports"),n.parser=e("engine.io-parser"),n.prototype.createTransport=function(e){r('creating transport "%s"',e);var t=s(this.query);t.EIO=c.protocol,t.transport=e,this.id&&(t.sid=this.id);var i=new o[e]({agent:this.agent,hostname:this.hostname,port:this.port,secure:this.secure,path:this.path,query:t,forceJSONP:this.forceJSONP,jsonp:this.jsonp,forceBase64:this.forceBase64,enablesXDR:this.enablesXDR,timestampRequests:this.timestampRequests,timestampParam:this.timestampParam,policyPort:this.policyPort,socket:this});return i},n.prototype.open=function(){var e;if(this.rememberUpgrade&&n.priorWebsocketSuccess&&-1!=this.transports.indexOf("websocket"))e="websocket";else{if(0==this.transports.length){var t=this;return void setTimeout(function(){t.emit("error","No transports available")},0)}e=this.transports[0]}this.readyState="opening";var e;try{e=this.createTransport(e)}catch(i){return this.transports.shift(),void this.open()}e.open(),this.setTransport(e)},n.prototype.setTransport=function(e){r("setting transport %s",e.name);var t=this;this.transport&&(r("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=e,e.on("drain",function(){t.onDrain()}).on("packet",function(e){t.onPacket(e)}).on("error",function(e){t.onError(e)}).on("close",function(){t.onClose("transport close")})},n.prototype.probe=function(e){function t(){if(u.onlyBinaryUpgrades){var t=!this.supportsBinary&&u.transport.supportsBinary;d=d||t}d||(r('probe transport "%s" opened',e),h.send([{type:"ping",data:"probe"}]),h.once("packet",function(t){if(!d)if("pong"==t.type&&"probe"==t.data)r('probe transport "%s" pong',e),u.upgrading=!0,u.emit("upgrading",h),n.priorWebsocketSuccess="websocket"==h.name,r('pausing current transport "%s"',u.transport.name),u.transport.pause(function(){d||"closed"!=u.readyState&&"closing"!=u.readyState&&(r("changing transport and sending upgrade packet"),c(),u.setTransport(h),h.send([{type:"upgrade"}]),u.emit("upgrade",h),h=null,u.upgrading=!1,u.flush())});else{r('probe transport "%s" failed',e);var i=new Error("probe error");i.transport=h.name,u.emit("upgradeError",i)}}))}function i(){d||(d=!0,c(),h.close(),h=null)}function s(t){var n=new Error("probe error: "+t);n.transport=h.name,i(),r('probe transport "%s" failed because of error: %s',e,t),u.emit("upgradeError",n)}function o(){s("transport closed")}function a(){s("socket closed")}function l(e){h&&e.name!=h.name&&(r('"%s" works - aborting "%s"',e.name,h.name),i())}function c(){h.removeListener("open",t),h.removeListener("error",s),h.removeListener("close",o),u.removeListener("close",a),u.removeListener("upgrading",l)}r('probing transport "%s"',e);var h=this.createTransport(e,{probe:1}),d=!1,u=this;n.priorWebsocketSuccess=!1,h.once("open",t),h.once("error",s),h.once("close",o),this.once("close",a),this.once("upgrading",l),h.open()},n.prototype.onOpen=function(){if(r("socket open"),this.readyState="open",n.priorWebsocketSuccess="websocket"==this.transport.name,this.emit("open"),this.flush(),"open"==this.readyState&&this.upgrade&&this.transport.pause){r("starting upgrade probes");for(var e=0,t=this.upgrades.length;t>e;e++)this.probe(this.upgrades[e])}},n.prototype.onPacket=function(e){if("opening"==this.readyState||"open"==this.readyState)switch(r('socket receive: type "%s", data "%s"',e.type,e.data),this.emit("packet",e),this.emit("heartbeat"),e.type){case"open":this.onHandshake(d(e.data));break;case"pong":this.setPing();break;case"error":var t=new Error("server error");t.code=e.data,this.emit("error",t);break;case"message":this.emit("data",e.data),this.emit("message",e.data)}else r('packet received with socket readyState "%s"',this.readyState)},n.prototype.onHandshake=function(e){this.emit("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.onOpen(),"closed"!=this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},n.prototype.onHeartbeat=function(e){clearTimeout(this.pingTimeoutTimer);var t=this;t.pingTimeoutTimer=setTimeout(function(){"closed"!=t.readyState&&t.onClose("ping timeout")},e||t.pingInterval+t.pingTimeout)},n.prototype.setPing=function(){var e=this;clearTimeout(e.pingIntervalTimer),e.pingIntervalTimer=setTimeout(function(){r("writing ping packet - expecting pong within %sms",e.pingTimeout),e.ping(),e.onHeartbeat(e.pingTimeout)},e.pingInterval)},n.prototype.ping=function(){this.sendPacket("ping")},n.prototype.onDrain=function(){for(var e=0;e<this.prevBufferLen;e++)this.callbackBuffer[e]&&this.callbackBuffer[e]();this.writeBuffer.splice(0,this.prevBufferLen),this.callbackBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0==this.writeBuffer.length?this.emit("drain"):this.flush()},n.prototype.flush=function(){"closed"!=this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(r("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},n.prototype.write=n.prototype.send=function(e,t){return this.sendPacket("message",e,t),this},n.prototype.sendPacket=function(e,t,i){var n={type:e,data:t};this.emit("packetCreate",n),this.writeBuffer.push(n),this.callbackBuffer.push(i),this.flush()},n.prototype.close=function(){return("opening"==this.readyState||"open"==this.readyState)&&(this.onClose("forced close"),r("socket closing - telling transport to close"),this.transport.close()),this},n.prototype.onError=function(e){r("socket error %j",e),n.priorWebsocketSuccess=!1,this.emit("error",e),this.onClose("transport error",e)},n.prototype.onClose=function(e,t){if("opening"==this.readyState||"open"==this.readyState){r('socket close with reason: "%s"',e);var i=this;clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),setTimeout(function(){i.writeBuffer=[],i.callbackBuffer=[],i.prevBufferLen=0},0),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",e,t)}},n.prototype.filterUpgrades=function(e){for(var t=[],i=0,n=e.length;n>i;i++)~l(this.transports,e[i])&&t.push(e[i]);return t}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./transport":13,"./transports":14,"component-emitter":8,debug:9,"engine.io-parser":21,indexof:36,parsejson:28,parseqs:29,parseuri:30}],13:[function(e,t,i){function n(e){this.path=e.path,this.hostname=e.hostname,this.port=e.port,this.secure=e.secure,this.query=e.query,this.timestampParam=e.timestampParam,this.timestampRequests=e.timestampRequests,this.readyState="",this.agent=e.agent||!1,this.socket=e.socket,this.enablesXDR=e.enablesXDR}var s=e("engine.io-parser"),o=e("component-emitter");t.exports=n,o(n.prototype),n.timestamps=0,n.prototype.onError=function(e,t){var i=new Error(e);return i.type="TransportError",i.description=t,this.emit("error",i),this},n.prototype.open=function(){return("closed"==this.readyState||""==this.readyState)&&(this.readyState="opening",this.doOpen()),this},n.prototype.close=function(){return("opening"==this.readyState||"open"==this.readyState)&&(this.doClose(),this.onClose()),this},n.prototype.send=function(e){if("open"!=this.readyState)throw new Error("Transport not open");this.write(e)},n.prototype.onOpen=function(){
this.readyState="open",this.writable=!0,this.emit("open")},n.prototype.onData=function(e){var t=s.decodePacket(e,this.socket.binaryType);this.onPacket(t)},n.prototype.onPacket=function(e){this.emit("packet",e)},n.prototype.onClose=function(){this.readyState="closed",this.emit("close")}},{"component-emitter":8,"engine.io-parser":21}],14:[function(e,t,i){(function(t){function n(e){var i,n=!1,r=!1,l=!1!==e.jsonp;if(t.location){var c="https:"==location.protocol,h=location.port;h||(h=c?443:80),n=e.hostname!=location.hostname||h!=e.port,r=e.secure!=c}if(e.xdomain=n,e.xscheme=r,i=new s(e),"open"in i&&!e.forceJSONP)return new o(e);if(!l)throw new Error("JSONP disabled");return new a(e)}var s=e("xmlhttprequest"),o=e("./polling-xhr"),a=e("./polling-jsonp"),r=e("./websocket");i.polling=n,i.websocket=r}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./polling-jsonp":15,"./polling-xhr":16,"./websocket":18,xmlhttprequest:19}],15:[function(e,t,i){(function(i){function n(){}function s(e){o.call(this,e),this.query=this.query||{},r||(i.___eio||(i.___eio=[]),r=i.___eio),this.index=r.length;var t=this;r.push(function(e){t.onData(e)}),this.query.j=this.index,i.document&&i.addEventListener&&i.addEventListener("beforeunload",function(){t.script&&(t.script.onerror=n)})}var o=e("./polling"),a=e("component-inherit");t.exports=s;var r,l=/\n/g,c=/\\n/g;a(s,o),s.prototype.supportsBinary=!1,s.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null),o.prototype.doClose.call(this)},s.prototype.doPoll=function(){var e=this,t=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),t.async=!0,t.src=this.uri(),t.onerror=function(t){e.onError("jsonp poll error",t)};var i=document.getElementsByTagName("script")[0];i.parentNode.insertBefore(t,i),this.script=t;var n="undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent);n&&setTimeout(function(){var e=document.createElement("iframe");document.body.appendChild(e),document.body.removeChild(e)},100)},s.prototype.doWrite=function(e,t){function i(){n(),t()}function n(){if(s.iframe)try{s.form.removeChild(s.iframe)}catch(e){s.onError("jsonp polling iframe removal error",e)}try{var t='<iframe src="javascript:0" name="'+s.iframeId+'">';o=document.createElement(t)}catch(e){o=document.createElement("iframe"),o.name=s.iframeId,o.src="javascript:0"}o.id=s.iframeId,s.form.appendChild(o),s.iframe=o}var s=this;if(!this.form){var o,a=document.createElement("form"),r=document.createElement("textarea"),h=this.iframeId="eio_iframe_"+this.index;a.className="socketio",a.style.position="absolute",a.style.top="-1000px",a.style.left="-1000px",a.target=h,a.method="POST",a.setAttribute("accept-charset","utf-8"),r.name="d",a.appendChild(r),document.body.appendChild(a),this.form=a,this.area=r}this.form.action=this.uri(),n(),e=e.replace(c,"\\\n"),this.area.value=e.replace(l,"\\n");try{this.form.submit()}catch(d){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"==s.iframe.readyState&&i()}:this.iframe.onload=i}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./polling":17,"component-inherit":20}],16:[function(e,t,i){(function(i){function n(){}function s(e){if(l.call(this,e),i.location){var t="https:"==location.protocol,n=location.port;n||(n=t?443:80),this.xd=e.hostname!=i.location.hostname||n!=e.port,this.xs=e.secure!=t}}function o(e){this.method=e.method||"GET",this.uri=e.uri,this.xd=!!e.xd,this.xs=!!e.xs,this.async=!1!==e.async,this.data=void 0!=e.data?e.data:null,this.agent=e.agent,this.isBinary=e.isBinary,this.supportsBinary=e.supportsBinary,this.enablesXDR=e.enablesXDR,this.create()}function a(){for(var e in o.requests)o.requests.hasOwnProperty(e)&&o.requests[e].abort()}var r=e("xmlhttprequest"),l=e("./polling"),c=e("component-emitter"),h=e("component-inherit"),d=e("debug")("engine.io-client:polling-xhr");t.exports=s,t.exports.Request=o,h(s,l),s.prototype.supportsBinary=!0,s.prototype.request=function(e){return e=e||{},e.uri=this.uri(),e.xd=this.xd,e.xs=this.xs,e.agent=this.agent||!1,e.supportsBinary=this.supportsBinary,e.enablesXDR=this.enablesXDR,new o(e)},s.prototype.doWrite=function(e,t){var i="string"!=typeof e&&void 0!==e,n=this.request({method:"POST",data:e,isBinary:i}),s=this;n.on("success",t),n.on("error",function(e){s.onError("xhr post error",e)}),this.sendXhr=n},s.prototype.doPoll=function(){d("xhr poll");var e=this.request(),t=this;e.on("data",function(e){t.onData(e)}),e.on("error",function(e){t.onError("xhr poll error",e)}),this.pollXhr=e},c(o.prototype),o.prototype.create=function(){var e=this.xhr=new r({agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR}),t=this;try{if(d("xhr open %s: %s",this.method,this.uri),e.open(this.method,this.uri,this.async),this.supportsBinary&&(e.responseType="arraybuffer"),"POST"==this.method)try{this.isBinary?e.setRequestHeader("Content-type","application/octet-stream"):e.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(n){}"withCredentials"in e&&(e.withCredentials=!0),this.hasXDR()?(e.onload=function(){t.onLoad()},e.onerror=function(){t.onError(e.responseText)}):e.onreadystatechange=function(){4==e.readyState&&(200==e.status||1223==e.status?t.onLoad():setTimeout(function(){t.onError(e.status)},0))},d("xhr data %s",this.data),e.send(this.data)}catch(n){return void setTimeout(function(){t.onError(n)},0)}i.document&&(this.index=o.requestsCount++,o.requests[this.index]=this)},o.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},o.prototype.onData=function(e){this.emit("data",e),this.onSuccess()},o.prototype.onError=function(e){this.emit("error",e),this.cleanup()},o.prototype.cleanup=function(){if("undefined"!=typeof this.xhr&&null!==this.xhr){this.hasXDR()?this.xhr.onload=this.xhr.onerror=n:this.xhr.onreadystatechange=n;try{this.xhr.abort()}catch(e){}i.document&&delete o.requests[this.index],this.xhr=null}},o.prototype.onLoad=function(){var e;try{var t;try{t=this.xhr.getResponseHeader("Content-Type")}catch(i){}e="application/octet-stream"===t?this.xhr.response:this.supportsBinary?"ok":this.xhr.responseText}catch(i){this.onError(i)}null!=e&&this.onData(e)},o.prototype.hasXDR=function(){return"undefined"!=typeof i.XDomainRequest&&!this.xs&&this.enablesXDR},o.prototype.abort=function(){this.cleanup()},i.document&&(o.requestsCount=0,o.requests={},i.attachEvent?i.attachEvent("onunload",a):i.addEventListener&&i.addEventListener("beforeunload",a))}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./polling":17,"component-emitter":8,"component-inherit":20,debug:9,xmlhttprequest:19}],17:[function(e,t,i){function n(e){var t=e&&e.forceBase64;(!c||t)&&(this.supportsBinary=!1),s.call(this,e)}var s=e("../transport"),o=e("parseqs"),a=e("engine.io-parser"),r=e("component-inherit"),l=e("debug")("engine.io-client:polling");t.exports=n;var c=function(){var t=e("xmlhttprequest"),i=new t({agent:this.agent,xdomain:!1});return null!=i.responseType}();r(n,s),n.prototype.name="polling",n.prototype.doOpen=function(){this.poll()},n.prototype.pause=function(e){function t(){l("paused"),i.readyState="paused",e()}var i=this;if(this.readyState="pausing",this.polling||!this.writable){var n=0;this.polling&&(l("we are currently polling - waiting to pause"),n++,this.once("pollComplete",function(){l("pre-pause polling complete"),--n||t()})),this.writable||(l("we are currently writing - waiting to pause"),n++,this.once("drain",function(){l("pre-pause writing complete"),--n||t()}))}else t()},n.prototype.poll=function(){l("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},n.prototype.onData=function(e){var t=this;l("polling got data %s",e);var i=function(e,i,n){return"opening"==t.readyState&&t.onOpen(),"close"==e.type?(t.onClose(),!1):void t.onPacket(e)};a.decodePayload(e,this.socket.binaryType,i),"closed"!=this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"==this.readyState?this.poll():l('ignoring poll - transport state "%s"',this.readyState))},n.prototype.doClose=function(){function e(){l("writing close packet"),t.write([{type:"close"}])}var t=this;"open"==this.readyState?(l("transport open - closing"),e()):(l("transport not open - deferring close"),this.once("open",e))},n.prototype.write=function(e){var t=this;this.writable=!1;var i=function(){t.writable=!0,t.emit("drain")},t=this;a.encodePayload(e,this.supportsBinary,function(e){t.doWrite(e,i)})},n.prototype.uri=function(){var e=this.query||{},t=this.secure?"https":"http",i="";return!1!==this.timestampRequests&&(e[this.timestampParam]=+new Date+"-"+s.timestamps++),this.supportsBinary||e.sid||(e.b64=1),e=o.encode(e),this.port&&("https"==t&&443!=this.port||"http"==t&&80!=this.port)&&(i=":"+this.port),e.length&&(e="?"+e),t+"://"+this.hostname+i+this.path+e}},{"../transport":13,"component-inherit":20,debug:9,"engine.io-parser":21,parseqs:29,xmlhttprequest:19}],18:[function(e,t,i){function n(e){var t=e&&e.forceBase64;t&&(this.supportsBinary=!1),s.call(this,e)}var s=e("../transport"),o=e("engine.io-parser"),a=e("parseqs"),r=e("component-inherit"),l=e("debug")("engine.io-client:websocket"),c=e("ws");t.exports=n,r(n,s),n.prototype.name="websocket",n.prototype.supportsBinary=!0,n.prototype.doOpen=function(){if(this.check()){var e=this.uri(),t=void 0,i={agent:this.agent};this.ws=new c(e,t,i),void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.binaryType="arraybuffer",this.addEventListeners()}},n.prototype.addEventListeners=function(){var e=this;this.ws.onopen=function(){e.onOpen()},this.ws.onclose=function(){e.onClose()},this.ws.onmessage=function(t){e.onData(t.data)},this.ws.onerror=function(t){e.onError("websocket error",t)}},"undefined"!=typeof navigator&&/iPad|iPhone|iPod/i.test(navigator.userAgent)&&(n.prototype.onData=function(e){var t=this;setTimeout(function(){s.prototype.onData.call(t,e)},0)}),n.prototype.write=function(e){function t(){i.writable=!0,i.emit("drain")}var i=this;this.writable=!1;for(var n=0,s=e.length;s>n;n++)o.encodePacket(e[n],this.supportsBinary,function(e){try{i.ws.send(e)}catch(t){l("websocket closed before onclose event")}});setTimeout(t,0)},n.prototype.onClose=function(){s.prototype.onClose.call(this)},n.prototype.doClose=function(){"undefined"!=typeof this.ws&&this.ws.close()},n.prototype.uri=function(){var e=this.query||{},t=this.secure?"wss":"ws",i="";return this.port&&("wss"==t&&443!=this.port||"ws"==t&&80!=this.port)&&(i=":"+this.port),this.timestampRequests&&(e[this.timestampParam]=+new Date),this.supportsBinary||(e.b64=1),e=a.encode(e),e.length&&(e="?"+e),t+"://"+this.hostname+i+this.path+e},n.prototype.check=function(){return!(!c||"__initialize"in c&&this.name===n.prototype.name)}},{"../transport":13,"component-inherit":20,debug:9,"engine.io-parser":21,parseqs:29,ws:31}],19:[function(e,t,i){var n=e("has-cors");t.exports=function(e){var t=e.xdomain,i=e.xscheme,s=e.enablesXDR;try{if("undefined"!=typeof XDomainRequest&&!i&&s)return new XDomainRequest}catch(o){}try{if("undefined"!=typeof XMLHttpRequest&&(!t||n))return new XMLHttpRequest}catch(o){}if(!t)try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(o){}}},{"has-cors":34}],20:[function(e,t,i){t.exports=function(e,t){var i=function(){};i.prototype=t.prototype,e.prototype=new i,e.prototype.constructor=e}},{}],21:[function(e,t,i){(function(t){function n(e,t,n){if(!t)return i.encodeBase64Packet(e,n);var s=e.data,o=new Uint8Array(s),a=new Uint8Array(1+s.byteLength);a[0]=p[e.type];for(var r=0;r<o.length;r++)a[r+1]=o[r];return n(a.buffer)}function s(e,t,n){if(!t)return i.encodeBase64Packet(e,n);var s=new FileReader;return s.onload=function(){e.data=s.result,i.encodePacket(e,t,!0,n)},s.readAsArrayBuffer(e.data)}function o(e,t,n){if(!t)return i.encodeBase64Packet(e,n);if(u)return s(e,t,n);var o=new Uint8Array(1);o[0]=p[e.type];var a=new g([o.buffer,e.data]);return n(a)}function a(e,t,i){for(var n=new Array(e.length),s=h(e.length,i),o=function(e,i,s){t(i,function(t,i){n[e]=i,s(t,n)})},a=0;a<e.length;a++)o(a,e[a],s)}var r=e("./keys"),l=e("arraybuffer.slice"),c=e("base64-arraybuffer"),h=e("after"),d=e("utf8"),u=navigator.userAgent.match(/Android/i);i.protocol=3;var p=i.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},m=r(p),f={type:"error",data:"parser error"},g=e("blob");i.encodePacket=function(e,i,s,a){"function"==typeof i&&(a=i,i=!1),"function"==typeof s&&(a=s,s=null);var r=void 0===e.data?void 0:e.data.buffer||e.data;if(t.ArrayBuffer&&r instanceof ArrayBuffer)return n(e,i,a);if(g&&r instanceof t.Blob)return o(e,i,a);var l=p[e.type];return void 0!==e.data&&(l+=s?d.encode(String(e.data)):String(e.data)),a(""+l)},i.encodeBase64Packet=function(e,n){var s="b"+i.packets[e.type];if(g&&e.data instanceof g){var o=new FileReader;return o.onload=function(){var e=o.result.split(",")[1];n(s+e)},o.readAsDataURL(e.data)}var a;try{a=String.fromCharCode.apply(null,new Uint8Array(e.data))}catch(r){for(var l=new Uint8Array(e.data),c=new Array(l.length),h=0;h<l.length;h++)c[h]=l[h];a=String.fromCharCode.apply(null,c)}return s+=t.btoa(a),n(s)},i.decodePacket=function(e,t,n){if("string"==typeof e||void 0===e){if("b"==e.charAt(0))return i.decodeBase64Packet(e.substr(1),t);if(n)try{e=d.decode(e)}catch(s){return f}var o=e.charAt(0);return Number(o)==o&&m[o]?e.length>1?{type:m[o],data:e.substring(1)}:{type:m[o]}:f}var a=new Uint8Array(e),o=a[0],r=l(e,1);return g&&"blob"===t&&(r=new g([r])),{type:m[o],data:r}},i.decodeBase64Packet=function(e,i){var n=m[e.charAt(0)];if(!t.ArrayBuffer)return{type:n,data:{base64:!0,data:e.substr(1)}};var s=c.decode(e.substr(1));return"blob"===i&&g&&(s=new g([s])),{type:n,data:s}},i.encodePayload=function(e,t,n){function s(e){return e.length+":"+e}function o(e,n){i.encodePacket(e,t,!0,function(e){n(null,s(e))})}return"function"==typeof t&&(n=t,t=null),t?g&&!u?i.encodePayloadAsBlob(e,n):i.encodePayloadAsArrayBuffer(e,n):e.length?void a(e,o,function(e,t){return n(t.join(""))}):n("0:")},i.decodePayload=function(e,t,n){if("string"!=typeof e)return i.decodePayloadAsBinary(e,t,n);"function"==typeof t&&(n=t,t=null);var s;if(""==e)return n(f,0,1);for(var o,a,r="",l=0,c=e.length;c>l;l++){var h=e.charAt(l);if(":"!=h)r+=h;else{if(""==r||r!=(o=Number(r)))return n(f,0,1);if(a=e.substr(l+1,o),r!=a.length)return n(f,0,1);if(a.length){if(s=i.decodePacket(a,t,!0),f.type==s.type&&f.data==s.data)return n(f,0,1);var d=n(s,l+o,c);if(!1===d)return}l+=o,r=""}}return""!=r?n(f,0,1):void 0},i.encodePayloadAsArrayBuffer=function(e,t){function n(e,t){i.encodePacket(e,!0,!0,function(e){return t(null,e)})}return e.length?void a(e,n,function(e,i){var n=i.reduce(function(e,t){var i;return i="string"==typeof t?t.length:t.byteLength,e+i.toString().length+i+2},0),s=new Uint8Array(n),o=0;return i.forEach(function(e){var t="string"==typeof e,i=e;if(t){for(var n=new Uint8Array(e.length),a=0;a<e.length;a++)n[a]=e.charCodeAt(a);i=n.buffer}t?s[o++]=0:s[o++]=1;for(var r=i.byteLength.toString(),a=0;a<r.length;a++)s[o++]=parseInt(r[a]);s[o++]=255;for(var n=new Uint8Array(i),a=0;a<n.length;a++)s[o++]=n[a]}),t(s.buffer)}):t(new ArrayBuffer(0))},i.encodePayloadAsBlob=function(e,t){function n(e,t){i.encodePacket(e,!0,!0,function(e){var i=new Uint8Array(1);if(i[0]=1,"string"==typeof e){for(var n=new Uint8Array(e.length),s=0;s<e.length;s++)n[s]=e.charCodeAt(s);e=n.buffer,i[0]=0}for(var o=e instanceof ArrayBuffer?e.byteLength:e.size,a=o.toString(),r=new Uint8Array(a.length+1),s=0;s<a.length;s++)r[s]=parseInt(a[s]);if(r[a.length]=255,g){var l=new g([i.buffer,r.buffer,e]);t(null,l)}})}a(e,n,function(e,i){return t(new g(i))})},i.decodePayloadAsBinary=function(e,t,n){"function"==typeof t&&(n=t,t=null);for(var s=e,o=[],a=!1;s.byteLength>0;){for(var r=new Uint8Array(s),c=0===r[0],h="",d=1;255!=r[d];d++){if(h.length>310){a=!0;break}h+=r[d]}if(a)return n(f,0,1);s=l(s,2+h.length),h=parseInt(h);var u=l(s,0,h);if(c)try{u=String.fromCharCode.apply(null,new Uint8Array(u))}catch(p){var m=new Uint8Array(u);u="";for(var d=0;d<m.length;d++)u+=String.fromCharCode(m[d])}o.push(u),s=l(s,h)}var g=o.length;o.forEach(function(e,s){n(i.decodePacket(e,t,!0),s,g)})}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./keys":22,after:23,"arraybuffer.slice":24,"base64-arraybuffer":25,blob:26,utf8:27}],22:[function(e,t,i){t.exports=Object.keys||function(e){var t=[],i=Object.prototype.hasOwnProperty;for(var n in e)i.call(e,n)&&t.push(n);return t}},{}],23:[function(e,t,i){function n(e,t,i){function n(e,s){if(n.count<=0)throw new Error("after called too many times");--n.count,e?(o=!0,t(e),t=i):0!==n.count||o||t(null,s)}var o=!1;return i=i||s,n.count=e,0===e?t():n}function s(){}t.exports=n},{}],24:[function(e,t,i){t.exports=function(e,t,i){var n=e.byteLength;if(t=t||0,i=i||n,e.slice)return e.slice(t,i);if(0>t&&(t+=n),0>i&&(i+=n),i>n&&(i=n),t>=n||t>=i||0===n)return new ArrayBuffer(0);for(var s=new Uint8Array(e),o=new Uint8Array(i-t),a=t,r=0;i>a;a++,r++)o[r]=s[a];return o.buffer}},{}],25:[function(e,t,i){!function(e){"use strict";i.encode=function(t){var i,n=new Uint8Array(t),s=n.length,o="";for(i=0;s>i;i+=3)o+=e[n[i]>>2],o+=e[(3&n[i])<<4|n[i+1]>>4],o+=e[(15&n[i+1])<<2|n[i+2]>>6],o+=e[63&n[i+2]];return s%3===2?o=o.substring(0,o.length-1)+"=":s%3===1&&(o=o.substring(0,o.length-2)+"=="),o},i.decode=function(t){var i,n,s,o,a,r=.75*t.length,l=t.length,c=0;"="===t[t.length-1]&&(r--,"="===t[t.length-2]&&r--);var h=new ArrayBuffer(r),d=new Uint8Array(h);for(i=0;l>i;i+=4)n=e.indexOf(t[i]),s=e.indexOf(t[i+1]),o=e.indexOf(t[i+2]),a=e.indexOf(t[i+3]),d[c++]=n<<2|s>>4,d[c++]=(15&s)<<4|o>>2,d[c++]=(3&o)<<6|63&a;return h}}("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/")},{}],26:[function(e,t,i){(function(e){function i(e,t){t=t||{};for(var i=new n,s=0;s<e.length;s++)i.append(e[s]);return t.type?i.getBlob(t.type):i.getBlob()}var n=e.BlobBuilder||e.WebKitBlobBuilder||e.MSBlobBuilder||e.MozBlobBuilder,s=function(){try{var e=new Blob(["hi"]);return 2==e.size}catch(t){return!1}}(),o=n&&n.prototype.append&&n.prototype.getBlob;t.exports=function(){return s?e.Blob:o?i:void 0}()}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],27:[function(t,i,n){(function(t){!function(s){function o(e){for(var t,i,n=[],s=0,o=e.length;o>s;)t=e.charCodeAt(s++),t>=55296&&56319>=t&&o>s?(i=e.charCodeAt(s++),56320==(64512&i)?n.push(((1023&t)<<10)+(1023&i)+65536):(n.push(t),s--)):n.push(t);return n}function a(e){for(var t,i=e.length,n=-1,s="";++n<i;)t=e[n],t>65535&&(t-=65536,s+=y(t>>>10&1023|55296),t=56320|1023&t),s+=y(t);return s}function r(e,t){return y(e>>t&63|128)}function l(e){if(0==(4294967168&e))return y(e);var t="";return 0==(4294965248&e)?t=y(e>>6&31|192):0==(4294901760&e)?(t=y(e>>12&15|224),t+=r(e,6)):0==(4292870144&e)&&(t=y(e>>18&7|240),t+=r(e,12),t+=r(e,6)),t+=y(63&e|128)}function c(e){for(var t,i=o(e),n=i.length,s=-1,a="";++s<n;)t=i[s],a+=l(t);return a}function h(){if(b>=v)throw Error("Invalid byte index");var e=255&g[b];if(b++,128==(192&e))return 63&e;throw Error("Invalid continuation byte")}function d(){var e,t,i,n,s;if(b>v)throw Error("Invalid byte index");if(b==v)return!1;if(e=255&g[b],b++,0==(128&e))return e;if(192==(224&e)){var t=h();if(s=(31&e)<<6|t,s>=128)return s;throw Error("Invalid continuation byte")}if(224==(240&e)){if(t=h(),i=h(),s=(15&e)<<12|t<<6|i,s>=2048)return s;throw Error("Invalid continuation byte")}if(240==(248&e)&&(t=h(),i=h(),n=h(),s=(15&e)<<18|t<<12|i<<6|n,s>=65536&&1114111>=s))return s;throw Error("Invalid UTF-8 detected")}function u(e){g=o(e),v=g.length,b=0;for(var t,i=[];(t=d())!==!1;)i.push(t);return a(i)}var p="object"==typeof n&&n,m="object"==typeof i&&i&&i.exports==p&&i,f="object"==typeof t&&t;(f.global===f||f.window===f)&&(s=f);var g,v,b,y=String.fromCharCode,w={version:"2.0.0",encode:c,decode:u};if("function"==typeof e&&"object"==typeof e.amd&&e.amd)e(function(){return w});else if(p&&!p.nodeType)if(m)m.exports=w;else{var _={},k=_.hasOwnProperty;for(var I in w)k.call(w,I)&&(p[I]=w[I])}else s.utf8=w}(this)}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],28:[function(e,t,i){(function(e){var i=/^[\],:{}\s]*$/,n=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,s=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,o=/(?:^|:|,)(?:\s*\[)+/g,a=/^\s+/,r=/\s+$/;t.exports=function(t){return"string"==typeof t&&t?(t=t.replace(a,"").replace(r,""),e.JSON&&JSON.parse?JSON.parse(t):i.test(t.replace(n,"@").replace(s,"]").replace(o,""))?new Function("return "+t)():void 0):null}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],29:[function(e,t,i){i.encode=function(e){var t="";for(var i in e)e.hasOwnProperty(i)&&(t.length&&(t+="&"),t+=encodeURIComponent(i)+"="+encodeURIComponent(e[i]));return t},i.decode=function(e){for(var t={},i=e.split("&"),n=0,s=i.length;s>n;n++){var o=i[n].split("=");t[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return t}},{}],30:[function(e,t,i){var n=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,s=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];t.exports=function(e){var t=e,i=e.indexOf("["),o=e.indexOf("]");-1!=i&&-1!=o&&(e=e.substring(0,i)+e.substring(i,o).replace(/:/g,";")+e.substring(o,e.length));for(var a=n.exec(e||""),r={},l=14;l--;)r[s[l]]=a[l]||"";return-1!=i&&-1!=o&&(r.source=t,r.host=r.host.substring(1,r.host.length-1).replace(/;/g,":"),r.authority=r.authority.replace("[","").replace("]","").replace(/;/g,":"),r.ipv6uri=!0),r}},{}],31:[function(e,t,i){function n(e,t,i){var n;return n=t?new o(e,t):new o(e)}var s=function(){return this}(),o=s.WebSocket||s.MozWebSocket;t.exports=o?n:null,o&&(n.prototype=o.prototype)},{}],32:[function(e,t,i){(function(i){function n(e){function t(e){if(!e)return!1;if(i.Buffer&&i.Buffer.isBuffer(e)||i.ArrayBuffer&&e instanceof ArrayBuffer||i.Blob&&e instanceof Blob||i.File&&e instanceof File)return!0;if(s(e)){for(var n=0;n<e.length;n++)if(t(e[n]))return!0}else if(e&&"object"==typeof e){e.toJSON&&(e=e.toJSON());for(var o in e)if(e.hasOwnProperty(o)&&t(e[o]))return!0}return!1}return t(e)}var s=e("isarray");t.exports=n}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{isarray:33}],33:[function(e,t,i){t.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},{}],34:[function(e,t,i){var n=e("global");try{t.exports="XMLHttpRequest"in n&&"withCredentials"in new n.XMLHttpRequest}catch(s){t.exports=!1}},{global:35}],35:[function(e,t,i){t.exports=function(){return this}()},{}],36:[function(e,t,i){var n=[].indexOf;t.exports=function(e,t){if(n)return e.indexOf(t);for(var i=0;i<e.length;++i)if(e[i]===t)return i;return-1}},{}],37:[function(e,t,i){var n=Object.prototype.hasOwnProperty;i.keys=Object.keys||function(e){var t=[];for(var i in e)n.call(e,i)&&t.push(i);return t},i.values=function(e){var t=[];for(var i in e)n.call(e,i)&&t.push(e[i]);return t},i.merge=function(e,t){for(var i in t)n.call(t,i)&&(e[i]=t[i]);return e},i.length=function(e){return i.keys(e).length},i.isEmpty=function(e){return 0==i.length(e)}},{}],38:[function(e,t,i){var n=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,s=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];t.exports=function(e){for(var t=n.exec(e||""),i={},o=14;o--;)i[s[o]]=t[o]||"";return i}},{}],39:[function(e,t,i){(function(t){var n=e("isarray"),s=e("./is-buffer");i.deconstructPacket=function(e){function t(e){if(!e)return e;if(s(e)){var o={_placeholder:!0,num:i.length};return i.push(e),o}if(n(e)){for(var a=new Array(e.length),r=0;r<e.length;r++)a[r]=t(e[r]);return a}if("object"==typeof e&&!(e instanceof Date)){var a={};for(var l in e)a[l]=t(e[l]);return a}return e}var i=[],o=e.data,a=e;return a.data=t(o),a.attachments=i.length,{packet:a,buffers:i}},i.reconstructPacket=function(e,t){function i(e){if(e&&e._placeholder){var s=t[e.num];return s}if(n(e)){for(var o=0;o<e.length;o++)e[o]=i(e[o]);return e}if(e&&"object"==typeof e){for(var a in e)e[a]=i(e[a]);return e}return e}return e.data=i(e.data),e.attachments=void 0,e},i.removeBlobs=function(e,i){function o(e,l,c){if(!e)return e;if(t.Blob&&e instanceof Blob||t.File&&e instanceof File){a++;var h=new FileReader;h.onload=function(){c?c[l]=this.result:r=this.result,--a||i(r)},h.readAsArrayBuffer(e)}else if(n(e))for(var d=0;d<e.length;d++)o(e[d],d,e);else if(e&&"object"==typeof e&&!s(e))for(var u in e)o(e[u],u,e)}var a=0,r=e;o(r),a||i(r)}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./is-buffer":41,isarray:42}],40:[function(e,t,i){function n(){}function s(e){var t="",n=!1;return t+=e.type,(i.BINARY_EVENT==e.type||i.BINARY_ACK==e.type)&&(t+=e.attachments,t+="-"),e.nsp&&"/"!=e.nsp&&(n=!0,t+=e.nsp),null!=e.id&&(n&&(t+=",",n=!1),t+=e.id),null!=e.data&&(n&&(t+=","),t+=d.stringify(e.data)),h("encoded %j as %s",e,t),t}function o(e,t){function i(e){var i=p.deconstructPacket(e),n=s(i.packet),o=i.buffers;o.unshift(n),t(o)}p.removeBlobs(e,i)}function a(){this.reconstructor=null}function r(e){var t={},n=0;if(t.type=Number(e.charAt(0)),null==i.types[t.type])return c();if(i.BINARY_EVENT==t.type||i.BINARY_ACK==t.type){for(t.attachments="";"-"!=e.charAt(++n);)t.attachments+=e.charAt(n);t.attachments=Number(t.attachments)}if("/"==e.charAt(n+1))for(t.nsp="";++n;){var s=e.charAt(n);if(","==s)break;if(t.nsp+=s,n+1==e.length)break}else t.nsp="/";var o=e.charAt(n+1);if(""!=o&&Number(o)==o){for(t.id="";++n;){var s=e.charAt(n);if(null==s||Number(s)!=s){--n;break}if(t.id+=e.charAt(n),n+1==e.length)break}t.id=Number(t.id)}if(e.charAt(++n))try{t.data=d.parse(e.substr(n))}catch(a){return c()}return h("decoded %s as %j",e,t),t}function l(e){this.reconPack=e,this.buffers=[]}function c(e){return{type:i.ERROR,data:"parser error"}}var h=e("debug")("socket.io-parser"),d=e("json3"),u=(e("isarray"),e("component-emitter")),p=e("./binary"),m=e("./is-buffer");i.protocol=4,i.types=["CONNECT","DISCONNECT","EVENT","BINARY_EVENT","ACK","BINARY_ACK","ERROR"],i.CONNECT=0,i.DISCONNECT=1,i.EVENT=2,i.ACK=3,i.ERROR=4,i.BINARY_EVENT=5,i.BINARY_ACK=6,i.Encoder=n,i.Decoder=a,n.prototype.encode=function(e,t){if(h("encoding packet %j",e),i.BINARY_EVENT==e.type||i.BINARY_ACK==e.type)o(e,t);else{var n=s(e);t([n])}},u(a.prototype),a.prototype.add=function(e){var t;if("string"==typeof e)t=r(e),i.BINARY_EVENT==t.type||i.BINARY_ACK==t.type?(this.reconstructor=new l(t),0==this.reconstructor.reconPack.attachments&&this.emit("decoded",t)):this.emit("decoded",t);else{if(!m(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");t=this.reconstructor.takeBinaryData(e),t&&(this.reconstructor=null,this.emit("decoded",t))}},a.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},l.prototype.takeBinaryData=function(e){if(this.buffers.push(e),this.buffers.length==this.reconPack.attachments){var t=p.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null},l.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}},{"./binary":39,"./is-buffer":41,"component-emitter":8,debug:9,isarray:42,json3:43}],41:[function(e,t,i){(function(e){function i(t){return e.Buffer&&e.Buffer.isBuffer(t)||e.ArrayBuffer&&t instanceof ArrayBuffer}t.exports=i}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],42:[function(e,t,i){t.exports=e(33)},{}],43:[function(t,i,n){!function(t){function i(e){if(i[e]!==a)return i[e];var t;if("bug-string-char-index"==e)t="a"!="a"[0];else if("json"==e)t=i("json-stringify")&&i("json-parse");else{var n,s='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if("json-stringify"==e){var o=h.stringify,l="function"==typeof o&&d;if(l){(n=function(){return 1}).toJSON=n;try{l="0"===o(0)&&"0"===o(new Number)&&'""'==o(new String)&&o(r)===a&&o(a)===a&&o()===a&&"1"===o(n)&&"[1]"==o([n])&&"[null]"==o([a])&&"null"==o(null)&&"[null,null,null]"==o([a,r,null])&&o({a:[n,!0,!1,null,"\x00\b\n\f\r	"]})==s&&"1"===o(null,n)&&"[\n 1,\n 2\n]"==o([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==o(new Date(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==o(new Date(864e13))&&'"-000001-01-01T00:00:00.000Z"'==o(new Date(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==o(new Date(-1))}catch(c){l=!1}}t=l}if("json-parse"==e){var u=h.parse;if("function"==typeof u)try{if(0===u("0")&&!u(!1)){n=u(s);var p=5==n.a.length&&1===n.a[0];if(p){try{p=!u('"	"')}catch(c){}if(p)try{p=1!==u("01")}catch(c){}if(p)try{p=1!==u("1.")}catch(c){}}}}catch(c){p=!1}t=p}}return i[e]=!!t}var s,o,a,r={}.toString,l="function"==typeof e&&e.amd,c="object"==typeof JSON&&JSON,h="object"==typeof n&&n&&!n.nodeType&&n;h&&c?(h.stringify=c.stringify,h.parse=c.parse):h=t.JSON=c||{};var d=new Date(-0xc782b5b800cec);try{d=-109252==d.getUTCFullYear()&&0===d.getUTCMonth()&&1===d.getUTCDate()&&10==d.getUTCHours()&&37==d.getUTCMinutes()&&6==d.getUTCSeconds()&&708==d.getUTCMilliseconds()}catch(u){}if(!i("json")){var p="[object Function]",m="[object Date]",f="[object Number]",g="[object String]",v="[object Array]",b="[object Boolean]",y=i("bug-string-char-index");if(!d)var w=Math.floor,_=[0,31,59,90,120,151,181,212,243,273,304,334],k=function(e,t){return _[t]+365*(e-1970)+w((e-1969+(t=+(t>1)))/4)-w((e-1901+t)/100)+w((e-1601+t)/400)};(s={}.hasOwnProperty)||(s=function(e){var t,i={};return(i.__proto__=null,i.__proto__={toString:1},i).toString!=r?s=function(e){var t=this.__proto__,i=e in(this.__proto__=null,this);return this.__proto__=t,i}:(t=i.constructor,s=function(e){var i=(this.constructor||t).prototype;return e in this&&!(e in i&&this[e]===i[e])}),i=null,s.call(this,e)});var I={"boolean":1,number:1,string:1,undefined:1},C=function(e,t){var i=typeof e[t];return"object"==i?!!e[t]:!I[i]};if(o=function(e,t){var i,n,a,l=0;(i=function(){this.valueOf=0}).prototype.valueOf=0,n=new i;for(a in n)s.call(n,a)&&l++;return i=n=null,l?o=2==l?function(e,t){var i,n={},o=r.call(e)==p;for(i in e)o&&"prototype"==i||s.call(n,i)||!(n[i]=1)||!s.call(e,i)||t(i)}:function(e,t){var i,n,o=r.call(e)==p;for(i in e)o&&"prototype"==i||!s.call(e,i)||(n="constructor"===i)||t(i);(n||s.call(e,i="constructor"))&&t(i)}:(n=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],o=function(e,t){var i,o,a=r.call(e)==p,l=!a&&"function"!=typeof e.constructor&&C(e,"hasOwnProperty")?e.hasOwnProperty:s;for(i in e)a&&"prototype"==i||!l.call(e,i)||t(i);for(o=n.length;i=n[--o];l.call(e,i)&&t(i));}),o(e,t)},!i("json-stringify")){var $={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},x="000000",S=function(e,t){return(x+(t||0)).slice(-e)},T="\\u00",A=function(e){var t,i='"',n=0,s=e.length,o=s>10&&y;for(o&&(t=e.split(""));s>n;n++){var a=e.charCodeAt(n);switch(a){case 8:case 9:case 10:case 12:case 13:case 34:case 92:i+=$[a];break;default:if(32>a){i+=T+S(2,a.toString(16));break}i+=o?t[n]:y?e.charAt(n):e[n]}}return i+'"'},M=function(e,t,i,n,l,c,h){var d,u,p,y,_,I,C,$,x,T,P,E,N,D,R,O;try{d=t[e]}catch(L){}if("object"==typeof d&&d)if(u=r.call(d),u!=m||s.call(d,"toJSON"))"function"==typeof d.toJSON&&(u!=f&&u!=g&&u!=v||s.call(d,"toJSON"))&&(d=d.toJSON(e));else if(d>-1/0&&1/0>d){if(k){for(_=w(d/864e5),p=w(_/365.2425)+1970-1;k(p+1,0)<=_;p++);for(y=w((_-k(p,0))/30.42);k(p,y+1)<=_;y++);_=1+_-k(p,y),I=(d%864e5+864e5)%864e5,C=w(I/36e5)%24,$=w(I/6e4)%60,
x=w(I/1e3)%60,T=I%1e3}else p=d.getUTCFullYear(),y=d.getUTCMonth(),_=d.getUTCDate(),C=d.getUTCHours(),$=d.getUTCMinutes(),x=d.getUTCSeconds(),T=d.getUTCMilliseconds();d=(0>=p||p>=1e4?(0>p?"-":"+")+S(6,0>p?-p:p):S(4,p))+"-"+S(2,y+1)+"-"+S(2,_)+"T"+S(2,C)+":"+S(2,$)+":"+S(2,x)+"."+S(3,T)+"Z"}else d=null;if(i&&(d=i.call(t,e,d)),null===d)return"null";if(u=r.call(d),u==b)return""+d;if(u==f)return d>-1/0&&1/0>d?""+d:"null";if(u==g)return A(""+d);if("object"==typeof d){for(D=h.length;D--;)if(h[D]===d)throw TypeError();if(h.push(d),P=[],R=c,c+=l,u==v){for(N=0,D=d.length;D>N;N++)E=M(N,d,i,n,l,c,h),P.push(E===a?"null":E);O=P.length?l?"[\n"+c+P.join(",\n"+c)+"\n"+R+"]":"["+P.join(",")+"]":"[]"}else o(n||d,function(e){var t=M(e,d,i,n,l,c,h);t!==a&&P.push(A(e)+":"+(l?" ":"")+t)}),O=P.length?l?"{\n"+c+P.join(",\n"+c)+"\n"+R+"}":"{"+P.join(",")+"}":"{}";return h.pop(),O}};h.stringify=function(e,t,i){var n,s,o,a;if("function"==typeof t||"object"==typeof t&&t)if((a=r.call(t))==p)s=t;else if(a==v){o={};for(var l,c=0,h=t.length;h>c;l=t[c++],a=r.call(l),(a==g||a==f)&&(o[l]=1));}if(i)if((a=r.call(i))==f){if((i-=i%1)>0)for(n="",i>10&&(i=10);n.length<i;n+=" ");}else a==g&&(n=i.length<=10?i:i.slice(0,10));return M("",(l={},l[""]=e,l),s,o,n,"",[])}}if(!i("json-parse")){var P,E,N=String.fromCharCode,D={92:"\\",34:'"',47:"/",98:"\b",116:"	",110:"\n",102:"\f",114:"\r"},R=function(){throw P=E=null,SyntaxError()},O=function(){for(var e,t,i,n,s,o=E,a=o.length;a>P;)switch(s=o.charCodeAt(P)){case 9:case 10:case 13:case 32:P++;break;case 123:case 125:case 91:case 93:case 58:case 44:return e=y?o.charAt(P):o[P],P++,e;case 34:for(e="@",P++;a>P;)if(s=o.charCodeAt(P),32>s)R();else if(92==s)switch(s=o.charCodeAt(++P)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:e+=D[s],P++;break;case 117:for(t=++P,i=P+4;i>P;P++)s=o.charCodeAt(P),s>=48&&57>=s||s>=97&&102>=s||s>=65&&70>=s||R();e+=N("0x"+o.slice(t,P));break;default:R()}else{if(34==s)break;for(s=o.charCodeAt(P),t=P;s>=32&&92!=s&&34!=s;)s=o.charCodeAt(++P);e+=o.slice(t,P)}if(34==o.charCodeAt(P))return P++,e;R();default:if(t=P,45==s&&(n=!0,s=o.charCodeAt(++P)),s>=48&&57>=s){for(48==s&&(s=o.charCodeAt(P+1),s>=48&&57>=s)&&R(),n=!1;a>P&&(s=o.charCodeAt(P),s>=48&&57>=s);P++);if(46==o.charCodeAt(P)){for(i=++P;a>i&&(s=o.charCodeAt(i),s>=48&&57>=s);i++);i==P&&R(),P=i}if(s=o.charCodeAt(P),101==s||69==s){for(s=o.charCodeAt(++P),(43==s||45==s)&&P++,i=P;a>i&&(s=o.charCodeAt(i),s>=48&&57>=s);i++);i==P&&R(),P=i}return+o.slice(t,P)}if(n&&R(),"true"==o.slice(P,P+4))return P+=4,!0;if("false"==o.slice(P,P+5))return P+=5,!1;if("null"==o.slice(P,P+4))return P+=4,null;R()}return"$"},L=function(e){var t,i;if("$"==e&&R(),"string"==typeof e){if("@"==(y?e.charAt(0):e[0]))return e.slice(1);if("["==e){for(t=[];e=O(),"]"!=e;i||(i=!0))i&&(","==e?(e=O(),"]"==e&&R()):R()),","==e&&R(),t.push(L(e));return t}if("{"==e){for(t={};e=O(),"}"!=e;i||(i=!0))i&&(","==e?(e=O(),"}"==e&&R()):R()),(","==e||"string"!=typeof e||"@"!=(y?e.charAt(0):e[0])||":"!=O())&&R(),t[e.slice(1)]=L(O());return t}R()}return e},B=function(e,t,i){var n=F(e,t,i);n===a?delete e[t]:e[t]=n},F=function(e,t,i){var n,s=e[t];if("object"==typeof s&&s)if(r.call(s)==v)for(n=s.length;n--;)B(s,n,i);else o(s,function(e){B(s,e,i)});return i.call(e,t,s)};h.parse=function(e,t){var i,n;return P=0,E=""+e,i=L(O()),"$"!=O()&&R(),P=E=null,t&&r.call(t)==p?F((n={},n[""]=i,n),"",t):i}}}l&&e(function(){return h})}(this)},{}],44:[function(e,t,i){function n(e,t){var i=[];t=t||0;for(var n=t||0;n<e.length;n++)i[n-t]=e[n];return i}t.exports=n},{}]},{},[1])(1)}),moment.tz.add({zones:{"America/New_York":["-4:56:2 - LMT 1883_10_18_12_3_58 -4:56:2","-5 US E%sT 1920 -5","-5 NYC E%sT 1942 -5","-5 US E%sT 1946 -5","-5 NYC E%sT 1967 -5","-5 US E%sT"]},rules:{US:["1918 1919 2 0 8 2 0 1 D","1918 1919 9 0 8 2 0 0 S","1942 1942 1 9 7 2 0 1 W","1945 1945 7 14 7 23 1 1 P","1945 1945 8 30 7 2 0 0 S","1967 2006 9 0 8 2 0 0 S","1967 1973 3 0 8 2 0 1 D","1974 1974 0 6 7 2 0 1 D","1975 1975 1 23 7 2 0 1 D","1976 1986 3 0 8 2 0 1 D","1987 2006 3 1 0 2 0 1 D","2007 9999 2 8 0 2 0 1 D","2007 9999 10 1 0 2 0 0 S"],NYC:["1920 1920 2 0 8 2 0 1 D","1920 1920 9 0 8 2 0 0 S","1921 1966 3 0 8 2 0 1 D","1921 1954 8 0 8 2 0 0 S","1955 1966 9 0 8 2 0 0 S"]},links:{}});var dispatcher=_.clone(Backbone.Events);if(Backbone.emulateHTTP=!0,Backbone.emulateJSON=!0,window.console=window.console||function(){var e={};return e.log=e.warn=e.debug=e.info=e.error=e.time=e.dir=e.profile=e.clear=e.exception=e.trace=e.assert=function(){},e}(),"function"!=typeof Object.create&&(Object.create=function(e){function t(){}return t.prototype=e,new t}),"function"!=typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),Array.prototype.indexOf||(Array.prototype.indexOf=function(e){"use strict";if(null==this)throw new TypeError;var t=Object(this),i=t.length>>>0;if(0===i)return-1;var n=0;if(arguments.length>0&&(n=Number(arguments[1]),n!=n?n=0:0!=n&&n!=1/0&&n!=-(1/0)&&(n=(n>0||-1)*Math.floor(Math.abs(n)))),n>=i)return-1;for(var s=n>=0?n:Math.max(i-Math.abs(n),0);i>s;s++)if(s in t&&t[s]===e)return s;return-1}),$(function(){$.Autocomplete.prototype.getSuggestionsLocal=function(e){var t,i=this,n=i.options,s=e.toLowerCase(),o=n.lookupFilter,a=parseInt(n.lookupLimit,10);return t={suggestions:$.grep(n.lookup,function(t){return o(t,e,s)})},t.suggestions=_.sortBy(t.suggestions,function(e){return e.value.toLowerCase().indexOf(s)}),a&&t.suggestions.length>a&&(t.suggestions=t.suggestions.slice(0,a)),t}}),screenfull={enabled:!1},screenfull.enabled&&document.addEventListener(screenfull.raw.fullscreenchange,function(){screenfull.isFullscreen?dispatcher.trigger("fullscreen:enter"):dispatcher.trigger("fullscreen:exit")}),!getCookie("incun")&&!getCookie("incrnd")){var randomnumber=Math.floor(99999999*Math.random());setCookie("incrnd",randomnumber,360,{path:"/",domain:cookieDomain})}var abgrp=0;if(getUrlVars().abgrp){var abgrp=getUrlVars().abgrp;setCookie("incab",abgrp,1,{path:"/",domain:cookieDomain})}else if(getCookie("incab"))var abgrp=getCookie("incab");else{var abgrp=Math.floor(12*Math.random())+1;setCookie("incab",abgrp,1,{path:"/",domain:cookieDomain})}var usrid=0,username="",jobid="",indid="",sizid="",revid="",subexp="";if(getCookie("incid")){var demo=getCookie("incid");if(demo.indexOf(":")>-1){var n=demo.split(":");usrid=n[0],username=n[1],jobid=n[2],indid=n[3],sizid=n[4],revid=n[5],subexp=n[6]}else usrid=demo}jobtitle=new Array,jobtitle[1]="Chairperson",jobtitle[2]="Board member",jobtitle[3]="Owner/Partner",jobtitle[4]="CEO",jobtitle[5]="CFO",jobtitle[6]="CIO/CTO",jobtitle[7]="COO",jobtitle[8]="CMO",jobtitle[9]="President",jobtitle[10]="Managing Director",jobtitle[11]="Senior Vice President/Executive Vice President",jobtitle[12]="Vice President",jobtitle[13]="General Manager",jobtitle[15]="Controller/Treasurer",jobtitle[16]="Technical staff/Information Systems",jobtitle[17]="Director",jobtitle[18]="Sales Representative/Account Executive",jobtitle[19]="Manager",jobtitle[20]="Consultant",jobtitle[21]="Professional",jobtitle[22]="Clerical/Support staff/Administrator",jobtitle[23]="Coordinator/Assistant",jobtitle[24]="Government/Public Official",jobtitle[25]="Teacher/Lecturer",jobtitle[26]="Student",jobtitle[27]="Not employed",jobtitle[28]="Retired",industry=new Array,industry[1]="Accounting",industry[2]="Academic",industry[3]="Aerospace",industry[4]="Agriculture",industry[5]="Architecture",industry[6]="Arts/Entertainment/Media",industry[7]="Automotive",industry[8]="Banking, Financial Services, Insurance",industry[9]="Biotechnology & Pharmaceutical",industry[10]="Construction & Manufacturing",industry[11]="Consulting",industry[12]="Consumer Packaged Goods",industry[13]="Design",industry[14]="Education & Training",industry[15]="Electronics",industry[16]="Engineering",industry[17]="Event Management & Conferences",industry[18]="Food service",industry[19]="Government",industry[20]="Healthcare/HMOs",industry[21]="Human Resources/Recruiting",industry[22]="Internet, New Media, E-commerce",industry[23]="Law",industry[24]="Materials & Life Sciences",industry[25]="Military and Defense",industry[26]="Mining, Oil and Gas",industry[27]="Nonprofits & Associations",industry[28]="Marketing, PR & Advertising",industry[29]="Real Estate",industry[30]="Retail",industry[31]="Sales, Marketing, & Public Relations",industry[32]="Technology",industry[33]="Telecommunications",industry[34]="Travel, Tourism & Lodging",industry[35]="Transport, Logistics & Shipping",industry[36]="Utilities & Energy Services",industry[37]="Not employed",industry[38]="Retired",companysize=new Array,companysize[1]="1",companysize[2]="2-5",companysize[3]="6-10",companysize[4]="11-25",companysize[5]="26-50",companysize[6]="51-200",companysize[7]="201-1000",companysize[8]="1001-10000",companysize[9]="10001+",companyrevenue=new Array,companyrevenue[1]="Under $100,000",companyrevenue[2]="100k-500k",companyrevenue[3]="500k-1M",companyrevenue[4]="1M-5M",companyrevenue[5]="5M-10M",companyrevenue[6]="10M-100M",companyrevenue[7]="100M-500M",companyrevenue[8]="500M-1B",companyrevenue[9]="1B+",$(document).ready(function(){var e=document.body.clientWidth+"px",t=document.body.clientHeight+"px";$(".bgCover").css({width:e,height:t}),getCookie("incun")?($("#welcome_loggedout").hide(),$("#welcome").show()):($("#welcome_loggedout").show(),$("#welcome").hide()),$("#newsletter_chex td.newsletter_title").hover(function(){$("#newsletter-desc").html($('div[name="'+$(this).attr("id")+'"]').html())})});var overlayAdOpen=new Boolean,triggerAd=!1,fadeSpeed="slow",counter=16;$(function(){$(window).width()<768?$(".AdminMenu").css("top","127%"):$(".AdminMenu").css("top","100%")});var Inc=function(){if("undefined"!=typeof e)return void 0;var e={Apps:{},Collections:{},Feeds:{},Models:{},Accessories:{},Areas:{},Controls:{},Editors:{},GestureRecognizers:{},Menus:{},MenuItems:{},Messages:{},Modals:{},Navigation:{},Pages:{},Patterns:{},Sections:{},Slideshow:{},Widgets:{},Video:{},Views:{},Controllers:{}};return e.extend=function(e){e||(e={});var t=Object.create(this);return _.extend(t,e),t},e.spawn=function(e){e||(e={});var t=Object.create(this);return(_.isUndefined(e.initialize)||e.initialize)&&t.init&&t.init.call(t,e),t},e.ToggleView=Backbone.View.extend({type:"ToggleView",id:function(){return this.oid},initialize:function(e){e||(e={}),e.type&&(this.type=e.type),this.oid=e.oid||_.uniqueId(this.type+"-"),this.template=this.template||e.template||null,this.gestureRecognizers=[],this.active=!1,_.isBoolean(e.active)&&(this.active=e.active),this.$el.hasClass("active")&&!_.isBoolean(e.active)&&(this.active=!0),this.hidden=!1,_.isBoolean(e.hidden)&&(this.hidden=e.hidden),this.$el.hasClass("hidden")&&!_.isBoolean(e.hidden)&&(this.hidden=!0),this.disabled=!1,_.isBoolean(e.disabled)&&(this.disabled=e.disabled),this.$el.hasClass("disabled")&&!_.isBoolean(e.disabled)&&(this.disabled=!0),this.loading=!1,_.isBoolean(e.loading)&&(this.loading=e.loading),this.$el.hasClass("loading")&&!_.isBoolean(e.loading)&&(this.loading=!0),e.gestureRecognizers&&(_.isArray(e.gestureRecognizers)||(e.gestureRecognizers=[e.gestureRecognizers]),_.each(e.gestureRecognizers,function(e){this.addGestureRecognizer(e)},this)),this.setActiveState().setHiddenState().setDisabledState().setLoadingState()},setActiveState:function(){return this.$el.toggleClass("active",this.active),this},activate:function(){return this.active||(this.active=!0,this.setActiveState(),this.trigger("change:active",this,this.active)),this},deactivate:function(){return this.active&&(this.active=!1,this.setActiveState(),this.trigger("change:active",this,this.active)),this},setHiddenState:function(){return this.$el.toggleClass("hidden",this.hidden),this},show:function(){return this.hidden&&(this.hidden=!1,this.setHiddenState(),this.trigger("change:hidden",this,this.hidden)),this},hide:function(){return this.hidden||(this.hidden=!0,this.setHiddenState(),this.trigger("change:hidden",this,this.hidden)),this},disable:function(){return this.disabled||(this.disabled=!0,this.setDisabledState(),this.trigger("disabled",this)),this},enable:function(){return this.disabled&&(this.disabled=!1,this.setDisabledState(),this.trigger("enabled",this)),this},setDisabledState:function(){return this.$el.toggleClass("disabled",this.disabled),this},setLoading:function(e){return this.loading!=e&&(this.loading=e,this.setLoadingState(),this.trigger("loading",this)),this},setLoadingState:function(){return this.$el.toggleClass("loading",this.loading),this},addGestureRecognizer:function(e){return _.findWhere(this.gestureRecognizers,{oid:e.oid})||(this.gestureRecognizers.push(e),e.attachTo(this)),this},removeGestureRecognizer:function(e){return e.trash(),this.gestureRecognizers=_.reject(this.gestureRecognizers,function(t){return t.oid==e.oid}),this},trash:function(){return this.undelegateEvents(),this.$el.off(),this.model&&(this.model=null),_.each(this.gestureRecognizers,function(e){e.trash()}),this.gestureRecognizers=[],this.remove(),this.trigger("trash",this),this}}),e}();Inc.Controllers.Task={type:"Task",extend:Inc.extend,spawn:Inc.spawn,init:function(e){return e||(e={}),e.type&&(this.type=e.type),this.oid=e.oid||_.uniqueId(this.type+"-"),this.performer=e.performer||null,this.successEventName=e.successEventName||null,this.failEventName=e.failEventName||null,this.errorMessage=e.errorMessage||{},this.priority=_.isNumber(e.priority)?e.priority:0,e.run&&(this.run=e.run),this.listenTo(this.performer,this.successEventName,this.onSuccess),this.failEventName&&this.listenTo(this.performer,this.failEventName,this.onFail),this},onSuccess:function(e){return this.trigger("success",this),this},onFail:function(e){return this.trigger("fail",this),this},trash:function(){return this.stopListening(),this.performer=null,this}},_.extend(Inc.Controllers.Task,Backbone.Events),Inc.Controllers.TaskRunner={type:"TaskRunner",extend:Inc.extend,spawn:Inc.spawn,init:function(e){e||(e={}),e.type&&(this.type=e.type),this.oid=e.oid||_.uniqueId(this.type+"-"),this.pendingTasks=[],this.erroredTasks=[],this.completedTasks=[],this.running=!1,this.resolved=!1,e.tasksFinished?this.tasksFinished=e.tasksFinished:this.listenTo(this,"finished",this.resolve);var t=e.tasks;return t&&_.isArray(t)&&_.each(t,function(e){this.addTask(e)}),this},addTask:function(e){return e.oid||_.extend(e,{oid:_.uniqueId("Task-")}),this.getTask(e.oid)||(this.listenTo(e,"success",this.onTaskSuccess),this.listenTo(e,"fail",this.onTaskFail),this.pendingTasks.push(e),this.running&&e.run()),this},getTask:function(e){return _.findWhere(this.pendingTasks,{oid:e})||_.findWhere(this.erroredTasks,{oid:e})||_.findWhere(this.completedTasks,{oid:e})||null},moveTask:function(e,t,i){return this[t]&&(this[t]=_.reject(this[t],_.matches({oid:e.oid}))),this[i]&&!_.findWhere(this[i],{oid:e.oid})&&this[i].push(e),this},totalTasks:function(){return this.pendingTasks.length+this.erroredTasks.length+this.completedTasks.length},run:function(e){if("undefined"==typeof e&&(e=!1),(!this.running||e)&&this.pendingTasks.length>0){this.running=!0,e||this.trigger("started",this);var t=this.getNextPriority();_.each(this.pendingTasks,function(e){e.priority==t&&e.run()})}return this},getNextPriority:function(){return 0==this.pendingTasks.length?null:_.first(_.uniq(_.sortBy(_.pluck(this.pendingTasks,"priority"),function(e){return e})))},getLastPriority:function(){return 0==this.completedTasks.length?null:_.last(_.uniq(_.sortBy(_.pluck(this.completedTasks,"priority"),function(e){return e})))},retry:function(){if(!this.running){for(this.trigger("reset",this),this.resolved=!1,this.completedTasks=[];this.erroredTasks.length>0;)this.pendingTasks.unshift(this.erroredTasks.pop());this.erroredTasks=[],this.run()}return this},getProgress:function(){var e=this.totalTasks();return 0==e?0:0==this.pendingTasks.length?1:(this.erroredTasks.length+this.completedTasks.length)/e},getErrorMessages:function(){var e=[];return _.each(this.erroredTasks,function(t){t.performer.errorMessages&&(e=e.concat(t.performer.errorMessages))}),e.length>0?e:null},onTaskSuccess:function(e){this.moveTask(e,"pendingTasks","completedTasks"),this.trigger("progress:update",this.getProgress());var t=this.getNextPriority(),i=this.getLastPriority();return 0==this.pendingTasks.length?this.tasksFinished():_.isNull(t)||t==i||this.run(!0),this},onTaskFail:function(e){return this.moveTask(e,"pendingTasks","erroredTasks"),this.trigger("progress:update",this.getProgress()),this.tasksFinished(),this},tasksFinished:function(){return this.running&&(this.running=!1,this.trigger("finished",this)),this},resolve:function(){return this.resolved||(this.resolved=!0,this.trigger("resolved",this)),this},trash:function(){return this.stopListening(),_.each(this.pendingTasks,function(e){e.trash()}),this.pendingTasks=[],_.each(this.erroredTasks,function(e){e.trash()}),this.erroredTasks=[],_.each(this.completedTasks,function(e){e.trash()}),this.completedTasks=[],this}},_.extend(Inc.Controllers.TaskRunner,Backbone.Events),Inc.Controllers.TaskManager={type:"TaskManager",extend:Inc.extend,spawn:Inc.spawn,init:function(e){return e||(e={}),e.type&&(this.type=e.type),this.oid=e.oid||_.uniqueId(this.type+"-"),this.runners=e.runners||[],this.processing=!1,this.queue=[],this},addRunner:function(e){return this.getRunner(e.oid)?this:(this.listenTo(e,"started",this.runnerStarted),this.listenTo(e,"finished",this.runnerFinished),this.listenTo(e,"resolved",this.runnerResolved),this.runners.push(e),this)},getRunner:function(e){return _.findWhere(this.runners,{oid:e})},hasType:function(e){return _.findWhere(this.runners,{type:e})},removeRunner:function(e,t){var i=this.getRunner(e);return i&&(this.runners=_.reject(this.runners,_.matches({oid:e})),"undefined"!=typeof t&&t&&i.trash()),this},allFinished:function(){for(var e=0;e<this.runners.length;e++)if(this.runners[e].running||1!=this.runners[e].getProgress())return!1;return!0},allResolved:function(){for(var e=0;e<this.runners.length;e++)if(!this.runners[e].resolved)return!1;return!0},runnerStarted:function(e){return this.processing||(this.processing=!0,this.trigger("processing:started",this)),this},runnerFinished:function(e){return this.allFinished()&&(this.processing=!1,this.trigger("processing:stopped",this)),this},runnerResolved:function(e){return this.removeRunner(e.oid,!0),this.allResolved()&&(this.trigger("processing:resolved",this),this.queue.length>0&&_.debounce(this.queue.shift(),1500)()),this},trash:function(){return this.stopListening(),_.each(this.runners,function(e){e.trash()}),this.runners=[],this}},_.extend(Inc.Controllers.TaskManager,Backbone.Events),Inc.Controllers.ModalPresenter={type:"ModalPresenter",extend:Inc.extend,spawn:Inc.spawn,init:function(e){return e||(e={}),e.type&&(this.type=e.type),this.oid=e.oid||_.uniqueId(this.type+"-"),this.modals=e.modals||[],this.$wrapper=e.$wrapper||null,this.wrapperSetup=!1,this.presenting=!1,this},addModal:function(e){if(!this.$wrapper||this.getModal(e.oid))return this;return this.listenTo(e,"show:finished",this.modalPresented),this.listenTo(e,"close:started",this.modalCloseStarted),this.listenTo(e,"close:finished",this.modalClosed),this.modals.push(e),this.$wrapper&&!this.wrapperSetup&&this.setupWrappers(),1==this.modals.length&&this.$wrapper.toggleClass("hidden",!1),this.modals=_.sortBy(this.modals,function(e){return 0-e.priority}),this.present(),this},setupWrappers:function(){return this.$wrapper.find(".ModalWrapperBackground").on("click",function(e){this.modals.length>0&&this.modals[0].close()}.bind(this)),this.wrapperSetup=!0,this},getModal:function(e){return _.findWhere(this.modals,{oid:e})},hasType:function(e){return _.findWhere(this.modals,{type:e})},present:function(){if(!this.$wrapper)return this;var e=this;if(this.modals.length>0){this.presenting||(this.presenting=!0,this.trigger("presenting:started",this));var t=this.modals[0];if(t.hidden&&!t.disabled){t.$parent?t.$parent.append(t.$el):this.$wrapper.append(t.$el);var i=_.findWhere(this.modals,{hidden:!1});i?(i.disable().hide(),_.debounce(function(){e.modalPresentStarting(t),e.trigger("presenting:modal",e,t),t.show()},350).bind(t)()):(this.modalPresentStarting(t),this.trigger("presenting:modal",this,t),_.debounce(t.show,5).bind(t)())}else t.hidden&&t.disabled&&(t.enable(),this.modalPresentStarting(t),this.trigger("presenting:modal",this,t),_.debounce(t.show,5).bind(t)())}return this},modalPresentStarting:function(e){return this},removeModal:function(e,t){var i=this.getModal(e);return i&&(this.modals=_.reject(this.modals,_.matches({oid:e})),i.$el.detach(),"undefined"!=typeof t&&t&&i.trash()),this},modalPresented:function(e){return this},modalCloseStarted:function(e){return this},modalClosed:function(e){return this.removeModal(e.oid,!0),this.trigger("modal:closed",this,e),0==this.modals.length?(this.presenting=!1,this.$wrapper.toggleClass("hidden",!0),this.$wrapper.toggleClass("fullscreen",!1),this.trigger("presenting:finished",this)):this.present(),this},trash:function(){return this.stopListening(),this.$wrapper.off("scroll"),this.$wrapper.find(".ModalWrapperBackground").off(),_.each(this.modals,function(e){e.trash()}),this.modals=[],this}},_.extend(Inc.Controllers.ModalPresenter,Backbone.Events),Inc.Utilities={getCookie:function(e){var t,i,n,s=document.cookie.split(";");for(t=0;t<s.length;t++)if(i=s[t].substr(0,_.indexOf(s[t],"=")),n=s[t].substr(_.indexOf(s[t],"=")+1),i=i.replace(/^\s+|\s+$/g,""),i==e)return unescape(n)},setCookie:function(e,t,i,n){if(void 0===n&&(n={}),i){var s=new Date;s.setHours(s.getHours()+24*i)}document.cookie=e+"="+escape(t)+(i?";expires="+s.toGMTString():"")+(n.path?";path="+n.path:"")+(n.domain?";domain="+n.domain:"")+(n.secure?";secure":"")},deleteCookie:function(e,t,i){getCookie(e)&&(document.cookie=e+"="+(t?";path="+t:"")+(i?";domain="+i:"")+";expires=Thu, 01-Jan-1970 00:00:01 GMT")},innerLinkHandler:function(e){if(!e)var e=window.event;e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation()},isValidEmailAddress:function(e){var t=new RegExp(/^(("[\w-\s]+")|([\w-]+(?:\.[\w-]+)*)|("[\w-\s]+")([\w-]+(?:\.[\w-]+)*))(@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$)|(@\[?((25[0-5]\.|2[0-4][0-9]\.|1[0-9]{2}\.|[0-9]{1,2}\.))((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\.){2}(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\]?$)/i);return t.test(e)},strcmp:function(e,t){e=e.toString(),t=t.toString();for(var i=0,n=Math.max(e.length,t.length);n>i&&e.charAt(i)===t.charAt(i);++i);return i===n?!0:i},mysqlTimeFormat:"YYYY-MM-DD HH:mm:ss",iOS:navigator.userAgent.match(/(iPad|iPhone|iPod)/g)?!0:!1,touchscreen:"ontouchstart"in window||navigator.msMaxTouchPoints>0,wrapError:function(e,t){var i=t.error;t.error=function(n){i&&i(e,n,t),e.trigger("error",e,n,t)}},stopMousewheelPropagation:function(e,t){var i=$(this);t>0&&0===i.scrollTop()?e.preventDefault():0>t&&i.scrollTop()==i.get(0).scrollHeight-i.innerHeight()&&e.preventDefault()},stripTags:function(e){return"undefined"!=typeof e&&e?e.replace(/(<([^>]+)>)/gi,""):""},truncate:function(e){if(!e.$el||!e.height)return!1;var t=e.$el,i=t.html(),n=e.height,s=e.more||"&hellip;",o=Inc.Utilities.stripTags(t.html()||"").split(" ").length;if(t.height()<=n)return!0;for(;t.height()>n&&o>=0;){if(0==o)return t.html(""),!0;o--,t.html(downsize(i,{words:o,append:s}))}return!0},convertToLink:function(e){return(e||"").toLowerCase().replace(/[\/'"\+,\.\(\):\?!&(  )]|\s\s+/g,"").trim().replace(/\s/g,"-")}},Inc.Models.Archetype=Backbone.Model.extend({type:"Model",constructor:function(e,t){t||(t={}),t.parse=!0,this.untrackedKeys=t.untrackedKeys||this.untrackedKeys||[],Backbone.Model.apply(this,arguments)},initialize:function(e,t){t||(t={}),t.type&&(this.type=t.type),this.oid=t.oid||_.uniqueId(this.type+"-"),this.cid=t.cid||this.oid,this.currentEndpoint="default",this.endpoints||(this.endpoints=[{name:"default",url:inc.restURL}]),this.live=!1,this.dirty=!1,this.history=[],this.errorMessages=null,this.ready=!1,this.updating=!1,this.timeUpdated=null,this.lockChecker=null,this.failedToUpdate=!1,this.justHadLock=!1,this.listenTo(this,"request",this.onRequestStart),this.listenTo(this,"sync",this.onRequestSuccess),this.listenTo(this,"error",this.onRequestError),this.listenTo(this,"change",this.attributesChanged),e&&_.size(e)>0&&(1!=_.size(e)||!_.isNumber(e.id))?(this.set(e,{silent:!0}),this.ready=!0,this.trigger("ready",this),this.isNew()&&(this.live=!0,this.useEndpoint("live").store("live"))):this.isNew()&&(this.ready=!0,this.trigger("ready",this),this.live=!0,this.useEndpoint("live").store("live"))},getID:function(){return this.id||this.cid},urlRoot:function(){return _.findWhere(this.endpoints,{name:this.currentEndpoint}).url},copyAttributes:function(){var e={};for(var t in this.attributes)_.isArray(this.attributes[t])?(e[t]=[],_.each(this.attributes[t],function(i){_.isArray(i)?e[t].push(i.slice()):_.isObject(i)?e[t].push(_.clone(i)):e[t].push(i)})):_.isObject(this.attributes[t])?e[t]=_.clone(this.attributes[t]):e[t]=this.attributes[t];return e},store:function(e){return e||(e=_.uniqueId("state-")),this.history.push({oid:_.uniqueId("state-"),state:e,attributes:this.copyAttributes(),moment:moment()}),this},getState:function(e){for(var e=e.split(" "),t=this.history.length-1;t>=0;t--)if(-1!=_.indexOf(e,this.history[t].state))return this.history[t];return null},setDirty:function(e){return this.dirty!=e&&(this.dirty=e,this.trigger("change:dirty",this),dispatcher.trigger("inc:model:change:dirty",this)),this},revert:function(e){for(var e=e.split(" "),t=this.history.length-1;t>=0;t--)if(-1!=_.indexOf(e,this.history[t].state)){this.history=this.history.slice(0,t+1),this.set(this.history[t].attributes),this.trigger("revert",this);break}return this},onRequestStart:function(){this.updating=!0,this.trigger("update:start",this)},onRequestSuccess:function(e,t,i){this.updating=!1,this.failedToUpdate=!1,this.ready||(this.ready=!0,this.trigger("ready",this)),this.live||"live"!=this.currentEndpoint?this.live&&"live"==this.currentEndpoint&&!i.save&&!this.dirty&&i.data&&i.data.requestLock&&this.store("live"):(this.store("live"),this.live=!0),i.data&&i.data.requestLock&&(this.userHasLock()?this.trigger("lock:success",this):this.trigger("lock:fail",this)),this.trigger("update:success",this,t,i)},onRequestError:function(e,t,i){this.updating=!1,this.isNew()||(this.failedToUpdate=!0),console.log(e,t,i),this.trigger("update:fail",this,t,i),e.isNew()&&this.saveFailed(this,t,i),i.data&&i.data.requestLock&&this.trigger("lock:fail",this)},attributesChanged:function(e,t){if(this.live)for(var i=this.history.length-1;i>=0;i--){var n=this.history[i];if("postsave"==n.state||"live"==n.state){_.isEqual(n.attributes,this.attributes)?this.setDirty(!1):this.setDirty(!0);break}}},getRemainingLockTime:function(){if(!this.lock)return null;var e=this.lock.get("remaining_time");inc.parameterNotEmpty("timeToStale")&&(e=parseInt(inc.urlParameters.timeToStale));var t=this.timeUpdated.clone().add("seconds",e).diff(moment(),"seconds");return t>0?t:null},userHasLock:function(){return this.lock&&this.lock.get("adminID")==inc.user.id?!0:!1},editable:function(){return this instanceof Inc.Models.Article&&this.get("inc_lock_articleflag")&&(!inc.user.admin||inc.user.admin.roleID>=3)?!1:this.isNew()||_.isString(this.getID())||this instanceof Inc.Models.Image?!0:!this.live||this.failedToUpdate||!this.lock||this.lock&&!this.userHasLock()?!1:!0},set:function(e,t,i){if(_.isObject(e))_.each(e,function(e,t){-1!=_.indexOf(this.untrackedKeys,t)&&(this[t]=e)},this),e=_.omit(e,this.untrackedKeys);else if(_.isString(e)&&-1!=_.indexOf(this.untrackedKeys,e))return this[e]=t,this;return Backbone.Model.prototype.set.apply(this,arguments)},parse:function(e,t){var i=this;t.data&&_.isBoolean(t.data.requestLock)&&t.data.requestLock||!1;if(e.lock?this.lock?i.lock.set(e.lock):(this.lock=new Backbone.Model(e.lock),this.trigger("locked",this)):this.lock&&(this.lock.stopListening(),delete this.lock,i.trigger("unlocked",this)),e.error)return{};this.timeUpdated=moment(),this.userHasLock()&&(_.isNumber(this.lockChecker)&&clearInterval(this.lockChecker),this.lockChecker=setInterval(function(){"undefined"==typeof i&&clearInterval(i.lockChecker),i.userHasLock()&&_.isNull(i.getRemainingLockTime())&&(i.lock.stopListening(),delete i.lock,i.justHadLock=!0,dispatcher.trigger("inc:editing:model:stale",i),clearInterval(i.lockChecker),i.lockChecker=null)},500));var n=e.data||e,s=[];return _.each(n,function(e,t){-1!=_.indexOf(this.untrackedKeys,t)&&(s.push(t),this[t]=e)},this),_.each(s,function(e){delete n[e]}),n},useEndpoint:function(e){return _.findWhere(this.endpoints,{name:e})&&(this.currentEndpoint=e),this},requestLock:function(){var e=this;return this.updating?(setTimeout(function(){e&&!e.userHasLock()&&e.requestLock()},250),this):(this.live||(this.useEndpoint("live"),this.store("prelive")),this.fetch({requestLock:!0}),this)},releaseLock:function(){return this.lock&&(this.lock.stopListening(),delete this.lock,_.isNumber(this.lockChecker)&&(clearInterval(this.lockChecker),this.lockChecker=null)),this.justHadLock=!1,this.revert("postsave live"),this.setDirty(!1),this},executeWhenEditable:function(e){return this.editable()?e():(this.listenToOnce(this,"update:success update:fail",function(){this.editable()&&inc.isMode("edit")&&e()}),this.updating||this.requestLock()),this},fetch:function(e){if(this.updating)return this;if(e=e?_.clone(e):{},"live"==this.currentEndpoint&&(e.cache=!1),inc.parameterSet("forceReadErrors")&&(e.forceReadErrors=!0),_.size(e)>0){var t=_.clone(e);e={data:{}},_.extend(e.data,t),"live"==this.currentEndpoint&&(e.data.cacheBuster=(new Date).getTime())}void 0===e.parse&&(e.parse=!0);var i=this,n=e.success;return e.success=function(t){var s=i.parse(t,e),o=!0;return this.justHadLock&&this.userHasLock()?o=!0:t.error||(o=i.set(s,e)),this.justHadLock=!1,t.error||!o?(e.error&&e.error(i,t,e),!1):(n&&n(i,t,e),void i.trigger("sync",i,t,e))}.bind(this),Inc.Utilities.wrapError(this,e),this.sync("read",this,e)},save:function(e,t,i){var n,s,o,a=this.attributes,r="undefined"==typeof e&&"undefined"==typeof t&&"undefined"==typeof i;if(i||(i={}),r){var l=this.copyAttributes();this.set(this.getState("postsave live").attributes,{silent:!0}),this.set(l,{silent:!0}),this.store("presave")}if(r)n=this.changedAttributes(),i=_.extend({validate:!0},i);else if(null==e||"object"==typeof e?(n=e,i=t):(n={})[e]=t,i=_.extend({validate:!0},i),n&&!i.wait){if(!this.set(n,i))return!1}else if(!this._validate(n,i))return!1;i.success=this.saveSuccessful.bind(this),i.error=this.saveFailed.bind(this),i.patch=!0,i.save=!0,n&&i.wait&&(this.attributes=_.extend({},a,n)),void 0===i.parse&&(i.parse=!0);var c=this,h=i.success;return i.success=function(e){c.attributes=a;var t=c.parse(e,i);return i.wait&&(t=_.extend(n||{},t)),inc.parameterSet("forceSaveErrors")||e.error||_.isObject(t)&&!c.set(t,i)?(i.error&&i.error(c,e,i),!1):(h&&h(c,e,i),void c.trigger("sync",c,e,i))},Inc.Utilities.wrapError(this,i),s=this.isNew()?"create":i.patch?"patch":"update","patch"===s&&(i.attrs=n),o=this.sync(s,this,i),n&&i.wait&&(this.attributes=a),o},saveSuccessful:function(e,t,i){return this.errorMessages=null,this.store("postsave"),this.setDirty(!1),this.trigger("save:success",this),dispatcher.trigger("inc:edit"),this},saveFailed:function(e,t,i){return this.trigger("save:fail",this),dispatcher.trigger("inc:edit"),this},destroy:function(e){e=e?_.clone(e):{};var t=this,i=e.success,n=e.error||function(){};e.delet=!0;var s=function(){t.trigger("destroy",t,t.collection,e)};if(e.success=function(o){return(e.wait||t.isNew())&&s(),inc.parameterSet("forceSaveErrors")||o.error?(n(t,o,e),!1):(i&&i(t,o,e),void(t.isNew()||t.trigger("sync",t,o,e)))},this.isNew())return e.success(),!1;Inc.Utilities.wrapError(this,e);var o=this.sync("delete",this,e);return e.wait||s(),o}}),Inc.Models.Article=Inc.Models.Archetype.extend({type:"ArticleModel",untrackedKeys:["imagemodels","formatted_text","adinfo","commentcount","photoEssaySlideModels","custom_article_footer","ser_footer_blurb"],constructor:function(e,t){
this.endpoints=[{name:"default",url:inc.restURL+"article"},{name:"live",url:inc.restURL+"admin/article"}],Inc.Models.Archetype.apply(this,arguments);var i=this.imagemodels||[];_.each(i,function(e){inc.collections.image.add(e)});var n=this.photoEssaySlideModels||[];_.each(n,function(e){inc.collections.photoEssaySlide.add(e)})},initialize:function(e,t){Inc.Models.Archetype.prototype.initialize.apply(this,arguments),inc.user&&inc.user.admin&&inc.user.admin.roleID>2&&this.listenTo(this,"change:inc_pubdate",function(e){e.set("inc_promo_date",e.get("inc_pubdate"))}),this.listenTo(this,"change:inc_headline",function(e,t){for(var i={},n=this.changedAttributes(),s=["inc_title","inc_homepage_headline","inc_twitter_headline"],o=0;o<s.length;o++){var a=s[o];!n[a]&&this.previous("inc_headline")==this.get(a)&&this.get(a)&&""!=this.get(a).trim()&&(i[a]=t)}var r=20==this.get("inc_typid")&&this.get("slideshows")&&this.get("slideshows").length>0?inc.collections.slideshow.get(this.get("slideshows")[0].id):null;!r||this.previous("inc_headline")!=r.get("sls_name")&&r.get("sls_name")!=r.defaults().sls_name||r.set("sls_name",this.get("inc_headline")),_.size(i)>0&&this.set(i)}),this.listenTo(this,"change:inc_deck",function(e,t){for(var i={},n=this.changedAttributes(),s=["inc_homepage_deck","inc_sharing_deck"],o=0;o<s.length;o++){var a=s[o];!n[a]&&this.get(a)&&""!=this.get(a).trim()&&this.previous("inc_deck")==this.get(a)&&(i[a]=t)}_.size(i)>0&&this.set(i)}),this.listenTo(this,"change:channels",function(){this.trigger("change:primaryChannel",this,this.primaryChannel())}),this.listenTo(this,"change:inc_column_name_override change:inc_serid change:inc_typid change:primaryChannel change:authors change:inc_prtid",function(){this.trigger("change:caption",this,this.caption())}),this.listenTo(this,"change:inc_serid change:inc_typid change:primaryChannel change:authors change:inc_prtid",function(){this.trigger("change:captionURL",this,this.captionURL())}),this.listenTo(this,"change:inc_typid change:inc_prtid",function(){this.trigger("change:precaption",this,this.precaption())}),this.listenTo(this,"change:inc_prtid",function(){this.trigger("change:precaptionURL",this,this.precaptionURL())})},defaults:function(){return{inc_headline:"Headline",inc_homepage_headline:null,inc_homepage_headline_ab_test:null,inc_twitter_headline:null,inc_rubric:null,inc_title:"Headline",inc_custom_byline:null,inc_deck:"Deck",inc_homepage_deck:null,inc_sharing_deck:null,inc_clean_text:"<p>In a sense, Lacan suggests the use of modernist deconceptualism to attack hierarchy. Debord uses the term 'the semantic paradigm of context' to denote not semioticism, but presemioticism.</p><p>Therefore, the subject is interpolated into a Derridaist reading that includes narrativity as a totality. If subcultural theory holds, we have to choose between modernist deconceptualism and modern socialism.</p><p>It could be said that Sontag uses the term 'subcultural theory' to denote a mythopoetical reality. The main theme of the works of Gibson is not narrative as such, but subnarrative.</p><p>Therefore, the premise of postsemanticist discourse suggests that society has objective value, but only if modernist deconceptualism is invalid; if that is not the case, Lacan's model of dialectic theory is one of \"the precultural paradigm of expression\", and hence intrinsically unattainable.</p>",inc_code_only_text:null,inc_pubdate:moment().subtract("minutes",3).tz("America/New_York").startOf("minute").format(Inc.Utilities.mysqlTimeFormat),inc_promo_date:moment().subtract("minutes",3).tz("America/New_York").startOf("minute").format(Inc.Utilities.mysqlTimeFormat),inc_custom_pubdate:null,inc_typid:1,inc_staid:1,inc_serid:null,inc_prtid:null,inc_activeflag:!1,inc_copyeditedflag:!1,inc_hide_article_sidebarflag:!1,inc_custom_sidebar:null,inc_filelocation:null,inc_show_feature_imageflag:!0,inc_hide_commentsflag:!1,inc_show_read_moreflag:!0,inc_display_video_at_bottomflag:!1,inc_hide_video_prerollflag:!1,inc_full_width_read_moreflag:!1,inc_custom_css:null,inc_custom_javascript:null,inc_canonical_url:null,inc_meta_keywords:null,inc_lock_articleflag:!1,inc_column_name_override:null,channels:[],authors:[],images:[],photoEssaySlides:[],slideshows:[],videos:[]}},labels:function(){return{inc_headline:"Headline",inc_homepage_headline:"Homepage Headline",inc_homepage_headline_ab_test:"Homepage Headline B",inc_twitter_headline:"Twitter Headline",inc_rubric:"Rubric",inc_title:"Title",inc_custom_byline:"Custom Byline",inc_deck:"Deck",inc_homepage_deck:"Homepage Deck",inc_sharing_deck:"Sharing Deck",inc_clean_text:"Body Copy",inc_code_only_text:"Code Only Text",inc_pubdate:"Pubdate",inc_promo_date:"Promo Date",inc_custom_pubdate:"Custom Pubdate",inc_typid:"Type ID",inc_staid:"Status ID",inc_serid:"Article Series",inc_prtid:"Partner",inc_activeflag:"Active",inc_copyeditedflag:"Copyedited",inc_hide_article_sidebarflag:"Hide Sidebar",inc_custom_sidebar:"Custom Sidebar",inc_filelocation:"File Location",inc_show_feature_imageflag:"Show Feature Image",inc_hide_commentsflag:"Hide Comments",inc_show_read_moreflag:"Show Read More",inc_display_video_at_bottomflag:"Display Video at Bottom",inc_hide_video_prerollflag:"Hide Video Preroll",inc_full_width_read_moreflag:"Full Width Read More",inc_custom_css:"Custom CSS",inc_custom_javascript:"Custom JavaScript",inc_canonical_url:"Canonical URL",inc_meta_keywords:"Meta Keywords",inc_lock_articleflag:"Lock Article",inc_column_name_override:"Column Name Override",channels:"Channels",authors:"Authors",images:"Images",photoEssaySlides:"Photo Essay Slides",slideshows:"Slideshows",videos:"Videos"}},primaryChannel:function(){var e=null,t=this.get("channels");if(t.length>0){var i=_.find(t,function(e){return 0==e.sortorder});i||(i=t[0]),e=i}return e},caption:function(){var e=null,t=this.get("inc_column_name_override"),i=this.get("inc_serid"),n=this.get("inc_typid"),s=this.primaryChannel(),o=this.get("authors"),a=this.get("inc_prtid"),r=inc.collections.partner.get(a);if(t)e=t;else if(i){var l=inc.collections.articleseries.get(i);l&&(e=l.get("ser_name"))}else if(s)if(o.length>0){var c=_.find(o,function(e){return 0==e.sortorder});c||(c=o[0]),e=-1!=_.indexOf([3179,3518,3589],c.id)?c.aut_column_name:s.cnl_name}else e=s.cnl_name;return 17==n&&(e="Special Report"),!r||"Custom Content"!=r.prt_partner_type&&"Inc Partner Insights"!=r.prt_partner_type||(e=r.prt_partner),e||"create"!=inc.i.mod&&!inc.isMode("edit")?e:"Channel"},captionURL:function(){var e=null,t=this.get("inc_serid"),i=this.get("inc_typid"),n=this.primaryChannel(),s=this.get("authors"),o=this.get("inc_prtid"),a=inc.collections.partner.get(o);if(t){var r=inc.collections.articleseries.get(t);r&&(e=inc.applicationURL+r.get("ser_base_directory"))}else if(n)if(s.length>0){var l=_.find(s,function(e){return 0==e.sortorder});l||(l=s[0]),e=-1!=_.indexOf([3179,3518,3589],l.id)?inc.applicationURL+"author/"+Inc.Utilities.convertToLink(l.aut_name):inc.applicationURL+n.cnl_filelocation}else e=inc.applicationURL+n.cnl_filelocation;return 17==i&&(e=null),!a||"Custom Content"!=a.prt_partner_type&&"Inc Partner Insights"!=a.prt_partner_type||(e=a.prt_url?0==(a.prt_url||"").search(/https?:\/\//)?a.prt_url:inc.applicationURL+a.prt_url:null),e},precaption:function(){var e=null,t=this.get("inc_typid"),i=this.get("inc_prtid"),n=inc.collections.partner.get(i);switch(t){case 2:e="Slideshow";break;case 4:case 11:e="Video";break;case 12:case 13:e="Gallery";break;case 14:e="Infographic";break;case 16:e="Q&A"}return n&&"Inc Partner Insights"==n.prt_partner_type&&(e="Inc. Partner Insights"),e},precaptionURL:function(){var e=null,t=this.get("inc_prtid"),i=inc.collections.partner.get(t);return i&&"Inc Partner Insights"==i.prt_partner_type&&(e=inc.applicationURL+"ipi"),e},getFeaturedImageID:function(){var e=this.get("images");return e.length>0?e[0].id:null},setFeaturedImage:function(e,t){var i=this.copyAttributes().images;i.shift(),i=_.reject(i,function(t){return t.id==e.getID()}),i.unshift({id:e.getID(),sortorder:0});for(var n=0;n<i.length;n++)i[n].sortorder=n;return this.set("images",i,{origin:t||this}),this},getSlideshowID:function(){var e=this.get("slideshows");return e.length>0?e[0].id:null},getFeaturedVideoID:function(){var e=this.get("videos");return e.length>0?e[0].id:null},setFeaturedVideo:function(e,t){var i=this.copyAttributes().videos;i.shift(),i=_.reject(i,function(t){return t.id==e.getID()}),i.unshift({id:e.getID(),sortorder:0});for(var n=0;n<i.length;n++)i[n].sortorder=n;return this.set("videos",i,{origin:t||this}),this},hasInlineVideos:function(){return(this.get("inc_clean_text")||"").search("<!--inlinevideo//-->")>-1},hasVideoAtTop:function(){return this.get("videos").length>0&&(4==this.get("inc_typid")||!this.get("inc_display_video_at_bottomflag")&&!this.hasInlineVideos())},hasVideoAtBottom:function(){return this.get("videos").length>0&&4!=this.get("inc_typid")&&this.get("inc_display_video_at_bottomflag")&&!this.hasInlineVideos()},publishable:function(){var e=this.copyAttributes(),t=this.defaults();return!(!e.inc_activeflag&&(!this.dirty||this.isNew())&&e.inc_headline&&e.inc_headline!=t.inc_headline&&""!=e.inc_headline.trim()&&e.inc_deck&&e.inc_deck!=t.inc_deck&&""!=e.inc_deck.trim()&&e.channels.length>0&&(20!=e.inc_typid||e.slideshows.length>0)&&(4!=e.inc_typid||e.videos.length>0))||(e.inc_clean_text||"").replace(/\r|\n/g,"")==t.inc_clean_text&&4!=e.inc_typid||""==(e.inc_clean_text||"").replace(/\r|\n/g,"").trim()&&20!=e.inc_typid&&4!=e.inc_typid?!1:!0},isDeletableByUser:function(){var e=this.get("authors");return(inc.user.admin&&inc.user.admin.roleID<=3&&inc.user.id&&e&&_.findWhere(e,{aut_usrid:inc.user.id})||inc.user.admin&&inc.user.admin.roleID<=2)&&1==this.get("inc_staid")&&!this.get("inc_activeflag")?!0:!1},bodyIsEditable:function(){var e=this.get("inc_clean_text")||"";return-1!=e.search("<!--commentblock")||this.get("inc_code_only_text")||4==this.get("inc_typid")?!1:!0},formatText:function(e){var t=this.get("inlineimages").slice(),i=this.get("videos").slice(),n=_.template($("#InlineImage-Template").html());return e=(e||"").replace(/<!--inlineimage\/\/-->/g,_.bind(function(){if(0==t.length)return"";var e=t.shift().id;if(!e)return"";var i=inc.collections.inlineimage.get(e),s=i.copyAttributes();return s.id=i.getID(),s.imageURL=i.getImageURL(this.get("inc_hide_article_sidebarflag")),s.hasImageString=i.has("imageString")&&i.get("imageString")?!0:!1,s.pdfURL=i.getPDFURL(),s.parentID=this.getID(),n(s)},this)),e=(e||"").replace(/<!--inlinevideo\/\/-->/g,_.bind(function(){if(0==i.length)return"";var e=i.shift().id;return e?'<div class="inlinevideo inlineobject inc_editable_area" data-content-id="'+e+'"></div>':""},this))},unformatText:function(e){var t=$("<div></div>").html($(e||""));return t.find(".inlineimage").before("<!--inlineimage//-->"),t.find(".inlineimage").remove(),t.find(".inlinevideo").before("<!--inlinevideo//-->"),t.find(".inlinevideo").remove(),t.find(".mobileInsertionAdContainer").remove(),t.html()},saveFailed:function(e,t,i){var n=[];if(this.isNew())n.push({header:this.get("inc_headline"),message:"...could not be created"});else{var s=this.changedAttributes();i.wait&&i.attrs&&!_.isUndefined(i.attrs.inc_activeflag)||s&&!_.isUndefined(s.inc_activeflag)?i.wait&&i.attrs&&!_.isUndefined(i.attrs.inc_activeflag)&&i.attrs.inc_activeflag||s.inc_activeflag?n.push({header:this.get("inc_headline"),message:"...could not be published"}):n.push({header:this.get("inc_headline"),message:"...could not be unpublished"}):i.delet?n.push({header:this.get("inc_headline"),message:"...could not be deleted"}):_.each(s,function(e,t,i){n.push({header:this.get("inc_headline"),message:"..."+this.labels()[t]+" failed to save"})},this)}return this.errorMessages=null,n.length>0&&(this.errorMessages=n),Inc.Models.Archetype.prototype.saveFailed.apply(this,arguments)}},{filters:[{attributeName:"inc_autid",label:"Editor"},{attributeName:"authors",label:"Author"},{attributeName:"channels",label:"Channel"},{attributeName:"inc_staid",label:"Status"}],statuses:[{id:1,name:"Draft"},{id:2,name:"Add Assets"},{id:3,name:"Editorial Review"},{id:4,name:"Reviewed - OK"},{id:5,name:"Reviewed - Needs Work"},{id:6,name:"Ready for Publish"},{id:7,name:"Publish on Pubdate"},{id:8,name:"PUBLISH NOW (business only)"},{id:9,name:"QUEUE FOR DELETE"}]}),Inc.Models.Channel=Inc.Models.Archetype.extend({type:"ChannelModel",constructor:function(e,t){this.endpoints=[{name:"default",url:inc.restURL+"channel"},{name:"live",url:inc.restURL+"admin/channel"}],Inc.Models.Archetype.apply(this,arguments)},defaults:function(){return{cnl_name:"Channel",cnl_filelocation:null,cnl_custom_color:"009cd8",cnl_calculated_color:null,cnl_contributor_accessflag:!1}}}),Inc.Models.Author=Inc.Models.Archetype.extend({type:"AuthorModel",constructor:function(e,t){this.endpoints=[{name:"default",url:inc.restURL+"author"},{name:"live",url:inc.restURL+"admin/author"}],Inc.Models.Archetype.apply(this,arguments)},defaults:function(){return{aut_base_filelocation:null,aut_name:"Author Name",aut_title:null,aut_twitter_id:"Author_Twitter_ID",aut_blurb:null,aut_footer_blurb:null,aut_column_name:null}}}),Inc.Models.Image=Inc.Models.Archetype.extend({type:"ImageModel",constructor:function(e,t){this.endpoints=[{name:"default",url:inc.restURL+"image"},{name:"live",url:inc.restURL+"admin/image"}],Inc.Models.Archetype.apply(this,arguments)},initialize:function(e,t){Inc.Models.Archetype.prototype.initialize.apply(this,arguments),_.isString(this.get("img_pan_crop"))&&this.set("img_pan_crop",$.parseJSON(this.get("img_pan_crop"))),_.isString(this.getID())&&this.listenTo(this,"change:transform",function(e,t,i){var n=t,s=this.get("cropped_image_width"),o=this.get("cropped_image_height"),a=_.isBoolean(i.zoomOnly)?i.zoomOnly:!1,r=a?s/o:this.get("crop_aspect_ratio");if(n&&s&&o&&r){var l={img_w:s,img_h:o},c=s/o;c>=r?(l.h=Math.round(o/n.zoom),l.w=Math.round(l.h*r)):(l.w=Math.round(s/n.zoom),l.h=Math.round(l.w/r)),l.x=Math.round((s-l.w)/2),l.x-=Math.round(n.x*s),l.x<=0&&(l.x=0),l.x+l.w>l.img_w&&(l.x=l.img_w-l.w),l.y=Math.round((o-l.h)/2),l.y-=Math.round(n.y*o),l.y<=0&&(l.y=0),l.y+l.h>l.img_h&&(l.y=l.img_h-l.h),this.set("img_pan_crop",l)}})},defaults:function(){return{transform:{x:0,y:0,zoom:1}}},getURL:function(e){if(this.has("src"))return this.get("src");if(this.has("display_sizes"))return _.first(this.get("display_sizes")).uri;var t=this.get("img_panoramicref");if(!t)return null;var i=t.split("."),n=i.pop();return inc.uploadedFilesURL+"uploaded_files/image/"+e+"/"+i.join(".")+"_"+this.getID()+"."+n},croppable:function(){return _.isString(this.getID())||_.isBoolean(this.get("img_gettyflag"))&&this.get("img_gettyflag")?!0:!1}}),Inc.Models.Video=Inc.Models.Archetype.extend({type:"VideoModel",constructor:function(e,t){this.endpoints=[{name:"default",url:inc.restURL+"video"},{name:"live",url:inc.restURL+"admin/video"}],Inc.Models.Archetype.apply(this,arguments)},defaults:function(){return{vid_title:null,vid_description:null,vid_kaltura_id:null}},labels:function(){return{vid_title:"Title",vid_description:"Description",vid_kaltura_id:"Entry ID"}}}),Inc.Models.InlineImage=Inc.Models.Archetype.extend({type:"InlineImageModel",constructor:function(e,t){this.endpoints=[{name:"default",url:inc.restURL+"inlineimage"},{name:"live",url:inc.restURL+"admin/inlineimage"}],Inc.Models.Archetype.apply(this,arguments)},getImageURL:function(e){if("undefined"==typeof e&&(e=!1),this.get("imageString"))return this.get("imageString");if(_.isString(this.getID()))return"";var t=inc.uploadedFilesURL+"uploaded_files/inlineimage/";switch(this.get("inl_displaytype")){case"halfwidth":t+="385x0/";break;case"halffloat":t+="250x0/";break;case"list":t+="130x0/";break;default:20==this.get("inl_ityid")||e||(t+="630x0/")}var i=(this.get("inl_imageref")||"").split("."),n=i.pop();return t+=i.join(".")+"_"+this.getID()+"."+n},getPDFURL:function(){if(!this.get("inl_full_pdf_versionref"))return null;var e=inc.uploadedFilesURL+"uploaded_files/inlineimage/",t=this.get("inl_full_pdf_versionref").split("."),i=t.pop();return e+=t.join(".")+"_"+this.getID()+"."+i},defaults:function(){return{inl_reference_name:null,inl_headline:null,inl_caption:null,inl_extended_caption:null,inl_link_text:null,inl_link_url:null,inl_custom_credit:null,inl_imagemap:null,inl_ityid:null,inl_imageref:null,inl_displaytype:"fullwidth",inl_alt_text:null,inl_show_embed_codeflag:!1,inl_full_pdf_versionref:null,inl_rightsflag:!1,inl_gettyflag:!1}},labels:function(){return{inl_reference_name:"Reference Name",inl_headline:"Headline",inl_caption:"Caption",inl_extended_caption:"Extended Caption",inl_link_text:"Link Text",inl_link_url:"Link URL",inl_custom_credit:"Custom Credit",inl_imagemap:"Image Map",inl_ityid:"ityid",inl_imageref:"Image Reference",inl_displaytype:"Display Type",inl_alt_text:"Alt Text",inl_show_embed_codeflag:"Show Embed Code",inl_full_pdf_versionref:"PDF Reference",inl_rightsflag:"We Have Image Rights",inl_gettyflag:"Getty Image"}}},{displayTypes:[{name:"fullwidth",value:"fullwidth"},{name:"haltwidth",value:"halfwidth"},{name:"halfwrap",value:"halfwrap"},{name:"list",value:"list"}]}),Inc.Collections.Archetype=Backbone.Collection.extend({type:"Collection",model:Backbone.Model,initialize:function(e,t){t||(t={}),t.type&&(this.type=t.type),this.oid=t.oid||_.uniqueId(this.type+"-"),this.ready=!1,this.updating=!1,this.failedToUpdate=!1,this.admin=_.isBoolean(t.admin)?t.admin:!1,this.listenTo(this,"request",function(){this.updating=!0,this.trigger("update:start",this)}),this.listenTo(this,"sync",function(e,t,i){this.updating=!1,this.failedToUpdate=!1,this.ready||(this.ready=!0,this.trigger("ready",this)),this.trigger("update:success",this)}),this.listenTo(this,"error",function(e,t,i){this.updating=!1,this.failedToUpdate=!0,this.trigger("update:fail",this)}),this.size()>0&&(this.ready=!0,this.trigger("ready",this))},fetch:function(e){if(this.updating)return this;e=e?_.clone(e):{},inc.parameterSet("forceReadErrors")&&(e.data={forceReadErrors:!0}),inc.parameterSet("forceImageCollectionLoadError")&&this instanceof Inc.Collections.Image&&(e.data={forceReadErrors:!0}),e.url=this.url(),void 0===e.parse&&(e.parse=!0);var t=e.success,i=this;return e.success=function(n){if(n.error)return e.error&&e.error(i,n,e),!1;var s=e.reset?"reset":"set";i[s](n,e),t&&t(i,n,e),i.trigger("sync",i,n,e)},Inc.Utilities.wrapError(this,e),this.sync("read",this,e)},add:function(e,t){var i=Backbone.Collection.prototype.add.apply(this,arguments);!_.isArray(i)&&(i=[i]),_.each(i,function(e){"undefined"!=typeof e&&this.trigger("add:"+(e.id||e.cid),e)},this)},parse:function(e,t){return e.serverTime&&(this.serverTime=e.serverTime),e.data}}),Inc.Collections.Article=Inc.Collections.Archetype.extend({type:"ArticleCollection",model:Inc.Models.Article,url:function(){var e=inc.restURL;return this.admin&&(e+="admin/"),e+"article"},getParentArticleOfSlideshow:function(e){return this.find(function(t){var i=t.get("slideshows");return 0==i.length?!1:i[0].id==e.getID()&&20==t.get("inc_typid")?!0:!1})}}),Inc.Collections.Author=Inc.Collections.Archetype.extend({type:"AuthorCollection",model:Inc.Models.Author,url:function(){var e=inc.restURL;return this.admin&&(e+="admin/"),e+"author"}}),Inc.Collections.Editor=Inc.Collections.Author.extend({type:"EditorCollection",url:function(){var e=inc.restURL;return this.admin&&(e+="admin/"),e+"author/editors"}}),Inc.Collections.Channel=Inc.Collections.Archetype.extend({type:"ChannelCollection",model:Inc.Models.Channel,url:function(){var e=inc.restURL;return this.admin&&(e+="admin/"),e+"channel"}}),Inc.Collections.Image=Inc.Collections.Archetype.extend({type:"ImageCollection",model:Inc.Models.Image,url:function(){var e=inc.restURL;return this.admin&&(e+="admin/"),e+"image"}}),Inc.Collections.Video=Inc.Collections.Archetype.extend({type:"VideoCollection",model:Inc.Models.Video,url:function(){var e=inc.restURL;return this.admin&&(e+="admin/"),e+"video"}}),Inc.Collections.InlineImage=Inc.Collections.Archetype.extend({type:"InlineImageCollection",model:Inc.Models.InlineImage,url:function(){var e=inc.restURL;return this.admin&&(e+="admin/"),e+"inlineimage"}}),Inc.GestureRecognizers.Archetype={type:"GestureRecognizer",extend:Inc.extend,spawn:Inc.spawn,init:function(e){return e||(e={}),e.type&&(this.type=e.type),this.oid=e.oid||_.uniqueId(this.type+"-"),this.view=null,this.$el=null,this},attachTo:function(e){return e instanceof Inc.ToggleView?(this.view=e,this.$el=e.$el):e instanceof $?this.$el=e:this.$el=$(e),this},trash:function(){return this.view=null,this.$el=null,this.stopListening(),this}},_.extend(Inc.GestureRecognizers.Archetype,Backbone.Events),Inc.GestureRecognizers.Swipe=Inc.GestureRecognizers.Archetype.extend({type:"SwipeRecognizer",init:function(e){return e||(e={}),this.direction=e.direction||null,_.isArray(this.direction)||(this.direction=[this.direction]),this.directions=["left","right"],this.ox,this.oy,this.dx,this.dy,this.xThreshold=e.xThreshold||5,this.yThreshold=e.yThreshold||5,this},attachTo:function(e){return Inc.GestureRecognizers.Archetype.attachTo.apply(this,arguments),this.$el.on("touchstart.inc:gesturerecognizer:"+this.oid,this.onTouchStart.bind(this)),this.$el.on("touchmove.inc:gesturerecognizer:"+this.oid,this.onTouchMove.bind(this)),this},onTouchStart:function(e){return 1==e.originalEvent.touches.length&&(this.ox=e.originalEvent.touches[0].pageX,this.oy=e.originalEvent.touches[0].pageY),this},onTouchMove:function(e){return 1==e.originalEvent.touches.length?(this.dx=e.originalEvent.touches[0].pageX-this.ox,this.dy=e.originalEvent.touches[0].pageY-this.oy,_.indexOf(this.direction,"left")>-1&&this.dx<0&&Math.abs(this.dx)>=this.xThreshold&&Math.abs(this.dy)<this.yThreshold&&(this.trigger("gesture:swipe",this.view,this.$el,"left"),this.view&&this.view.trigger("gesture:swipe",this.view,this.$el,"left")),_.indexOf(this.direction,"right")>-1&&this.dx>0&&Math.abs(this.dx)>=this.xThreshold&&Math.abs(this.dy)<this.yThreshold&&(this.trigger("gesture:swipe",this.view,this.$el,"right"),this.view&&this.view.trigger("gesture:swipe",this.view,this.$el,"right")),this.killGesture()):this.killGesture(),this},killGesture:function(){return this.ox=this.oy=this.dx=this.dy=null,this},trash:function(){return this.killGesture(),this.$el.off("inc:gesturerecognizer:"+this.oid),Inc.GestureRecognizers.Archetype.trash.apply(this,arguments)}}),Inc.GestureRecognizers.PressAndHold=Inc.GestureRecognizers.Archetype.extend({type:"PressAndHoldRecognizer",init:function(e){return e||(e={}),Inc.GestureRecognizers.Archetype.init.apply(this,arguments),this.delay=e.delay||750,this.step=e.step||500,this.originalStep=this.step,this.minStep=e.minStep||150,this.acceleration=e.acceleration||1.5,this.time=0,this.timer=null,this},attachTo:function(e){return Inc.GestureRecognizers.Archetype.attachTo.apply(this,arguments),this.$el.on("mousedown.inc:gesturerecognizer:"+this.oid,this.onMouseDown.bind(this)),$(document).on("mouseup.inc:gesturerecognizer:"+this.oid,this.onDocumentMouseUp.bind(this)),this},onMouseDown:function(e){var t=this;return _.isNull(this.timer)?0==this.time&&(this.trigger("gesture:pressandhold:start",this.view,this.$el),this.view&&this.view.trigger("gesture:pressandhold:start",this.view,this.$el)):(this.time+=this.step,this.time>=this.delay&&(this.step/=this.acceleration,this.step=Math.floor(this.step),this.step<this.minStep&&(this.step=this.minStep),this.trigger("gesture:pressandhold:step",this.view,this.$el),this.view&&this.view.trigger("gesture:pressandhold:step",this.view,this.$el))),this.timer=setTimeout(function(){t.onMouseDown()},this.step),document.getSelection().removeAllRanges(),this},onDocumentMouseUp:function(e){if(_.isNumber(this.timer)){var t="gesture:pressandhold:end";this.time<this.delay&&(t="gesture:pressandhold:step "+t),this.trigger(t,this.view,this.$el),this.view&&this.view.trigger(t,this.view,this.$el),this.reset(),document.getSelection().removeAllRanges()}return this},reset:function(){return _.isNumber(this.timer)&&clearTimeout(this.timer),this.timer=null,this.time=0,this.step=this.originalStep,this},trash:function(){return this.$el.off("inc:gesturerecognizer:"+this.oid),$(document).off("inc:gesturerecognizer:"+this.oid),Inc.GestureRecognizers.Archetype.trash.apply(this,arguments)}}),Inc.Controls.IncrementSpinner=Inc.ToggleView.extend({type:"IncrementSpinner",className:"IncrementSpinner",template:_.template($("#IncrementSpinner-Template").html()),constructor:function(e){e||(e={}),this.fieldname=e.fieldname||null,this.range=this.range||e.range||null,this.min=_.isNumber(this.min)?this.min:_.isNumber(e.min)?e.min:null,this.max=_.isNumber(this.max)?this.max:_.isNumber(e.max)?e.max:null,this.increment=this.increment||e.increment||1,this.loop=_.isBoolean(this.loop)?this.loop:_.isBoolean(e.loop)?e.loop:!0,this.value=this.value||e.value||0,this.inputReadOnly=_.isBoolean(this.inputReadOnly)?this.inputReadOnly:_.isBoolean(e.inputReadOnly)?e.inputReadOnly:!1,Inc.ToggleView.apply(this,arguments)},initialize:function(e){Inc.ToggleView.prototype.initialize.apply(this,arguments),this.render(),this.input=new Inc.ToggleView({el:this.$(".SpinnerInput")[0]}),this.$input=this.input.$("input"),this.inputReadOnly&&this.$input.attr("readonly","readonly"),this.$input.on("keydown",function(e){9!=e.which||this.inputReadOnly||(e.preventDefault(),this.trigger("tab",this))}.bind(this)),this.incrementUp=new Inc.ToggleView({el:this.$(".IncrementUp")[0],gestureRecognizers:Inc.GestureRecognizers.PressAndHold.spawn()}),this.listenTo(this.incrementUp,"gesture:pressandhold:start",this.startIncrementUp),this.listenTo(this.incrementUp,"gesture:pressandhold:step",this.stepIncrementUp),this.listenTo(this.incrementUp,"gesture:pressandhold:end",this.endIncrementUp),this.incrementDown=new Inc.ToggleView({el:this.$(".IncrementDown")[0],gestureRecognizers:Inc.GestureRecognizers.PressAndHold.spawn()}),this.listenTo(this.incrementDown,"gesture:pressandhold:start",this.startIncrementDown),this.listenTo(this.incrementDown,"gesture:pressandhold:step",this.stepIncrementDown),this.listenTo(this.incrementDown,"gesture:pressandhold:end",this.endIncrementDown),this.listenTo(this.model,"change:"+this.fieldname,this.dataChanged),this.dataChanged(this.model,this.model.get(this.fieldname))},render:function(){return this.$el.html(this.template(this)),this.className!=this.type&&this.$el.toggleClass(this.type,!0),this},dataChanged:function(e,t,i){return this.value=this.dataToValue(t),this.$input.val(this.valueToDisplayValue(this.value)),this},dataToValue:function(e){return e},valueToDisplayValue:function(e){return e},startIncrementUp:function(e,t){return e.activate(),this},stepIncrementUp:function(e,t){if(_.isArray(this.range)&&this.range.length>0)this.value==this.range.length-1?this.loop&&(this.value=0):this.value++;else{var i=this.increment,n=Math.abs(this.value),s=n%this.increment;if(0!=s&&(this.value>0?i-=s:i=s),_.isNumber(this.max)&&this.value+i>this.max){if(this.loop&&_.isNumber(this.min)){var o=this.value;this.value=this.min,o!=this.value&&this.trigger("maxtomin",this,this.value)}}else this.value+=i}return this.$input.val(this.valueToDisplayValue(this.value)),this},endIncrementUp:function(e,t){return this.$input.val(this.valueToDisplayValue(this.value)),this.trigger("select",this,this.value),e.deactivate(),this},startIncrementDown:function(e,t){return e.activate(),this},stepIncrementDown:function(e,t){if(_.isArray(this.range)&&this.range.length>0)0==this.value?this.loop&&(this.value=this.range.length-1):this.value--;else{var i=this.increment,n=Math.abs(this.value),s=n%this.increment;if(0!=s&&(this.value>0?i=s:i-=s),_.isNumber(this.min)&&this.value-i<this.min){if(this.loop&&_.isNumber(this.max)){var o=this.value;this.value=this.max,o!=this.value&&this.trigger("mintomax",this,this.value)}}else this.value-=i}return this.$input.val(this.valueToDisplayValue(this.value)),this},endIncrementDown:function(e,t){return this.$input.val(this.valueToDisplayValue(this.value)),this.trigger("select",this,this.value),e.deactivate(),this}}),Inc.Controls.HourSpinner=Inc.Controls.IncrementSpinner.extend({type:"HourSpinner",constructor:function(e){e||(e={}),this.min=e.min||1,this.max=e.max||12,Inc.Controls.IncrementSpinner.apply(this,arguments)},dataToValue:function(e){return parseInt(moment(e,Inc.Utilities.mysqlTimeFormat).format("h"))},valueToDisplayValue:function(e){var t=e.toString();return 1==t.length&&(t="0"+t),t}}),Inc.Controls.MinuteSpinner=Inc.Controls.IncrementSpinner.extend({type:"MinuteSpinner",constructor:function(e){e||(e={}),this.min=e.min||0,this.max=e.max||45,this.increment=e.increment||15,Inc.Controls.IncrementSpinner.apply(this,arguments)},dataToValue:function(e){return parseInt(moment(e,Inc.Utilities.mysqlTimeFormat).format("m"))},valueToDisplayValue:function(e){var t=e.toString();return 1==t.length&&(t="0"+t),t}}),Inc.Controls.AmPmSpinner=Inc.Controls.IncrementSpinner.extend({type:"AmPmSpinner",constructor:function(e){e||(e={}),this.range=e.range||["AM","PM"],Inc.Controls.IncrementSpinner.apply(this,arguments)},dataToValue:function(e){var t=_.indexOf(this.range,moment(e,Inc.Utilities.mysqlTimeFormat).format("A"));return-1==t&&(t=0),t},valueToDisplayValue:function(e){return _.isNumber(e)?this.range[e]:e}}),Inc.Controls.TimePicker=Inc.ToggleView.extend({type:"TimePicker",className:"TimePicker",template:_.template($("#TimePicker-Template").html()),initialize:function(e){this.hidden=!0,Inc.ToggleView.prototype.initialize.apply(this,arguments),this.fieldname=e.fieldname||null,this.render(),this.hourSpinner=new Inc.Controls.HourSpinner({model:this.model,fieldname:this.fieldname,inputReadOnly:!0}),this.$(".Spinners").append(this.hourSpinner.$el).append($('<div class="HourMinuteSeparator"><div class="Colon">:</div></div>')),this.minuteSpinner=new Inc.Controls.MinuteSpinner({model:this.model,fieldname:this.fieldname,inputReadOnly:!0}),this.$(".Spinners").append(this.minuteSpinner.$el),this.ampmSpinner=new Inc.Controls.AmPmSpinner({model:this.model,fieldname:this.fieldname,inputReadOnly:!0}),this.$(".Spinners").append(this.ampmSpinner.$el),this.listenTo(this.hourSpinner,"select",this.timeSelected),this.listenTo(this.minuteSpinner,"select",this.timeSelected),this.listenTo(this.ampmSpinner,"select",this.timeSelected),this.listenTo(this.hourSpinner,"tab",function(e){this.minuteSpinner.$("input").trigger("focus")},this),this.listenTo(this.minuteSpinner,"tab",function(e){this.hourSpinner.$("input").trigger("focus")},this),this.$el.css({height:"0px"})},render:function(){return this.$el.html(this.template(this)),this.className!=this.type&&this.$el.toggleClass(this.type,!0),this},timeSelected:function(){var e=this.hourSpinner.value;return 1==this.ampmSpinner.value&&(e+=12,24==e&&(e=0)),this.model.set(this.fieldname,moment(this.model.get(this.fieldname),Inc.Utilities.mysqlTimeFormat).hour(e).minute(this.minuteSpinner.value).second(0).tz("America/New_York").format(Inc.Utilities.mysqlTimeFormat)),this.trigger("select:time",this),this},show:function(){return this.$el.css({height:this.$(".Spinners").outerHeight(!0)-4+"px"}),this.hourSpinner.$("input").attr("tabindex","0"),this.minuteSpinner.$("input").attr("tabindex","1"),Inc.ToggleView.prototype.show.apply(this,arguments),this},hide:function(){return this.$el.css({height:"0px"}),this.hourSpinner.$("input").attr("tabindex","-1"),this.minuteSpinner.$("input").attr("tabindex","-1"),Inc.ToggleView.prototype.hide.apply(this,arguments),this}}),Inc.Controls.DatePicker=Inc.ToggleView.extend({type:"DatePicker",className:"DatePicker",template:_.template($("#DatePicker-Template").html()),initialize:function(e){e||(e={}),this.hidden=!0,this.clndr=null,this.selectedMoment=e.selectedMoment.clone()||moment(),this.selectingToday=!1,Inc.ToggleView.prototype.initialize.apply(this,arguments),this.$el.css({height:"0px"}).toggleClass("transition-open-close",!0)},events:function(){return{"click.inc:content:edit .TodayButton":"selectToday"}},render:function(){return this.template&&this.$el.html(this.template(this)),this.clndr=this.$(".Calendar").clndr({
template:$("#Calendar-Template").html(),startWithMonth:this.selectedMoment,weekOffset:1,clickEvents:{click:function(e){document.getSelection().removeAllRanges(),this.selectDate(e.date),this.trigger("select:date",e.date)}.bind(this),previousMonth:function(e){document.getSelection().removeAllRanges(),this.$el.css("height",this.clndr.element.outerHeight(!0)+"px").toggleClass("transition-open-close",!1).toggleClass("transition-calendar-month-height",!0)}.bind(this),nextMonth:function(e){document.getSelection().removeAllRanges(),this.$el.css("height",this.clndr.element.outerHeight(!0)+"px").toggleClass("transition-open-close",!1).toggleClass("transition-calendar-month-height",!0)}.bind(this)},doneRendering:function(){this.highlightCurrentlySelectedDay()}.bind(this)}),this.highlightCurrentlySelectedDay(),this.className!=this.type&&this.$el.toggleClass(this.type,!0),this},selectDate:function(e){return this.selectedMoment=e.clone(),this.clndr.setYear(this.selectedMoment.year()).setMonth(this.selectedMoment.month()).element.find(".selected").removeClass("selected"),this.hidden||this.$el.css("height",this.clndr.element.outerHeight(!0)+"px").toggleClass("transition-open-close",!1).toggleClass("transition-calendar-month-height",!0),this.highlightCurrentlySelectedDay(),this},highlightCurrentlySelectedDay:function(){return this.clndr?(this.clndr.element.find(".calendar-day-"+this.selectedMoment.format("YYYY-MM-DD")).toggleClass("selected",!0),this):this},selectToday:function(){var e=this,t=moment();return this.selectingToday||(this.selectingToday=!0,_.debounce(function(){e.selectDate(t),setTimeout(function(){e.selectingToday=!1,e.trigger("select:date",t)},50)},200,!0)()),this},show:function(){return this.$el.css({height:this.clndr.element.outerHeight(!0)+"px"}),Inc.ToggleView.prototype.show.apply(this,arguments),this},hide:function(){return this.$el.toggleClass("transition-open-close",!0).toggleClass("transition-calendar-month-height",!1).css({height:"0px"}),Inc.ToggleView.prototype.hide.apply(this,arguments),this}}),Inc.Controls.AutoSuggest=Inc.ToggleView.extend({type:"AutoSuggest",initialize:function(e){e||(e={}),Inc.ToggleView.prototype.initialize.apply(this,arguments),this.text=e.text||"",this.options=e.options||[],this.disableRedraw=_.isBoolean(e.disableRedraw)?e.disableRedraw:!1,this.selectionIndex=-1,this.$search=this.$(".search"),this.$hint=this.$(".hint"),this.$dropdownContainer=this.$(".dropdown-container"),this.$dropdown=this.$dropdownContainer.children(".dropdown"),this.$dropdownList=this.$dropdown.children(".dropdown-list"),_.isBoolean(e.focus)&&e.focus&&this.focus(),this.$search.val(this.text),this.listenTo(dispatcher,"document:click",function(){this.$hint.val(""),this.hideDropdown()}),this.listenTo(dispatcher,"window:resized",this.redraw),this.redraw()},events:function(){return{input:"onInputHandler","click .search":"clearSelection","click .dropdown-list li":"onSuggestionClickHandler",keydown:"onKeydown"}},onInputHandler:function(e){return console.log("inputted"),this.text=this.$search.val(),this.updateHint(),this.trigger("change:text",this,this.text),this},focus:function(){return this.$search.focus(),this},hideDropdown:function(){return this.$dropdownContainer.css({visibility:"hidden",height:"0"}),this},showDropdown:function(){return this.$dropdownContainer.css({visibility:"visible",height:this.$dropdownList.outerHeight()+"px"}),this},onSuggestionClickHandler:function(e){var t=$(e.target).html();return this.text=t,this.$search.val(this.text),this.$hint.val(""),this.hideDropdown(),this.trigger("change:text",this,this.text),this},updateHint:function(){if(this.disableRedraw)return this;for(var e=!1,t=0;t<this.options.length;t++){var i=this.options[t],n=this.text.trim();if(i.split(" ").length>1&&0==i.search(n)){e=!0,this.$hint.val(i);break}}return e||this.$hint.val(""),this},onKeydown:function(e){var t=e.keyCode;if(27==t)return this.$hint.val(""),this.hideDropdown(),this.focus(),this;if(39==t||35==t||9==t){if(9==t&&(e.preventDefault(),e.stopPropagation()),39==t){var i=this.getCursorPosition();if(_.isUndefined(i)||i<this.$search.val().length)return this.clearSelection(),this}if(this.$hint.val().length<this.$search.val().length)return this.clearSelection(),this;this.text=this.$hint.val(),this.$hint.val(""),this.$search.val(this.text),this.hideDropdown(),this.disableRedraw=!0,this.focus(),this.moveCursorToEnd(),this.trigger("change:text",this,this.text)}if(13==t&&(this.$hint.val(""),this.selectionIndex>-1&&(this.text=this.options[this.selectionIndex],this.$search.val(this.text)),this.hideDropdown(),this.disableRedraw=!0,this.focus(),this.moveCursorToEnd(),this.trigger("change:text",this,this.text)),this.clearSelection(),40==t){if(e.preventDefault(),e.stopPropagation(),this.selectionIndex==this.options.length-1)return this.selectionIndex=-1,this.focus(),this;this.selectionIndex++;var n=$(this.$dropdownList.children("li")[this.selectionIndex]);return n.focus(),n.toggleClass("selected-suggestion",!0),this}if(38==t){if(e.preventDefault(),e.stopPropagation(),-1==this.selectionIndex){this.selectionIndex=this.options.length-1;var n=$(this.$dropdownList.children("li")[this.selectionIndex]);return n.toggleClass("selected-suggestion",!0),n.focus(),this}if(0==this.selectionIndex)this.selectionIndex=-1,this.focus();else{this.selectionIndex--;var n=$(this.$dropdownList.children("li")[this.selectionIndex]);n.toggleClass("selected-suggestion",!0),n.focus()}return this}return this.selectionIndex=-1,this},clearSelection:function(){return this.$dropdownList.children("li").toggleClass("selected-suggestion",!1),this},getCursorPosition:function(){var e=this.$search[0];if(!e)return void 0;if("selectionStart"in e)return e.selectionStart;if(document.selection){e.focus();var t=document.selection.createRange(),i=document.selection.createRange().text.length;return t.moveStart("character",-e.value.length),t.text.length-i}},moveCursorToEnd:function(){var e=this.$search[0];if(!e)return this;if("number"==typeof e.selectionStart)e.selectionStart=e.selectionEnd=e.value.length;else if("undefined"!=typeof e.createTextRange){e.focus();var t=e.createTextRange();t.collapse(!1),t.select()}return this},redraw:function(){return this.disableRedraw?this:(this.$hint.css("top","-"+this.$search.outerHeight(!0)+"px"),this.$dropdownList.empty(),0==this.options.length?(this.$hint.val(""),this.hideDropdown()):(this.updateHint(),_.each(this.options,function(e){this.$dropdownList.append("<li>"+e+"</li>")},this),this.showDropdown()),this)}}),function(e){function t(t){var i=t||window.event,n=[].slice.call(arguments,1),s=0,o=0,a=0;return t=e.event.fix(i),t.type="mousewheel",i.wheelDelta&&(s=i.wheelDelta/120),i.detail&&(s=-i.detail/3),a=s,void 0!==i.axis&&i.axis===i.HORIZONTAL_AXIS&&(a=0,o=-1*s),void 0!==i.wheelDeltaY&&(a=i.wheelDeltaY/120),void 0!==i.wheelDeltaX&&(o=-1*i.wheelDeltaX/120),n.unshift(t,s,o,a),(e.event.dispatch||e.event.handle).apply(this,n)}var i=["DOMMouseScroll","mousewheel"];if(e.event.fixHooks)for(var n=i.length;n;)e.event.fixHooks[i[--n]]=e.event.mouseHooks;e.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var e=i.length;e;)this.addEventListener(i[--e],t,!1);else this.onmousewheel=t},teardown:function(){if(this.removeEventListener)for(var e=i.length;e;)this.removeEventListener(i[--e],t,!1);else this.onmousewheel=null}},e.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}})}(jQuery),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}(function(e){var t={wheelSpeed:10,wheelPropagation:!1,minScrollbarLength:null,useBothWheelAxes:!1,useKeyboard:!0,suppressScrollX:!1,suppressScrollY:!1,scrollXMarginOffset:0,scrollYMarginOffset:0,distanceFromTopAndBottom:3,preventSpaceScrolling:!1},i=function(){var e=0;return function(){var t=e;return e+=1,".perfect-scrollbar-"+t}}();e.fn.perfectScrollbar=function(n,s){return this.each(function(){var o=e.extend(!0,{},t),a=e(this);if("object"==typeof n?e.extend(!0,o,n):s=n,"update"===s)return a.data("perfect-scrollbar-update")&&a.data("perfect-scrollbar-update")(),a;if("destroy"===s)return a.data("perfect-scrollbar-destroy")&&a.data("perfect-scrollbar-destroy")(),a;if(a.data("perfect-scrollbar"))return a.data("perfect-scrollbar");a.addClass("ps-container");var r,l,c,h,d,u,p,m,f,g,v=e("<div class='ps-scrollbar-x-rail'></div>").appendTo(a),b=e("<div class='ps-scrollbar-y-rail'></div>").appendTo(a),y=e("<div class='ps-scrollbar-x'></div>").appendTo(v),w=e("<div class='ps-scrollbar-y'></div>").appendTo(b),k=parseInt(v.css("bottom"),10),I=parseInt(b.css("right"),10),C=i(),$=function(e,t){var i=e+t,n=h-f;g=0>i?0:i>n?n:i;var s=parseInt(g*(u-h)/(h-f),10);a.scrollTop(s),v.css({bottom:k-s})},x=function(e,t){var i=e+t,n=c-p;m=0>i?0:i>n?n:i;var s=parseInt(m*(d-c)/(c-p),10);a.scrollLeft(s),b.css({right:I-s})},S=function(e){return o.minScrollbarLength&&(e=Math.max(e,o.minScrollbarLength)),e},T=function(){v.css({left:a.scrollLeft(),bottom:k-a.scrollTop(),width:c,display:r?"inherit":"none"}),b.css({top:a.scrollTop()+o.distanceFromTopAndBottom,right:I-a.scrollLeft(),height:h-2*o.distanceFromTopAndBottom,display:l?"inherit":"none"});var t=a.find(".ps-custom-scrollbar-x-rail-background");t.length>0&&e(t[0]).css({left:a.scrollLeft(),bottom:k-a.scrollTop(),width:c,display:r?"inherit":"none"});var i=a.find(".ps-custom-scrollbar-y-rail-background");i.length>0&&e(i[0]).css({top:a.scrollTop(),right:I-a.scrollLeft(),height:h,display:l?"inherit":"none"}),y.css({left:m,width:p}),w.css({top:g,height:f-2*o.distanceFromTopAndBottom})},A=function(){c=a.width(),h=a.height(),d=a.prop("scrollWidth"),u=a.prop("scrollHeight"),!o.suppressScrollX&&c+o.scrollXMarginOffset<d?(r=!0,p=S(parseInt(c*c/d,10)),m=parseInt(a.scrollLeft()*(c-p)/(d-c),10)):(r=!1,p=0,m=0,a.scrollLeft(0)),!o.suppressScrollY&&h+o.scrollYMarginOffset<u?(l=!0,f=S(parseInt(h*h/u,10)),g=parseInt(a.scrollTop()*(h-f)/(u-h),10)):(l=!1,f=0,g=0,a.scrollTop(0)),g>=h-f&&(g=h-f),m>=c-p&&(m=c-p),T()},M=function(){var t,i;y.bind("mousedown"+C,function(e){i=e.pageX,t=y.position().left,v.addClass("in-scrolling"),e.stopPropagation(),e.preventDefault()}),e(document).bind("mousemove"+C,_.throttle(function(e){v.hasClass("in-scrolling")&&(x(t,e.pageX-i),e.stopPropagation(),e.preventDefault())},100)),e(document).bind("mouseup"+C,function(e){v.hasClass("in-scrolling")&&v.removeClass("in-scrolling")}),t=i=null},P=function(){var t,i;w.bind("mousedown"+C,function(e){i=e.pageY,t=w.position().top,b.addClass("in-scrolling"),e.stopPropagation(),e.preventDefault()}),e(document).bind("mousemove"+C,_.throttle(function(e){b.hasClass("in-scrolling")&&($(t,e.pageY-i),e.stopPropagation(),e.preventDefault())},100)),e(document).bind("mouseup"+C,function(e){b.hasClass("in-scrolling")&&b.removeClass("in-scrolling")}),t=i=null},E=function(e,t){var i=a.scrollTop();if(0===e){if(!l)return!o.wheelPropagation;if(0===i&&t>0||i>=u-h&&0>t)return!o.wheelPropagation}var n=a.scrollLeft();if(0===t){if(!r)return!o.wheelPropagation;if(0===n&&0>e||n>=d-c&&e>0)return!o.wheelPropagation}return!0},N=function(){var e=!1;a.bind("mousewheel"+C,function(t,i,n,s){o.useBothWheelAxes?l&&!r?s?a.scrollTop(a.scrollTop()-s*o.wheelSpeed):a.scrollTop(a.scrollTop()+n*o.wheelSpeed):r&&!l&&(n?a.scrollLeft(a.scrollLeft()+n*o.wheelSpeed):a.scrollLeft(a.scrollLeft()-s*o.wheelSpeed)):(a.scrollTop(a.scrollTop()-s*o.wheelSpeed),a.scrollLeft(a.scrollLeft()+n*o.wheelSpeed)),A(),e=E(n,s),e&&t.preventDefault()}),a.bind("MozMousePixelScroll"+C,function(t){e&&t.preventDefault()})},D=function(){var t=!1;a.bind("mouseenter"+C,function(e){t=!0}),a.bind("mouseleave"+C,function(e){t=!1});var i=!1;e(document).bind("keydown"+C,function(e){if(t){var n=0,s=0;switch(e.which){case 37:n=-3;break;case 38:s=3;break;case 39:n=3;break;case 40:s=-3;break;case 33:s=9;break;case 32:if(o.preventSpaceScrolling)return;case 34:s=-9;break;case 35:s=-h;break;case 36:s=h;break;default:return}a.scrollTop(a.scrollTop()-s*o.wheelSpeed),a.scrollLeft(a.scrollLeft()+n*o.wheelSpeed),i=E(n,s),i&&e.preventDefault()}})},R=function(){var e=function(e){e.stopPropagation()};w.bind("click"+C,e),b.bind("click"+C,function(e){var t=parseInt(f/2,10),i=e.pageY-b.offset().top-t,n=h-f,s=i/n;0>s?s=0:s>1&&(s=1),a.scrollTop((u-h)*s)}),y.bind("click"+C,e),v.bind("click"+C,function(e){var t=parseInt(p/2,10),i=e.pageX-v.offset().left-t,n=c-p,s=i/n;0>s?s=0:s>1&&(s=1),a.scrollLeft((d-c)*s)})},O=function(){var t=function(e,t){a.scrollTop(a.scrollTop()-t),a.scrollLeft(a.scrollLeft()-e),A()},i={},n=0,s={},o=null,r=!1;e(window).bind("touchstart"+C,function(e){r=!0}),e(window).bind("touchend"+C,function(e){r=!1}),a.bind("touchstart"+C,function(e){var t=e.originalEvent.targetTouches[0];i.pageX=t.pageX,i.pageY=t.pageY,n=(new Date).getTime(),null!==o&&clearInterval(o),e.stopPropagation()}),a.bind("touchmove"+C,function(e){if(!r&&1===e.originalEvent.targetTouches.length){var o=e.originalEvent.targetTouches[0],a={};a.pageX=o.pageX,a.pageY=o.pageY;var l=a.pageX-i.pageX,c=a.pageY-i.pageY;t(l,c),i=a;var h=(new Date).getTime();s.x=l/(h-n),s.y=c/(h-n),n=h,e.preventDefault()}}),a.bind("touchend"+C,function(e){clearInterval(o),o=setInterval(function(){return Math.abs(s.x)<.01&&Math.abs(s.y)<.01?void clearInterval(o):(t(30*s.x,30*s.y),s.x*=.8,void(s.y*=.8))},10)})},L=function(){a.bind("scroll"+C,function(e){A()})},B=function(){a.unbind(C),e(window).unbind(C),e(document).unbind(C),a.data("perfect-scrollbar",null),a.data("perfect-scrollbar-update",null),a.data("perfect-scrollbar-destroy",null),y.remove(),w.remove(),v.remove(),b.remove(),y=w=c=h=d=u=p=m=k=f=g=I=null},F=function(t){a.addClass("ie").addClass("ie"+t);var i=function(){var t=function(){e(this).addClass("hover")},i=function(){e(this).removeClass("hover")};a.bind("mouseenter"+C,t).bind("mouseleave"+C,i),v.bind("mouseenter"+C,t).bind("mouseleave"+C,i),b.bind("mouseenter"+C,t).bind("mouseleave"+C,i),y.bind("mouseenter"+C,t).bind("mouseleave"+C,i),w.bind("mouseenter"+C,t).bind("mouseleave"+C,i)},n=function(){T=function(){y.css({left:m+a.scrollLeft(),bottom:k,width:p}),w.css({top:g+a.scrollTop(),right:I,height:f}),y.hide().show(),w.hide().show()}};6===t&&(i(),n())},U="ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch,z=function(){var e=navigator.userAgent.toLowerCase().match(/(msie) ([\w.]+)/);e&&"msie"===e[1]&&F(parseInt(e[2],10)),A(),L(),M(),P(),R(),U&&O(),a.mousewheel&&N(),o.useKeyboard&&D(),a.data("perfect-scrollbar",a),a.data("perfect-scrollbar-update",A),a.data("perfect-scrollbar-destroy",B)};return z(),a})}}),function(e,t,i){function n(e){var t={},n=/^jQuery\d+$/;return i.each(e.attributes,function(e,i){i.specified&&!n.test(i.name)&&(t[i.name]=i.value)}),t}function s(e,t){var n=this,s=i(n);if(n.value==s.attr("placeholder")&&s.hasClass("placeholder"))if(s.data("placeholder-password")){if(s=s.hide().next().show().attr("id",s.removeAttr("id").data("placeholder-id")),e===!0)return s[0].value=t;s.focus()}else n.value="",s.removeClass("placeholder"),n==a()&&n.select()}function o(){var e,t=this,o=i(t),a=this.id;if(""==t.value){if("password"==t.type){if(!o.data("placeholder-textinput")){try{e=o.clone().attr({type:"text"})}catch(r){e=i("<input>").attr(i.extend(n(this),{type:"text"}))}e.removeAttr("name").data({"placeholder-password":o,"placeholder-id":a}).bind("focus.placeholder",s),o.data({"placeholder-textinput":e,"placeholder-id":a}).before(e)}o=o.removeAttr("id").hide().prev().attr("id",a).show()}o.addClass("placeholder"),o[0].value=o.attr("placeholder")}else o.removeClass("placeholder")}function a(){try{return t.activeElement}catch(e){}}var r,l,c="[object OperaMini]"==Object.prototype.toString.call(e.operamini),h="placeholder"in t.createElement("input")&&!c,d="placeholder"in t.createElement("textarea")&&!c,u=i.fn,p=i.valHooks,m=i.propHooks;h&&d?(l=u.placeholder=function(){return this},l.input=l.textarea=!0):(l=u.placeholder=function(){var e=this;return e.filter((h?"textarea":":input")+"[placeholder]").not(".placeholder").bind({"focus.placeholder":s,"blur.placeholder":o}).data("placeholder-enabled",!0).trigger("blur.placeholder"),e},l.input=h,l.textarea=d,r={get:function(e){var t=i(e),n=t.data("placeholder-password");return n?n[0].value:t.data("placeholder-enabled")&&t.hasClass("placeholder")?"":e.value},set:function(e,t){var n=i(e),r=n.data("placeholder-password");return r?r[0].value=t:n.data("placeholder-enabled")?(""==t?(e.value=t,e!=a()&&o.call(e)):n.hasClass("placeholder")?s.call(e,!0,t)||(e.value=t):e.value=t,n):e.value=t}},h||(p.input=r,m.value=r),d||(p.textarea=r,m.value=r),i(function(){i(t).delegate("form","submit.placeholder",function(){var e=i(".placeholder",this).each(s);setTimeout(function(){e.each(o)},10)})}),i(e).bind("beforeunload.placeholder",function(){i(".placeholder").each(function(){this.value=""})}))}(this,document,jQuery),function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}(function(e){"use strict";function t(i,n){var s=function(){},o=this,a={autoSelectFirst:!1,appendTo:"body",serviceUrl:null,lookup:null,onSelect:null,width:"auto",minChars:1,maxHeight:300,deferRequestBy:0,params:{},formatResult:t.formatResult,delimiter:null,type:"GET",noCache:!1,onSearchStart:s,onSearchComplete:s,onSearchError:s,containerClass:"autocomplete-suggestions",tabDisabled:!1,dataType:"text",currentRequest:null,triggerSelectOnValidInput:!0,preventBadQueries:!0,lookupFilter:function(e,t,i){return-1!==e.value.toLowerCase().indexOf(i)},paramName:"query",transformResult:function(t){return"string"==typeof t?e.parseJSON(t):t}};o.element=i,o.el=e(i),o.suggestions=[],o.badQueries=[],o.selectedIndex=-1,o.currentValue=o.element.value,o.intervalId=0,o.cachedResponse={},o.onChangeInterval=null,o.onChange=null,o.isLocal=!1,o.suggestionsContainer=null,o.options=e.extend({},a,n),o.classes={selected:"autocomplete-selected",suggestion:"autocomplete-suggestion"},o.hint=null,o.hintValue="",o.selection=null,o.initialize(),o.setOptions(n)}var i=function(){return{escapeRegExChars:function(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},createNode:function(e){var t=document.createElement("div");return t.className=e,t.style.position="absolute",t.style.display="none",t}}}(),n={ESC:27,TAB:9,RETURN:13,LEFT:37,UP:38,RIGHT:39,DOWN:40};t.utils=i,e.Autocomplete=t,t.formatResult=function(e,t){var n="("+i.escapeRegExChars(t)+")";return e.value.replace(new RegExp(n,"gi"),"<strong>$1</strong>")},t.prototype={killerFn:null,initialize:function(){var i,n=this,s="."+n.classes.suggestion,o=n.classes.selected,a=n.options;n.element.setAttribute("autocomplete","off"),n.killerFn=function(t){0===e(t.target).closest("."+n.options.containerClass).length&&(n.killSuggestions(),n.disableKillerFn())},n.suggestionsContainer=t.utils.createNode(a.containerClass),i=e(n.suggestionsContainer),i.appendTo(a.appendTo),"auto"!==a.width&&i.width(a.width),i.on("mouseover.autocomplete",s,function(){n.activate(e(this).data("index"))}),i.on("mouseout.autocomplete",function(){n.selectedIndex=-1,i.children("."+o).removeClass(o)}),i.on("click.autocomplete",s,function(){n.select(e(this).data("index"))}),n.fixPosition(),n.fixPositionCapture=function(){n.visible&&n.fixPosition()},e(window).on("resize.autocomplete",n.fixPositionCapture),n.el.on("keydown.autocomplete",function(e){n.onKeyPress(e)}),n.el.on("keyup.autocomplete",function(e){n.onKeyUp(e)}),n.el.on("blur.autocomplete",function(){n.onBlur()}),n.el.on("focus.autocomplete",function(){n.onFocus()}),n.el.on("change.autocomplete",function(e){n.onKeyUp(e)})},onFocus:function(){var e=this;e.fixPosition(),e.options.minChars<=e.el.val().length&&e.onValueChange()},onBlur:function(){this.enableKillerFn()},setOptions:function(t){var i=this,n=i.options;e.extend(n,t),i.isLocal=e.isArray(n.lookup),i.isLocal&&(n.lookup=i.verifySuggestionsFormat(n.lookup)),e(i.suggestionsContainer).css({"max-height":n.maxHeight+"px",width:n.width+"px","z-index":n.zIndex})},clearCache:function(){this.cachedResponse={},this.badQueries=[]},clear:function(){this.clearCache(),this.currentValue="",this.suggestions=[]},disable:function(){var e=this;e.disabled=!0,e.currentRequest&&e.currentRequest.abort()},enable:function(){this.disabled=!1},fixPosition:function(){var t,i,n=this;"body"===n.options.appendTo&&(t=n.el.offset(),i={top:t.top+n.el.outerHeight()+"px",left:t.left+"px"},"auto"===n.options.width&&(i.width=n.el.outerWidth()-2+"px"),e(n.suggestionsContainer).css(i))},enableKillerFn:function(){var t=this;e(document).on("click.autocomplete",t.killerFn)},disableKillerFn:function(){var t=this;e(document).off("click.autocomplete",t.killerFn)},killSuggestions:function(){var e=this;e.stopKillSuggestions(),e.intervalId=window.setInterval(function(){e.hide(),e.stopKillSuggestions()},50)},stopKillSuggestions:function(){window.clearInterval(this.intervalId)},isCursorAtEnd:function(){var e,t=this,i=t.el.val().length,n=t.element.selectionStart;return"number"==typeof n?n===i:document.selection?(e=document.selection.createRange(),e.moveStart("character",-i),i===e.text.length):!0},onKeyPress:function(e){var t=this;if(!t.disabled&&!t.visible&&e.which===n.DOWN&&t.currentValue)return void t.suggest();if(!t.disabled&&t.visible){switch(e.which){case n.ESC:t.el.val(t.currentValue),t.hide();break;case n.RIGHT:if(t.hint&&t.options.onHint&&t.isCursorAtEnd()){t.selectHint();break}return;case n.TAB:if(t.hint&&t.options.onHint)return void t.selectHint();case n.RETURN:if(-1===t.selectedIndex)return void t.hide();if(t.select(t.selectedIndex),e.which===n.TAB&&t.options.tabDisabled===!1)return;break;case n.UP:t.moveUp();break;case n.DOWN:t.moveDown();break;default:return}e.stopImmediatePropagation(),e.preventDefault()}},onKeyUp:function(e){var t=this;if(!t.disabled){switch(e.which){case n.UP:case n.DOWN:return}clearInterval(t.onChangeInterval),t.currentValue!==t.el.val()&&(t.findBestHint(),t.options.deferRequestBy>0?t.onChangeInterval=setInterval(function(){t.onValueChange()},t.options.deferRequestBy):t.onValueChange())}},onValueChange:function(){var t,i=this,n=i.options,s=i.el.val(),o=i.getQuery(s);return i.selection&&(i.selection=null,(n.onInvalidateSelection||e.noop).call(i.element)),clearInterval(i.onChangeInterval),i.currentValue=s,i.selectedIndex=-1,n.triggerSelectOnValidInput&&(t=i.findSuggestionIndex(o),-1!==t)?void i.select(t):void(o.length<n.minChars?i.hide():i.getSuggestions(o))},findSuggestionIndex:function(t){var i=this,n=-1,s=t.toLowerCase();return e.each(i.suggestions,function(e,t){return t.value.toLowerCase()===s?(n=e,!1):void 0}),n},getQuery:function(t){var i,n=this.options.delimiter;return n?(i=t.split(n),e.trim(i[i.length-1])):t},getSuggestionsLocal:function(t){var i,n=this,s=n.options,o=t.toLowerCase(),a=s.lookupFilter,r=parseInt(s.lookupLimit,10);return i={suggestions:e.grep(s.lookup,function(e){return a(e,t,o)})},r&&i.suggestions.length>r&&(i.suggestions=i.suggestions.slice(0,r)),i},getSuggestions:function(t){var i,n,s,o=this,a=o.options,r=a.serviceUrl;if(a.params[a.paramName]=t,n=a.ignoreParams?null:a.params,o.isLocal?i=o.getSuggestionsLocal(t):(e.isFunction(r)&&(r=r.call(o.element,t)),s=r+"?"+e.param(n||{}),i=o.cachedResponse[s]),i&&e.isArray(i.suggestions))o.suggestions=i.suggestions,o.suggest();else if(!o.isBadQuery(t)){if(a.onSearchStart.call(o.element,a.params)===!1)return;o.currentRequest&&o.currentRequest.abort(),o.currentRequest=e.ajax({url:r,data:n,type:a.type,dataType:a.dataType}).done(function(e){var i;o.currentRequest=null,i=a.transformResult(e),o.processResponse(i,t,s),a.onSearchComplete.call(o.element,t,i.suggestions)}).fail(function(e,i,n){a.onSearchError.call(o.element,t,e,i,n)})}},isBadQuery:function(e){if(!this.options.preventBadQueries)return!1;for(var t=this.badQueries,i=t.length;i--;)if(0===e.indexOf(t[i]))return!0;return!1},hide:function(){var t=this;t.visible=!1,t.selectedIndex=-1,e(t.suggestionsContainer).hide(),t.signalHint(null)},suggest:function(){if(0===this.suggestions.length)return void this.hide();var t,i,n=this,s=n.options,o=s.formatResult,a=n.getQuery(n.currentValue),r=n.classes.suggestion,l=n.classes.selected,c=e(n.suggestionsContainer),h=s.beforeRender,d="";return s.triggerSelectOnValidInput&&(t=n.findSuggestionIndex(a),-1!==t)?void n.select(t):(e.each(n.suggestions,function(e,t){d+='<div class="'+r+'" data-index="'+e+'">'+o(t,a)+"</div>"}),"auto"===s.width&&(i=n.el.outerWidth()-2,c.width(i>0?i:300)),c.html(d),s.autoSelectFirst&&(n.selectedIndex=0,c.children().first().addClass(l)),e.isFunction(h)&&h.call(n.element,c),c.show(),n.visible=!0,void n.findBestHint())},findBestHint:function(){var t=this,i=t.el.val().toLowerCase(),n=null;i&&(e.each(t.suggestions,function(e,t){var s=0===t.value.toLowerCase().indexOf(i);return s&&(n=t),!s}),t.signalHint(n))},signalHint:function(t){var i="",n=this;t&&(i=n.currentValue+t.value.substr(n.currentValue.length)),n.hintValue!==i&&(n.hintValue=i,n.hint=t,(this.options.onHint||e.noop)(i))},verifySuggestionsFormat:function(t){return t.length&&"string"==typeof t[0]?e.map(t,function(e){return{value:e,data:null}}):t},processResponse:function(e,t,i){var n=this,s=n.options;e.suggestions=n.verifySuggestionsFormat(e.suggestions),s.noCache||(n.cachedResponse[i]=e,s.preventBadQueries&&0===e.suggestions.length&&n.badQueries.push(t)),t===n.getQuery(n.currentValue)&&(n.suggestions=e.suggestions,n.suggest())},activate:function(t){var i,n=this,s=n.classes.selected,o=e(n.suggestionsContainer),a=o.children();return o.children("."+s).removeClass(s),n.selectedIndex=t,-1!==n.selectedIndex&&a.length>n.selectedIndex?(i=a.get(n.selectedIndex),e(i).addClass(s),i):null},selectHint:function(){var t=this,i=e.inArray(t.hint,t.suggestions);t.select(i)},select:function(e){var t=this;t.hide(),t.onSelect(e)},moveUp:function(){var t=this;if(-1!==t.selectedIndex)return 0===t.selectedIndex?(e(t.suggestionsContainer).children().first().removeClass(t.classes.selected),t.selectedIndex=-1,t.el.val(t.currentValue),void t.findBestHint()):void t.adjustScroll(t.selectedIndex-1)},moveDown:function(){var e=this;e.selectedIndex!==e.suggestions.length-1&&e.adjustScroll(e.selectedIndex+1)},adjustScroll:function(t){var i,n,s,o=this,a=o.activate(t),r=25;a&&(i=a.offsetTop,n=e(o.suggestionsContainer).scrollTop(),s=n+o.options.maxHeight-r,n>i?e(o.suggestionsContainer).scrollTop(i):i>s&&e(o.suggestionsContainer).scrollTop(i-o.options.maxHeight+r),o.el.val(o.getValue(o.suggestions[t].value)),o.signalHint(null))},onSelect:function(t){var i=this,n=i.options.onSelect,s=i.suggestions[t];i.currentValue=i.getValue(s.value),i.currentValue!==i.el.val()&&i.el.val(i.currentValue),i.signalHint(null),i.suggestions=[],i.selection=s,e.isFunction(n)&&n.call(i.element,s)},getValue:function(e){var t,i,n=this,s=n.options.delimiter;return s?(t=n.currentValue,i=t.split(s),1===i.length?e:t.substr(0,t.length-i[i.length-1].length)+e):e},dispose:function(){var t=this;t.el.off(".autocomplete").removeData("autocomplete"),t.disableKillerFn(),e(window).off("resize.autocomplete",t.fixPositionCapture),e(t.suggestionsContainer).remove()}},e.fn.autocompleteDevbridge=function(i,n){var s="autocomplete";return 0===arguments.length?this.first().data(s):this.each(function(){var o=e(this),a=o.data(s);"string"==typeof i?a&&"function"==typeof a[i]&&a[i](n):(a&&a.dispose&&a.dispose(),a=new t(this,i),o.data(s,a))})}}),function(e){var t,i={className:"autosizejs",id:"autosizejs",append:"\n",callback:!1,resizeDelay:10,placeholder:!0},n='<textarea tabindex="-1" style="position:absolute; top:-999px; left:0; right:auto; bottom:auto; border:0; padding: 0; -moz-box-sizing:content-box; -webkit-box-sizing:content-box; box-sizing:content-box; word-wrap:break-word; height:0 !important; min-height:0 !important; overflow:hidden; transition:none; -webkit-transition:none; -moz-transition:none;"/>',s=["fontFamily","fontSize","fontWeight","fontStyle","letterSpacing","textTransform","wordSpacing","textIndent","whiteSpace"],o=e(n).data("autosize",!0)[0];o.style.lineHeight="99px","99px"===e(o).css("lineHeight")&&s.push("lineHeight"),o.style.lineHeight="",e.fn.autosize=function(n){return this.length?(n=e.extend({},i,n||{}),o.parentNode!==document.body&&e(document.body).append(o),this.each(function(){function i(){var t,i=window.getComputedStyle?window.getComputedStyle(u,null):null;i?(t=parseFloat(i.width),("border-box"===i.boxSizing||"border-box"===i.webkitBoxSizing||"border-box"===i.mozBoxSizing)&&e.each(["paddingLeft","paddingRight","borderLeftWidth","borderRightWidth"],function(e,n){t-=parseFloat(i[n])})):t=p.width(),o.style.width=Math.max(t,0)+"px"}function a(){var a={};if(t=u,o.className=n.className,o.id=n.id,c=parseFloat(p.css("maxHeight")),e.each(s,function(e,t){a[t]=p.css(t)}),e(o).css(a).attr("wrap",p.attr("wrap")),i(),window.chrome){var r=u.style.width;u.style.width="0px";u.offsetWidth;u.style.width=r}}function r(){var e,s;t!==u?a():i(),!u.value&&n.placeholder?o.value=p.attr("placeholder")||"":o.value=u.value,o.value+=n.append||"",o.style.overflowY=u.style.overflowY,s=parseFloat(u.style.height)||0,o.scrollTop=0,o.scrollTop=9e4,e=o.scrollTop,c&&e>c?(u.style.overflowY="scroll",e=c):(u.style.overflowY="hidden",h>e&&(e=h)),e+=m,Math.abs(s-e)>.01&&(u.style.height=e+"px",o.className=o.className,f&&n.callback.call(u,u),p.trigger("autosize.resized"))}function l(){clearTimeout(d),d=setTimeout(function(){var e=p.width();e!==v&&(v=e,r())},parseInt(n.resizeDelay,10))}var c,h,d,u=this,p=e(u),m=0,f=e.isFunction(n.callback),g={height:u.style.height,overflow:u.style.overflow,overflowY:u.style.overflowY,wordWrap:u.style.wordWrap,resize:u.style.resize},v=p.width(),b=p.css("resize");p.data("autosize")||(p.data("autosize",!0),("border-box"===p.css("box-sizing")||"border-box"===p.css("-moz-box-sizing")||"border-box"===p.css("-webkit-box-sizing"))&&(m=p.outerHeight()-p.height()),h=Math.max(parseFloat(p.css("minHeight"))-m||0,p.height()),p.css({overflow:"hidden",overflowY:"hidden",wordWrap:"break-word"}),"vertical"===b?p.css("resize","none"):"both"===b&&p.css("resize","horizontal"),"onpropertychange"in u?"oninput"in u?p.on("input.autosize keyup.autosize",r):p.on("propertychange.autosize",function(){"value"===event.propertyName&&r()}):p.on("input.autosize",r),n.resizeDelay!==!1&&e(window).on("resize.autosize",l),p.on("autosize.resize",r),p.on("autosize.resizeIncludeStyle",function(){t=null,r()}),p.on("autosize.destroy",function(){t=null,clearTimeout(d),e(window).off("resize",l),p.off("autosize").off(".autosize").css(g).removeData("autosize")}),r())})):this}}(jQuery||$),function(e){function t(e){return"object"==typeof e?e:{top:e,left:e}}var i=e.scrollTo=function(t,i,n){e(window).scrollTo(t,i,n)};i.defaults={axis:"xy",duration:parseFloat(e.fn.jquery)>=1.3?0:1},i.window=function(t){return e(window)._scrollable()},e.fn._scrollable=function(){return this.map(function(){var t=this,i=!t.nodeName||-1!=e.inArray(t.nodeName.toLowerCase(),["iframe","#document","html","body"]);if(!i)return t;var n=(t.contentWindow||t).document||t.ownerDocument||t;return e.browser.safari||"BackCompat"==n.compatMode?n.body:n.documentElement})},e.fn.scrollTo=function(n,s,o){return"object"==typeof s&&(o=s,s=0),"function"==typeof o&&(o={onAfter:o}),"max"==n&&(n=9e9),o=e.extend({},i.defaults,o),s=s||o.speed||o.duration,o.queue=o.queue&&o.axis.length>1,o.queue&&(s/=2),o.offset=t(o.offset),o.over=t(o.over),this._scrollable().each(function(){function a(e){c.animate(d,s,o.easing,e&&function(){e.call(this,n,o)})}var r,l=this,c=e(l),h=n,d={},u=c.is("html,body");switch(typeof h){case"number":case"string":if(/^([+-]=)?\d+(\.\d+)?(px|%)?$/.test(h)){h=t(h);break}h=e(h,this);case"object":(h.is||h.style)&&(r=(h=e(h)).offset())}e.each(o.axis.split(""),function(e,t){var n="x"==t?"Left":"Top",s=n.toLowerCase(),p="scroll"+n,m=l[p],f=i.max(l,t);if(r)d[p]=r[s]+(u?0:m-c.offset()[s]),o.margin&&(d[p]-=parseInt(h.css("margin"+n))||0,d[p]-=parseInt(h.css("border"+n+"Width"))||0),d[p]+=o.offset[s]||0,o.over[s]&&(d[p]+=h["x"==t?"width":"height"]()*o.over[s]);else{var g=h[s];d[p]=g.slice&&"%"==g.slice(-1)?parseFloat(g)/100*f:g;
}/^\d+$/.test(d[p])&&(d[p]=d[p]<=0?0:Math.min(d[p],f)),!e&&o.queue&&(m!=d[p]&&a(o.onAfterFirst),delete d[p])}),a(o.onAfter)}).end()},i.max=function(t,i){var n="x"==i?"Width":"Height",s="scroll"+n;if(!e(t).is("html,body"))return t[s]-e(t)[n.toLowerCase()]();var o="client"+n,a=t.ownerDocument.documentElement,r=t.ownerDocument.body;return Math.max(a[s],r[s])-Math.min(a[o],r[o])}}(jQuery),function(){function e(e){e=e||window.event;for(var r,l,c,h=e.target||e.srcElement;h&&"a"!==h.nodeName.toLowerCase();)h=h.parentNode;h&&"a"===h.nodeName.toLowerCase()&&h.href&&(r=h.href.match(t),r&&(l=Math.round(a/2-n/2),c=0,o>s&&(c=Math.round(o/2-s/2)),window.open(h.href,"intent",i+",width="+n+",height="+s+",left="+l+",top="+c),e.returnValue=!1,e.preventDefault&&e.preventDefault()))}if(!window.__twitterIntentHandler){var t=/twitter\.com(\:\d{2,4})?\/intent\/(\w+)/,i="scrollbars=yes,resizable=yes,toolbar=no,location=yes",n=550,s=420,o=screen.height,a=screen.width;document.addEventListener?document.addEventListener("click",e,!1):document.attachEvent&&document.attachEvent("onclick",e),window.__twitterIntentHandler=!0}}(),function(e,t){function i(t,i){var s,o,a,r=t.nodeName.toLowerCase();return"area"===r?(s=t.parentNode,o=s.name,t.href&&o&&"map"===s.nodeName.toLowerCase()?(a=e("img[usemap=#"+o+"]")[0],!!a&&n(a)):!1):(/input|select|textarea|button|object/.test(r)?!t.disabled:"a"===r?t.href||i:i)&&n(t)}function n(t){return e.expr.filters.visible(t)&&!e(t).parents().addBack().filter(function(){return"hidden"===e.css(this,"visibility")}).length}var s=0,o=/^ui-id-\d+$/;e.ui=e.ui||{},e.extend(e.ui,{version:"1.10.3",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({focus:function(t){return function(i,n){return"number"==typeof i?this.each(function(){var t=this;setTimeout(function(){e(t).focus(),n&&n.call(t)},i)}):t.apply(this,arguments)}}(e.fn.focus),scrollParent:function(){var t;return t=e.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(e.css(this,"position"))&&/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!t.length?e(document):t},zIndex:function(i){if(i!==t)return this.css("zIndex",i);if(this.length)for(var n,s,o=e(this[0]);o.length&&o[0]!==document;){if(n=o.css("position"),("absolute"===n||"relative"===n||"fixed"===n)&&(s=parseInt(o.css("zIndex"),10),!isNaN(s)&&0!==s))return s;o=o.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++s)})},removeUniqueId:function(){return this.each(function(){o.test(this.id)&&e(this).removeAttr("id")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(i){return!!e.data(i,t)}}):function(t,i,n){return!!e.data(t,n[3])},focusable:function(t){return i(t,!isNaN(e.attr(t,"tabindex")))},tabbable:function(t){var n=e.attr(t,"tabindex"),s=isNaN(n);return(s||n>=0)&&i(t,!s)}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(i,n){function s(t,i,n,s){return e.each(o,function(){i-=parseFloat(e.css(t,"padding"+this))||0,n&&(i-=parseFloat(e.css(t,"border"+this+"Width"))||0),s&&(i-=parseFloat(e.css(t,"margin"+this))||0)}),i}var o="Width"===n?["Left","Right"]:["Top","Bottom"],a=n.toLowerCase(),r={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+n]=function(i){return i===t?r["inner"+n].call(this):this.each(function(){e(this).css(a,s(this,i)+"px")})},e.fn["outer"+n]=function(t,i){return"number"!=typeof t?r["outer"+n].call(this,t):this.each(function(){e(this).css(a,s(this,t,!0,i)+"px")})}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(e.fn.removeData=function(t){return function(i){return arguments.length?t.call(this,e.camelCase(i)):t.call(this)}}(e.fn.removeData)),e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),e.support.selectstart="onselectstart"in document.createElement("div"),e.fn.extend({disableSelection:function(){return this.bind((e.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(e){e.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),e.extend(e.ui,{plugin:{add:function(t,i,n){var s,o=e.ui[t].prototype;for(s in n)o.plugins[s]=o.plugins[s]||[],o.plugins[s].push([i,n[s]])},call:function(e,t,i){var n,s=e.plugins[t];if(s&&e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType)for(n=0;n<s.length;n++)e.options[s[n][0]]&&s[n][1].apply(e.element,i)}},hasScroll:function(t,i){if("hidden"===e(t).css("overflow"))return!1;var n=i&&"left"===i?"scrollLeft":"scrollTop",s=!1;return t[n]>0?!0:(t[n]=1,s=t[n]>0,t[n]=0,s)}})}(jQuery),function(e,t){var i=0,n=Array.prototype.slice,s=e.cleanData;e.cleanData=function(t){for(var i,n=0;null!=(i=t[n]);n++)try{e(i).triggerHandler("remove")}catch(o){}s(t)},e.widget=function(t,i,n){var s,o,a,r,l={},c=t.split(".")[0];t=t.split(".")[1],s=c+"-"+t,n||(n=i,i=e.Widget),e.expr[":"][s.toLowerCase()]=function(t){return!!e.data(t,s)},e[c]=e[c]||{},o=e[c][t],a=e[c][t]=function(e,t){return this._createWidget?void(arguments.length&&this._createWidget(e,t)):new a(e,t)},e.extend(a,o,{version:n.version,_proto:e.extend({},n),_childConstructors:[]}),r=new i,r.options=e.widget.extend({},r.options),e.each(n,function(t,n){return e.isFunction(n)?void(l[t]=function(){var e=function(){return i.prototype[t].apply(this,arguments)},s=function(e){return i.prototype[t].apply(this,e)};return function(){var t,i=this._super,o=this._superApply;return this._super=e,this._superApply=s,t=n.apply(this,arguments),this._super=i,this._superApply=o,t}}()):void(l[t]=n)}),a.prototype=e.widget.extend(r,{widgetEventPrefix:o?r.widgetEventPrefix:t},l,{constructor:a,namespace:c,widgetName:t,widgetFullName:s}),o?(e.each(o._childConstructors,function(t,i){var n=i.prototype;e.widget(n.namespace+"."+n.widgetName,a,i._proto)}),delete o._childConstructors):i._childConstructors.push(a),e.widget.bridge(t,a)},e.widget.extend=function(i){for(var s,o,a=n.call(arguments,1),r=0,l=a.length;l>r;r++)for(s in a[r])o=a[r][s],a[r].hasOwnProperty(s)&&o!==t&&(e.isPlainObject(o)?i[s]=e.isPlainObject(i[s])?e.widget.extend({},i[s],o):e.widget.extend({},o):i[s]=o);return i},e.widget.bridge=function(i,s){var o=s.prototype.widgetFullName||i;e.fn[i]=function(a){var r="string"==typeof a,l=n.call(arguments,1),c=this;return a=!r&&l.length?e.widget.extend.apply(null,[a].concat(l)):a,r?this.each(function(){var n,s=e.data(this,o);return s?e.isFunction(s[a])&&"_"!==a.charAt(0)?(n=s[a].apply(s,l),n!==s&&n!==t?(c=n&&n.jquery?c.pushStack(n.get()):n,!1):void 0):e.error("no such method '"+a+"' for "+i+" widget instance"):e.error("cannot call methods on "+i+" prior to initialization; attempted to call method '"+a+"'")}):this.each(function(){var t=e.data(this,o);t?t.option(a||{})._init():e.data(this,o,new s(a,this))}),c}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,n){n=e(n||this.defaultElement||this)[0],this.element=e(n),this.uuid=i++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this.bindings=e(),this.hoverable=e(),this.focusable=e(),n!==this&&(e.data(n,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===n&&this.destroy()}}),this.document=e(n.style?n.ownerDocument:n.document||n),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(i,n){var s,o,a,r=i;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof i)if(r={},s=i.split("."),i=s.shift(),s.length){for(o=r[i]=e.widget.extend({},this.options[i]),a=0;a<s.length-1;a++)o[s[a]]=o[s[a]]||{},o=o[s[a]];if(i=s.pop(),n===t)return o[i]===t?null:o[i];o[i]=n}else{if(n===t)return this.options[i]===t?null:this.options[i];r[i]=n}return this._setOptions(r),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!t).attr("aria-disabled",t),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(t,i,n){var s,o=this;"boolean"!=typeof t&&(n=i,i=t,t=!1),n?(i=s=e(i),this.bindings=this.bindings.add(i)):(n=i,i=this.element,s=this.widget()),e.each(n,function(n,a){function r(){return t||o.options.disabled!==!0&&!e(this).hasClass("ui-state-disabled")?("string"==typeof a?o[a]:a).apply(o,arguments):void 0}"string"!=typeof a&&(r.guid=a.guid=a.guid||r.guid||e.guid++);var l=n.match(/^(\w+)\s*(.*)$/),c=l[1]+o.eventNamespace,h=l[2];h?s.delegate(h,c,r):i.bind(c,r)})},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(t).undelegate(t)},_delay:function(e,t){function i(){return("string"==typeof e?n[e]:e).apply(n,arguments)}var n=this;return setTimeout(i,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,i,n){var s,o,a=this.options[t];if(n=n||{},i=e.Event(i),i.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),i.target=this.element[0],o=i.originalEvent)for(s in o)s in i||(i[s]=o[s]);return this.element.trigger(i,n),!(e.isFunction(a)&&a.apply(this.element[0],[i].concat(n))===!1||i.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,i){e.Widget.prototype["_"+t]=function(n,s,o){"string"==typeof s&&(s={effect:s});var a,r=s?s===!0||"number"==typeof s?i:s.effect||i:t;s=s||{},"number"==typeof s&&(s={duration:s}),a=!e.isEmptyObject(s),s.complete=o,s.delay&&n.delay(s.delay),a&&e.effects&&e.effects.effect[r]?n[t](s):r!==t&&n[r]?n[r](s.duration,s.easing,o):n.queue(function(i){e(this)[t](),o&&o.call(n[0]),i()})}})}(jQuery),function(e,t){var i=!1;e(document).mouseup(function(){i=!1}),e.widget("ui.mouse",{version:"1.10.3",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(i){return!0===e.data(i.target,t.widgetName+".preventClickEvent")?(e.removeData(i.target,t.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(t){if(!i){this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var n=this,s=1===t.which,o="string"==typeof this.options.cancel&&t.target.nodeName?e(t.target).closest(this.options.cancel).length:!1;return s&&!o&&this._mouseCapture(t)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){n.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(t)!==!1,!this._mouseStarted)?(t.preventDefault(),!0):(!0===e.data(t.target,this.widgetName+".preventClickEvent")&&e.removeData(t.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return n._mouseMove(e)},this._mouseUpDelegate=function(e){return n._mouseUp(e)},e(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),t.preventDefault(),i=!0,!0)):!0}},_mouseMove:function(t){return e.ui.ie&&(!document.documentMode||document.documentMode<9)&&!t.button?this._mouseUp(t):this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(t){return e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(jQuery),function(e,t){e.widget("ui.draggable",e.ui.mouse,{version:"1.10.3",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"!==this.options.helper||/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy()},_mouseCapture:function(t){var i=this.options;return this.helper||i.disabled||e(t.target).closest(".ui-resizable-handle").length>0?!1:(this.handle=this._getHandle(t),this.handle?(e(i.iframeFix===!0?"iframe":i.iframeFix).each(function(){e("<div class='ui-draggable-iframeFix' style='background: #fff;'></div>").css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(e(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(t){var i=this.options;return this.helper=this._createHelper(t),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offsetParent=this.helper.offsetParent(),this.offsetParentCssPosition=this.offsetParent.css("position"),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},this.offset.scroll=!1,e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),this._setContainment(),this._trigger("start",t)===!1?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this._mouseDrag(t,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,t),!0)},_mouseDrag:function(t,i){if("fixed"===this.offsetParentCssPosition&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),!i){var n=this._uiHash();if(this._trigger("drag",t,n)===!1)return this._mouseUp({}),!1;this.position=n.position}return this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var i=this,n=!1;return e.ui.ddmanager&&!this.options.dropBehaviour&&(n=e.ui.ddmanager.drop(this,t)),this.dropped&&(n=this.dropped,this.dropped=!1),"original"!==this.options.helper||e.contains(this.element[0].ownerDocument,this.element[0])?("invalid"===this.options.revert&&!n||"valid"===this.options.revert&&n||this.options.revert===!0||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,n)?e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){i._trigger("stop",t)!==!1&&i._clear()}):this._trigger("stop",t)!==!1&&this._clear(),!1):!1},_mouseUp:function(t){return e("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,t),e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(t){return this.options.handle?!!e(t.target).closest(this.element.find(this.options.handle)).length:!0},_createHelper:function(t){var i=this.options,n=e.isFunction(i.helper)?e(i.helper.apply(this.element[0],[t])):"clone"===i.helper?this.element.clone().removeAttr("id"):this.element;return n.parents("body").length||n.appendTo("parent"===i.appendTo?this.element[0].parentNode:i.appendTo),n[0]===this.element[0]||/(fixed|absolute)/.test(n.css("position"))||n.css("position","absolute"),n},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){var t=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&e.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var e=this.element.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,i,n,s=this.options;return s.containment?"window"===s.containment?void(this.containment=[e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,e(window).scrollLeft()+e(window).width()-this.helperProportions.width-this.margins.left,e(window).scrollTop()+(e(window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):"document"===s.containment?void(this.containment=[0,0,e(document).width()-this.helperProportions.width-this.margins.left,(e(document).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):s.containment.constructor===Array?void(this.containment=s.containment):("parent"===s.containment&&(s.containment=this.helper[0].parentNode),i=e(s.containment),n=i[0],void(n&&(t="hidden"!==i.css("overflow"),this.containment=[(parseInt(i.css("borderLeftWidth"),10)||0)+(parseInt(i.css("paddingLeft"),10)||0),(parseInt(i.css("borderTopWidth"),10)||0)+(parseInt(i.css("paddingTop"),10)||0),(t?Math.max(n.scrollWidth,n.offsetWidth):n.offsetWidth)-(parseInt(i.css("borderRightWidth"),10)||0)-(parseInt(i.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(t?Math.max(n.scrollHeight,n.offsetHeight):n.offsetHeight)-(parseInt(i.css("borderBottomWidth"),10)||0)-(parseInt(i.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=i))):void(this.containment=null)},_convertPositionTo:function(t,i){i||(i=this.position);var n="absolute"===t?1:-1,s="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent;return this.offset.scroll||(this.offset.scroll={top:s.scrollTop(),left:s.scrollLeft()}),{top:i.top+this.offset.relative.top*n+this.offset.parent.top*n-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top)*n,left:i.left+this.offset.relative.left*n+this.offset.parent.left*n-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)*n}},_generatePosition:function(t){var i,n,s,o,a=this.options,r="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,l=t.pageX,c=t.pageY;return this.offset.scroll||(this.offset.scroll={top:r.scrollTop(),left:r.scrollLeft()}),this.originalPosition&&(this.containment&&(this.relative_container?(n=this.relative_container.offset(),i=[this.containment[0]+n.left,this.containment[1]+n.top,this.containment[2]+n.left,this.containment[3]+n.top]):i=this.containment,t.pageX-this.offset.click.left<i[0]&&(l=i[0]+this.offset.click.left),t.pageY-this.offset.click.top<i[1]&&(c=i[1]+this.offset.click.top),t.pageX-this.offset.click.left>i[2]&&(l=i[2]+this.offset.click.left),t.pageY-this.offset.click.top>i[3]&&(c=i[3]+this.offset.click.top)),a.grid&&(s=a.grid[1]?this.originalPageY+Math.round((c-this.originalPageY)/a.grid[1])*a.grid[1]:this.originalPageY,c=i?s-this.offset.click.top>=i[1]||s-this.offset.click.top>i[3]?s:s-this.offset.click.top>=i[1]?s-a.grid[1]:s+a.grid[1]:s,o=a.grid[0]?this.originalPageX+Math.round((l-this.originalPageX)/a.grid[0])*a.grid[0]:this.originalPageX,l=i?o-this.offset.click.left>=i[0]||o-this.offset.click.left>i[2]?o:o-this.offset.click.left>=i[0]?o-a.grid[0]:o+a.grid[0]:o)),{top:c-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top),left:l-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(t,i,n){return n=n||this._uiHash(),e.ui.plugin.call(this,t,[i,n]),"drag"===t&&(this.positionAbs=this._convertPositionTo("absolute")),e.Widget.prototype._trigger.call(this,t,i,n)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,i){var n=e(this).data("ui-draggable"),s=n.options,o=e.extend({},i,{item:n.element});n.sortables=[],e(s.connectToSortable).each(function(){var i=e.data(this,"ui-sortable");i&&!i.options.disabled&&(n.sortables.push({instance:i,shouldRevert:i.options.revert}),i.refreshPositions(),i._trigger("activate",t,o))})},stop:function(t,i){var n=e(this).data("ui-draggable"),s=e.extend({},i,{item:n.element});e.each(n.sortables,function(){this.instance.isOver?(this.instance.isOver=0,n.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=this.shouldRevert),this.instance._mouseStop(t),this.instance.options.helper=this.instance.options._helper,"original"===n.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",t,s))})},drag:function(t,i){var n=e(this).data("ui-draggable"),s=this;e.each(n.sortables,function(){var o=!1,a=this;this.instance.positionAbs=n.positionAbs,this.instance.helperProportions=n.helperProportions,this.instance.offset.click=n.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(o=!0,e.each(n.sortables,function(){return this.instance.positionAbs=n.positionAbs,this.instance.helperProportions=n.helperProportions,this.instance.offset.click=n.offset.click,this!==a&&this.instance._intersectsWith(this.instance.containerCache)&&e.contains(a.instance.element[0],this.instance.element[0])&&(o=!1),o})),o?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=e(s).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return i.helper[0]},t.target=this.instance.currentItem[0],this.instance._mouseCapture(t,!0),this.instance._mouseStart(t,!0,!0),this.instance.offset.click.top=n.offset.click.top,this.instance.offset.click.left=n.offset.click.left,this.instance.offset.parent.left-=n.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=n.offset.parent.top-this.instance.offset.parent.top,n._trigger("toSortable",t),n.dropped=this.instance.element,n.currentItem=n.element,this.instance.fromOutside=n),this.instance.currentItem&&this.instance._mouseDrag(t)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",t,this.instance._uiHash(this.instance)),this.instance._mouseStop(t,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),n._trigger("fromSortable",t),n.dropped=!1)})}}),e.ui.plugin.add("draggable","cursor",{start:function(){var t=e("body"),i=e(this).data("ui-draggable").options;t.css("cursor")&&(i._cursor=t.css("cursor")),t.css("cursor",i.cursor)},stop:function(){var t=e(this).data("ui-draggable").options;t._cursor&&e("body").css("cursor",t._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(t,i){var n=e(i.helper),s=e(this).data("ui-draggable").options;n.css("opacity")&&(s._opacity=n.css("opacity")),n.css("opacity",s.opacity)},stop:function(t,i){var n=e(this).data("ui-draggable").options;n._opacity&&e(i.helper).css("opacity",n._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(){var t=e(this).data("ui-draggable");t.scrollParent[0]!==document&&"HTML"!==t.scrollParent[0].tagName&&(t.overflowOffset=t.scrollParent.offset())},drag:function(t){var i=e(this).data("ui-draggable"),n=i.options,s=!1;i.scrollParent[0]!==document&&"HTML"!==i.scrollParent[0].tagName?(n.axis&&"x"===n.axis||(i.overflowOffset.top+i.scrollParent[0].offsetHeight-t.pageY<n.scrollSensitivity?i.scrollParent[0].scrollTop=s=i.scrollParent[0].scrollTop+n.scrollSpeed:t.pageY-i.overflowOffset.top<n.scrollSensitivity&&(i.scrollParent[0].scrollTop=s=i.scrollParent[0].scrollTop-n.scrollSpeed)),n.axis&&"y"===n.axis||(i.overflowOffset.left+i.scrollParent[0].offsetWidth-t.pageX<n.scrollSensitivity?i.scrollParent[0].scrollLeft=s=i.scrollParent[0].scrollLeft+n.scrollSpeed:t.pageX-i.overflowOffset.left<n.scrollSensitivity&&(i.scrollParent[0].scrollLeft=s=i.scrollParent[0].scrollLeft-n.scrollSpeed))):(n.axis&&"x"===n.axis||(t.pageY-e(document).scrollTop()<n.scrollSensitivity?s=e(document).scrollTop(e(document).scrollTop()-n.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<n.scrollSensitivity&&(s=e(document).scrollTop(e(document).scrollTop()+n.scrollSpeed))),n.axis&&"y"===n.axis||(t.pageX-e(document).scrollLeft()<n.scrollSensitivity?s=e(document).scrollLeft(e(document).scrollLeft()-n.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<n.scrollSensitivity&&(s=e(document).scrollLeft(e(document).scrollLeft()+n.scrollSpeed)))),s!==!1&&e.ui.ddmanager&&!n.dropBehaviour&&e.ui.ddmanager.prepareOffsets(i,t)}}),e.ui.plugin.add("draggable","snap",{start:function(){var t=e(this).data("ui-draggable"),i=t.options;t.snapElements=[],e(i.snap.constructor!==String?i.snap.items||":data(ui-draggable)":i.snap).each(function(){var i=e(this),n=i.offset();this!==t.element[0]&&t.snapElements.push({item:this,width:i.outerWidth(),height:i.outerHeight(),top:n.top,left:n.left})})},drag:function(t,i){var n,s,o,a,r,l,c,h,d,u,p=e(this).data("ui-draggable"),m=p.options,f=m.snapTolerance,g=i.offset.left,v=g+p.helperProportions.width,b=i.offset.top,y=b+p.helperProportions.height;for(d=p.snapElements.length-1;d>=0;d--)r=p.snapElements[d].left,l=r+p.snapElements[d].width,c=p.snapElements[d].top,h=c+p.snapElements[d].height,r-f>v||g>l+f||c-f>y||b>h+f||!e.contains(p.snapElements[d].item.ownerDocument,p.snapElements[d].item)?(p.snapElements[d].snapping&&p.options.snap.release&&p.options.snap.release.call(p.element,t,e.extend(p._uiHash(),{snapItem:p.snapElements[d].item})),p.snapElements[d].snapping=!1):("inner"!==m.snapMode&&(n=Math.abs(c-y)<=f,s=Math.abs(h-b)<=f,o=Math.abs(r-v)<=f,a=Math.abs(l-g)<=f,n&&(i.position.top=p._convertPositionTo("relative",{top:c-p.helperProportions.height,left:0}).top-p.margins.top),s&&(i.position.top=p._convertPositionTo("relative",{top:h,left:0}).top-p.margins.top),o&&(i.position.left=p._convertPositionTo("relative",{top:0,left:r-p.helperProportions.width}).left-p.margins.left),a&&(i.position.left=p._convertPositionTo("relative",{top:0,left:l}).left-p.margins.left)),u=n||s||o||a,"outer"!==m.snapMode&&(n=Math.abs(c-b)<=f,s=Math.abs(h-y)<=f,o=Math.abs(r-g)<=f,a=Math.abs(l-v)<=f,n&&(i.position.top=p._convertPositionTo("relative",{top:c,left:0}).top-p.margins.top),s&&(i.position.top=p._convertPositionTo("relative",{top:h-p.helperProportions.height,left:0}).top-p.margins.top),o&&(i.position.left=p._convertPositionTo("relative",{top:0,left:r}).left-p.margins.left),a&&(i.position.left=p._convertPositionTo("relative",{top:0,left:l-p.helperProportions.width}).left-p.margins.left)),!p.snapElements[d].snapping&&(n||s||o||a||u)&&p.options.snap.snap&&p.options.snap.snap.call(p.element,t,e.extend(p._uiHash(),{snapItem:p.snapElements[d].item
})),p.snapElements[d].snapping=n||s||o||a||u)}}),e.ui.plugin.add("draggable","stack",{start:function(){var t,i=this.data("ui-draggable").options,n=e.makeArray(e(i.stack)).sort(function(t,i){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(i).css("zIndex"),10)||0)});n.length&&(t=parseInt(e(n[0]).css("zIndex"),10)||0,e(n).each(function(i){e(this).css("zIndex",t+i)}),this.css("zIndex",t+n.length))}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,i){var n=e(i.helper),s=e(this).data("ui-draggable").options;n.css("zIndex")&&(s._zIndex=n.css("zIndex")),n.css("zIndex",s.zIndex)},stop:function(t,i){var n=e(this).data("ui-draggable").options;n._zIndex&&e(i.helper).css("zIndex",n._zIndex)}})}(jQuery),function(e,t){function i(e,t,i){return e>t&&t+i>e}e.widget("ui.droppable",{version:"1.10.3",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var t=this.options,i=t.accept;this.isover=!1,this.isout=!0,this.accept=e.isFunction(i)?i:function(e){return e.is(i)},this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight},e.ui.ddmanager.droppables[t.scope]=e.ui.ddmanager.droppables[t.scope]||[],e.ui.ddmanager.droppables[t.scope].push(this),t.addClasses&&this.element.addClass("ui-droppable")},_destroy:function(){for(var t=0,i=e.ui.ddmanager.droppables[this.options.scope];t<i.length;t++)i[t]===this&&i.splice(t,1);this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(t,i){"accept"===t&&(this.accept=e.isFunction(i)?i:function(e){return e.is(i)}),e.Widget.prototype._setOption.apply(this,arguments)},_activate:function(t){var i=e.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),i&&this._trigger("activate",t,this.ui(i))},_deactivate:function(t){var i=e.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),i&&this._trigger("deactivate",t,this.ui(i))},_over:function(t){var i=e.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!==this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",t,this.ui(i)))},_out:function(t){var i=e.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!==this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",t,this.ui(i)))},_drop:function(t,i){var n=i||e.ui.ddmanager.current,s=!1;return n&&(n.currentItem||n.element)[0]!==this.element[0]?(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var t=e.data(this,"ui-droppable");return t.options.greedy&&!t.options.disabled&&t.options.scope===n.options.scope&&t.accept.call(t.element[0],n.currentItem||n.element)&&e.ui.intersect(n,e.extend(t,{offset:t.element.offset()}),t.options.tolerance)?(s=!0,!1):void 0}),s?!1:this.accept.call(this.element[0],n.currentItem||n.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",t,this.ui(n)),this.element):!1):!1},ui:function(e){return{draggable:e.currentItem||e.element,helper:e.helper,position:e.position,offset:e.positionAbs}}}),e.ui.intersect=function(e,t,n){if(!t.offset)return!1;var s,o,a=(e.positionAbs||e.position.absolute).left,r=a+e.helperProportions.width,l=(e.positionAbs||e.position.absolute).top,c=l+e.helperProportions.height,h=t.offset.left,d=h+t.proportions.width,u=t.offset.top,p=u+t.proportions.height;switch(n){case"fit":return a>=h&&d>=r&&l>=u&&p>=c;case"intersect":return h<a+e.helperProportions.width/2&&r-e.helperProportions.width/2<d&&u<l+e.helperProportions.height/2&&c-e.helperProportions.height/2<p;case"pointer":return s=(e.positionAbs||e.position.absolute).left+(e.clickOffset||e.offset.click).left,o=(e.positionAbs||e.position.absolute).top+(e.clickOffset||e.offset.click).top,i(o,u,t.proportions.height)&&i(s,h,t.proportions.width);case"touch":return(l>=u&&p>=l||c>=u&&p>=c||u>l&&c>p)&&(a>=h&&d>=a||r>=h&&d>=r||h>a&&r>d);default:return!1}},e.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(t,i){var n,s,o=e.ui.ddmanager.droppables[t.options.scope]||[],a=i?i.type:null,r=(t.currentItem||t.element).find(":data(ui-droppable)").addBack();e:for(n=0;n<o.length;n++)if(!(o[n].options.disabled||t&&!o[n].accept.call(o[n].element[0],t.currentItem||t.element))){for(s=0;s<r.length;s++)if(r[s]===o[n].element[0]){o[n].proportions.height=0;continue e}o[n].visible="none"!==o[n].element.css("display"),o[n].visible&&("mousedown"===a&&o[n]._activate.call(o[n],i),o[n].offset=o[n].element.offset(),o[n].proportions={width:o[n].element[0].offsetWidth,height:o[n].element[0].offsetHeight})}},drop:function(t,i){var n=!1;return e.each((e.ui.ddmanager.droppables[t.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&e.ui.intersect(t,this,this.options.tolerance)&&(n=this._drop.call(this,i)||n),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],t.currentItem||t.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,i)))}),n},dragStart:function(t,i){t.element.parentsUntil("body").bind("scroll.droppable",function(){t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,i)})},drag:function(t,i){t.options.refreshPositions&&e.ui.ddmanager.prepareOffsets(t,i),e.each(e.ui.ddmanager.droppables[t.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var n,s,o,a=e.ui.intersect(t,this,this.options.tolerance),r=!a&&this.isover?"isout":a&&!this.isover?"isover":null;r&&(this.options.greedy&&(s=this.options.scope,o=this.element.parents(":data(ui-droppable)").filter(function(){return e.data(this,"ui-droppable").options.scope===s}),o.length&&(n=e.data(o[0],"ui-droppable"),n.greedyChild="isover"===r)),n&&"isover"===r&&(n.isover=!1,n.isout=!0,n._out.call(n,i)),this[r]=!0,this["isout"===r?"isover":"isout"]=!1,this["isover"===r?"_over":"_out"].call(this,i),n&&"isout"===r&&(n.isout=!1,n.isover=!0,n._over.call(n,i)))}})},dragStop:function(t,i){t.element.parentsUntil("body").unbind("scroll.droppable"),t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,i)}}}(jQuery),function(e,t){function i(e){return parseInt(e,10)||0}function n(e){return!isNaN(parseInt(e,10))}e.widget("ui.resizable",e.ui.mouse,{version:"1.10.3",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_create:function(){var t,i,n,s,o,a=this,r=this.options;if(this.element.addClass("ui-resizable"),e.extend(this,{_aspectRatio:!!r.aspectRatio,aspectRatio:r.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:r.helper||r.ghost||r.animate?r.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(e("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.data("ui-resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=r.handles||(e(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),t=this.handles.split(","),this.handles={},i=0;i<t.length;i++)n=e.trim(t[i]),o="ui-resizable-"+n,s=e("<div class='ui-resizable-handle "+o+"'></div>"),s.css({zIndex:r.zIndex}),"se"===n&&s.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[n]=".ui-resizable-"+n,this.element.append(s);this._renderAxis=function(t){var i,n,s,o;t=t||this.element;for(i in this.handles)this.handles[i].constructor===String&&(this.handles[i]=e(this.handles[i],this.element).show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)&&(n=e(this.handles[i],this.element),o=/sw|ne|nw|se|n|s/.test(i)?n.outerHeight():n.outerWidth(),s=["padding",/ne|nw|n/.test(i)?"Top":/se|sw|s/.test(i)?"Bottom":/^e$/.test(i)?"Right":"Left"].join(""),t.css(s,o),this._proportionallyResize()),e(this.handles[i]).length},this._renderAxis(this.element),this._handles=e(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){a.resizing||(this.className&&(s=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),a.axis=s&&s[1]?s[1]:"se")}),r.autoHide&&(this._handles.hide(),e(this.element).addClass("ui-resizable-autohide").mouseenter(function(){r.disabled||(e(this).removeClass("ui-resizable-autohide"),a._handles.show())}).mouseleave(function(){r.disabled||a.resizing||(e(this).addClass("ui-resizable-autohide"),a._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var t,i=function(t){e(t).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(i(this.element),t=this.element,this.originalElement.css({position:t.css("position"),width:t.outerWidth(),height:t.outerHeight(),top:t.css("top"),left:t.css("left")}).insertAfter(t),t.remove()),this.originalElement.css("resize",this.originalResizeStyle),i(this.originalElement),this},_mouseCapture:function(t){var i,n,s=!1;for(i in this.handles)n=e(this.handles[i])[0],(n===t.target||e.contains(n,t.target))&&(s=!0);return!this.options.disabled&&s},_mouseStart:function(t){var n,s,o,a=this.options,r=this.element.position(),l=this.element;return this.resizing=!0,/absolute/.test(l.css("position"))?l.css({position:"absolute",top:l.css("top"),left:l.css("left")}):l.is(".ui-draggable")&&l.css({position:"absolute",top:r.top,left:r.left}),this._renderProxy(),n=i(this.helper.css("left")),s=i(this.helper.css("top")),a.containment&&(n+=e(a.containment).scrollLeft()||0,s+=e(a.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:n,top:s},this.size=this._helper?{width:l.outerWidth(),height:l.outerHeight()}:{width:l.width(),height:l.height()},this.originalSize=this._helper?{width:l.outerWidth(),height:l.outerHeight()}:{width:l.width(),height:l.height()},this.originalPosition={left:n,top:s},this.sizeDiff={width:l.outerWidth()-l.width(),height:l.outerHeight()-l.height()},this.originalMousePosition={left:t.pageX,top:t.pageY},this.aspectRatio="number"==typeof a.aspectRatio?a.aspectRatio:this.originalSize.width/this.originalSize.height||1,o=e(".ui-resizable-"+this.axis).css("cursor"),e("body").css("cursor","auto"===o?this.axis+"-resize":o),l.addClass("ui-resizable-resizing"),this._propagate("start",t),!0},_mouseDrag:function(t){var i,n=this.helper,s={},o=this.originalMousePosition,a=this.axis,r=this.position.top,l=this.position.left,c=this.size.width,h=this.size.height,d=t.pageX-o.left||0,u=t.pageY-o.top||0,p=this._change[a];return p?(i=p.apply(this,[t,d,u]),this._updateVirtualBoundaries(t.shiftKey),(this._aspectRatio||t.shiftKey)&&(i=this._updateRatio(i,t)),i=this._respectSize(i,t),this._updateCache(i),this._propagate("resize",t),this.position.top!==r&&(s.top=this.position.top+"px"),this.position.left!==l&&(s.left=this.position.left+"px"),this.size.width!==c&&(s.width=this.size.width+"px"),this.size.height!==h&&(s.height=this.size.height+"px"),n.css(s),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),e.isEmptyObject(s)||this._trigger("resize",t,this.ui()),!1):!1},_mouseStop:function(t){this.resizing=!1;var i,n,s,o,a,r,l,c=this.options,h=this;return this._helper&&(i=this._proportionallyResizeElements,n=i.length&&/textarea/i.test(i[0].nodeName),s=n&&e.ui.hasScroll(i[0],"left")?0:h.sizeDiff.height,o=n?0:h.sizeDiff.width,a={width:h.helper.width()-o,height:h.helper.height()-s},r=parseInt(h.element.css("left"),10)+(h.position.left-h.originalPosition.left)||null,l=parseInt(h.element.css("top"),10)+(h.position.top-h.originalPosition.top)||null,c.animate||this.element.css(e.extend(a,{top:l,left:r})),h.helper.height(h.size.height),h.helper.width(h.size.width),this._helper&&!c.animate&&this._proportionallyResize()),e("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(e){var t,i,s,o,a,r=this.options;a={minWidth:n(r.minWidth)?r.minWidth:0,maxWidth:n(r.maxWidth)?r.maxWidth:1/0,minHeight:n(r.minHeight)?r.minHeight:0,maxHeight:n(r.maxHeight)?r.maxHeight:1/0},(this._aspectRatio||e)&&(t=a.minHeight*this.aspectRatio,s=a.minWidth/this.aspectRatio,i=a.maxHeight*this.aspectRatio,o=a.maxWidth/this.aspectRatio,t>a.minWidth&&(a.minWidth=t),s>a.minHeight&&(a.minHeight=s),i<a.maxWidth&&(a.maxWidth=i),o<a.maxHeight&&(a.maxHeight=o)),this._vBoundaries=a},_updateCache:function(e){this.offset=this.helper.offset(),n(e.left)&&(this.position.left=e.left),n(e.top)&&(this.position.top=e.top),n(e.height)&&(this.size.height=e.height),n(e.width)&&(this.size.width=e.width)},_updateRatio:function(e){var t=this.position,i=this.size,s=this.axis;return n(e.height)?e.width=e.height*this.aspectRatio:n(e.width)&&(e.height=e.width/this.aspectRatio),"sw"===s&&(e.left=t.left+(i.width-e.width),e.top=null),"nw"===s&&(e.top=t.top+(i.height-e.height),e.left=t.left+(i.width-e.width)),e},_respectSize:function(e){var t=this._vBoundaries,i=this.axis,s=n(e.width)&&t.maxWidth&&t.maxWidth<e.width,o=n(e.height)&&t.maxHeight&&t.maxHeight<e.height,a=n(e.width)&&t.minWidth&&t.minWidth>e.width,r=n(e.height)&&t.minHeight&&t.minHeight>e.height,l=this.originalPosition.left+this.originalSize.width,c=this.position.top+this.size.height,h=/sw|nw|w/.test(i),d=/nw|ne|n/.test(i);return a&&(e.width=t.minWidth),r&&(e.height=t.minHeight),s&&(e.width=t.maxWidth),o&&(e.height=t.maxHeight),a&&h&&(e.left=l-t.minWidth),s&&h&&(e.left=l-t.maxWidth),r&&d&&(e.top=c-t.minHeight),o&&d&&(e.top=c-t.maxHeight),e.width||e.height||e.left||!e.top?e.width||e.height||e.top||!e.left||(e.left=null):e.top=null,e},_proportionallyResize:function(){if(this._proportionallyResizeElements.length){var e,t,i,n,s,o=this.helper||this.element;for(e=0;e<this._proportionallyResizeElements.length;e++){if(s=this._proportionallyResizeElements[e],!this.borderDif)for(this.borderDif=[],i=[s.css("borderTopWidth"),s.css("borderRightWidth"),s.css("borderBottomWidth"),s.css("borderLeftWidth")],n=[s.css("paddingTop"),s.css("paddingRight"),s.css("paddingBottom"),s.css("paddingLeft")],t=0;t<i.length;t++)this.borderDif[t]=(parseInt(i[t],10)||0)+(parseInt(n[t],10)||0);s.css({height:o.height()-this.borderDif[0]-this.borderDif[2]||0,width:o.width()-this.borderDif[1]-this.borderDif[3]||0})}}},_renderProxy:function(){var t=this.element,i=this.options;this.elementOffset=t.offset(),this._helper?(this.helper=this.helper||e("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++i.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(e,t){return{width:this.originalSize.width+t}},w:function(e,t){var i=this.originalSize,n=this.originalPosition;return{left:n.left+t,width:i.width-t}},n:function(e,t,i){var n=this.originalSize,s=this.originalPosition;return{top:s.top+i,height:n.height-i}},s:function(e,t,i){return{height:this.originalSize.height+i}},se:function(t,i,n){return e.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,i,n]))},sw:function(t,i,n){return e.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,i,n]))},ne:function(t,i,n){return e.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,i,n]))},nw:function(t,i,n){return e.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,i,n]))}},_propagate:function(t,i){e.ui.plugin.call(this,t,[i,this.ui()]),"resize"!==t&&this._trigger(t,i,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),e.ui.plugin.add("resizable","animate",{stop:function(t){var i=e(this).data("ui-resizable"),n=i.options,s=i._proportionallyResizeElements,o=s.length&&/textarea/i.test(s[0].nodeName),a=o&&e.ui.hasScroll(s[0],"left")?0:i.sizeDiff.height,r=o?0:i.sizeDiff.width,l={width:i.size.width-r,height:i.size.height-a},c=parseInt(i.element.css("left"),10)+(i.position.left-i.originalPosition.left)||null,h=parseInt(i.element.css("top"),10)+(i.position.top-i.originalPosition.top)||null;i.element.animate(e.extend(l,h&&c?{top:h,left:c}:{}),{duration:n.animateDuration,easing:n.animateEasing,step:function(){var n={width:parseInt(i.element.css("width"),10),height:parseInt(i.element.css("height"),10),top:parseInt(i.element.css("top"),10),left:parseInt(i.element.css("left"),10)};s&&s.length&&e(s[0]).css({width:n.width,height:n.height}),i._updateCache(n),i._propagate("resize",t)}})}}),e.ui.plugin.add("resizable","containment",{start:function(){var t,n,s,o,a,r,l,c=e(this).data("ui-resizable"),h=c.options,d=c.element,u=h.containment,p=u instanceof e?u.get(0):/parent/.test(u)?d.parent().get(0):u;p&&(c.containerElement=e(p),/document/.test(u)||u===document?(c.containerOffset={left:0,top:0},c.containerPosition={left:0,top:0},c.parentData={element:e(document),left:0,top:0,width:e(document).width(),height:e(document).height()||document.body.parentNode.scrollHeight}):(t=e(p),n=[],e(["Top","Right","Left","Bottom"]).each(function(e,s){n[e]=i(t.css("padding"+s))}),c.containerOffset=t.offset(),c.containerPosition=t.position(),c.containerSize={height:t.innerHeight()-n[3],width:t.innerWidth()-n[1]},s=c.containerOffset,o=c.containerSize.height,a=c.containerSize.width,r=e.ui.hasScroll(p,"left")?p.scrollWidth:a,l=e.ui.hasScroll(p)?p.scrollHeight:o,c.parentData={element:p,left:s.left,top:s.top,width:r,height:l}))},resize:function(t){var i,n,s,o,a=e(this).data("ui-resizable"),r=a.options,l=a.containerOffset,c=a.position,h=a._aspectRatio||t.shiftKey,d={top:0,left:0},u=a.containerElement;u[0]!==document&&/static/.test(u.css("position"))&&(d=l),c.left<(a._helper?l.left:0)&&(a.size.width=a.size.width+(a._helper?a.position.left-l.left:a.position.left-d.left),h&&(a.size.height=a.size.width/a.aspectRatio),a.position.left=r.helper?l.left:0),c.top<(a._helper?l.top:0)&&(a.size.height=a.size.height+(a._helper?a.position.top-l.top:a.position.top),h&&(a.size.width=a.size.height*a.aspectRatio),a.position.top=a._helper?l.top:0),a.offset.left=a.parentData.left+a.position.left,a.offset.top=a.parentData.top+a.position.top,i=Math.abs((a._helper?a.offset.left-d.left:a.offset.left-d.left)+a.sizeDiff.width),n=Math.abs((a._helper?a.offset.top-d.top:a.offset.top-l.top)+a.sizeDiff.height),s=a.containerElement.get(0)===a.element.parent().get(0),o=/relative|absolute/.test(a.containerElement.css("position")),s&&o&&(i-=a.parentData.left),i+a.size.width>=a.parentData.width&&(a.size.width=a.parentData.width-i,h&&(a.size.height=a.size.width/a.aspectRatio)),n+a.size.height>=a.parentData.height&&(a.size.height=a.parentData.height-n,h&&(a.size.width=a.size.height*a.aspectRatio))},stop:function(){var t=e(this).data("ui-resizable"),i=t.options,n=t.containerOffset,s=t.containerPosition,o=t.containerElement,a=e(t.helper),r=a.offset(),l=a.outerWidth()-t.sizeDiff.width,c=a.outerHeight()-t.sizeDiff.height;t._helper&&!i.animate&&/relative/.test(o.css("position"))&&e(this).css({left:r.left-s.left-n.left,width:l,height:c}),t._helper&&!i.animate&&/static/.test(o.css("position"))&&e(this).css({left:r.left-s.left-n.left,width:l,height:c})}}),e.ui.plugin.add("resizable","alsoResize",{start:function(){var t=e(this).data("ui-resizable"),i=t.options,n=function(t){e(t).each(function(){var t=e(this);t.data("ui-resizable-alsoresize",{width:parseInt(t.width(),10),height:parseInt(t.height(),10),left:parseInt(t.css("left"),10),top:parseInt(t.css("top"),10)})})};"object"!=typeof i.alsoResize||i.alsoResize.parentNode?n(i.alsoResize):i.alsoResize.length?(i.alsoResize=i.alsoResize[0],n(i.alsoResize)):e.each(i.alsoResize,function(e){n(e)})},resize:function(t,i){var n=e(this).data("ui-resizable"),s=n.options,o=n.originalSize,a=n.originalPosition,r={height:n.size.height-o.height||0,width:n.size.width-o.width||0,top:n.position.top-a.top||0,left:n.position.left-a.left||0},l=function(t,n){e(t).each(function(){var t=e(this),s=e(this).data("ui-resizable-alsoresize"),o={},a=n&&n.length?n:t.parents(i.originalElement[0]).length?["width","height"]:["width","height","top","left"];e.each(a,function(e,t){var i=(s[t]||0)+(r[t]||0);i&&i>=0&&(o[t]=i||null)}),t.css(o)})};"object"!=typeof s.alsoResize||s.alsoResize.nodeType?l(s.alsoResize):e.each(s.alsoResize,function(e,t){l(e,t)})},stop:function(){e(this).removeData("resizable-alsoresize")}}),e.ui.plugin.add("resizable","ghost",{start:function(){var t=e(this).data("ui-resizable"),i=t.options,n=t.size;t.ghost=t.originalElement.clone(),t.ghost.css({opacity:.25,display:"block",position:"relative",height:n.height,width:n.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof i.ghost?i.ghost:""),t.ghost.appendTo(t.helper)},resize:function(){var t=e(this).data("ui-resizable");t.ghost&&t.ghost.css({position:"relative",height:t.size.height,width:t.size.width})},stop:function(){var t=e(this).data("ui-resizable");t.ghost&&t.helper&&t.helper.get(0).removeChild(t.ghost.get(0))}}),e.ui.plugin.add("resizable","grid",{resize:function(){var t=e(this).data("ui-resizable"),i=t.options,n=t.size,s=t.originalSize,o=t.originalPosition,a=t.axis,r="number"==typeof i.grid?[i.grid,i.grid]:i.grid,l=r[0]||1,c=r[1]||1,h=Math.round((n.width-s.width)/l)*l,d=Math.round((n.height-s.height)/c)*c,u=s.width+h,p=s.height+d,m=i.maxWidth&&i.maxWidth<u,f=i.maxHeight&&i.maxHeight<p,g=i.minWidth&&i.minWidth>u,v=i.minHeight&&i.minHeight>p;i.grid=r,g&&(u+=l),v&&(p+=c),m&&(u-=l),f&&(p-=c),/^(se|s|e)$/.test(a)?(t.size.width=u,t.size.height=p):/^(ne)$/.test(a)?(t.size.width=u,t.size.height=p,t.position.top=o.top-d):/^(sw)$/.test(a)?(t.size.width=u,t.size.height=p,t.position.left=o.left-h):(t.size.width=u,t.size.height=p,t.position.top=o.top-d,t.position.left=o.left-h)}})}(jQuery),function(e,t){e.widget("ui.selectable",e.ui.mouse,{version:"1.10.3",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var t,i=this;this.element.addClass("ui-selectable"),this.dragged=!1,this.refresh=function(){t=e(i.options.filter,i.element[0]),t.addClass("ui-selectee"),t.each(function(){var t=e(this),i=t.offset();e.data(this,"selectable-item",{element:this,$element:t,left:i.left,top:i.top,right:i.left+t.outerWidth(),bottom:i.top+t.outerHeight(),startselected:!1,selected:t.hasClass("ui-selected"),selecting:t.hasClass("ui-selecting"),unselecting:t.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=t.addClass("ui-selectee"),this._mouseInit(),this.helper=e("<div class='ui-selectable-helper'></div>")},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled"),this._mouseDestroy()},_mouseStart:function(t){var i=this,n=this.options;this.opos=[t.pageX,t.pageY],this.options.disabled||(this.selectees=e(n.filter,this.element[0]),this._trigger("start",t),e(n.appendTo).append(this.helper),this.helper.css({left:t.pageX,top:t.pageY,width:0,height:0}),n.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var n=e.data(this,"selectable-item");n.startselected=!0,t.metaKey||t.ctrlKey||(n.$element.removeClass("ui-selected"),n.selected=!1,n.$element.addClass("ui-unselecting"),n.unselecting=!0,i._trigger("unselecting",t,{unselecting:n.element}))}),e(t.target).parents().addBack().each(function(){var n,s=e.data(this,"selectable-item");return s?(n=!t.metaKey&&!t.ctrlKey||!s.$element.hasClass("ui-selected"),s.$element.removeClass(n?"ui-unselecting":"ui-selected").addClass(n?"ui-selecting":"ui-unselecting"),s.unselecting=!n,s.selecting=n,s.selected=n,n?i._trigger("selecting",t,{selecting:s.element}):i._trigger("unselecting",t,{unselecting:s.element}),!1):void 0}))},_mouseDrag:function(t){if(this.dragged=!0,!this.options.disabled){var i,n=this,s=this.options,o=this.opos[0],a=this.opos[1],r=t.pageX,l=t.pageY;return o>r&&(i=r,r=o,o=i),a>l&&(i=l,l=a,a=i),this.helper.css({left:o,top:a,width:r-o,height:l-a}),this.selectees.each(function(){var i=e.data(this,"selectable-item"),c=!1;i&&i.element!==n.element[0]&&("touch"===s.tolerance?c=!(i.left>r||i.right<o||i.top>l||i.bottom<a):"fit"===s.tolerance&&(c=i.left>o&&i.right<r&&i.top>a&&i.bottom<l),c?(i.selected&&(i.$element.removeClass("ui-selected"),i.selected=!1),i.unselecting&&(i.$element.removeClass("ui-unselecting"),i.unselecting=!1),i.selecting||(i.$element.addClass("ui-selecting"),i.selecting=!0,n._trigger("selecting",t,{selecting:i.element}))):(i.selecting&&((t.metaKey||t.ctrlKey)&&i.startselected?(i.$element.removeClass("ui-selecting"),i.selecting=!1,i.$element.addClass("ui-selected"),i.selected=!0):(i.$element.removeClass("ui-selecting"),i.selecting=!1,i.startselected&&(i.$element.addClass("ui-unselecting"),i.unselecting=!0),n._trigger("unselecting",t,{unselecting:i.element}))),i.selected&&(t.metaKey||t.ctrlKey||i.startselected||(i.$element.removeClass("ui-selected"),i.selected=!1,i.$element.addClass("ui-unselecting"),i.unselecting=!0,n._trigger("unselecting",t,{unselecting:i.element})))))}),!1}},_mouseStop:function(t){var i=this;return this.dragged=!1,e(".ui-unselecting",this.element[0]).each(function(){var n=e.data(this,"selectable-item");n.$element.removeClass("ui-unselecting"),n.unselecting=!1,n.startselected=!1,i._trigger("unselected",t,{unselected:n.element})}),e(".ui-selecting",this.element[0]).each(function(){var n=e.data(this,"selectable-item");n.$element.removeClass("ui-selecting").addClass("ui-selected"),n.selecting=!1,n.selected=!0,n.startselected=!0,i._trigger("selected",t,{selected:n.element})}),this._trigger("stop",t),this.helper.remove(),!1}})}(jQuery),function(e,t){function i(e,t,i){return e>t&&t+i>e}function n(e){return/left|right/.test(e.css("float"))||/inline|table-cell/.test(e.css("display"))}e.widget("ui.sortable",e.ui.mouse,{version:"1.10.3",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_create:function(){var e=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?"x"===e.axis||n(this.items[0].item):!1,this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var e=this.items.length-1;e>=0;e--)this.items[e].item.removeData(this.widgetName+"-item");return this},_setOption:function(t,i){"disabled"===t?(this.options[t]=i,this.widget().toggleClass("ui-sortable-disabled",!!i)):e.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(t,i){var n=null,s=!1,o=this;return this.reverting?!1:this.options.disabled||"static"===this.options.type?!1:(this._refreshItems(t),e(t.target).parents().each(function(){return e.data(this,o.widgetName+"-item")===o?(n=e(this),!1):void 0}),e.data(t.target,o.widgetName+"-item")===o&&(n=e(t.target)),n&&(!this.options.handle||i||(e(this.options.handle,n).find("*").addBack().each(function(){this===t.target&&(s=!0)}),s))?(this.currentItem=n,this._removeCurrentsFromItems(),!0):!1)},_mouseStart:function(t,i,n){var s,o,a=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,a.cursorAt&&this._adjustOffsetFromHelper(a.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),a.containment&&this._setContainment(),a.cursor&&"auto"!==a.cursor&&(o=this.document.find("body"),this.storedCursor=o.css("cursor"),o.css("cursor",a.cursor),this.storedStylesheet=e("<style>*{ cursor: "+a.cursor+" !important; }</style>").appendTo(o)),a.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",a.opacity)),a.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",a.zIndex)),this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!n)for(s=this.containers.length-1;s>=0;s--)this.containers[s]._trigger("activate",t,this._uiHash(this));return e.ui.ddmanager&&(e.ui.ddmanager.current=this),e.ui.ddmanager&&!a.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){var i,n,s,o,a=this.options,r=!1;for(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<a.scrollSensitivity?this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop+a.scrollSpeed:t.pageY-this.overflowOffset.top<a.scrollSensitivity&&(this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop-a.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<a.scrollSensitivity?this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft+a.scrollSpeed:t.pageX-this.overflowOffset.left<a.scrollSensitivity&&(this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft-a.scrollSpeed)):(t.pageY-e(document).scrollTop()<a.scrollSensitivity?r=e(document).scrollTop(e(document).scrollTop()-a.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<a.scrollSensitivity&&(r=e(document).scrollTop(e(document).scrollTop()+a.scrollSpeed)),
t.pageX-e(document).scrollLeft()<a.scrollSensitivity?r=e(document).scrollLeft(e(document).scrollLeft()-a.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<a.scrollSensitivity&&(r=e(document).scrollLeft(e(document).scrollLeft()+a.scrollSpeed))),r!==!1&&e.ui.ddmanager&&!a.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),i=this.items.length-1;i>=0;i--)if(n=this.items[i],s=n.item[0],o=this._intersectsWithPointer(n),o&&n.instance===this.currentContainer&&s!==this.currentItem[0]&&this.placeholder[1===o?"next":"prev"]()[0]!==s&&!e.contains(this.placeholder[0],s)&&("semi-dynamic"===this.options.type?!e.contains(this.element[0],s):!0)){if(this.direction=1===o?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(n))break;this._rearrange(t,n),this._trigger("change",t,this._uiHash());break}return this._contactContainers(t),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,i){if(t){if(e.ui.ddmanager&&!this.options.dropBehaviour&&e.ui.ddmanager.drop(this,t),this.options.revert){var n=this,s=this.placeholder.offset(),o=this.options.axis,a={};o&&"x"!==o||(a.left=s.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollLeft)),o&&"y"!==o||(a.top=s.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,e(this.helper).animate(a,parseInt(this.options.revert,10)||500,function(){n._clear(t)})}else this._clear(t,i);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var t=this.containers.length-1;t>=0;t--)this.containers[t]._trigger("deactivate",null,this._uiHash(this)),this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",null,this._uiHash(this)),this.containers[t].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),e.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?e(this.domPosition.prev).after(this.currentItem):e(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var i=this._getItemsAsjQuery(t&&t.connected),n=[];return t=t||{},e(i).each(function(){var i=(e(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[\-=_](.+)/);i&&n.push((t.key||i[1]+"[]")+"="+(t.key&&t.expression?i[1]:i[2]))}),!n.length&&t.key&&n.push(t.key+"="),n.join("&")},toArray:function(t){var i=this._getItemsAsjQuery(t&&t.connected),n=[];return t=t||{},i.each(function(){n.push(e(t.item||this).attr(t.attribute||"id")||"")}),n},_intersectsWith:function(e){var t=this.positionAbs.left,i=t+this.helperProportions.width,n=this.positionAbs.top,s=n+this.helperProportions.height,o=e.left,a=o+e.width,r=e.top,l=r+e.height,c=this.offset.click.top,h=this.offset.click.left,d="x"===this.options.axis||n+c>r&&l>n+c,u="y"===this.options.axis||t+h>o&&a>t+h,p=d&&u;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]?p:o<t+this.helperProportions.width/2&&i-this.helperProportions.width/2<a&&r<n+this.helperProportions.height/2&&s-this.helperProportions.height/2<l},_intersectsWithPointer:function(e){var t="x"===this.options.axis||i(this.positionAbs.top+this.offset.click.top,e.top,e.height),n="y"===this.options.axis||i(this.positionAbs.left+this.offset.click.left,e.left,e.width),s=t&&n,o=this._getDragVerticalDirection(),a=this._getDragHorizontalDirection();return s?this.floating?a&&"right"===a||"down"===o?2:1:o&&("down"===o?2:1):!1},_intersectsWithSides:function(e){var t=i(this.positionAbs.top+this.offset.click.top,e.top+e.height/2,e.height),n=i(this.positionAbs.left+this.offset.click.left,e.left+e.width/2,e.width),s=this._getDragVerticalDirection(),o=this._getDragHorizontalDirection();return this.floating&&o?"right"===o&&n||"left"===o&&!n:s&&("down"===s&&t||"up"===s&&!t)},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return 0!==e&&(e>0?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return 0!==e&&(e>0?"right":"left")},refresh:function(e){return this._refreshItems(e),this.refreshPositions(),this},_connectWith:function(){var e=this.options;return e.connectWith.constructor===String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(t){var i,n,s,o,a=[],r=[],l=this._connectWith();if(l&&t)for(i=l.length-1;i>=0;i--)for(s=e(l[i]),n=s.length-1;n>=0;n--)o=e.data(s[n],this.widgetFullName),o&&o!==this&&!o.options.disabled&&r.push([e.isFunction(o.options.items)?o.options.items.call(o.element):e(o.options.items,o.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),o]);for(r.push([e.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),i=r.length-1;i>=0;i--)r[i][0].each(function(){a.push(this)});return e(a)},_removeCurrentsFromItems:function(){var t=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=e.grep(this.items,function(e){for(var i=0;i<t.length;i++)if(t[i]===e.item[0])return!1;return!0})},_refreshItems:function(t){this.items=[],this.containers=[this];var i,n,s,o,a,r,l,c,h=this.items,d=[[e.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):e(this.options.items,this.element),this]],u=this._connectWith();if(u&&this.ready)for(i=u.length-1;i>=0;i--)for(s=e(u[i]),n=s.length-1;n>=0;n--)o=e.data(s[n],this.widgetFullName),o&&o!==this&&!o.options.disabled&&(d.push([e.isFunction(o.options.items)?o.options.items.call(o.element[0],t,{item:this.currentItem}):e(o.options.items,o.element),o]),this.containers.push(o));for(i=d.length-1;i>=0;i--)for(a=d[i][1],r=d[i][0],n=0,c=r.length;c>n;n++)l=e(r[n]),l.data(this.widgetName+"-item",a),h.push({item:l,instance:a,width:0,height:0,left:0,top:0})},refreshPositions:function(t){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var i,n,s,o;for(i=this.items.length-1;i>=0;i--)n=this.items[i],n.instance!==this.currentContainer&&this.currentContainer&&n.item[0]!==this.currentItem[0]||(s=this.options.toleranceElement?e(this.options.toleranceElement,n.item):n.item,t||(n.width=s.outerWidth(),n.height=s.outerHeight()),o=s.offset(),n.left=o.left,n.top=o.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(i=this.containers.length-1;i>=0;i--)o=this.containers[i].element.offset(),this.containers[i].containerCache.left=o.left,this.containers[i].containerCache.top=o.top,this.containers[i].containerCache.width=this.containers[i].element.outerWidth(),this.containers[i].containerCache.height=this.containers[i].element.outerHeight();return this},_createPlaceholder:function(t){t=t||this;var i,n=t.options;n.placeholder&&n.placeholder.constructor!==String||(i=n.placeholder,n.placeholder={element:function(){var n=t.currentItem[0].nodeName.toLowerCase(),s=e("<"+n+">",t.document[0]).addClass(i||t.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");return"tr"===n?t.currentItem.children().each(function(){e("<td>&#160;</td>",t.document[0]).attr("colspan",e(this).attr("colspan")||1).appendTo(s)}):"img"===n&&s.attr("src",t.currentItem.attr("src")),i||s.css("visibility","hidden"),s},update:function(e,s){(!i||n.forcePlaceholderSize)&&(s.height()||s.height(t.currentItem.innerHeight()-parseInt(t.currentItem.css("paddingTop")||0,10)-parseInt(t.currentItem.css("paddingBottom")||0,10)),s.width()||s.width(t.currentItem.innerWidth()-parseInt(t.currentItem.css("paddingLeft")||0,10)-parseInt(t.currentItem.css("paddingRight")||0,10)))}}),t.placeholder=e(n.placeholder.element.call(t.element,t.currentItem)),t.currentItem.after(t.placeholder),n.placeholder.update(t,t.placeholder)},_contactContainers:function(t){var s,o,a,r,l,c,h,d,u,p,m=null,f=null;for(s=this.containers.length-1;s>=0;s--)if(!e.contains(this.currentItem[0],this.containers[s].element[0]))if(this._intersectsWith(this.containers[s].containerCache)){if(m&&e.contains(this.containers[s].element[0],m.element[0]))continue;m=this.containers[s],f=s}else this.containers[s].containerCache.over&&(this.containers[s]._trigger("out",t,this._uiHash(this)),this.containers[s].containerCache.over=0);if(m)if(1===this.containers.length)this.containers[f].containerCache.over||(this.containers[f]._trigger("over",t,this._uiHash(this)),this.containers[f].containerCache.over=1);else{for(a=1e4,r=null,p=m.floating||n(this.currentItem),l=p?"left":"top",c=p?"width":"height",h=this.positionAbs[l]+this.offset.click[l],o=this.items.length-1;o>=0;o--)e.contains(this.containers[f].element[0],this.items[o].item[0])&&this.items[o].item[0]!==this.currentItem[0]&&(!p||i(this.positionAbs.top+this.offset.click.top,this.items[o].top,this.items[o].height))&&(d=this.items[o].item.offset()[l],u=!1,Math.abs(d-h)>Math.abs(d+this.items[o][c]-h)&&(u=!0,d+=this.items[o][c]),Math.abs(d-h)<a&&(a=Math.abs(d-h),r=this.items[o],this.direction=u?"up":"down"));if(!r&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[f])return;r?this._rearrange(t,r,null,!0):this._rearrange(t,null,this.containers[f].element,!0),this._trigger("change",t,this._uiHash()),this.containers[f]._trigger("change",t,this._uiHash(this)),this.currentContainer=this.containers[f],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[f]._trigger("over",t,this._uiHash(this)),this.containers[f].containerCache.over=1}},_createHelper:function(t){var i=this.options,n=e.isFunction(i.helper)?e(i.helper.apply(this.element[0],[t,this.currentItem])):"clone"===i.helper?this.currentItem.clone():this.currentItem;return n.parents("body").length||e("parent"!==i.appendTo?i.appendTo:this.currentItem[0].parentNode)[0].appendChild(n[0]),n[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!n[0].style.width||i.forceHelperSize)&&n.width(this.currentItem.width()),(!n[0].style.height||i.forceHelperSize)&&n.height(this.currentItem.height()),n},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&e.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,i,n,s=this.options;"parent"===s.containment&&(s.containment=this.helper[0].parentNode),("document"===s.containment||"window"===s.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,e("document"===s.containment?document:window).width()-this.helperProportions.width-this.margins.left,(e("document"===s.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(s.containment)||(t=e(s.containment)[0],i=e(s.containment).offset(),n="hidden"!==e(t).css("overflow"),this.containment=[i.left+(parseInt(e(t).css("borderLeftWidth"),10)||0)+(parseInt(e(t).css("paddingLeft"),10)||0)-this.margins.left,i.top+(parseInt(e(t).css("borderTopWidth"),10)||0)+(parseInt(e(t).css("paddingTop"),10)||0)-this.margins.top,i.left+(n?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(e(t).css("borderLeftWidth"),10)||0)-(parseInt(e(t).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,i.top+(n?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(e(t).css("borderTopWidth"),10)||0)-(parseInt(e(t).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(t,i){i||(i=this.position);var n="absolute"===t?1:-1,s="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,o=/(html|body)/i.test(s[0].tagName);return{top:i.top+this.offset.relative.top*n+this.offset.parent.top*n-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():o?0:s.scrollTop())*n,left:i.left+this.offset.relative.left*n+this.offset.parent.left*n-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():o?0:s.scrollLeft())*n}},_generatePosition:function(t){var i,n,s=this.options,o=t.pageX,a=t.pageY,r="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,l=/(html|body)/i.test(r[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==document&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(o=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(a=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(o=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(a=this.containment[3]+this.offset.click.top)),s.grid&&(i=this.originalPageY+Math.round((a-this.originalPageY)/s.grid[1])*s.grid[1],a=this.containment?i-this.offset.click.top>=this.containment[1]&&i-this.offset.click.top<=this.containment[3]?i:i-this.offset.click.top>=this.containment[1]?i-s.grid[1]:i+s.grid[1]:i,n=this.originalPageX+Math.round((o-this.originalPageX)/s.grid[0])*s.grid[0],o=this.containment?n-this.offset.click.left>=this.containment[0]&&n-this.offset.click.left<=this.containment[2]?n:n-this.offset.click.left>=this.containment[0]?n-s.grid[0]:n+s.grid[0]:n)),{top:a-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():l?0:r.scrollTop()),left:o-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():l?0:r.scrollLeft())}},_rearrange:function(e,t,i,n){i?i[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?t.item[0]:t.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var s=this.counter;this._delay(function(){s===this.counter&&this.refreshPositions(!n)})},_clear:function(e,t){this.reverting=!1;var i,n=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(i in this._storedCSS)("auto"===this._storedCSS[i]||"static"===this._storedCSS[i])&&(this._storedCSS[i]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!t&&n.push(function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||t||n.push(function(e){this._trigger("update",e,this._uiHash())}),this!==this.currentContainer&&(t||(n.push(function(e){this._trigger("remove",e,this._uiHash())}),n.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.currentContainer)),n.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.currentContainer)))),i=this.containers.length-1;i>=0;i--)t||n.push(function(e){return function(t){e._trigger("deactivate",t,this._uiHash(this))}}.call(this,this.containers[i])),this.containers[i].containerCache.over&&(n.push(function(e){return function(t){e._trigger("out",t,this._uiHash(this))}}.call(this,this.containers[i])),this.containers[i].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,this.cancelHelperRemoval){if(!t){for(this._trigger("beforeStop",e,this._uiHash()),i=0;i<n.length;i++)n[i].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!1}if(t||this._trigger("beforeStop",e,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null,!t){for(i=0;i<n.length;i++)n[i].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){e.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(t){var i=t||this;return{helper:i.helper,placeholder:i.placeholder||e([]),position:i.position,originalPosition:i.originalPosition,offset:i.positionAbs,item:i.currentItem,sender:t?t.element:null}}})}(jQuery),function(e,t){var i="ui-effects-";e.effects={effect:{}},function(e,t){function i(e,t,i){var n=d[t.type]||{};return null==e?i||!t.def?null:t.def:(e=n.floor?~~e:parseFloat(e),isNaN(e)?t.def:n.mod?(e+n.mod)%n.mod:0>e?0:n.max<e?n.max:e)}function n(t){var i=c(),n=i._rgba=[];return t=t.toLowerCase(),m(l,function(e,s){var o,a=s.re.exec(t),r=a&&s.parse(a),l=s.space||"rgba";return r?(o=i[l](r),i[h[l].cache]=o[h[l].cache],n=i._rgba=o._rgba,!1):void 0}),n.length?("0,0,0,0"===n.join()&&e.extend(n,o.transparent),i):o[t]}function s(e,t,i){return i=(i+1)%1,1>6*i?e+(t-e)*i*6:1>2*i?t:2>3*i?e+(t-e)*(2/3-i)*6:e}var o,a="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",r=/^([\-+])=\s*(\d+\.?\d*)/,l=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[e[1],e[2],e[3],e[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[2.55*e[1],2.55*e[2],2.55*e[3],e[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(e){return[e[1],e[2]/100,e[3]/100,e[4]]}}],c=e.Color=function(t,i,n,s){return new e.Color.fn.parse(t,i,n,s)},h={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},d={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},u=c.support={},p=e("<p>")[0],m=e.each;p.style.cssText="background-color:rgba(1,1,1,.5)",u.rgba=p.style.backgroundColor.indexOf("rgba")>-1,m(h,function(e,t){t.cache="_"+e,t.props.alpha={idx:3,type:"percent",def:1}}),c.fn=e.extend(c.prototype,{parse:function(s,a,r,l){if(s===t)return this._rgba=[null,null,null,null],this;(s.jquery||s.nodeType)&&(s=e(s).css(a),a=t);var d=this,u=e.type(s),p=this._rgba=[];return a!==t&&(s=[s,a,r,l],u="array"),"string"===u?this.parse(n(s)||o._default):"array"===u?(m(h.rgba.props,function(e,t){p[t.idx]=i(s[t.idx],t)}),this):"object"===u?(s instanceof c?m(h,function(e,t){s[t.cache]&&(d[t.cache]=s[t.cache].slice())}):m(h,function(t,n){var o=n.cache;m(n.props,function(e,t){if(!d[o]&&n.to){if("alpha"===e||null==s[e])return;d[o]=n.to(d._rgba)}d[o][t.idx]=i(s[e],t,!0)}),d[o]&&e.inArray(null,d[o].slice(0,3))<0&&(d[o][3]=1,n.from&&(d._rgba=n.from(d[o])))}),this):void 0},is:function(e){var t=c(e),i=!0,n=this;return m(h,function(e,s){var o,a=t[s.cache];return a&&(o=n[s.cache]||s.to&&s.to(n._rgba)||[],m(s.props,function(e,t){return null!=a[t.idx]?i=a[t.idx]===o[t.idx]:void 0})),i}),i},_space:function(){var e=[],t=this;return m(h,function(i,n){t[n.cache]&&e.push(i)}),e.pop()},transition:function(e,t){var n=c(e),s=n._space(),o=h[s],a=0===this.alpha()?c("transparent"):this,r=a[o.cache]||o.to(a._rgba),l=r.slice();return n=n[o.cache],m(o.props,function(e,s){var o=s.idx,a=r[o],c=n[o],h=d[s.type]||{};null!==c&&(null===a?l[o]=c:(h.mod&&(c-a>h.mod/2?a+=h.mod:a-c>h.mod/2&&(a-=h.mod)),l[o]=i((c-a)*t+a,s)))}),this[s](l)},blend:function(t){if(1===this._rgba[3])return this;var i=this._rgba.slice(),n=i.pop(),s=c(t)._rgba;return c(e.map(i,function(e,t){return(1-n)*s[t]+n*e}))},toRgbaString:function(){var t="rgba(",i=e.map(this._rgba,function(e,t){return null==e?t>2?1:0:e});return 1===i[3]&&(i.pop(),t="rgb("),t+i.join()+")"},toHslaString:function(){var t="hsla(",i=e.map(this.hsla(),function(e,t){return null==e&&(e=t>2?1:0),t&&3>t&&(e=Math.round(100*e)+"%"),e});return 1===i[3]&&(i.pop(),t="hsl("),t+i.join()+")"},toHexString:function(t){var i=this._rgba.slice(),n=i.pop();return t&&i.push(~~(255*n)),"#"+e.map(i,function(e){return e=(e||0).toString(16),1===e.length?"0"+e:e}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),c.fn.parse.prototype=c.fn,h.hsla.to=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t,i,n=e[0]/255,s=e[1]/255,o=e[2]/255,a=e[3],r=Math.max(n,s,o),l=Math.min(n,s,o),c=r-l,h=r+l,d=.5*h;return t=l===r?0:n===r?60*(s-o)/c+360:s===r?60*(o-n)/c+120:60*(n-s)/c+240,i=0===c?0:.5>=d?c/h:c/(2-h),[Math.round(t)%360,i,d,null==a?1:a]},h.hsla.from=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t=e[0]/360,i=e[1],n=e[2],o=e[3],a=.5>=n?n*(1+i):n+i-n*i,r=2*n-a;return[Math.round(255*s(r,a,t+1/3)),Math.round(255*s(r,a,t)),Math.round(255*s(r,a,t-1/3)),o]},m(h,function(n,s){var o=s.props,a=s.cache,l=s.to,h=s.from;c.fn[n]=function(n){if(l&&!this[a]&&(this[a]=l(this._rgba)),n===t)return this[a].slice();var s,r=e.type(n),d="array"===r||"object"===r?n:arguments,u=this[a].slice();return m(o,function(e,t){var n=d["object"===r?e:t.idx];null==n&&(n=u[t.idx]),u[t.idx]=i(n,t)}),h?(s=c(h(u)),s[a]=u,s):c(u)},m(o,function(t,i){c.fn[t]||(c.fn[t]=function(s){var o,a=e.type(s),l="alpha"===t?this._hsla?"hsla":"rgba":n,c=this[l](),h=c[i.idx];return"undefined"===a?h:("function"===a&&(s=s.call(this,h),a=e.type(s)),null==s&&i.empty?this:("string"===a&&(o=r.exec(s),o&&(s=h+parseFloat(o[2])*("+"===o[1]?1:-1))),c[i.idx]=s,this[l](c)))})})}),c.hook=function(t){var i=t.split(" ");m(i,function(t,i){e.cssHooks[i]={set:function(t,s){var o,a,r="";if("transparent"!==s&&("string"!==e.type(s)||(o=n(s)))){if(s=c(o||s),!u.rgba&&1!==s._rgba[3]){for(a="backgroundColor"===i?t.parentNode:t;(""===r||"transparent"===r)&&a&&a.style;)try{r=e.css(a,"backgroundColor"),a=a.parentNode}catch(l){}s=s.blend(r&&"transparent"!==r?r:"_default")}s=s.toRgbaString()}try{t.style[i]=s}catch(l){}}},e.fx.step[i]=function(t){t.colorInit||(t.start=c(t.elem,i),t.end=c(t.end),t.colorInit=!0),e.cssHooks[i].set(t.elem,t.start.transition(t.end,t.pos))}})},c.hook(a),e.cssHooks.borderColor={expand:function(e){var t={};return m(["Top","Right","Bottom","Left"],function(i,n){t["border"+n+"Color"]=e}),t}},o=e.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(jQuery),function(){function i(t){var i,n,s=t.ownerDocument.defaultView?t.ownerDocument.defaultView.getComputedStyle(t,null):t.currentStyle,o={};if(s&&s.length&&s[0]&&s[s[0]])for(n=s.length;n--;)i=s[n],"string"==typeof s[i]&&(o[e.camelCase(i)]=s[i]);else for(i in s)"string"==typeof s[i]&&(o[i]=s[i]);return o}function n(t,i){var n,s,a={};for(n in i)s=i[n],t[n]!==s&&(o[n]||(e.fx.step[n]||!isNaN(parseFloat(s)))&&(a[n]=s));return a}var s=["add","remove","toggle"],o={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};e.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(t,i){e.fx.step[i]=function(e){("none"!==e.end&&!e.setAttr||1===e.pos&&!e.setAttr)&&(jQuery.style(e.elem,i,e.end),e.setAttr=!0)}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e.effects.animateClass=function(t,o,a,r){var l=e.speed(o,a,r);return this.queue(function(){var o,a=e(this),r=a.attr("class")||"",c=l.children?a.find("*").addBack():a;c=c.map(function(){var t=e(this);return{el:t,start:i(this)}}),o=function(){e.each(s,function(e,i){t[i]&&a[i+"Class"](t[i])})},o(),c=c.map(function(){return this.end=i(this.el[0]),this.diff=n(this.start,this.end),this}),a.attr("class",r),c=c.map(function(){var t=this,i=e.Deferred(),n=e.extend({},l,{queue:!1,complete:function(){i.resolve(t)}});return this.el.animate(this.diff,n),i.promise()}),e.when.apply(e,c.get()).done(function(){o(),e.each(arguments,function(){var t=this.el;e.each(this.diff,function(e){t.css(e,"")})}),l.complete.call(a[0])})})},e.fn.extend({addClass:function(t){return function(i,n,s,o){return n?e.effects.animateClass.call(this,{add:i},n,s,o):t.apply(this,arguments)}}(e.fn.addClass),removeClass:function(t){return function(i,n,s,o){return arguments.length>1?e.effects.animateClass.call(this,{remove:i},n,s,o):t.apply(this,arguments)}}(e.fn.removeClass),toggleClass:function(i){return function(n,s,o,a,r){return"boolean"==typeof s||s===t?o?e.effects.animateClass.call(this,s?{add:n}:{remove:n},o,a,r):i.apply(this,arguments):e.effects.animateClass.call(this,{toggle:n},s,o,a)}}(e.fn.toggleClass),switchClass:function(t,i,n,s,o){return e.effects.animateClass.call(this,{add:i,remove:t},n,s,o)}})}(),function(){function n(t,i,n,s){return e.isPlainObject(t)&&(i=t,t=t.effect),t={effect:t},null==i&&(i={}),e.isFunction(i)&&(s=i,n=null,i={}),("number"==typeof i||e.fx.speeds[i])&&(s=n,n=i,i={}),e.isFunction(n)&&(s=n,n=null),i&&e.extend(t,i),n=n||i.duration,t.duration=e.fx.off?0:"number"==typeof n?n:n in e.fx.speeds?e.fx.speeds[n]:e.fx.speeds._default,t.complete=s||i.complete,t}function s(t){return!t||"number"==typeof t||e.fx.speeds[t]?!0:"string"!=typeof t||e.effects.effect[t]?e.isFunction(t)?!0:"object"!=typeof t||t.effect?!1:!0:!0}e.extend(e.effects,{version:"1.10.3",save:function(e,t){for(var n=0;n<t.length;n++)null!==t[n]&&e.data(i+t[n],e[0].style[t[n]])},restore:function(e,n){var s,o;for(o=0;o<n.length;o++)null!==n[o]&&(s=e.data(i+n[o]),s===t&&(s=""),e.css(n[o],s))},setMode:function(e,t){return"toggle"===t&&(t=e.is(":hidden")?"show":"hide"),t},getBaseline:function(e,t){var i,n;switch(e[0]){case"top":i=0;break;case"middle":i=.5;break;case"bottom":i=1;break;default:i=e[0]/t.height}switch(e[1]){case"left":n=0;break;case"center":n=.5;break;case"right":n=1;break;default:n=e[1]/t.width}return{x:n,y:i}},createWrapper:function(t){if(t.parent().is(".ui-effects-wrapper"))return t.parent();var i={width:t.outerWidth(!0),height:t.outerHeight(!0),"float":t.css("float")},n=e("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),s={width:t.width(),height:t.height()},o=document.activeElement;try{o.id}catch(a){o=document.body}return t.wrap(n),(t[0]===o||e.contains(t[0],o))&&e(o).focus(),n=t.parent(),"static"===t.css("position")?(n.css({position:"relative"}),t.css({position:"relative"})):(e.extend(i,{position:t.css("position"),zIndex:t.css("z-index")}),e.each(["top","left","bottom","right"],function(e,n){i[n]=t.css(n),isNaN(parseInt(i[n],10))&&(i[n]="auto")}),t.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),t.css(s),n.css(i).show()},removeWrapper:function(t){var i=document.activeElement;return t.parent().is(".ui-effects-wrapper")&&(t.parent().replaceWith(t),(t[0]===i||e.contains(t[0],i))&&e(i).focus()),t},setTransition:function(t,i,n,s){return s=s||{},e.each(i,function(e,i){var o=t.cssUnit(i);o[0]>0&&(s[i]=o[0]*n+o[1])}),s}}),e.fn.extend({effect:function(){function t(t){function n(){e.isFunction(o)&&o.call(s[0]),e.isFunction(t)&&t()}var s=e(this),o=i.complete,r=i.mode;(s.is(":hidden")?"hide"===r:"show"===r)?(s[r](),n()):a.call(s[0],i,n)}var i=n.apply(this,arguments),s=i.mode,o=i.queue,a=e.effects.effect[i.effect];return e.fx.off||!a?s?this[s](i.duration,i.complete):this.each(function(){i.complete&&i.complete.call(this)}):o===!1?this.each(t):this.queue(o||"fx",t)},show:function(e){return function(t){if(s(t))return e.apply(this,arguments);var i=n.apply(this,arguments);return i.mode="show",this.effect.call(this,i)}}(e.fn.show),hide:function(e){return function(t){if(s(t))return e.apply(this,arguments);var i=n.apply(this,arguments);return i.mode="hide",this.effect.call(this,i)}}(e.fn.hide),toggle:function(e){return function(t){if(s(t)||"boolean"==typeof t)return e.apply(this,arguments);var i=n.apply(this,arguments);return i.mode="toggle",this.effect.call(this,i)}}(e.fn.toggle),cssUnit:function(t){var i=this.css(t),n=[];return e.each(["em","px","%","pt"],function(e,t){i.indexOf(t)>0&&(n=[parseFloat(i),t])}),n}})}(),function(){var t={};e.each(["Quad","Cubic","Quart","Quint","Expo"],function(e,i){t[i]=function(t){return Math.pow(t,e+2)}}),e.extend(t,{Sine:function(e){return 1-Math.cos(e*Math.PI/2)},Circ:function(e){return 1-Math.sqrt(1-e*e)},Elastic:function(e){return 0===e||1===e?e:-Math.pow(2,8*(e-1))*Math.sin((80*(e-1)-7.5)*Math.PI/15)},Back:function(e){return e*e*(3*e-2)},Bounce:function(e){for(var t,i=4;e<((t=Math.pow(2,--i))-1)/11;);return 1/Math.pow(4,3-i)-7.5625*Math.pow((3*t-2)/22-e,2)}}),e.each(t,function(t,i){e.easing["easeIn"+t]=i,e.easing["easeOut"+t]=function(e){return 1-i(1-e)},e.easing["easeInOut"+t]=function(e){return.5>e?i(2*e)/2:1-i(-2*e+2)/2}})}()}(jQuery),function(e,t){var i=0,n={},s={};n.height=n.paddingTop=n.paddingBottom=n.borderTopWidth=n.borderBottomWidth="hide",
s.height=s.paddingTop=s.paddingBottom=s.borderTopWidth=s.borderBottomWidth="show",e.widget("ui.accordion",{version:"1.10.3",options:{active:0,animate:{},collapsible:!1,event:"click",header:"> li > :first-child,> :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},_create:function(){var t=this.options;this.prevShow=this.prevHide=e(),this.element.addClass("ui-accordion ui-widget ui-helper-reset").attr("role","tablist"),t.collapsible||t.active!==!1&&null!=t.active||(t.active=0),this._processPanels(),t.active<0&&(t.active+=this.headers.length),this._refresh()},_getCreateEventData:function(){return{header:this.active,panel:this.active.length?this.active.next():e(),content:this.active.length?this.active.next():e()}},_createIcons:function(){var t=this.options.icons;t&&(e("<span>").addClass("ui-accordion-header-icon ui-icon "+t.header).prependTo(this.headers),this.active.children(".ui-accordion-header-icon").removeClass(t.header).addClass(t.activeHeader),this.headers.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.removeClass("ui-accordion-icons").children(".ui-accordion-header-icon").remove()},_destroy:function(){var e;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"),this.headers.removeClass("ui-accordion-header ui-accordion-header-active ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-selected").removeAttr("aria-controls").removeAttr("tabIndex").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")}),this._destroyIcons(),e=this.headers.next().css("display","").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-state-disabled").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")}),"content"!==this.options.heightStyle&&e.css("height","")},_setOption:function(e,t){return"active"===e?void this._activate(t):("event"===e&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(t)),this._super(e,t),"collapsible"!==e||t||this.options.active!==!1||this._activate(0),"icons"===e&&(this._destroyIcons(),t&&this._createIcons()),void("disabled"===e&&this.headers.add(this.headers.next()).toggleClass("ui-state-disabled",!!t)))},_keydown:function(t){if(!t.altKey&&!t.ctrlKey){var i=e.ui.keyCode,n=this.headers.length,s=this.headers.index(t.target),o=!1;switch(t.keyCode){case i.RIGHT:case i.DOWN:o=this.headers[(s+1)%n];break;case i.LEFT:case i.UP:o=this.headers[(s-1+n)%n];break;case i.SPACE:case i.ENTER:this._eventHandler(t);break;case i.HOME:o=this.headers[0];break;case i.END:o=this.headers[n-1]}o&&(e(t.target).attr("tabIndex",-1),e(o).attr("tabIndex",0),o.focus(),t.preventDefault())}},_panelKeyDown:function(t){t.keyCode===e.ui.keyCode.UP&&t.ctrlKey&&e(t.currentTarget).prev().focus()},refresh:function(){var t=this.options;this._processPanels(),t.active===!1&&t.collapsible===!0||!this.headers.length?(t.active=!1,this.active=e()):t.active===!1?this._activate(0):this.active.length&&!e.contains(this.element[0],this.active[0])?this.headers.length===this.headers.find(".ui-state-disabled").length?(t.active=!1,this.active=e()):this._activate(Math.max(0,t.active-1)):t.active=this.headers.index(this.active),this._destroyIcons(),this._refresh()},_processPanels:function(){this.headers=this.element.find(this.options.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all"),this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").filter(":not(.ui-accordion-content-active)").hide()},_refresh:function(){var t,n=this.options,s=n.heightStyle,o=this.element.parent(),a=this.accordionId="ui-accordion-"+(this.element.attr("id")||++i);this.active=this._findActive(n.active).addClass("ui-accordion-header-active ui-state-active ui-corner-top").removeClass("ui-corner-all"),this.active.next().addClass("ui-accordion-content-active").show(),this.headers.attr("role","tab").each(function(t){var i=e(this),n=i.attr("id"),s=i.next(),o=s.attr("id");n||(n=a+"-header-"+t,i.attr("id",n)),o||(o=a+"-panel-"+t,s.attr("id",o)),i.attr("aria-controls",o),s.attr("aria-labelledby",n)}).next().attr("role","tabpanel"),this.headers.not(this.active).attr({"aria-selected":"false",tabIndex:-1}).next().attr({"aria-expanded":"false","aria-hidden":"true"}).hide(),this.active.length?this.active.attr({"aria-selected":"true",tabIndex:0}).next().attr({"aria-expanded":"true","aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0),this._createIcons(),this._setupEvents(n.event),"fill"===s?(t=o.height(),this.element.siblings(":visible").each(function(){var i=e(this),n=i.css("position");"absolute"!==n&&"fixed"!==n&&(t-=i.outerHeight(!0))}),this.headers.each(function(){t-=e(this).outerHeight(!0)}),this.headers.next().each(function(){e(this).height(Math.max(0,t-e(this).innerHeight()+e(this).height()))}).css("overflow","auto")):"auto"===s&&(t=0,this.headers.next().each(function(){t=Math.max(t,e(this).css("height","").height())}).height(t))},_activate:function(t){var i=this._findActive(t)[0];i!==this.active[0]&&(i=i||this.active[0],this._eventHandler({target:i,currentTarget:i,preventDefault:e.noop}))},_findActive:function(t){return"number"==typeof t?this.headers.eq(t):e()},_setupEvents:function(t){var i={keydown:"_keydown"};t&&e.each(t.split(" "),function(e,t){i[t]="_eventHandler"}),this._off(this.headers.add(this.headers.next())),this._on(this.headers,i),this._on(this.headers.next(),{keydown:"_panelKeyDown"}),this._hoverable(this.headers),this._focusable(this.headers)},_eventHandler:function(t){var i=this.options,n=this.active,s=e(t.currentTarget),o=s[0]===n[0],a=o&&i.collapsible,r=a?e():s.next(),l=n.next(),c={oldHeader:n,oldPanel:l,newHeader:a?e():s,newPanel:r};t.preventDefault(),o&&!i.collapsible||this._trigger("beforeActivate",t,c)===!1||(i.active=a?!1:this.headers.index(s),this.active=o?e():s,this._toggle(c),n.removeClass("ui-accordion-header-active ui-state-active"),i.icons&&n.children(".ui-accordion-header-icon").removeClass(i.icons.activeHeader).addClass(i.icons.header),o||(s.removeClass("ui-corner-all").addClass("ui-accordion-header-active ui-state-active ui-corner-top"),i.icons&&s.children(".ui-accordion-header-icon").removeClass(i.icons.header).addClass(i.icons.activeHeader),s.next().addClass("ui-accordion-content-active")))},_toggle:function(t){var i=t.newPanel,n=this.prevShow.length?this.prevShow:t.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0),this.prevShow=i,this.prevHide=n,this.options.animate?this._animate(i,n,t):(n.hide(),i.show(),this._toggleComplete(t)),n.attr({"aria-expanded":"false","aria-hidden":"true"}),n.prev().attr("aria-selected","false"),i.length&&n.length?n.prev().attr("tabIndex",-1):i.length&&this.headers.filter(function(){return 0===e(this).attr("tabIndex")}).attr("tabIndex",-1),i.attr({"aria-expanded":"true","aria-hidden":"false"}).prev().attr({"aria-selected":"true",tabIndex:0})},_animate:function(e,t,i){var o,a,r,l=this,c=0,h=e.length&&(!t.length||e.index()<t.index()),d=this.options.animate||{},u=h&&d.down||d,p=function(){l._toggleComplete(i)};return"number"==typeof u&&(r=u),"string"==typeof u&&(a=u),a=a||u.easing||d.easing,r=r||u.duration||d.duration,t.length?e.length?(o=e.show().outerHeight(),t.animate(n,{duration:r,easing:a,step:function(e,t){t.now=Math.round(e)}}),void e.hide().animate(s,{duration:r,easing:a,complete:p,step:function(e,i){i.now=Math.round(e),"height"!==i.prop?c+=i.now:"content"!==l.options.heightStyle&&(i.now=Math.round(o-t.outerHeight()-c),c=0)}})):t.animate(n,r,a,p):e.animate(s,r,a,p)},_toggleComplete:function(e){var t=e.oldPanel;t.removeClass("ui-accordion-content-active").prev().removeClass("ui-corner-top").addClass("ui-corner-all"),t.length&&(t.parent()[0].className=t.parent()[0].className),this._trigger("activate",null,e)}})}(jQuery),function(e,t){var i=0;e.widget("ui.autocomplete",{version:"1.10.3",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},pending:0,_create:function(){var t,i,n,s=this.element[0].nodeName.toLowerCase(),o="textarea"===s,a="input"===s;this.isMultiLine=o?!0:a?!1:this.element.prop("isContentEditable"),this.valueMethod=this.element[o||a?"val":"text"],this.isNewMenu=!0,this.element.addClass("ui-autocomplete-input").attr("autocomplete","off"),this._on(this.element,{keydown:function(s){if(this.element.prop("readOnly"))return t=!0,n=!0,void(i=!0);t=!1,n=!1,i=!1;var o=e.ui.keyCode;switch(s.keyCode){case o.PAGE_UP:t=!0,this._move("previousPage",s);break;case o.PAGE_DOWN:t=!0,this._move("nextPage",s);break;case o.UP:t=!0,this._keyEvent("previous",s);break;case o.DOWN:t=!0,this._keyEvent("next",s);break;case o.ENTER:case o.NUMPAD_ENTER:this.menu.active&&(t=!0,s.preventDefault(),this.menu.select(s));break;case o.TAB:this.menu.active&&this.menu.select(s);break;case o.ESCAPE:this.menu.element.is(":visible")&&(this._value(this.term),this.close(s),s.preventDefault());break;default:i=!0,this._searchTimeout(s)}},keypress:function(n){if(t)return t=!1,void((!this.isMultiLine||this.menu.element.is(":visible"))&&n.preventDefault());if(!i){var s=e.ui.keyCode;switch(n.keyCode){case s.PAGE_UP:this._move("previousPage",n);break;case s.PAGE_DOWN:this._move("nextPage",n);break;case s.UP:this._keyEvent("previous",n);break;case s.DOWN:this._keyEvent("next",n)}}},input:function(e){return n?(n=!1,void e.preventDefault()):void this._searchTimeout(e)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(e){return this.cancelBlur?void delete this.cancelBlur:(clearTimeout(this.searching),this.close(e),void this._change(e))}}),this._initSource(),this.menu=e("<ul>").addClass("ui-autocomplete ui-front").appendTo(this._appendTo()).menu({role:null}).hide().data("ui-menu"),this._on(this.menu.element,{mousedown:function(t){t.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur});var i=this.menu.element[0];e(t.target).closest(".ui-menu-item").length||this._delay(function(){var t=this;this.document.one("mousedown",function(n){n.target===t.element[0]||n.target===i||e.contains(i,n.target)||t.close()})})},menufocus:function(t,i){if(this.isNewMenu&&(this.isNewMenu=!1,t.originalEvent&&/^mouse/.test(t.originalEvent.type)))return this.menu.blur(),void this.document.one("mousemove",function(){e(t.target).trigger(t.originalEvent)});var n=i.item.data("ui-autocomplete-item");!1!==this._trigger("focus",t,{item:n})?t.originalEvent&&/^key/.test(t.originalEvent.type)&&this._value(n.value):this.liveRegion.text(n.value)},menuselect:function(e,t){var i=t.item.data("ui-autocomplete-item"),n=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=n,this._delay(function(){this.previous=n,this.selectedItem=i})),!1!==this._trigger("select",e,{item:i})&&this._value(i.value),this.term=this._value(),this.close(e),this.selectedItem=i}}),this.liveRegion=e("<span>",{role:"status","aria-live":"polite"}).addClass("ui-helper-hidden-accessible").insertBefore(this.element),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(e,t){this._super(e,t),"source"===e&&this._initSource(),"appendTo"===e&&this.menu.element.appendTo(this._appendTo()),"disabled"===e&&t&&this.xhr&&this.xhr.abort()},_appendTo:function(){var t=this.options.appendTo;return t&&(t=t.jquery||t.nodeType?e(t):this.document.find(t).eq(0)),t||(t=this.element.closest(".ui-front")),t.length||(t=this.document[0].body),t},_initSource:function(){var t,i,n=this;e.isArray(this.options.source)?(t=this.options.source,this.source=function(i,n){n(e.ui.autocomplete.filter(t,i.term))}):"string"==typeof this.options.source?(i=this.options.source,this.source=function(t,s){n.xhr&&n.xhr.abort(),n.xhr=e.ajax({url:i,data:t,dataType:"json",success:function(e){s(e)},error:function(){s([])}})}):this.source=this.options.source},_searchTimeout:function(e){clearTimeout(this.searching),this.searching=this._delay(function(){this.term!==this._value()&&(this.selectedItem=null,this.search(null,e))},this.options.delay)},search:function(e,t){return e=null!=e?e:this._value(),this.term=this._value(),e.length<this.options.minLength?this.close(t):this._trigger("search",t)!==!1?this._search(e):void 0},_search:function(e){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:e},this._response())},_response:function(){var e=this,t=++i;return function(n){t===i&&e.__response(n),e.pending--,e.pending||e.element.removeClass("ui-autocomplete-loading")}},__response:function(e){e&&(e=this._normalize(e)),this._trigger("response",null,{content:e}),!this.options.disabled&&e&&e.length&&!this.cancelSearch?(this._suggest(e),this._trigger("open")):this._close()},close:function(e){this.cancelSearch=!0,this._close(e)},_close:function(e){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",e))},_change:function(e){this.previous!==this._value()&&this._trigger("change",e,{item:this.selectedItem})},_normalize:function(t){return t.length&&t[0].label&&t[0].value?t:e.map(t,function(t){return"string"==typeof t?{label:t,value:t}:e.extend({label:t.label||t.value,value:t.value||t.label},t)})},_suggest:function(t){var i=this.menu.element.empty();this._renderMenu(i,t),this.isNewMenu=!0,this.menu.refresh(),i.show(),this._resizeMenu(),i.position(e.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var e=this.menu.element;e.outerWidth(Math.max(e.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(t,i){var n=this;e.each(i,function(e,i){n._renderItemData(t,i)})},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-autocomplete-item",t)},_renderItem:function(t,i){return e("<li>").append(e("<a>").text(i.label)).appendTo(t)},_move:function(e,t){return this.menu.element.is(":visible")?this.menu.isFirstItem()&&/^previous/.test(e)||this.menu.isLastItem()&&/^next/.test(e)?(this._value(this.term),void this.menu.blur()):void this.menu[e](t):void this.search(null,t)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(e,t){(!this.isMultiLine||this.menu.element.is(":visible"))&&(this._move(e,t),t.preventDefault())}}),e.extend(e.ui.autocomplete,{escapeRegex:function(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(t,i){var n=new RegExp(e.ui.autocomplete.escapeRegex(i),"i");return e.grep(t,function(e){return n.test(e.label||e.value||e)})}}),e.widget("ui.autocomplete",e.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(e){return e+(e>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(e){var t;this._superApply(arguments),this.options.disabled||this.cancelSearch||(t=e&&e.length?this.options.messages.results(e.length):this.options.messages.noResults,this.liveRegion.text(t))}})}(jQuery),function(e,t){var i,n,s,o,a="ui-button ui-widget ui-state-default ui-corner-all",r="ui-state-hover ui-state-active ",l="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",c=function(){var t=e(this);setTimeout(function(){t.find(":ui-button").button("refresh")},1)},h=function(t){var i=t.name,n=t.form,s=e([]);return i&&(i=i.replace(/'/g,"\\'"),s=n?e(n).find("[name='"+i+"']"):e("[name='"+i+"']",t.ownerDocument).filter(function(){return!this.form})),s};e.widget("ui.button",{version:"1.10.3",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,c),"boolean"!=typeof this.options.disabled?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var t=this,r=this.options,l="checkbox"===this.type||"radio"===this.type,d=l?"":"ui-state-active",u="ui-state-focus";null===r.label&&(r.label="input"===this.type?this.buttonElement.val():this.buttonElement.html()),this._hoverable(this.buttonElement),this.buttonElement.addClass(a).attr("role","button").bind("mouseenter"+this.eventNamespace,function(){r.disabled||this===i&&e(this).addClass("ui-state-active")}).bind("mouseleave"+this.eventNamespace,function(){r.disabled||e(this).removeClass(d)}).bind("click"+this.eventNamespace,function(e){r.disabled&&(e.preventDefault(),e.stopImmediatePropagation())}),this.element.bind("focus"+this.eventNamespace,function(){t.buttonElement.addClass(u)}).bind("blur"+this.eventNamespace,function(){t.buttonElement.removeClass(u)}),l&&(this.element.bind("change"+this.eventNamespace,function(){o||t.refresh()}),this.buttonElement.bind("mousedown"+this.eventNamespace,function(e){r.disabled||(o=!1,n=e.pageX,s=e.pageY)}).bind("mouseup"+this.eventNamespace,function(e){r.disabled||(n!==e.pageX||s!==e.pageY)&&(o=!0)})),"checkbox"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){return r.disabled||o?!1:void 0}):"radio"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(r.disabled||o)return!1;e(this).addClass("ui-state-active"),t.buttonElement.attr("aria-pressed","true");var i=t.element[0];h(i).not(i).map(function(){return e(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){return r.disabled?!1:(e(this).addClass("ui-state-active"),i=this,void t.document.one("mouseup",function(){i=null}))}).bind("mouseup"+this.eventNamespace,function(){return r.disabled?!1:void e(this).removeClass("ui-state-active")}).bind("keydown"+this.eventNamespace,function(t){return r.disabled?!1:void((t.keyCode===e.ui.keyCode.SPACE||t.keyCode===e.ui.keyCode.ENTER)&&e(this).addClass("ui-state-active"))}).bind("keyup"+this.eventNamespace+" blur"+this.eventNamespace,function(){e(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(t){t.keyCode===e.ui.keyCode.SPACE&&e(this).click()})),this._setOption("disabled",r.disabled),this._resetButton()},_determineButtonType:function(){var e,t,i;this.element.is("[type=checkbox]")?this.type="checkbox":this.element.is("[type=radio]")?this.type="radio":this.element.is("input")?this.type="input":this.type="button","checkbox"===this.type||"radio"===this.type?(e=this.element.parents().last(),t="label[for='"+this.element.attr("id")+"']",this.buttonElement=e.find(t),this.buttonElement.length||(e=e.length?e.siblings():this.element.siblings(),this.buttonElement=e.filter(t),this.buttonElement.length||(this.buttonElement=e.find(t))),this.element.addClass("ui-helper-hidden-accessible"),i=this.element.is(":checked"),i&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",i)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(a+" "+r+" "+l).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(e,t){return this._super(e,t),"disabled"===e?void(t?this.element.prop("disabled",!0):this.element.prop("disabled",!1)):void this._resetButton()},refresh:function(){var t=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled");t!==this.options.disabled&&this._setOption("disabled",t),"radio"===this.type?h(this.element[0]).each(function(){e(this).is(":checked")?e(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):e(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"===this.type)return void(this.options.label&&this.element.val(this.options.label));var t=this.buttonElement.removeClass(l),i=e("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(t.empty()).text(),n=this.options.icons,s=n.primary&&n.secondary,o=[];n.primary||n.secondary?(this.options.text&&o.push("ui-button-text-icon"+(s?"s":n.primary?"-primary":"-secondary")),n.primary&&t.prepend("<span class='ui-button-icon-primary ui-icon "+n.primary+"'></span>"),n.secondary&&t.append("<span class='ui-button-icon-secondary ui-icon "+n.secondary+"'></span>"),this.options.text||(o.push(s?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||t.attr("title",e.trim(i)))):o.push("ui-button-text-only"),t.addClass(o.join(" "))}}),e.widget("ui.buttonset",{version:"1.10.3",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(e,t){"disabled"===e&&this.buttons.button("option",e,t),this._super(e,t)},refresh:function(){var t="rtl"===this.element.css("direction");this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(t?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(t?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}})}(jQuery),function(e,t){function i(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},e.extend(this._defaults,this.regional[""]),this.dpDiv=n(e("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function n(t){var i="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return t.delegate(i,"mouseout",function(){e(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&e(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&e(this).removeClass("ui-datepicker-next-hover")}).delegate(i,"mouseover",function(){e.datepicker._isDisabledDatepicker(o.inline?t.parent()[0]:o.input[0])||(e(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),e(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&e(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&e(this).addClass("ui-datepicker-next-hover"))})}function s(t,i){e.extend(t,i);for(var n in i)null==i[n]&&(t[n]=i[n]);return t}e.extend(e.ui,{datepicker:{version:"1.10.3"}});var o,a="datepicker";e.extend(i.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(e){return s(this._defaults,e||{}),this},_attachDatepicker:function(t,i){var n,s,o;n=t.nodeName.toLowerCase(),s="div"===n||"span"===n,t.id||(this.uuid+=1,t.id="dp"+this.uuid),o=this._newInst(e(t),s),o.settings=e.extend({},i||{}),"input"===n?this._connectDatepicker(t,o):s&&this._inlineDatepicker(t,o)},_newInst:function(t,i){var s=t[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1");return{id:s,input:t,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:i,dpDiv:i?n(e("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(t,i){var n=e(t);i.append=e([]),i.trigger=e([]),n.hasClass(this.markerClassName)||(this._attachments(n,i),n.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp),this._autoSize(i),e.data(t,a,i),i.settings.disabled&&this._disableDatepicker(t))},_attachments:function(t,i){var n,s,o,a=this._get(i,"appendText"),r=this._get(i,"isRTL");i.append&&i.append.remove(),a&&(i.append=e("<span class='"+this._appendClass+"'>"+a+"</span>"),t[r?"before":"after"](i.append)),t.unbind("focus",this._showDatepicker),i.trigger&&i.trigger.remove(),n=this._get(i,"showOn"),("focus"===n||"both"===n)&&t.focus(this._showDatepicker),("button"===n||"both"===n)&&(s=this._get(i,"buttonText"),o=this._get(i,"buttonImage"),i.trigger=e(this._get(i,"buttonImageOnly")?e("<img/>").addClass(this._triggerClass).attr({src:o,alt:s,title:s}):e("<button type='button'></button>").addClass(this._triggerClass).html(o?e("<img/>").attr({src:o,alt:s,title:s}):s)),t[r?"before":"after"](i.trigger),i.trigger.click(function(){return e.datepicker._datepickerShowing&&e.datepicker._lastInput===t[0]?e.datepicker._hideDatepicker():e.datepicker._datepickerShowing&&e.datepicker._lastInput!==t[0]?(e.datepicker._hideDatepicker(),e.datepicker._showDatepicker(t[0])):e.datepicker._showDatepicker(t[0]),!1}))},_autoSize:function(e){if(this._get(e,"autoSize")&&!e.inline){var t,i,n,s,o=new Date(2009,11,20),a=this._get(e,"dateFormat");a.match(/[DM]/)&&(t=function(e){for(i=0,n=0,s=0;s<e.length;s++)e[s].length>i&&(i=e[s].length,n=s);return n},o.setMonth(t(this._get(e,a.match(/MM/)?"monthNames":"monthNamesShort"))),o.setDate(t(this._get(e,a.match(/DD/)?"dayNames":"dayNamesShort"))+20-o.getDay())),e.input.attr("size",this._formatDate(e,o).length)}},_inlineDatepicker:function(t,i){var n=e(t);n.hasClass(this.markerClassName)||(n.addClass(this.markerClassName).append(i.dpDiv),e.data(t,a,i),this._setDate(i,this._getDefaultDate(i),!0),this._updateDatepicker(i),this._updateAlternate(i),i.settings.disabled&&this._disableDatepicker(t),i.dpDiv.css("display","block"))},_dialogDatepicker:function(t,i,n,o,r){var l,c,h,d,u,p=this._dialogInst;return p||(this.uuid+=1,l="dp"+this.uuid,this._dialogInput=e("<input type='text' id='"+l+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.keydown(this._doKeyDown),e("body").append(this._dialogInput),p=this._dialogInst=this._newInst(this._dialogInput,!1),p.settings={},e.data(this._dialogInput[0],a,p)),s(p.settings,o||{}),i=i&&i.constructor===Date?this._formatDate(p,i):i,this._dialogInput.val(i),this._pos=r?r.length?r:[r.pageX,r.pageY]:null,this._pos||(c=document.documentElement.clientWidth,h=document.documentElement.clientHeight,d=document.documentElement.scrollLeft||document.body.scrollLeft,u=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[c/2-100+d,h/2-150+u]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),p.settings.onSelect=n,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),e.blockUI&&e.blockUI(this.dpDiv),e.data(this._dialogInput[0],a,p),this},_destroyDatepicker:function(t){var i,n=e(t),s=e.data(t,a);n.hasClass(this.markerClassName)&&(i=t.nodeName.toLowerCase(),e.removeData(t,a),"input"===i?(s.append.remove(),s.trigger.remove(),n.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):("div"===i||"span"===i)&&n.removeClass(this.markerClassName).empty())},_enableDatepicker:function(t){var i,n,s=e(t),o=e.data(t,a);s.hasClass(this.markerClassName)&&(i=t.nodeName.toLowerCase(),"input"===i?(t.disabled=!1,o.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):("div"===i||"span"===i)&&(n=s.children("."+this._inlineClass),n.children().removeClass("ui-state-disabled"),n.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=e.map(this._disabledInputs,function(e){return e===t?null:e}))},_disableDatepicker:function(t){var i,n,s=e(t),o=e.data(t,a);s.hasClass(this.markerClassName)&&(i=t.nodeName.toLowerCase(),"input"===i?(t.disabled=!0,o.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):("div"===i||"span"===i)&&(n=s.children("."+this._inlineClass),n.children().addClass("ui-state-disabled"),n.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=e.map(this._disabledInputs,function(e){return e===t?null:e}),this._disabledInputs[this._disabledInputs.length]=t)},_isDisabledDatepicker:function(e){if(!e)return!1;for(var t=0;t<this._disabledInputs.length;t++)if(this._disabledInputs[t]===e)return!0;return!1},_getInst:function(t){try{return e.data(t,a)}catch(i){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(i,n,o){var a,r,l,c,h=this._getInst(i);return 2===arguments.length&&"string"==typeof n?"defaults"===n?e.extend({},e.datepicker._defaults):h?"all"===n?e.extend({},h.settings):this._get(h,n):null:(a=n||{},"string"==typeof n&&(a={},a[n]=o),void(h&&(this._curInst===h&&this._hideDatepicker(),r=this._getDateDatepicker(i,!0),l=this._getMinMaxDate(h,"min"),c=this._getMinMaxDate(h,"max"),s(h.settings,a),null!==l&&a.dateFormat!==t&&a.minDate===t&&(h.settings.minDate=this._formatDate(h,l)),null!==c&&a.dateFormat!==t&&a.maxDate===t&&(h.settings.maxDate=this._formatDate(h,c)),"disabled"in a&&(a.disabled?this._disableDatepicker(i):this._enableDatepicker(i)),this._attachments(e(i),h),this._autoSize(h),this._setDate(h,r),
this._updateAlternate(h),this._updateDatepicker(h))))},_changeDatepicker:function(e,t,i){this._optionDatepicker(e,t,i)},_refreshDatepicker:function(e){var t=this._getInst(e);t&&this._updateDatepicker(t)},_setDateDatepicker:function(e,t){var i=this._getInst(e);i&&(this._setDate(i,t),this._updateDatepicker(i),this._updateAlternate(i))},_getDateDatepicker:function(e,t){var i=this._getInst(e);return i&&!i.inline&&this._setDateFromField(i,t),i?this._getDate(i):null},_doKeyDown:function(t){var i,n,s,o=e.datepicker._getInst(t.target),a=!0,r=o.dpDiv.is(".ui-datepicker-rtl");if(o._keyEvent=!0,e.datepicker._datepickerShowing)switch(t.keyCode){case 9:e.datepicker._hideDatepicker(),a=!1;break;case 13:return s=e("td."+e.datepicker._dayOverClass+":not(."+e.datepicker._currentClass+")",o.dpDiv),s[0]&&e.datepicker._selectDay(t.target,o.selectedMonth,o.selectedYear,s[0]),i=e.datepicker._get(o,"onSelect"),i?(n=e.datepicker._formatDate(o),i.apply(o.input?o.input[0]:null,[n,o])):e.datepicker._hideDatepicker(),!1;case 27:e.datepicker._hideDatepicker();break;case 33:e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(o,"stepBigMonths"):-e.datepicker._get(o,"stepMonths"),"M");break;case 34:e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(o,"stepBigMonths"):+e.datepicker._get(o,"stepMonths"),"M");break;case 35:(t.ctrlKey||t.metaKey)&&e.datepicker._clearDate(t.target),a=t.ctrlKey||t.metaKey;break;case 36:(t.ctrlKey||t.metaKey)&&e.datepicker._gotoToday(t.target),a=t.ctrlKey||t.metaKey;break;case 37:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,r?1:-1,"D"),a=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(o,"stepBigMonths"):-e.datepicker._get(o,"stepMonths"),"M");break;case 38:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,-7,"D"),a=t.ctrlKey||t.metaKey;break;case 39:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,r?-1:1,"D"),a=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(o,"stepBigMonths"):+e.datepicker._get(o,"stepMonths"),"M");break;case 40:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,7,"D"),a=t.ctrlKey||t.metaKey;break;default:a=!1}else 36===t.keyCode&&t.ctrlKey?e.datepicker._showDatepicker(this):a=!1;a&&(t.preventDefault(),t.stopPropagation())},_doKeyPress:function(t){var i,n,s=e.datepicker._getInst(t.target);return e.datepicker._get(s,"constrainInput")?(i=e.datepicker._possibleChars(e.datepicker._get(s,"dateFormat")),n=String.fromCharCode(null==t.charCode?t.keyCode:t.charCode),t.ctrlKey||t.metaKey||" ">n||!i||i.indexOf(n)>-1):void 0},_doKeyUp:function(t){var i,n=e.datepicker._getInst(t.target);if(n.input.val()!==n.lastVal)try{i=e.datepicker.parseDate(e.datepicker._get(n,"dateFormat"),n.input?n.input.val():null,e.datepicker._getFormatConfig(n)),i&&(e.datepicker._setDateFromField(n),e.datepicker._updateAlternate(n),e.datepicker._updateDatepicker(n))}catch(s){}return!0},_showDatepicker:function(t){if(t=t.target||t,"input"!==t.nodeName.toLowerCase()&&(t=e("input",t.parentNode)[0]),!e.datepicker._isDisabledDatepicker(t)&&e.datepicker._lastInput!==t){var i,n,o,a,r,l,c;i=e.datepicker._getInst(t),e.datepicker._curInst&&e.datepicker._curInst!==i&&(e.datepicker._curInst.dpDiv.stop(!0,!0),i&&e.datepicker._datepickerShowing&&e.datepicker._hideDatepicker(e.datepicker._curInst.input[0])),n=e.datepicker._get(i,"beforeShow"),o=n?n.apply(t,[t,i]):{},o!==!1&&(s(i.settings,o),i.lastVal=null,e.datepicker._lastInput=t,e.datepicker._setDateFromField(i),e.datepicker._inDialog&&(t.value=""),e.datepicker._pos||(e.datepicker._pos=e.datepicker._findPos(t),e.datepicker._pos[1]+=t.offsetHeight),a=!1,e(t).parents().each(function(){return a|="fixed"===e(this).css("position"),!a}),r={left:e.datepicker._pos[0],top:e.datepicker._pos[1]},e.datepicker._pos=null,i.dpDiv.empty(),i.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),e.datepicker._updateDatepicker(i),r=e.datepicker._checkOffset(i,r,a),i.dpDiv.css({position:e.datepicker._inDialog&&e.blockUI?"static":a?"fixed":"absolute",display:"none",left:r.left+"px",top:r.top+"px"}),i.inline||(l=e.datepicker._get(i,"showAnim"),c=e.datepicker._get(i,"duration"),i.dpDiv.zIndex(e(t).zIndex()+1),e.datepicker._datepickerShowing=!0,e.effects&&e.effects.effect[l]?i.dpDiv.show(l,e.datepicker._get(i,"showOptions"),c):i.dpDiv[l||"show"](l?c:null),e.datepicker._shouldFocusInput(i)&&i.input.focus(),e.datepicker._curInst=i))}},_updateDatepicker:function(t){this.maxRows=4,o=t,t.dpDiv.empty().append(this._generateHTML(t)),this._attachHandlers(t),t.dpDiv.find("."+this._dayOverClass+" a").mouseover();var i,n=this._getNumberOfMonths(t),s=n[1],a=17;t.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),s>1&&t.dpDiv.addClass("ui-datepicker-multi-"+s).css("width",a*s+"em"),t.dpDiv[(1!==n[0]||1!==n[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),t.dpDiv[(this._get(t,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),t===e.datepicker._curInst&&e.datepicker._datepickerShowing&&e.datepicker._shouldFocusInput(t)&&t.input.focus(),t.yearshtml&&(i=t.yearshtml,setTimeout(function(){i===t.yearshtml&&t.yearshtml&&t.dpDiv.find("select.ui-datepicker-year:first").replaceWith(t.yearshtml),i=t.yearshtml=null},0))},_shouldFocusInput:function(e){return e.input&&e.input.is(":visible")&&!e.input.is(":disabled")&&!e.input.is(":focus")},_checkOffset:function(t,i,n){var s=t.dpDiv.outerWidth(),o=t.dpDiv.outerHeight(),a=t.input?t.input.outerWidth():0,r=t.input?t.input.outerHeight():0,l=document.documentElement.clientWidth+(n?0:e(document).scrollLeft()),c=document.documentElement.clientHeight+(n?0:e(document).scrollTop());return i.left-=this._get(t,"isRTL")?s-a:0,i.left-=n&&i.left===t.input.offset().left?e(document).scrollLeft():0,i.top-=n&&i.top===t.input.offset().top+r?e(document).scrollTop():0,i.left-=Math.min(i.left,i.left+s>l&&l>s?Math.abs(i.left+s-l):0),i.top-=Math.min(i.top,i.top+o>c&&c>o?Math.abs(o+r):0),i},_findPos:function(t){for(var i,n=this._getInst(t),s=this._get(n,"isRTL");t&&("hidden"===t.type||1!==t.nodeType||e.expr.filters.hidden(t));)t=t[s?"previousSibling":"nextSibling"];return i=e(t).offset(),[i.left,i.top]},_hideDatepicker:function(t){var i,n,s,o,r=this._curInst;!r||t&&r!==e.data(t,a)||this._datepickerShowing&&(i=this._get(r,"showAnim"),n=this._get(r,"duration"),s=function(){e.datepicker._tidyDialog(r)},e.effects&&(e.effects.effect[i]||e.effects[i])?r.dpDiv.hide(i,e.datepicker._get(r,"showOptions"),n,s):r.dpDiv["slideDown"===i?"slideUp":"fadeIn"===i?"fadeOut":"hide"](i?n:null,s),i||s(),this._datepickerShowing=!1,o=this._get(r,"onClose"),o&&o.apply(r.input?r.input[0]:null,[r.input?r.input.val():"",r]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),e.blockUI&&(e.unblockUI(),e("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(e){e.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(t){if(e.datepicker._curInst){var i=e(t.target),n=e.datepicker._getInst(i[0]);(i[0].id!==e.datepicker._mainDivId&&0===i.parents("#"+e.datepicker._mainDivId).length&&!i.hasClass(e.datepicker.markerClassName)&&!i.closest("."+e.datepicker._triggerClass).length&&e.datepicker._datepickerShowing&&(!e.datepicker._inDialog||!e.blockUI)||i.hasClass(e.datepicker.markerClassName)&&e.datepicker._curInst!==n)&&e.datepicker._hideDatepicker()}},_adjustDate:function(t,i,n){var s=e(t),o=this._getInst(s[0]);this._isDisabledDatepicker(s[0])||(this._adjustInstDate(o,i+("M"===n?this._get(o,"showCurrentAtPos"):0),n),this._updateDatepicker(o))},_gotoToday:function(t){var i,n=e(t),s=this._getInst(n[0]);this._get(s,"gotoCurrent")&&s.currentDay?(s.selectedDay=s.currentDay,s.drawMonth=s.selectedMonth=s.currentMonth,s.drawYear=s.selectedYear=s.currentYear):(i=new Date,s.selectedDay=i.getDate(),s.drawMonth=s.selectedMonth=i.getMonth(),s.drawYear=s.selectedYear=i.getFullYear()),this._notifyChange(s),this._adjustDate(n)},_selectMonthYear:function(t,i,n){var s=e(t),o=this._getInst(s[0]);o["selected"+("M"===n?"Month":"Year")]=o["draw"+("M"===n?"Month":"Year")]=parseInt(i.options[i.selectedIndex].value,10),this._notifyChange(o),this._adjustDate(s)},_selectDay:function(t,i,n,s){var o,a=e(t);e(s).hasClass(this._unselectableClass)||this._isDisabledDatepicker(a[0])||(o=this._getInst(a[0]),o.selectedDay=o.currentDay=e("a",s).html(),o.selectedMonth=o.currentMonth=i,o.selectedYear=o.currentYear=n,this._selectDate(t,this._formatDate(o,o.currentDay,o.currentMonth,o.currentYear)))},_clearDate:function(t){var i=e(t);this._selectDate(i,"")},_selectDate:function(t,i){var n,s=e(t),o=this._getInst(s[0]);i=null!=i?i:this._formatDate(o),o.input&&o.input.val(i),this._updateAlternate(o),n=this._get(o,"onSelect"),n?n.apply(o.input?o.input[0]:null,[i,o]):o.input&&o.input.trigger("change"),o.inline?this._updateDatepicker(o):(this._hideDatepicker(),this._lastInput=o.input[0],"object"!=typeof o.input[0]&&o.input.focus(),this._lastInput=null)},_updateAlternate:function(t){var i,n,s,o=this._get(t,"altField");o&&(i=this._get(t,"altFormat")||this._get(t,"dateFormat"),n=this._getDate(t),s=this.formatDate(i,n,this._getFormatConfig(t)),e(o).each(function(){e(this).val(s)}))},noWeekends:function(e){var t=e.getDay();return[t>0&&6>t,""]},iso8601Week:function(e){var t,i=new Date(e.getTime());return i.setDate(i.getDate()+4-(i.getDay()||7)),t=i.getTime(),i.setMonth(0),i.setDate(1),Math.floor(Math.round((t-i)/864e5)/7)+1},parseDate:function(t,i,n){if(null==t||null==i)throw"Invalid arguments";if(i="object"==typeof i?i.toString():i+"",""===i)return null;var s,o,a,r,l=0,c=(n?n.shortYearCutoff:null)||this._defaults.shortYearCutoff,h="string"!=typeof c?c:(new Date).getFullYear()%100+parseInt(c,10),d=(n?n.dayNamesShort:null)||this._defaults.dayNamesShort,u=(n?n.dayNames:null)||this._defaults.dayNames,p=(n?n.monthNamesShort:null)||this._defaults.monthNamesShort,m=(n?n.monthNames:null)||this._defaults.monthNames,f=-1,g=-1,v=-1,b=-1,y=!1,w=function(e){var i=s+1<t.length&&t.charAt(s+1)===e;return i&&s++,i},_=function(e){var t=w(e),n="@"===e?14:"!"===e?20:"y"===e&&t?4:"o"===e?3:2,s=new RegExp("^\\d{1,"+n+"}"),o=i.substring(l).match(s);if(!o)throw"Missing number at position "+l;return l+=o[0].length,parseInt(o[0],10)},k=function(t,n,s){var o=-1,a=e.map(w(t)?s:n,function(e,t){return[[t,e]]}).sort(function(e,t){return-(e[1].length-t[1].length)});if(e.each(a,function(e,t){var n=t[1];return i.substr(l,n.length).toLowerCase()===n.toLowerCase()?(o=t[0],l+=n.length,!1):void 0}),-1!==o)return o+1;throw"Unknown name at position "+l},I=function(){if(i.charAt(l)!==t.charAt(s))throw"Unexpected literal at position "+l;l++};for(s=0;s<t.length;s++)if(y)"'"!==t.charAt(s)||w("'")?I():y=!1;else switch(t.charAt(s)){case"d":v=_("d");break;case"D":k("D",d,u);break;case"o":b=_("o");break;case"m":g=_("m");break;case"M":g=k("M",p,m);break;case"y":f=_("y");break;case"@":r=new Date(_("@")),f=r.getFullYear(),g=r.getMonth()+1,v=r.getDate();break;case"!":r=new Date((_("!")-this._ticksTo1970)/1e4),f=r.getFullYear(),g=r.getMonth()+1,v=r.getDate();break;case"'":w("'")?I():y=!0;break;default:I()}if(l<i.length&&(a=i.substr(l),!/^\s+/.test(a)))throw"Extra/unparsed characters found in date: "+a;if(-1===f?f=(new Date).getFullYear():100>f&&(f+=(new Date).getFullYear()-(new Date).getFullYear()%100+(h>=f?0:-100)),b>-1)for(g=1,v=b;;){if(o=this._getDaysInMonth(f,g-1),o>=v)break;g++,v-=o}if(r=this._daylightSavingAdjust(new Date(f,g-1,v)),r.getFullYear()!==f||r.getMonth()+1!==g||r.getDate()!==v)throw"Invalid date";return r},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*60*60*1e7,formatDate:function(e,t,i){if(!t)return"";var n,s=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,o=(i?i.dayNames:null)||this._defaults.dayNames,a=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,r=(i?i.monthNames:null)||this._defaults.monthNames,l=function(t){var i=n+1<e.length&&e.charAt(n+1)===t;return i&&n++,i},c=function(e,t,i){var n=""+t;if(l(e))for(;n.length<i;)n="0"+n;return n},h=function(e,t,i,n){return l(e)?n[t]:i[t]},d="",u=!1;if(t)for(n=0;n<e.length;n++)if(u)"'"!==e.charAt(n)||l("'")?d+=e.charAt(n):u=!1;else switch(e.charAt(n)){case"d":d+=c("d",t.getDate(),2);break;case"D":d+=h("D",t.getDay(),s,o);break;case"o":d+=c("o",Math.round((new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime()-new Date(t.getFullYear(),0,0).getTime())/864e5),3);break;case"m":d+=c("m",t.getMonth()+1,2);break;case"M":d+=h("M",t.getMonth(),a,r);break;case"y":d+=l("y")?t.getFullYear():(t.getYear()%100<10?"0":"")+t.getYear()%100;break;case"@":d+=t.getTime();break;case"!":d+=1e4*t.getTime()+this._ticksTo1970;break;case"'":l("'")?d+="'":u=!0;break;default:d+=e.charAt(n)}return d},_possibleChars:function(e){var t,i="",n=!1,s=function(i){var n=t+1<e.length&&e.charAt(t+1)===i;return n&&t++,n};for(t=0;t<e.length;t++)if(n)"'"!==e.charAt(t)||s("'")?i+=e.charAt(t):n=!1;else switch(e.charAt(t)){case"d":case"m":case"y":case"@":i+="0123456789";break;case"D":case"M":return null;case"'":s("'")?i+="'":n=!0;break;default:i+=e.charAt(t)}return i},_get:function(e,i){return e.settings[i]!==t?e.settings[i]:this._defaults[i]},_setDateFromField:function(e,t){if(e.input.val()!==e.lastVal){var i=this._get(e,"dateFormat"),n=e.lastVal=e.input?e.input.val():null,s=this._getDefaultDate(e),o=s,a=this._getFormatConfig(e);try{o=this.parseDate(i,n,a)||s}catch(r){n=t?"":n}e.selectedDay=o.getDate(),e.drawMonth=e.selectedMonth=o.getMonth(),e.drawYear=e.selectedYear=o.getFullYear(),e.currentDay=n?o.getDate():0,e.currentMonth=n?o.getMonth():0,e.currentYear=n?o.getFullYear():0,this._adjustInstDate(e)}},_getDefaultDate:function(e){return this._restrictMinMax(e,this._determineDate(e,this._get(e,"defaultDate"),new Date))},_determineDate:function(t,i,n){var s=function(e){var t=new Date;return t.setDate(t.getDate()+e),t},o=function(i){try{return e.datepicker.parseDate(e.datepicker._get(t,"dateFormat"),i,e.datepicker._getFormatConfig(t))}catch(n){}for(var s=(i.toLowerCase().match(/^c/)?e.datepicker._getDate(t):null)||new Date,o=s.getFullYear(),a=s.getMonth(),r=s.getDate(),l=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,c=l.exec(i);c;){switch(c[2]||"d"){case"d":case"D":r+=parseInt(c[1],10);break;case"w":case"W":r+=7*parseInt(c[1],10);break;case"m":case"M":a+=parseInt(c[1],10),r=Math.min(r,e.datepicker._getDaysInMonth(o,a));break;case"y":case"Y":o+=parseInt(c[1],10),r=Math.min(r,e.datepicker._getDaysInMonth(o,a))}c=l.exec(i)}return new Date(o,a,r)},a=null==i||""===i?n:"string"==typeof i?o(i):"number"==typeof i?isNaN(i)?n:s(i):new Date(i.getTime());return a=a&&"Invalid Date"===a.toString()?n:a,a&&(a.setHours(0),a.setMinutes(0),a.setSeconds(0),a.setMilliseconds(0)),this._daylightSavingAdjust(a)},_daylightSavingAdjust:function(e){return e?(e.setHours(e.getHours()>12?e.getHours()+2:0),e):null},_setDate:function(e,t,i){var n=!t,s=e.selectedMonth,o=e.selectedYear,a=this._restrictMinMax(e,this._determineDate(e,t,new Date));e.selectedDay=e.currentDay=a.getDate(),e.drawMonth=e.selectedMonth=e.currentMonth=a.getMonth(),e.drawYear=e.selectedYear=e.currentYear=a.getFullYear(),s===e.selectedMonth&&o===e.selectedYear||i||this._notifyChange(e),this._adjustInstDate(e),e.input&&e.input.val(n?"":this._formatDate(e))},_getDate:function(e){var t=!e.currentYear||e.input&&""===e.input.val()?null:this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return t},_attachHandlers:function(t){var i=this._get(t,"stepMonths"),n="#"+t.id.replace(/\\\\/g,"\\");t.dpDiv.find("[data-handler]").map(function(){var t={prev:function(){e.datepicker._adjustDate(n,-i,"M")},next:function(){e.datepicker._adjustDate(n,+i,"M")},hide:function(){e.datepicker._hideDatepicker()},today:function(){e.datepicker._gotoToday(n)},selectDay:function(){return e.datepicker._selectDay(n,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return e.datepicker._selectMonthYear(n,this,"M"),!1},selectYear:function(){return e.datepicker._selectMonthYear(n,this,"Y"),!1}};e(this).bind(this.getAttribute("data-event"),t[this.getAttribute("data-handler")])})},_generateHTML:function(e){var t,i,n,s,o,a,r,l,c,h,d,u,p,m,f,g,v,b,y,w,_,k,I,C,$,x,S,T,A,M,P,E,N,D,R,O,L,B,F,U=new Date,z=this._daylightSavingAdjust(new Date(U.getFullYear(),U.getMonth(),U.getDate())),H=this._get(e,"isRTL"),j=this._get(e,"showButtonPanel"),V=this._get(e,"hideIfNoPrevNext"),W=this._get(e,"navigationAsDateFormat"),q=this._getNumberOfMonths(e),G=this._get(e,"showCurrentAtPos"),Y=this._get(e,"stepMonths"),K=1!==q[0]||1!==q[1],X=this._daylightSavingAdjust(e.currentDay?new Date(e.currentYear,e.currentMonth,e.currentDay):new Date(9999,9,9)),Q=this._getMinMaxDate(e,"min"),J=this._getMinMaxDate(e,"max"),Z=e.drawMonth-G,ee=e.drawYear;if(0>Z&&(Z+=12,ee--),J)for(t=this._daylightSavingAdjust(new Date(J.getFullYear(),J.getMonth()-q[0]*q[1]+1,J.getDate())),t=Q&&Q>t?Q:t;this._daylightSavingAdjust(new Date(ee,Z,1))>t;)Z--,0>Z&&(Z=11,ee--);for(e.drawMonth=Z,e.drawYear=ee,i=this._get(e,"prevText"),i=W?this.formatDate(i,this._daylightSavingAdjust(new Date(ee,Z-Y,1)),this._getFormatConfig(e)):i,n=this._canAdjustMonth(e,-1,ee,Z)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(H?"e":"w")+"'>"+i+"</span></a>":V?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(H?"e":"w")+"'>"+i+"</span></a>",s=this._get(e,"nextText"),s=W?this.formatDate(s,this._daylightSavingAdjust(new Date(ee,Z+Y,1)),this._getFormatConfig(e)):s,o=this._canAdjustMonth(e,1,ee,Z)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+s+"'><span class='ui-icon ui-icon-circle-triangle-"+(H?"w":"e")+"'>"+s+"</span></a>":V?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+s+"'><span class='ui-icon ui-icon-circle-triangle-"+(H?"w":"e")+"'>"+s+"</span></a>",a=this._get(e,"currentText"),r=this._get(e,"gotoCurrent")&&e.currentDay?X:z,a=W?this.formatDate(a,r,this._getFormatConfig(e)):a,l=e.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(e,"closeText")+"</button>",c=j?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(H?l:"")+(this._isInRange(e,r)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+a+"</button>":"")+(H?"":l)+"</div>":"",h=parseInt(this._get(e,"firstDay"),10),h=isNaN(h)?0:h,d=this._get(e,"showWeek"),u=this._get(e,"dayNames"),p=this._get(e,"dayNamesMin"),m=this._get(e,"monthNames"),f=this._get(e,"monthNamesShort"),g=this._get(e,"beforeShowDay"),v=this._get(e,"showOtherMonths"),b=this._get(e,"selectOtherMonths"),y=this._getDefaultDate(e),w="",k=0;k<q[0];k++){for(I="",this.maxRows=4,C=0;C<q[1];C++){if($=this._daylightSavingAdjust(new Date(ee,Z,e.selectedDay)),x=" ui-corner-all",S="",K){if(S+="<div class='ui-datepicker-group",q[1]>1)switch(C){case 0:S+=" ui-datepicker-group-first",x=" ui-corner-"+(H?"right":"left");break;case q[1]-1:S+=" ui-datepicker-group-last",x=" ui-corner-"+(H?"left":"right");break;default:S+=" ui-datepicker-group-middle",x=""}S+="'>"}for(S+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+x+"'>"+(/all|left/.test(x)&&0===k?H?o:n:"")+(/all|right/.test(x)&&0===k?H?n:o:"")+this._generateMonthYearHeader(e,Z,ee,Q,J,k>0||C>0,m,f)+"</div><table class='ui-datepicker-calendar'><thead><tr>",T=d?"<th class='ui-datepicker-week-col'>"+this._get(e,"weekHeader")+"</th>":"",_=0;7>_;_++)A=(_+h)%7,T+="<th"+((_+h+6)%7>=5?" class='ui-datepicker-week-end'":"")+"><span title='"+u[A]+"'>"+p[A]+"</span></th>";for(S+=T+"</tr></thead><tbody>",M=this._getDaysInMonth(ee,Z),ee===e.selectedYear&&Z===e.selectedMonth&&(e.selectedDay=Math.min(e.selectedDay,M)),P=(this._getFirstDayOfMonth(ee,Z)-h+7)%7,E=Math.ceil((P+M)/7),N=K&&this.maxRows>E?this.maxRows:E,this.maxRows=N,D=this._daylightSavingAdjust(new Date(ee,Z,1-P)),R=0;N>R;R++){for(S+="<tr>",O=d?"<td class='ui-datepicker-week-col'>"+this._get(e,"calculateWeek")(D)+"</td>":"",_=0;7>_;_++)L=g?g.apply(e.input?e.input[0]:null,[D]):[!0,""],B=D.getMonth()!==Z,F=B&&!b||!L[0]||Q&&Q>D||J&&D>J,O+="<td class='"+((_+h+6)%7>=5?" ui-datepicker-week-end":"")+(B?" ui-datepicker-other-month":"")+(D.getTime()===$.getTime()&&Z===e.selectedMonth&&e._keyEvent||y.getTime()===D.getTime()&&y.getTime()===$.getTime()?" "+this._dayOverClass:"")+(F?" "+this._unselectableClass+" ui-state-disabled":"")+(B&&!v?"":" "+L[1]+(D.getTime()===X.getTime()?" "+this._currentClass:"")+(D.getTime()===z.getTime()?" ui-datepicker-today":""))+"'"+(B&&!v||!L[2]?"":" title='"+L[2].replace(/'/g,"&#39;")+"'")+(F?"":" data-handler='selectDay' data-event='click' data-month='"+D.getMonth()+"' data-year='"+D.getFullYear()+"'")+">"+(B&&!v?"&#xa0;":F?"<span class='ui-state-default'>"+D.getDate()+"</span>":"<a class='ui-state-default"+(D.getTime()===z.getTime()?" ui-state-highlight":"")+(D.getTime()===X.getTime()?" ui-state-active":"")+(B?" ui-priority-secondary":"")+"' href='#'>"+D.getDate()+"</a>")+"</td>",D.setDate(D.getDate()+1),D=this._daylightSavingAdjust(D);S+=O+"</tr>"}Z++,Z>11&&(Z=0,ee++),S+="</tbody></table>"+(K?"</div>"+(q[0]>0&&C===q[1]-1?"<div class='ui-datepicker-row-break'></div>":""):""),I+=S}w+=I}return w+=c,e._keyEvent=!1,w},_generateMonthYearHeader:function(e,t,i,n,s,o,a,r){var l,c,h,d,u,p,m,f,g=this._get(e,"changeMonth"),v=this._get(e,"changeYear"),b=this._get(e,"showMonthAfterYear"),y="<div class='ui-datepicker-title'>",w="";if(o||!g)w+="<span class='ui-datepicker-month'>"+a[t]+"</span>";else{for(l=n&&n.getFullYear()===i,c=s&&s.getFullYear()===i,w+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",h=0;12>h;h++)(!l||h>=n.getMonth())&&(!c||h<=s.getMonth())&&(w+="<option value='"+h+"'"+(h===t?" selected='selected'":"")+">"+r[h]+"</option>");w+="</select>"}if(b||(y+=w+(!o&&g&&v?"":"&#xa0;")),!e.yearshtml)if(e.yearshtml="",o||!v)y+="<span class='ui-datepicker-year'>"+i+"</span>";else{for(d=this._get(e,"yearRange").split(":"),u=(new Date).getFullYear(),p=function(e){var t=e.match(/c[+\-].*/)?i+parseInt(e.substring(1),10):e.match(/[+\-].*/)?u+parseInt(e,10):parseInt(e,10);return isNaN(t)?u:t},m=p(d[0]),f=Math.max(m,p(d[1]||"")),m=n?Math.max(m,n.getFullYear()):m,f=s?Math.min(f,s.getFullYear()):f,e.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";f>=m;m++)e.yearshtml+="<option value='"+m+"'"+(m===i?" selected='selected'":"")+">"+m+"</option>";e.yearshtml+="</select>",y+=e.yearshtml,e.yearshtml=null}return y+=this._get(e,"yearSuffix"),b&&(y+=(!o&&g&&v?"":"&#xa0;")+w),y+="</div>"},_adjustInstDate:function(e,t,i){var n=e.drawYear+("Y"===i?t:0),s=e.drawMonth+("M"===i?t:0),o=Math.min(e.selectedDay,this._getDaysInMonth(n,s))+("D"===i?t:0),a=this._restrictMinMax(e,this._daylightSavingAdjust(new Date(n,s,o)));e.selectedDay=a.getDate(),e.drawMonth=e.selectedMonth=a.getMonth(),e.drawYear=e.selectedYear=a.getFullYear(),("M"===i||"Y"===i)&&this._notifyChange(e)},_restrictMinMax:function(e,t){var i=this._getMinMaxDate(e,"min"),n=this._getMinMaxDate(e,"max"),s=i&&i>t?i:t;return n&&s>n?n:s},_notifyChange:function(e){var t=this._get(e,"onChangeMonthYear");t&&t.apply(e.input?e.input[0]:null,[e.selectedYear,e.selectedMonth+1,e])},_getNumberOfMonths:function(e){var t=this._get(e,"numberOfMonths");return null==t?[1,1]:"number"==typeof t?[1,t]:t},_getMinMaxDate:function(e,t){return this._determineDate(e,this._get(e,t+"Date"),null)},_getDaysInMonth:function(e,t){return 32-this._daylightSavingAdjust(new Date(e,t,32)).getDate()},_getFirstDayOfMonth:function(e,t){return new Date(e,t,1).getDay()},_canAdjustMonth:function(e,t,i,n){var s=this._getNumberOfMonths(e),o=this._daylightSavingAdjust(new Date(i,n+(0>t?t:s[0]*s[1]),1));return 0>t&&o.setDate(this._getDaysInMonth(o.getFullYear(),o.getMonth())),this._isInRange(e,o)},_isInRange:function(e,t){var i,n,s=this._getMinMaxDate(e,"min"),o=this._getMinMaxDate(e,"max"),a=null,r=null,l=this._get(e,"yearRange");return l&&(i=l.split(":"),n=(new Date).getFullYear(),a=parseInt(i[0],10),r=parseInt(i[1],10),i[0].match(/[+\-].*/)&&(a+=n),i[1].match(/[+\-].*/)&&(r+=n)),(!s||t.getTime()>=s.getTime())&&(!o||t.getTime()<=o.getTime())&&(!a||t.getFullYear()>=a)&&(!r||t.getFullYear()<=r)},_getFormatConfig:function(e){var t=this._get(e,"shortYearCutoff");return t="string"!=typeof t?t:(new Date).getFullYear()%100+parseInt(t,10),{shortYearCutoff:t,dayNamesShort:this._get(e,"dayNamesShort"),dayNames:this._get(e,"dayNames"),monthNamesShort:this._get(e,"monthNamesShort"),monthNames:this._get(e,"monthNames")}},_formatDate:function(e,t,i,n){t||(e.currentDay=e.selectedDay,e.currentMonth=e.selectedMonth,e.currentYear=e.selectedYear);var s=t?"object"==typeof t?t:this._daylightSavingAdjust(new Date(n,i,t)):this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return this.formatDate(this._get(e,"dateFormat"),s,this._getFormatConfig(e))}}),e.fn.datepicker=function(t){if(!this.length)return this;e.datepicker.initialized||(e(document).mousedown(e.datepicker._checkExternalClick),e.datepicker.initialized=!0),0===e("#"+e.datepicker._mainDivId).length&&e("body").append(e.datepicker.dpDiv);var i=Array.prototype.slice.call(arguments,1);return"string"!=typeof t||"isDisabled"!==t&&"getDate"!==t&&"widget"!==t?"option"===t&&2===arguments.length&&"string"==typeof arguments[1]?e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(i)):this.each(function(){"string"==typeof t?e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this].concat(i)):e.datepicker._attachDatepicker(this,t)}):e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(i))},e.datepicker=new i,e.datepicker.initialized=!1,e.datepicker.uuid=(new Date).getTime(),e.datepicker.version="1.10.3"}(jQuery),function(e,t){var i={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},n={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0};e.widget("ui.dialog",{version:"1.10.3",options:{appendTo:"body",autoOpen:!0,buttons:[],closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(t){var i=e(this).css(t).offset().top;0>i&&e(this).css("top",t.top-i)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),this.options.title=this.options.title||this.originalTitle,this._createWrapper(),this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(this.uiDialog),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&e.fn.draggable&&this._makeDraggable(),this.options.resizable&&e.fn.resizable&&this._makeResizable(),this._isOpen=!1},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var t=this.options.appendTo;return t&&(t.jquery||t.nodeType)?e(t):this.document.find(t||"body").eq(0)},_destroy:function(){var e,t=this.originalPosition;this._destroyOverlay(),this.element.removeUniqueId().removeClass("ui-dialog-content ui-widget-content").css(this.originalCss).detach(),this.uiDialog.stop(!0,!0).remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),e=t.parent.children().eq(t.index),e.length&&e[0]!==this.element[0]?e.before(this.element):t.parent.append(this.element)},widget:function(){return this.uiDialog},disable:e.noop,enable:e.noop,close:function(t){var i=this;this._isOpen&&this._trigger("beforeClose",t)!==!1&&(this._isOpen=!1,this._destroyOverlay(),this.opener.filter(":focusable").focus().length||e(this.document[0].activeElement).blur(),this._hide(this.uiDialog,this.options.hide,function(){i._trigger("close",t)}))},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(e,t){var i=!!this.uiDialog.nextAll(":visible").insertBefore(this.uiDialog).length;return i&&!t&&this._trigger("focus",e),i},open:function(){var t=this;return this._isOpen?void(this._moveToTop()&&this._focusTabbable()):(this._isOpen=!0,this.opener=e(this.document[0].activeElement),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this._show(this.uiDialog,this.options.show,function(){t._focusTabbable(),t._trigger("focus")}),void this._trigger("open"))},_focusTabbable:function(){var e=this.element.find("[autofocus]");e.length||(e=this.element.find(":tabbable")),e.length||(e=this.uiDialogButtonPane.find(":tabbable")),e.length||(e=this.uiDialogTitlebarClose.filter(":tabbable")),e.length||(e=this.uiDialog),e.eq(0).focus()},_keepFocus:function(t){function i(){var t=this.document[0].activeElement,i=this.uiDialog[0]===t||e.contains(this.uiDialog[0],t);i||this._focusTabbable()}t.preventDefault(),i.call(this),this._delay(i)},_createWrapper:function(){this.uiDialog=e("<div>").addClass("ui-dialog ui-widget ui-widget-content ui-corner-all ui-front "+this.options.dialogClass).hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._on(this.uiDialog,{keydown:function(t){if(this.options.closeOnEscape&&!t.isDefaultPrevented()&&t.keyCode&&t.keyCode===e.ui.keyCode.ESCAPE)return t.preventDefault(),void this.close(t);if(t.keyCode===e.ui.keyCode.TAB){var i=this.uiDialog.find(":tabbable"),n=i.filter(":first"),s=i.filter(":last");t.target!==s[0]&&t.target!==this.uiDialog[0]||t.shiftKey?t.target!==n[0]&&t.target!==this.uiDialog[0]||!t.shiftKey||(s.focus(1),t.preventDefault()):(n.focus(1),t.preventDefault())}},mousedown:function(e){this._moveToTop(e)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var t;this.uiDialogTitlebar=e("<div>").addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(this.uiDialog),this._on(this.uiDialogTitlebar,{mousedown:function(t){e(t.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.focus()}}),this.uiDialogTitlebarClose=e("<button></button>").button({label:this.options.closeText,icons:{primary:"ui-icon-closethick"},text:!1}).addClass("ui-dialog-titlebar-close").appendTo(this.uiDialogTitlebar),this._on(this.uiDialogTitlebarClose,{click:function(e){e.preventDefault(),this.close(e)}}),t=e("<span>").uniqueId().addClass("ui-dialog-title").prependTo(this.uiDialogTitlebar),this._title(t),this.uiDialog.attr({"aria-labelledby":t.attr("id")})},_title:function(e){this.options.title||e.html("&#160;"),e.text(this.options.title)},_createButtonPane:function(){this.uiDialogButtonPane=e("<div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),this.uiButtonSet=e("<div>").addClass("ui-dialog-buttonset").appendTo(this.uiDialogButtonPane),this._createButtons()},_createButtons:function(){var t=this,i=this.options.buttons;return this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),e.isEmptyObject(i)||e.isArray(i)&&!i.length?void this.uiDialog.removeClass("ui-dialog-buttons"):(e.each(i,function(i,n){
var s,o;n=e.isFunction(n)?{click:n,text:i}:n,n=e.extend({type:"button"},n),s=n.click,n.click=function(){s.apply(t.element[0],arguments)},o={icons:n.icons,text:n.showText},delete n.icons,delete n.showText,e("<button></button>",n).button(o).appendTo(t.uiButtonSet)}),this.uiDialog.addClass("ui-dialog-buttons"),void this.uiDialogButtonPane.appendTo(this.uiDialog))},_makeDraggable:function(){function t(e){return{position:e.position,offset:e.offset}}var i=this,n=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(n,s){e(this).addClass("ui-dialog-dragging"),i._blockFrames(),i._trigger("dragStart",n,t(s))},drag:function(e,n){i._trigger("drag",e,t(n))},stop:function(s,o){n.position=[o.position.left-i.document.scrollLeft(),o.position.top-i.document.scrollTop()],e(this).removeClass("ui-dialog-dragging"),i._unblockFrames(),i._trigger("dragStop",s,t(o))}})},_makeResizable:function(){function t(e){return{originalPosition:e.originalPosition,originalSize:e.originalSize,position:e.position,size:e.size}}var i=this,n=this.options,s=n.resizable,o=this.uiDialog.css("position"),a="string"==typeof s?s:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:n.maxWidth,maxHeight:n.maxHeight,minWidth:n.minWidth,minHeight:this._minHeight(),handles:a,start:function(n,s){e(this).addClass("ui-dialog-resizing"),i._blockFrames(),i._trigger("resizeStart",n,t(s))},resize:function(e,n){i._trigger("resize",e,t(n))},stop:function(s,o){n.height=e(this).height(),n.width=e(this).width(),e(this).removeClass("ui-dialog-resizing"),i._unblockFrames(),i._trigger("resizeStop",s,t(o))}}).css("position",o)},_minHeight:function(){var e=this.options;return"auto"===e.height?e.minHeight:Math.min(e.minHeight,e.height)},_position:function(){var e=this.uiDialog.is(":visible");e||this.uiDialog.show(),this.uiDialog.position(this.options.position),e||this.uiDialog.hide()},_setOptions:function(t){var s=this,o=!1,a={};e.each(t,function(e,t){s._setOption(e,t),e in i&&(o=!0),e in n&&(a[e]=t)}),o&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",a)},_setOption:function(e,t){var i,n,s=this.uiDialog;"dialogClass"===e&&s.removeClass(this.options.dialogClass).addClass(t),"disabled"!==e&&(this._super(e,t),"appendTo"===e&&this.uiDialog.appendTo(this._appendTo()),"buttons"===e&&this._createButtons(),"closeText"===e&&this.uiDialogTitlebarClose.button({label:""+t}),"draggable"===e&&(i=s.is(":data(ui-draggable)"),i&&!t&&s.draggable("destroy"),!i&&t&&this._makeDraggable()),"position"===e&&this._position(),"resizable"===e&&(n=s.is(":data(ui-resizable)"),n&&!t&&s.resizable("destroy"),n&&"string"==typeof t&&s.resizable("option","handles",t),n||t===!1||this._makeResizable()),"title"===e&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var e,t,i,n=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),n.minWidth>n.width&&(n.width=n.minWidth),e=this.uiDialog.css({height:"auto",width:n.width}).outerHeight(),t=Math.max(0,n.minHeight-e),i="number"==typeof n.maxHeight?Math.max(0,n.maxHeight-e):"none","auto"===n.height?this.element.css({minHeight:t,maxHeight:i,height:"auto"}):this.element.height(Math.max(0,n.height-e)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var t=e(this);return e("<div>").css({position:"absolute",width:t.outerWidth(),height:t.outerHeight()}).appendTo(t.parent()).offset(t.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(t){return e(t.target).closest(".ui-dialog").length?!0:!!e(t.target).closest(".ui-datepicker").length},_createOverlay:function(){if(this.options.modal){var t=this,i=this.widgetFullName;e.ui.dialog.overlayInstances||this._delay(function(){e.ui.dialog.overlayInstances&&this.document.bind("focusin.dialog",function(n){t._allowInteraction(n)||(n.preventDefault(),e(".ui-dialog:visible:last .ui-dialog-content").data(i)._focusTabbable())})}),this.overlay=e("<div>").addClass("ui-widget-overlay ui-front").appendTo(this._appendTo()),this._on(this.overlay,{mousedown:"_keepFocus"}),e.ui.dialog.overlayInstances++}},_destroyOverlay:function(){this.options.modal&&this.overlay&&(e.ui.dialog.overlayInstances--,e.ui.dialog.overlayInstances||this.document.unbind("focusin.dialog"),this.overlay.remove(),this.overlay=null)}}),e.ui.dialog.overlayInstances=0,e.uiBackCompat!==!1&&e.widget("ui.dialog",e.ui.dialog,{_position:function(){var t,i=this.options.position,n=[],s=[0,0];i?(("string"==typeof i||"object"==typeof i&&"0"in i)&&(n=i.split?i.split(" "):[i[0],i[1]],1===n.length&&(n[1]=n[0]),e.each(["left","top"],function(e,t){+n[e]===n[e]&&(s[e]=n[e],n[e]=t)}),i={my:n[0]+(s[0]<0?s[0]:"+"+s[0])+" "+n[1]+(s[1]<0?s[1]:"+"+s[1]),at:n.join(" ")}),i=e.extend({},e.ui.dialog.prototype.options.position,i)):i=e.ui.dialog.prototype.options.position,t=this.uiDialog.is(":visible"),t||this.uiDialog.show(),this.uiDialog.position(i),t||this.uiDialog.hide()}})}(jQuery),function(e,t){var i=/up|down|vertical/,n=/up|left|vertical|horizontal/;e.effects.effect.blind=function(t,s){var o,a,r,l=e(this),c=["position","top","bottom","left","right","height","width"],h=e.effects.setMode(l,t.mode||"hide"),d=t.direction||"up",u=i.test(d),p=u?"height":"width",m=u?"top":"left",f=n.test(d),g={},v="show"===h;l.parent().is(".ui-effects-wrapper")?e.effects.save(l.parent(),c):e.effects.save(l,c),l.show(),o=e.effects.createWrapper(l).css({overflow:"hidden"}),a=o[p](),r=parseFloat(o.css(m))||0,g[p]=v?a:0,f||(l.css(u?"bottom":"right",0).css(u?"top":"left","auto").css({position:"absolute"}),g[m]=v?r:a+r),v&&(o.css(p,0),f||o.css(m,r+a)),o.animate(g,{duration:t.duration,easing:t.easing,queue:!1,complete:function(){"hide"===h&&l.hide(),e.effects.restore(l,c),e.effects.removeWrapper(l),s()}})}}(jQuery),function(e,t){e.effects.effect.bounce=function(t,i){var n,s,o,a=e(this),r=["position","top","bottom","left","right","height","width"],l=e.effects.setMode(a,t.mode||"effect"),c="hide"===l,h="show"===l,d=t.direction||"up",u=t.distance,p=t.times||5,m=2*p+(h||c?1:0),f=t.duration/m,g=t.easing,v="up"===d||"down"===d?"top":"left",b="up"===d||"left"===d,y=a.queue(),w=y.length;for((h||c)&&r.push("opacity"),e.effects.save(a,r),a.show(),e.effects.createWrapper(a),u||(u=a["top"===v?"outerHeight":"outerWidth"]()/3),h&&(o={opacity:1},o[v]=0,a.css("opacity",0).css(v,b?2*-u:2*u).animate(o,f,g)),c&&(u/=Math.pow(2,p-1)),o={},o[v]=0,n=0;p>n;n++)s={},s[v]=(b?"-=":"+=")+u,a.animate(s,f,g).animate(o,f,g),u=c?2*u:u/2;c&&(s={opacity:0},s[v]=(b?"-=":"+=")+u,a.animate(s,f,g)),a.queue(function(){c&&a.hide(),e.effects.restore(a,r),e.effects.removeWrapper(a),i()}),w>1&&y.splice.apply(y,[1,0].concat(y.splice(w,m+1))),a.dequeue()}}(jQuery),function(e,t){e.effects.effect.clip=function(t,i){var n,s,o,a=e(this),r=["position","top","bottom","left","right","height","width"],l=e.effects.setMode(a,t.mode||"hide"),c="show"===l,h=t.direction||"vertical",d="vertical"===h,u=d?"height":"width",p=d?"top":"left",m={};e.effects.save(a,r),a.show(),n=e.effects.createWrapper(a).css({overflow:"hidden"}),s="IMG"===a[0].tagName?n:a,o=s[u](),c&&(s.css(u,0),s.css(p,o/2)),m[u]=c?o:0,m[p]=c?0:o/2,s.animate(m,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){c||a.hide(),e.effects.restore(a,r),e.effects.removeWrapper(a),i()}})}}(jQuery),function(e,t){e.effects.effect.drop=function(t,i){var n,s=e(this),o=["position","top","bottom","left","right","opacity","height","width"],a=e.effects.setMode(s,t.mode||"hide"),r="show"===a,l=t.direction||"left",c="up"===l||"down"===l?"top":"left",h="up"===l||"left"===l?"pos":"neg",d={opacity:r?1:0};e.effects.save(s,o),s.show(),e.effects.createWrapper(s),n=t.distance||s["top"===c?"outerHeight":"outerWidth"](!0)/2,r&&s.css("opacity",0).css(c,"pos"===h?-n:n),d[c]=(r?"pos"===h?"+=":"-=":"pos"===h?"-=":"+=")+n,s.animate(d,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){"hide"===a&&s.hide(),e.effects.restore(s,o),e.effects.removeWrapper(s),i()}})}}(jQuery),function(e,t){e.effects.effect.explode=function(t,i){function n(){y.push(this),y.length===d*u&&s()}function s(){p.css({visibility:"visible"}),e(y).remove(),f||p.hide(),i()}var o,a,r,l,c,h,d=t.pieces?Math.round(Math.sqrt(t.pieces)):3,u=d,p=e(this),m=e.effects.setMode(p,t.mode||"hide"),f="show"===m,g=p.show().css("visibility","hidden").offset(),v=Math.ceil(p.outerWidth()/u),b=Math.ceil(p.outerHeight()/d),y=[];for(o=0;d>o;o++)for(l=g.top+o*b,h=o-(d-1)/2,a=0;u>a;a++)r=g.left+a*v,c=a-(u-1)/2,p.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-a*v,top:-o*b}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:v,height:b,left:r+(f?c*v:0),top:l+(f?h*b:0),opacity:f?0:1}).animate({left:r+(f?0:c*v),top:l+(f?0:h*b),opacity:f?1:0},t.duration||500,t.easing,n)}}(jQuery),function(e,t){e.effects.effect.fade=function(t,i){var n=e(this),s=e.effects.setMode(n,t.mode||"toggle");n.animate({opacity:s},{queue:!1,duration:t.duration,easing:t.easing,complete:i})}}(jQuery),function(e,t){e.effects.effect.fold=function(t,i){var n,s,o=e(this),a=["position","top","bottom","left","right","height","width"],r=e.effects.setMode(o,t.mode||"hide"),l="show"===r,c="hide"===r,h=t.size||15,d=/([0-9]+)%/.exec(h),u=!!t.horizFirst,p=l!==u,m=p?["width","height"]:["height","width"],f=t.duration/2,g={},v={};e.effects.save(o,a),o.show(),n=e.effects.createWrapper(o).css({overflow:"hidden"}),s=p?[n.width(),n.height()]:[n.height(),n.width()],d&&(h=parseInt(d[1],10)/100*s[c?0:1]),l&&n.css(u?{height:0,width:h}:{height:h,width:0}),g[m[0]]=l?s[0]:h,v[m[1]]=l?s[1]:0,n.animate(g,f,t.easing).animate(v,f,t.easing,function(){c&&o.hide(),e.effects.restore(o,a),e.effects.removeWrapper(o),i()})}}(jQuery),function(e,t){e.effects.effect.highlight=function(t,i){var n=e(this),s=["backgroundImage","backgroundColor","opacity"],o=e.effects.setMode(n,t.mode||"show"),a={backgroundColor:n.css("backgroundColor")};"hide"===o&&(a.opacity=0),e.effects.save(n,s),n.show().css({backgroundImage:"none",backgroundColor:t.color||"#ffff99"}).animate(a,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){"hide"===o&&n.hide(),e.effects.restore(n,s),i()}})}}(jQuery),function(e,t){e.effects.effect.pulsate=function(t,i){var n,s=e(this),o=e.effects.setMode(s,t.mode||"show"),a="show"===o,r="hide"===o,l=a||"hide"===o,c=2*(t.times||5)+(l?1:0),h=t.duration/c,d=0,u=s.queue(),p=u.length;for((a||!s.is(":visible"))&&(s.css("opacity",0).show(),d=1),n=1;c>n;n++)s.animate({opacity:d},h,t.easing),d=1-d;s.animate({opacity:d},h,t.easing),s.queue(function(){r&&s.hide(),i()}),p>1&&u.splice.apply(u,[1,0].concat(u.splice(p,c+1))),s.dequeue()}}(jQuery),function(e,t){e.effects.effect.puff=function(t,i){var n=e(this),s=e.effects.setMode(n,t.mode||"hide"),o="hide"===s,a=parseInt(t.percent,10)||150,r=a/100,l={height:n.height(),width:n.width(),outerHeight:n.outerHeight(),outerWidth:n.outerWidth()};e.extend(t,{effect:"scale",queue:!1,fade:!0,mode:s,complete:i,percent:o?a:100,from:o?l:{height:l.height*r,width:l.width*r,outerHeight:l.outerHeight*r,outerWidth:l.outerWidth*r}}),n.effect(t)},e.effects.effect.scale=function(t,i){var n=e(this),s=e.extend(!0,{},t),o=e.effects.setMode(n,t.mode||"effect"),a=parseInt(t.percent,10)||(0===parseInt(t.percent,10)?0:"hide"===o?0:100),r=t.direction||"both",l=t.origin,c={height:n.height(),width:n.width(),outerHeight:n.outerHeight(),outerWidth:n.outerWidth()},h={y:"horizontal"!==r?a/100:1,x:"vertical"!==r?a/100:1};s.effect="size",s.queue=!1,s.complete=i,"effect"!==o&&(s.origin=l||["middle","center"],s.restore=!0),s.from=t.from||("show"===o?{height:0,width:0,outerHeight:0,outerWidth:0}:c),s.to={height:c.height*h.y,width:c.width*h.x,outerHeight:c.outerHeight*h.y,outerWidth:c.outerWidth*h.x},s.fade&&("show"===o&&(s.from.opacity=0,s.to.opacity=1),"hide"===o&&(s.from.opacity=1,s.to.opacity=0)),n.effect(s)},e.effects.effect.size=function(t,i){var n,s,o,a=e(this),r=["position","top","bottom","left","right","width","height","overflow","opacity"],l=["position","top","bottom","left","right","overflow","opacity"],c=["width","height","overflow"],h=["fontSize"],d=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],u=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],p=e.effects.setMode(a,t.mode||"effect"),m=t.restore||"effect"!==p,f=t.scale||"both",g=t.origin||["middle","center"],v=a.css("position"),b=m?r:l,y={height:0,width:0,outerHeight:0,outerWidth:0};"show"===p&&a.show(),n={height:a.height(),width:a.width(),outerHeight:a.outerHeight(),outerWidth:a.outerWidth()},"toggle"===t.mode&&"show"===p?(a.from=t.to||y,a.to=t.from||n):(a.from=t.from||("show"===p?y:n),a.to=t.to||("hide"===p?y:n)),o={from:{y:a.from.height/n.height,x:a.from.width/n.width},to:{y:a.to.height/n.height,x:a.to.width/n.width}},("box"===f||"both"===f)&&(o.from.y!==o.to.y&&(b=b.concat(d),a.from=e.effects.setTransition(a,d,o.from.y,a.from),a.to=e.effects.setTransition(a,d,o.to.y,a.to)),o.from.x!==o.to.x&&(b=b.concat(u),a.from=e.effects.setTransition(a,u,o.from.x,a.from),a.to=e.effects.setTransition(a,u,o.to.x,a.to))),("content"===f||"both"===f)&&o.from.y!==o.to.y&&(b=b.concat(h).concat(c),a.from=e.effects.setTransition(a,h,o.from.y,a.from),a.to=e.effects.setTransition(a,h,o.to.y,a.to)),e.effects.save(a,b),a.show(),e.effects.createWrapper(a),a.css("overflow","hidden").css(a.from),g&&(s=e.effects.getBaseline(g,n),a.from.top=(n.outerHeight-a.outerHeight())*s.y,a.from.left=(n.outerWidth-a.outerWidth())*s.x,a.to.top=(n.outerHeight-a.to.outerHeight)*s.y,a.to.left=(n.outerWidth-a.to.outerWidth)*s.x),a.css(a.from),("content"===f||"both"===f)&&(d=d.concat(["marginTop","marginBottom"]).concat(h),u=u.concat(["marginLeft","marginRight"]),c=r.concat(d).concat(u),a.find("*[width]").each(function(){var i=e(this),n={height:i.height(),width:i.width(),outerHeight:i.outerHeight(),outerWidth:i.outerWidth()};m&&e.effects.save(i,c),i.from={height:n.height*o.from.y,width:n.width*o.from.x,outerHeight:n.outerHeight*o.from.y,outerWidth:n.outerWidth*o.from.x},i.to={height:n.height*o.to.y,width:n.width*o.to.x,outerHeight:n.height*o.to.y,outerWidth:n.width*o.to.x},o.from.y!==o.to.y&&(i.from=e.effects.setTransition(i,d,o.from.y,i.from),i.to=e.effects.setTransition(i,d,o.to.y,i.to)),o.from.x!==o.to.x&&(i.from=e.effects.setTransition(i,u,o.from.x,i.from),i.to=e.effects.setTransition(i,u,o.to.x,i.to)),i.css(i.from),i.animate(i.to,t.duration,t.easing,function(){m&&e.effects.restore(i,c)})})),a.animate(a.to,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){0===a.to.opacity&&a.css("opacity",a.from.opacity),"hide"===p&&a.hide(),e.effects.restore(a,b),m||("static"===v?a.css({position:"relative",top:a.to.top,left:a.to.left}):e.each(["top","left"],function(e,t){a.css(t,function(t,i){var n=parseInt(i,10),s=e?a.to.left:a.to.top;return"auto"===i?s+"px":n+s+"px"})})),e.effects.removeWrapper(a),i()}})}}(jQuery),function(e,t){e.effects.effect.shake=function(t,i){var n,s=e(this),o=["position","top","bottom","left","right","height","width"],a=e.effects.setMode(s,t.mode||"effect"),r=t.direction||"left",l=t.distance||20,c=t.times||3,h=2*c+1,d=Math.round(t.duration/h),u="up"===r||"down"===r?"top":"left",p="up"===r||"left"===r,m={},f={},g={},v=s.queue(),b=v.length;for(e.effects.save(s,o),s.show(),e.effects.createWrapper(s),m[u]=(p?"-=":"+=")+l,f[u]=(p?"+=":"-=")+2*l,g[u]=(p?"-=":"+=")+2*l,s.animate(m,d,t.easing),n=1;c>n;n++)s.animate(f,d,t.easing).animate(g,d,t.easing);s.animate(f,d,t.easing).animate(m,d/2,t.easing).queue(function(){"hide"===a&&s.hide(),e.effects.restore(s,o),e.effects.removeWrapper(s),i()}),b>1&&v.splice.apply(v,[1,0].concat(v.splice(b,h+1))),s.dequeue()}}(jQuery),function(e,t){e.effects.effect.slide=function(t,i){var n,s=e(this),o=["position","top","bottom","left","right","width","height"],a=e.effects.setMode(s,t.mode||"show"),r="show"===a,l=t.direction||"left",c="up"===l||"down"===l?"top":"left",h="up"===l||"left"===l,d={};e.effects.save(s,o),s.show(),n=t.distance||s["top"===c?"outerHeight":"outerWidth"](!0),e.effects.createWrapper(s).css({overflow:"hidden"}),r&&s.css(c,h?isNaN(n)?"-"+n:-n:n),d[c]=(r?h?"+=":"-=":h?"-=":"+=")+n,s.animate(d,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){"hide"===a&&s.hide(),e.effects.restore(s,o),e.effects.removeWrapper(s),i()}})}}(jQuery),function(e,t){e.effects.effect.transfer=function(t,i){var n=e(this),s=e(t.to),o="fixed"===s.css("position"),a=e("body"),r=o?a.scrollTop():0,l=o?a.scrollLeft():0,c=s.offset(),h={top:c.top-r,left:c.left-l,height:s.innerHeight(),width:s.innerWidth()},d=n.offset(),u=e("<div class='ui-effects-transfer'></div>").appendTo(document.body).addClass(t.className).css({top:d.top-r,left:d.left-l,height:n.innerHeight(),width:n.innerWidth(),position:o?"fixed":"absolute"}).animate(h,t.duration,t.easing,function(){u.remove(),i()})}}(jQuery),function(e,t){e.widget("ui.menu",{version:"1.10.3",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content ui-corner-all").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}).bind("click"+this.eventNamespace,e.proxy(function(e){this.options.disabled&&e.preventDefault()},this)),this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true"),this._on({"mousedown .ui-menu-item > a":function(e){e.preventDefault()},"click .ui-state-disabled > a":function(e){e.preventDefault()},"click .ui-menu-item:has(a)":function(t){var i=e(t.target).closest(".ui-menu-item");!this.mouseHandled&&i.not(".ui-state-disabled").length&&(this.mouseHandled=!0,this.select(t),i.has(".ui-menu").length?this.expand(t):this.element.is(":focus")||(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(t){var i=e(t.currentTarget);i.siblings().children(".ui-state-active").removeClass("ui-state-active"),this.focus(t,i)},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(e,t){var i=this.active||this.element.children(".ui-menu-item").eq(0);t||this.focus(e,i)},blur:function(t){this._delay(function(){e.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(t)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(t){e(t.target).closest(".ui-menu").length||this.collapseAll(t),this.mouseHandled=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").children("a").removeUniqueId().removeClass("ui-corner-all ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var t=e(this);t.data("ui-menu-submenu-carat")&&t.remove()}),this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(t){function i(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}var n,s,o,a,r,l=!0;switch(t.keyCode){case e.ui.keyCode.PAGE_UP:this.previousPage(t);break;case e.ui.keyCode.PAGE_DOWN:this.nextPage(t);break;case e.ui.keyCode.HOME:this._move("first","first",t);break;case e.ui.keyCode.END:this._move("last","last",t);break;case e.ui.keyCode.UP:this.previous(t);break;case e.ui.keyCode.DOWN:this.next(t);break;case e.ui.keyCode.LEFT:this.collapse(t);break;case e.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(t);break;case e.ui.keyCode.ENTER:case e.ui.keyCode.SPACE:this._activate(t);break;case e.ui.keyCode.ESCAPE:this.collapse(t);break;default:l=!1,s=this.previousFilter||"",o=String.fromCharCode(t.keyCode),a=!1,clearTimeout(this.filterTimer),o===s?a=!0:o=s+o,r=new RegExp("^"+i(o),"i"),n=this.activeMenu.children(".ui-menu-item").filter(function(){return r.test(e(this).children("a").text())}),n=a&&-1!==n.index(this.active.next())?this.active.nextAll(".ui-menu-item"):n,n.length||(o=String.fromCharCode(t.keyCode),r=new RegExp("^"+i(o),"i"),n=this.activeMenu.children(".ui-menu-item").filter(function(){return r.test(e(this).children("a").text())})),n.length?(this.focus(t,n),n.length>1?(this.previousFilter=o,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter):delete this.previousFilter}l&&t.preventDefault()},_activate:function(e){this.active.is(".ui-state-disabled")||(this.active.children("a[aria-haspopup='true']").length?this.expand(e):this.select(e))},refresh:function(){var t,i=this.options.icons.submenu,n=this.element.find(this.options.menus);n.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-corner-all").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var t=e(this),n=t.prev("a"),s=e("<span>").addClass("ui-menu-icon ui-icon "+i).data("ui-menu-submenu-carat",!0);n.attr("aria-haspopup","true").prepend(s),t.attr("aria-labelledby",n.attr("id"))}),t=n.add(this.element),t.children(":not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","presentation").children("a").uniqueId().addClass("ui-corner-all").attr({tabIndex:-1,role:this._itemRole()}),t.children(":not(.ui-menu-item)").each(function(){var t=e(this);/[^\-\u2014\u2013\s]/.test(t.text())||t.addClass("ui-widget-content ui-menu-divider")}),t.children(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!e.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(e,t){"icons"===e&&this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(t.submenu),this._super(e,t)},focus:function(e,t){var i,n;this.blur(e,e&&"focus"===e.type),this._scrollIntoView(t),this.active=t.first(),n=this.active.children("a").addClass("ui-state-focus"),this.options.role&&this.element.attr("aria-activedescendant",n.attr("id")),this.active.parent().closest(".ui-menu-item").children("a:first").addClass("ui-state-active"),e&&"keydown"===e.type?this._close():this.timer=this._delay(function(){this._close()},this.delay),i=t.children(".ui-menu"),i.length&&/^mouse/.test(e.type)&&this._startOpening(i),this.activeMenu=t.parent(),this._trigger("focus",e,{item:t})},_scrollIntoView:function(t){var i,n,s,o,a,r;this._hasScroll()&&(i=parseFloat(e.css(this.activeMenu[0],"borderTopWidth"))||0,n=parseFloat(e.css(this.activeMenu[0],"paddingTop"))||0,s=t.offset().top-this.activeMenu.offset().top-i-n,o=this.activeMenu.scrollTop(),a=this.activeMenu.height(),r=t.height(),0>s?this.activeMenu.scrollTop(o+s):s+r>a&&this.activeMenu.scrollTop(o+s-a+r))},blur:function(e,t){t||clearTimeout(this.timer),this.active&&(this.active.children("a").removeClass("ui-state-focus"),this.active=null,this._trigger("blur",e,{item:this.active}))},_startOpening:function(e){clearTimeout(this.timer),"true"===e.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close(),this._open(e)},this.delay))},_open:function(t){var i=e.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(t.parents(".ui-menu")).hide().attr("aria-hidden","true"),t.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(i)},collapseAll:function(t,i){clearTimeout(this.timer),this.timer=this._delay(function(){var n=i?this.element:e(t&&t.target).closest(this.element.find(".ui-menu"));n.length||(n=this.element),this._close(n),this.blur(t),this.activeMenu=n},this.delay)},_close:function(e){e||(e=this.active?this.active.parent():this.element),e.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find("a.ui-state-active").removeClass("ui-state-active")},collapse:function(e){var t=this.active&&this.active.parent().closest(".ui-menu-item",this.element);t&&t.length&&(this._close(),this.focus(e,t))},expand:function(e){var t=this.active&&this.active.children(".ui-menu ").children(".ui-menu-item").first();t&&t.length&&(this._open(t.parent()),this._delay(function(){this.focus(e,t)}))},next:function(e){this._move("next","first",e)},previous:function(e){this._move("prev","last",e)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(e,t,i){var n;this.active&&(n="first"===e||"last"===e?this.active["first"===e?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[e+"All"](".ui-menu-item").eq(0)),n&&n.length&&this.active||(n=this.activeMenu.children(".ui-menu-item")[t]()),this.focus(i,n)},nextPage:function(t){var i,n,s;return this.active?void(this.isLastItem()||(this._hasScroll()?(n=this.active.offset().top,s=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return i=e(this),i.offset().top-n-s<0}),this.focus(t,i)):this.focus(t,this.activeMenu.children(".ui-menu-item")[this.active?"last":"first"]()))):void this.next(t)},previousPage:function(t){var i,n,s;return this.active?void(this.isFirstItem()||(this._hasScroll()?(n=this.active.offset().top,s=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return i=e(this),i.offset().top-n+s>0}),this.focus(t,i)):this.focus(t,this.activeMenu.children(".ui-menu-item").first()))):void this.next(t)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(t){this.active=this.active||e(t.target).closest(".ui-menu-item");var i={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(t,!0),this._trigger("select",t,i)}})}(jQuery),function(e,t){function i(e,t,i){return[parseFloat(e[0])*(p.test(e[0])?t/100:1),parseFloat(e[1])*(p.test(e[1])?i/100:1)]}function n(t,i){return parseInt(e.css(t,i),10)||0}function s(t){var i=t[0];return 9===i.nodeType?{width:t.width(),height:t.height(),offset:{top:0,left:0}}:e.isWindow(i)?{width:t.width(),height:t.height(),offset:{top:t.scrollTop(),left:t.scrollLeft()}}:i.preventDefault?{width:0,height:0,offset:{top:i.pageY,left:i.pageX}}:{width:t.outerWidth(),height:t.outerHeight(),offset:t.offset()}}e.ui=e.ui||{};var o,a=Math.max,r=Math.abs,l=Math.round,c=/left|center|right/,h=/top|center|bottom/,d=/[\+\-]\d+(\.[\d]+)?%?/,u=/^\w+/,p=/%$/,m=e.fn.position;e.position={scrollbarWidth:function(){if(o!==t)return o;var i,n,s=e("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),a=s.children()[0];return e("body").append(s),i=a.offsetWidth,s.css("overflow","scroll"),n=a.offsetWidth,i===n&&(n=s[0].clientWidth),s.remove(),o=i-n},getScrollInfo:function(t){var i=t.isWindow?"":t.element.css("overflow-x"),n=t.isWindow?"":t.element.css("overflow-y"),s="scroll"===i||"auto"===i&&t.width<t.element[0].scrollWidth,o="scroll"===n||"auto"===n&&t.height<t.element[0].scrollHeight;return{width:o?e.position.scrollbarWidth():0,height:s?e.position.scrollbarWidth():0}},getWithinInfo:function(t){var i=e(t||window),n=e.isWindow(i[0]);return{element:i,isWindow:n,offset:i.offset()||{left:0,top:0},scrollLeft:i.scrollLeft(),scrollTop:i.scrollTop(),width:n?i.width():i.outerWidth(),height:n?i.height():i.outerHeight()}}},e.fn.position=function(t){if(!t||!t.of)return m.apply(this,arguments);t=e.extend({},t);var o,p,f,g,v,b,y=e(t.of),w=e.position.getWithinInfo(t.within),_=e.position.getScrollInfo(w),k=(t.collision||"flip").split(" "),I={};return b=s(y),y[0].preventDefault&&(t.at="left top"),p=b.width,f=b.height,g=b.offset,v=e.extend({},g),e.each(["my","at"],function(){var e,i,n=(t[this]||"").split(" ");1===n.length&&(n=c.test(n[0])?n.concat(["center"]):h.test(n[0])?["center"].concat(n):["center","center"]),n[0]=c.test(n[0])?n[0]:"center",n[1]=h.test(n[1])?n[1]:"center",e=d.exec(n[0]),i=d.exec(n[1]),I[this]=[e?e[0]:0,i?i[0]:0],t[this]=[u.exec(n[0])[0],u.exec(n[1])[0]]}),1===k.length&&(k[1]=k[0]),"right"===t.at[0]?v.left+=p:"center"===t.at[0]&&(v.left+=p/2),"bottom"===t.at[1]?v.top+=f:"center"===t.at[1]&&(v.top+=f/2),o=i(I.at,p,f),v.left+=o[0],v.top+=o[1],this.each(function(){var s,c,h=e(this),d=h.outerWidth(),u=h.outerHeight(),m=n(this,"marginLeft"),b=n(this,"marginTop"),C=d+m+n(this,"marginRight")+_.width,$=u+b+n(this,"marginBottom")+_.height,x=e.extend({},v),S=i(I.my,h.outerWidth(),h.outerHeight());"right"===t.my[0]?x.left-=d:"center"===t.my[0]&&(x.left-=d/2),"bottom"===t.my[1]?x.top-=u:"center"===t.my[1]&&(x.top-=u/2),x.left+=S[0],x.top+=S[1],e.support.offsetFractions||(x.left=l(x.left),x.top=l(x.top)),s={marginLeft:m,marginTop:b},e.each(["left","top"],function(i,n){e.ui.position[k[i]]&&e.ui.position[k[i]][n](x,{targetWidth:p,targetHeight:f,elemWidth:d,elemHeight:u,collisionPosition:s,collisionWidth:C,collisionHeight:$,offset:[o[0]+S[0],o[1]+S[1]],my:t.my,at:t.at,within:w,elem:h})}),t.using&&(c=function(e){var i=g.left-x.left,n=i+p-d,s=g.top-x.top,o=s+f-u,l={target:{element:y,left:g.left,top:g.top,width:p,height:f},element:{element:h,left:x.left,top:x.top,width:d,height:u},horizontal:0>n?"left":i>0?"right":"center",vertical:0>o?"top":s>0?"bottom":"middle"};d>p&&r(i+n)<p&&(l.horizontal="center"),u>f&&r(s+o)<f&&(l.vertical="middle"),a(r(i),r(n))>a(r(s),r(o))?l.important="horizontal":l.important="vertical",t.using.call(this,e,l)}),h.offset(e.extend(x,{using:c}))})},e.ui.position={fit:{left:function(e,t){var i,n=t.within,s=n.isWindow?n.scrollLeft:n.offset.left,o=n.width,r=e.left-t.collisionPosition.marginLeft,l=s-r,c=r+t.collisionWidth-o-s;t.collisionWidth>o?l>0&&0>=c?(i=e.left+l+t.collisionWidth-o-s,e.left+=l-i):c>0&&0>=l?e.left=s:l>c?e.left=s+o-t.collisionWidth:e.left=s:l>0?e.left+=l:c>0?e.left-=c:e.left=a(e.left-r,e.left)},top:function(e,t){var i,n=t.within,s=n.isWindow?n.scrollTop:n.offset.top,o=t.within.height,r=e.top-t.collisionPosition.marginTop,l=s-r,c=r+t.collisionHeight-o-s;t.collisionHeight>o?l>0&&0>=c?(i=e.top+l+t.collisionHeight-o-s,e.top+=l-i):c>0&&0>=l?e.top=s:l>c?e.top=s+o-t.collisionHeight:e.top=s:l>0?e.top+=l:c>0?e.top-=c:e.top=a(e.top-r,e.top)}},flip:{left:function(e,t){var i,n,s=t.within,o=s.offset.left+s.scrollLeft,a=s.width,l=s.isWindow?s.scrollLeft:s.offset.left,c=e.left-t.collisionPosition.marginLeft,h=c-l,d=c+t.collisionWidth-a-l,u="left"===t.my[0]?-t.elemWidth:"right"===t.my[0]?t.elemWidth:0,p="left"===t.at[0]?t.targetWidth:"right"===t.at[0]?-t.targetWidth:0,m=-2*t.offset[0];0>h?(i=e.left+u+p+m+t.collisionWidth-a-o,(0>i||i<r(h))&&(e.left+=u+p+m)):d>0&&(n=e.left-t.collisionPosition.marginLeft+u+p+m-l,(n>0||r(n)<d)&&(e.left+=u+p+m))},top:function(e,t){var i,n,s=t.within,o=s.offset.top+s.scrollTop,a=s.height,l=s.isWindow?s.scrollTop:s.offset.top,c=e.top-t.collisionPosition.marginTop,h=c-l,d=c+t.collisionHeight-a-l,u="top"===t.my[1],p=u?-t.elemHeight:"bottom"===t.my[1]?t.elemHeight:0,m="top"===t.at[1]?t.targetHeight:"bottom"===t.at[1]?-t.targetHeight:0,f=-2*t.offset[1];0>h?(n=e.top+p+m+f+t.collisionHeight-a-o,e.top+p+m+f>h&&(0>n||n<r(h))&&(e.top+=p+m+f)):d>0&&(i=e.top-t.collisionPosition.marginTop+p+m+f-l,e.top+p+m+f>d&&(i>0||r(i)<d)&&(e.top+=p+m+f))}},flipfit:{left:function(){e.ui.position.flip.left.apply(this,arguments),e.ui.position.fit.left.apply(this,arguments)},top:function(){e.ui.position.flip.top.apply(this,arguments),
e.ui.position.fit.top.apply(this,arguments)}}},function(){var t,i,n,s,o,a=document.getElementsByTagName("body")[0],r=document.createElement("div");t=document.createElement(a?"div":"body"),n={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},a&&e.extend(n,{position:"absolute",left:"-1000px",top:"-1000px"});for(o in n)t.style[o]=n[o];t.appendChild(r),i=a||document.documentElement,i.insertBefore(t,i.firstChild),r.style.cssText="position: absolute; left: 10.7432222px;",s=e(r).offset().left,e.support.offsetFractions=s>10&&11>s,t.innerHTML="",i.removeChild(t)}()}(jQuery),function(e,t){e.widget("ui.progressbar",{version:"1.10.3",options:{max:100,value:0,change:null,complete:null},min:0,_create:function(){this.oldValue=this.options.value=this._constrainedValue(),this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min}),this.valueDiv=e("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element),this._refreshValue()},_destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.valueDiv.remove()},value:function(e){return e===t?this.options.value:(this.options.value=this._constrainedValue(e),void this._refreshValue())},_constrainedValue:function(e){return e===t&&(e=this.options.value),this.indeterminate=e===!1,"number"!=typeof e&&(e=0),this.indeterminate?!1:Math.min(this.options.max,Math.max(this.min,e))},_setOptions:function(e){var t=e.value;delete e.value,this._super(e),this.options.value=this._constrainedValue(t),this._refreshValue()},_setOption:function(e,t){"max"===e&&(t=Math.max(this.min,t)),this._super(e,t)},_percentage:function(){return this.indeterminate?100:100*(this.options.value-this.min)/(this.options.max-this.min)},_refreshValue:function(){var t=this.options.value,i=this._percentage();this.valueDiv.toggle(this.indeterminate||t>this.min).toggleClass("ui-corner-right",t===this.options.max).width(i.toFixed(0)+"%"),this.element.toggleClass("ui-progressbar-indeterminate",this.indeterminate),this.indeterminate?(this.element.removeAttr("aria-valuenow"),this.overlayDiv||(this.overlayDiv=e("<div class='ui-progressbar-overlay'></div>").appendTo(this.valueDiv))):(this.element.attr({"aria-valuemax":this.options.max,"aria-valuenow":t}),this.overlayDiv&&(this.overlayDiv.remove(),this.overlayDiv=null)),this.oldValue!==t&&(this.oldValue=t,this._trigger("change")),t===this.options.max&&this._trigger("complete")}})}(jQuery),function(e,t){var i=5;e.widget("ui.slider",e.ui.mouse,{version:"1.10.3",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all"),this._refresh(),this._setOption("disabled",this.options.disabled),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var t,i,n=this.options,s=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),o="<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",a=[];for(i=n.values&&n.values.length||1,s.length>i&&(s.slice(i).remove(),s=s.slice(0,i)),t=s.length;i>t;t++)a.push(o);this.handles=s.add(e(a.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.each(function(t){e(this).data("ui-slider-handle-index",t)})},_createRange:function(){var t=this.options,i="";t.range?(t.range===!0&&(t.values?t.values.length&&2!==t.values.length?t.values=[t.values[0],t.values[0]]:e.isArray(t.values)&&(t.values=t.values.slice(0)):t.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?this.range.removeClass("ui-slider-range-min ui-slider-range-max").css({left:"",bottom:""}):(this.range=e("<div></div>").appendTo(this.element),i="ui-slider-range ui-widget-header ui-corner-all"),this.range.addClass(i+("min"===t.range||"max"===t.range?" ui-slider-range-"+t.range:""))):this.range=e([])},_setupEvents:function(){var e=this.handles.add(this.range).filter("a");this._off(e),this._on(e,this._handleEvents),this._hoverable(e),this._focusable(e)},_destroy:function(){this.handles.remove(),this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-widget ui-widget-content ui-corner-all"),this._mouseDestroy()},_mouseCapture:function(t){var i,n,s,o,a,r,l,c,h=this,d=this.options;return d.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),i={x:t.pageX,y:t.pageY},n=this._normValueFromMouse(i),s=this._valueMax()-this._valueMin()+1,this.handles.each(function(t){var i=Math.abs(n-h.values(t));(s>i||s===i&&(t===h._lastChangedValue||h.values(t)===d.min))&&(s=i,o=e(this),a=t)}),r=this._start(t,a),r===!1?!1:(this._mouseSliding=!0,this._handleIndex=a,o.addClass("ui-state-active").focus(),l=o.offset(),c=!e(t.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=c?{left:0,top:0}:{left:t.pageX-l.left-o.width()/2,top:t.pageY-l.top-o.height()/2-(parseInt(o.css("borderTopWidth"),10)||0)-(parseInt(o.css("borderBottomWidth"),10)||0)+(parseInt(o.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(t,a,n),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(e){var t={x:e.pageX,y:e.pageY},i=this._normValueFromMouse(t);return this._slide(e,this._handleIndex,i),!1},_mouseStop:function(e){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(e,this._handleIndex),this._change(e,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(e){var t,i,n,s,o;return"horizontal"===this.orientation?(t=this.elementSize.width,i=e.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(t=this.elementSize.height,i=e.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),n=i/t,n>1&&(n=1),0>n&&(n=0),"vertical"===this.orientation&&(n=1-n),s=this._valueMax()-this._valueMin(),o=this._valueMin()+n*s,this._trimAlignValue(o)},_start:function(e,t){var i={handle:this.handles[t],value:this.value()};return this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._trigger("start",e,i)},_slide:function(e,t,i){var n,s,o;this.options.values&&this.options.values.length?(n=this.values(t?0:1),2===this.options.values.length&&this.options.range===!0&&(0===t&&i>n||1===t&&n>i)&&(i=n),i!==this.values(t)&&(s=this.values(),s[t]=i,o=this._trigger("slide",e,{handle:this.handles[t],value:i,values:s}),n=this.values(t?0:1),o!==!1&&this.values(t,i,!0))):i!==this.value()&&(o=this._trigger("slide",e,{handle:this.handles[t],value:i}),o!==!1&&this.value(i))},_stop:function(e,t){var i={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._trigger("stop",e,i)},_change:function(e,t){if(!this._keySliding&&!this._mouseSliding){var i={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._lastChangedValue=t,this._trigger("change",e,i)}},value:function(e){return arguments.length?(this.options.value=this._trimAlignValue(e),this._refreshValue(),void this._change(null,0)):this._value()},values:function(t,i){var n,s,o;if(arguments.length>1)return this.options.values[t]=this._trimAlignValue(i),this._refreshValue(),void this._change(null,t);if(!arguments.length)return this._values();if(!e.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(t):this.value();for(n=this.options.values,s=arguments[0],o=0;o<n.length;o+=1)n[o]=this._trimAlignValue(s[o]),this._change(null,o);this._refreshValue()},_setOption:function(t,i){var n,s=0;switch("range"===t&&this.options.range===!0&&("min"===i?(this.options.value=this._values(0),this.options.values=null):"max"===i&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),e.isArray(this.options.values)&&(s=this.options.values.length),e.Widget.prototype._setOption.apply(this,arguments),t){case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),n=0;s>n;n+=1)this._change(null,n);this._animateOff=!1;break;case"min":case"max":this._animateOff=!0,this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_value:function(){var e=this.options.value;return e=this._trimAlignValue(e)},_values:function(e){var t,i,n;if(arguments.length)return t=this.options.values[e],t=this._trimAlignValue(t);if(this.options.values&&this.options.values.length){for(i=this.options.values.slice(),n=0;n<i.length;n+=1)i[n]=this._trimAlignValue(i[n]);return i}return[]},_trimAlignValue:function(e){if(e<=this._valueMin())return this._valueMin();if(e>=this._valueMax())return this._valueMax();var t=this.options.step>0?this.options.step:1,i=(e-this._valueMin())%t,n=e-i;return 2*Math.abs(i)>=t&&(n+=i>0?t:-t),parseFloat(n.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var t,i,n,s,o,a=this.options.range,r=this.options,l=this,c=this._animateOff?!1:r.animate,h={};this.options.values&&this.options.values.length?this.handles.each(function(n){i=(l.values(n)-l._valueMin())/(l._valueMax()-l._valueMin())*100,h["horizontal"===l.orientation?"left":"bottom"]=i+"%",e(this).stop(1,1)[c?"animate":"css"](h,r.animate),l.options.range===!0&&("horizontal"===l.orientation?(0===n&&l.range.stop(1,1)[c?"animate":"css"]({left:i+"%"},r.animate),1===n&&l.range[c?"animate":"css"]({width:i-t+"%"},{queue:!1,duration:r.animate})):(0===n&&l.range.stop(1,1)[c?"animate":"css"]({bottom:i+"%"},r.animate),1===n&&l.range[c?"animate":"css"]({height:i-t+"%"},{queue:!1,duration:r.animate}))),t=i}):(n=this.value(),s=this._valueMin(),o=this._valueMax(),i=o!==s?(n-s)/(o-s)*100:0,h["horizontal"===this.orientation?"left":"bottom"]=i+"%",this.handle.stop(1,1)[c?"animate":"css"](h,r.animate),"min"===a&&"horizontal"===this.orientation&&this.range.stop(1,1)[c?"animate":"css"]({width:i+"%"},r.animate),"max"===a&&"horizontal"===this.orientation&&this.range[c?"animate":"css"]({width:100-i+"%"},{queue:!1,duration:r.animate}),"min"===a&&"vertical"===this.orientation&&this.range.stop(1,1)[c?"animate":"css"]({height:i+"%"},r.animate),"max"===a&&"vertical"===this.orientation&&this.range[c?"animate":"css"]({height:100-i+"%"},{queue:!1,duration:r.animate}))},_handleEvents:{keydown:function(t){var n,s,o,a,r=e(t.target).data("ui-slider-handle-index");switch(t.keyCode){case e.ui.keyCode.HOME:case e.ui.keyCode.END:case e.ui.keyCode.PAGE_UP:case e.ui.keyCode.PAGE_DOWN:case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(t.preventDefault(),!this._keySliding&&(this._keySliding=!0,e(t.target).addClass("ui-state-active"),n=this._start(t,r),n===!1))return}switch(a=this.options.step,s=o=this.options.values&&this.options.values.length?this.values(r):this.value(),t.keyCode){case e.ui.keyCode.HOME:o=this._valueMin();break;case e.ui.keyCode.END:o=this._valueMax();break;case e.ui.keyCode.PAGE_UP:o=this._trimAlignValue(s+(this._valueMax()-this._valueMin())/i);break;case e.ui.keyCode.PAGE_DOWN:o=this._trimAlignValue(s-(this._valueMax()-this._valueMin())/i);break;case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:if(s===this._valueMax())return;o=this._trimAlignValue(s+a);break;case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(s===this._valueMin())return;o=this._trimAlignValue(s-a)}this._slide(t,r,o)},click:function(e){e.preventDefault()},keyup:function(t){var i=e(t.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(t,i),this._change(t,i),e(t.target).removeClass("ui-state-active"))}}})}(jQuery),function(e){function t(e){return function(){var t=this.element.val();e.apply(this,arguments),this._refresh(),t!==this.element.val()&&this._trigger("change")}}e.widget("ui.spinner",{version:"1.10.3",defaultElement:"<input>",widgetEventPrefix:"spin",options:{culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max),this._setOption("min",this.options.min),this._setOption("step",this.options.step),this._value(this.element.val(),!0),this._draw(),this._on(this._events),this._refresh(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var t={},i=this.element;return e.each(["min","max","step"],function(e,n){var s=i.attr(n);void 0!==s&&s.length&&(t[n]=s)}),t},_events:{keydown:function(e){this._start(e)&&this._keydown(e)&&e.preventDefault()},keyup:"_stop",focus:function(){this.previous=this.element.val()},blur:function(e){return this.cancelBlur?void delete this.cancelBlur:(this._stop(),this._refresh(),void(this.previous!==this.element.val()&&this._trigger("change",e)))},mousewheel:function(e,t){if(t){if(!this.spinning&&!this._start(e))return!1;this._spin((t>0?1:-1)*this.options.step,e),clearTimeout(this.mousewheelTimer),this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(e)},100),e.preventDefault()}},"mousedown .ui-spinner-button":function(t){function i(){var e=this.element[0]===this.document[0].activeElement;e||(this.element.focus(),this.previous=n,this._delay(function(){this.previous=n}))}var n;n=this.element[0]===this.document[0].activeElement?this.previous:this.element.val(),t.preventDefault(),i.call(this),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur,i.call(this)}),this._start(t)!==!1&&this._repeat(null,e(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(t){return e(t.currentTarget).hasClass("ui-state-active")?this._start(t)===!1?!1:void this._repeat(null,e(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t):void 0},"mouseleave .ui-spinner-button":"_stop"},_draw:function(){var e=this.uiSpinner=this.element.addClass("ui-spinner-input").attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml());this.element.attr("role","spinbutton"),this.buttons=e.find(".ui-spinner-button").attr("tabIndex",-1).button().removeClass("ui-corner-all"),this.buttons.height()>Math.ceil(.5*e.height())&&e.height()>0&&e.height(e.height()),this.options.disabled&&this.disable()},_keydown:function(t){var i=this.options,n=e.ui.keyCode;switch(t.keyCode){case n.UP:return this._repeat(null,1,t),!0;case n.DOWN:return this._repeat(null,-1,t),!0;case n.PAGE_UP:return this._repeat(null,i.page,t),!0;case n.PAGE_DOWN:return this._repeat(null,-i.page,t),!0}return!1},_uiSpinnerHtml:function(){return"<span class='ui-spinner ui-widget ui-widget-content ui-corner-all'></span>"},_buttonHtml:function(){return"<a class='ui-spinner-button ui-spinner-up ui-corner-tr'><span class='ui-icon "+this.options.icons.up+"'>&#9650;</span></a><a class='ui-spinner-button ui-spinner-down ui-corner-br'><span class='ui-icon "+this.options.icons.down+"'>&#9660;</span></a>"},_start:function(e){return this.spinning||this._trigger("start",e)!==!1?(this.counter||(this.counter=1),this.spinning=!0,!0):!1},_repeat:function(e,t,i){e=e||500,clearTimeout(this.timer),this.timer=this._delay(function(){this._repeat(40,t,i)},e),this._spin(t*this.options.step,i)},_spin:function(e,t){var i=this.value()||0;this.counter||(this.counter=1),i=this._adjustValue(i+e*this._increment(this.counter)),this.spinning&&this._trigger("spin",t,{value:i})===!1||(this._value(i),this.counter++)},_increment:function(t){var i=this.options.incremental;return i?e.isFunction(i)?i(t):Math.floor(t*t*t/5e4-t*t/500+17*t/200+1):1},_precision:function(){var e=this._precisionOf(this.options.step);return null!==this.options.min&&(e=Math.max(e,this._precisionOf(this.options.min))),e},_precisionOf:function(e){var t=e.toString(),i=t.indexOf(".");return-1===i?0:t.length-i-1},_adjustValue:function(e){var t,i,n=this.options;return t=null!==n.min?n.min:0,i=e-t,i=Math.round(i/n.step)*n.step,e=t+i,e=parseFloat(e.toFixed(this._precision())),null!==n.max&&e>n.max?n.max:null!==n.min&&e<n.min?n.min:e},_stop:function(e){this.spinning&&(clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",e))},_setOption:function(e,t){if("culture"===e||"numberFormat"===e){var i=this._parse(this.element.val());return this.options[e]=t,void this.element.val(this._format(i))}("max"===e||"min"===e||"step"===e)&&"string"==typeof t&&(t=this._parse(t)),"icons"===e&&(this.buttons.first().find(".ui-icon").removeClass(this.options.icons.up).addClass(t.up),this.buttons.last().find(".ui-icon").removeClass(this.options.icons.down).addClass(t.down)),this._super(e,t),"disabled"===e&&(t?(this.element.prop("disabled",!0),this.buttons.button("disable")):(this.element.prop("disabled",!1),this.buttons.button("enable")))},_setOptions:t(function(e){this._super(e),this._value(this.element.val())}),_parse:function(e){return"string"==typeof e&&""!==e&&(e=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(e,10,this.options.culture):+e),""===e||isNaN(e)?null:e},_format:function(e){return""===e?"":window.Globalize&&this.options.numberFormat?Globalize.format(e,this.options.numberFormat,this.options.culture):e},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},_value:function(e,t){var i;""!==e&&(i=this._parse(e),null!==i&&(t||(i=this._adjustValue(i)),e=this._format(i))),this.element.val(e),this._refresh()},_destroy:function(){this.element.removeClass("ui-spinner-input").prop("disabled",!1).removeAttr("autocomplete").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.uiSpinner.replaceWith(this.element)},stepUp:t(function(e){this._stepUp(e)}),_stepUp:function(e){this._start()&&(this._spin((e||1)*this.options.step),this._stop())},stepDown:t(function(e){this._stepDown(e)}),_stepDown:function(e){this._start()&&(this._spin((e||1)*-this.options.step),this._stop())},pageUp:t(function(e){this._stepUp((e||1)*this.options.page)}),pageDown:t(function(e){this._stepDown((e||1)*this.options.page)}),value:function(e){return arguments.length?void t(this._value).call(this,e):this._parse(this.element.val())},widget:function(){return this.uiSpinner}})}(jQuery),function(e,t){function i(){return++s}function n(e){return e.hash.length>1&&decodeURIComponent(e.href.replace(o,""))===decodeURIComponent(location.href.replace(o,""))}var s=0,o=/#.*$/;e.widget("ui.tabs",{version:"1.10.3",delay:300,options:{active:null,collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_create:function(){var t=this,i=this.options;this.running=!1,this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible",i.collapsible).delegate(".ui-tabs-nav > li","mousedown"+this.eventNamespace,function(t){e(this).is(".ui-state-disabled")&&t.preventDefault()}).delegate(".ui-tabs-anchor","focus"+this.eventNamespace,function(){e(this).closest("li").is(".ui-state-disabled")&&this.blur()}),this._processTabs(),i.active=this._initialActive(),e.isArray(i.disabled)&&(i.disabled=e.unique(i.disabled.concat(e.map(this.tabs.filter(".ui-state-disabled"),function(e){return t.tabs.index(e)}))).sort()),this.options.active!==!1&&this.anchors.length?this.active=this._findActive(i.active):this.active=e(),this._refresh(),this.active.length&&this.load(i.active)},_initialActive:function(){var t=this.options.active,i=this.options.collapsible,n=location.hash.substring(1);return null===t&&(n&&this.tabs.each(function(i,s){return e(s).attr("aria-controls")===n?(t=i,!1):void 0}),null===t&&(t=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),(null===t||-1===t)&&(t=this.tabs.length?0:!1)),t!==!1&&(t=this.tabs.index(this.tabs.eq(t)),-1===t&&(t=i?!1:0)),!i&&t===!1&&this.anchors.length&&(t=0),t},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):e()}},_tabKeydown:function(t){var i=e(this.document[0].activeElement).closest("li"),n=this.tabs.index(i),s=!0;if(!this._handlePageNav(t)){switch(t.keyCode){case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:n++;break;case e.ui.keyCode.UP:case e.ui.keyCode.LEFT:s=!1,n--;break;case e.ui.keyCode.END:n=this.anchors.length-1;break;case e.ui.keyCode.HOME:n=0;break;case e.ui.keyCode.SPACE:return t.preventDefault(),clearTimeout(this.activating),void this._activate(n);case e.ui.keyCode.ENTER:return t.preventDefault(),clearTimeout(this.activating),void this._activate(n===this.options.active?!1:n);default:return}t.preventDefault(),clearTimeout(this.activating),n=this._focusNextTab(n,s),t.ctrlKey||(i.attr("aria-selected","false"),this.tabs.eq(n).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",n)},this.delay))}},_panelKeydown:function(t){this._handlePageNav(t)||t.ctrlKey&&t.keyCode===e.ui.keyCode.UP&&(t.preventDefault(),this.active.focus())},_handlePageNav:function(t){return t.altKey&&t.keyCode===e.ui.keyCode.PAGE_UP?(this._activate(this._focusNextTab(this.options.active-1,!1)),!0):t.altKey&&t.keyCode===e.ui.keyCode.PAGE_DOWN?(this._activate(this._focusNextTab(this.options.active+1,!0)),!0):void 0},_findNextTab:function(t,i){function n(){return t>s&&(t=0),0>t&&(t=s),t}for(var s=this.tabs.length-1;-1!==e.inArray(n(),this.options.disabled);)t=i?t+1:t-1;return t},_focusNextTab:function(e,t){return e=this._findNextTab(e,t),this.tabs.eq(e).focus(),e},_setOption:function(e,t){return"active"===e?void this._activate(t):"disabled"===e?void this._setupDisabled(t):(this._super(e,t),"collapsible"===e&&(this.element.toggleClass("ui-tabs-collapsible",t),t||this.options.active!==!1||this._activate(0)),"event"===e&&this._setupEvents(t),void("heightStyle"===e&&this._setupHeightStyle(t)))},_tabId:function(e){return e.attr("aria-controls")||"ui-tabs-"+i()},_sanitizeSelector:function(e){return e?e.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var t=this.options,i=this.tablist.children(":has(a[href])");t.disabled=e.map(i.filter(".ui-state-disabled"),function(e){return i.index(e)}),this._processTabs(),t.active!==!1&&this.anchors.length?this.active.length&&!e.contains(this.tablist[0],this.active[0])?this.tabs.length===t.disabled.length?(t.active=!1,this.active=e()):this._activate(this._findNextTab(Math.max(0,t.active-1),!1)):t.active=this.tabs.index(this.active):(t.active=!1,this.active=e()),this._refresh()},_refresh:function(){this._setupDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-expanded":"false","aria-hidden":"true"}),this.active.length?(this.active.addClass("ui-tabs-active ui-state-active").attr({"aria-selected":"true",tabIndex:0}),this._getPanelForTab(this.active).show().attr({"aria-expanded":"true","aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var t=this;this.tablist=this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role","tablist"),this.tabs=this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({role:"tab",tabIndex:-1}),this.anchors=this.tabs.map(function(){return e("a",this)[0]}).addClass("ui-tabs-anchor").attr({role:"presentation",tabIndex:-1}),this.panels=e(),this.anchors.each(function(i,s){var o,a,r,l=e(s).uniqueId().attr("id"),c=e(s).closest("li"),h=c.attr("aria-controls");n(s)?(o=s.hash,a=t.element.find(t._sanitizeSelector(o))):(r=t._tabId(c),o="#"+r,a=t.element.find(o),a.length||(a=t._createPanel(r),a.insertAfter(t.panels[i-1]||t.tablist)),a.attr("aria-live","polite")),a.length&&(t.panels=t.panels.add(a)),h&&c.data("ui-tabs-aria-controls",h),c.attr({"aria-controls":o.substring(1),"aria-labelledby":l}),a.attr("aria-labelledby",l)}),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role","tabpanel")},_getList:function(){return this.element.find("ol,ul").eq(0)},_createPanel:function(t){return e("<div>").attr("id",t).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)},_setupDisabled:function(t){e.isArray(t)&&(t.length?t.length===this.anchors.length&&(t=!0):t=!1);for(var i,n=0;i=this.tabs[n];n++)t===!0||-1!==e.inArray(n,t)?e(i).addClass("ui-state-disabled").attr("aria-disabled","true"):e(i).removeClass("ui-state-disabled").removeAttr("aria-disabled");this.options.disabled=t},_setupEvents:function(t){var i={click:function(e){e.preventDefault()}};t&&e.each(t.split(" "),function(e,t){i[t]="_eventHandler"}),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(this.anchors,i),this._on(this.tabs,{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs)},_setupHeightStyle:function(t){var i,n=this.element.parent();"fill"===t?(i=n.height(),i-=this.element.outerHeight()-this.element.height(),this.element.siblings(":visible").each(function(){var t=e(this),n=t.css("position");"absolute"!==n&&"fixed"!==n&&(i-=t.outerHeight(!0))}),this.element.children().not(this.panels).each(function(){i-=e(this).outerHeight(!0)}),this.panels.each(function(){e(this).height(Math.max(0,i-e(this).innerHeight()+e(this).height()))}).css("overflow","auto")):"auto"===t&&(i=0,this.panels.each(function(){i=Math.max(i,e(this).height("").height())}).height(i))},_eventHandler:function(t){var i=this.options,n=this.active,s=e(t.currentTarget),o=s.closest("li"),a=o[0]===n[0],r=a&&i.collapsible,l=r?e():this._getPanelForTab(o),c=n.length?this._getPanelForTab(n):e(),h={oldTab:n,oldPanel:c,newTab:r?e():o,newPanel:l};t.preventDefault(),o.hasClass("ui-state-disabled")||o.hasClass("ui-tabs-loading")||this.running||a&&!i.collapsible||this._trigger("beforeActivate",t,h)===!1||(i.active=r?!1:this.tabs.index(o),this.active=a?e():o,this.xhr&&this.xhr.abort(),c.length||l.length||e.error("jQuery UI Tabs: Mismatching fragment identifier."),l.length&&this.load(this.tabs.index(o),t),this._toggle(t,h))},_toggle:function(t,i){function n(){o.running=!1,o._trigger("activate",t,i)}function s(){i.newTab.closest("li").addClass("ui-tabs-active ui-state-active"),a.length&&o.options.show?o._show(a,o.options.show,n):(a.show(),n())}var o=this,a=i.newPanel,r=i.oldPanel;this.running=!0,r.length&&this.options.hide?this._hide(r,this.options.hide,function(){i.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),s()}):(i.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),r.hide(),s()),r.attr({"aria-expanded":"false","aria-hidden":"true"}),i.oldTab.attr("aria-selected","false"),a.length&&r.length?i.oldTab.attr("tabIndex",-1):a.length&&this.tabs.filter(function(){return 0===e(this).attr("tabIndex")}).attr("tabIndex",-1),a.attr({"aria-expanded":"true","aria-hidden":"false"}),i.newTab.attr({"aria-selected":"true",tabIndex:0})},_activate:function(t){var i,n=this._findActive(t);n[0]!==this.active[0]&&(n.length||(n=this.active),i=n.find(".ui-tabs-anchor")[0],this._eventHandler({target:i,currentTarget:i,preventDefault:e.noop}))},_findActive:function(t){return t===!1?e():this.tabs.eq(t)},_getIndex:function(e){return"string"==typeof e&&(e=this.anchors.index(this.anchors.filter("[href$='"+e+"']"))),e},_destroy:function(){this.xhr&&this.xhr.abort(),this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible"),this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role"),this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeUniqueId(),this.tabs.add(this.panels).each(function(){e.data(this,"ui-tabs-destroy")?e(this).remove():e(this).removeClass("ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role")}),this.tabs.each(function(){var t=e(this),i=t.data("ui-tabs-aria-controls");i?t.attr("aria-controls",i).removeData("ui-tabs-aria-controls"):t.removeAttr("aria-controls")}),this.panels.show(),"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(i){var n=this.options.disabled;n!==!1&&(i===t?n=!1:(i=this._getIndex(i),n=e.isArray(n)?e.map(n,function(e){return e!==i?e:null}):e.map(this.tabs,function(e,t){return t!==i?t:null})),this._setupDisabled(n))},disable:function(i){var n=this.options.disabled;if(n!==!0){if(i===t)n=!0;else{if(i=this._getIndex(i),-1!==e.inArray(i,n))return;n=e.isArray(n)?e.merge([i],n).sort():[i]}this._setupDisabled(n)}},load:function(t,i){t=this._getIndex(t);var s=this,o=this.tabs.eq(t),a=o.find(".ui-tabs-anchor"),r=this._getPanelForTab(o),l={tab:o,panel:r};n(a[0])||(this.xhr=e.ajax(this._ajaxSettings(a,i,l)),this.xhr&&"canceled"!==this.xhr.statusText&&(o.addClass("ui-tabs-loading"),r.attr("aria-busy","true"),this.xhr.success(function(e){setTimeout(function(){r.html(e),s._trigger("load",i,l)},1)}).complete(function(e,t){setTimeout(function(){"abort"===t&&s.panels.stop(!1,!0),o.removeClass("ui-tabs-loading"),r.removeAttr("aria-busy"),e===s.xhr&&delete s.xhr},1)})))},_ajaxSettings:function(t,i,n){var s=this;return{url:t.attr("href"),beforeSend:function(t,o){return s._trigger("beforeLoad",i,e.extend({jqXHR:t,ajaxSettings:o},n))}}},_getPanelForTab:function(t){var i=e(t).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+i))}})}(jQuery),function(e){function t(t,i){var n=(t.attr("aria-describedby")||"").split(/\s+/);n.push(i),t.data("ui-tooltip-id",i).attr("aria-describedby",e.trim(n.join(" ")))}function i(t){var i=t.data("ui-tooltip-id"),n=(t.attr("aria-describedby")||"").split(/\s+/),s=e.inArray(i,n);-1!==s&&n.splice(s,1),t.removeData("ui-tooltip-id"),n=e.trim(n.join(" ")),n?t.attr("aria-describedby",n):t.removeAttr("aria-describedby")}var n=0;e.widget("ui.tooltip",{version:"1.10.3",options:{content:function(){var t=e(this).attr("title")||"";return e("<a>").text(t).html()},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,tooltipClass:null,track:!1,close:null,open:null},_create:function(){this._on({mouseover:"open",focusin:"open"}),this.tooltips={},this.parents={},this.options.disabled&&this._disable()},_setOption:function(t,i){var n=this;return"disabled"===t?(this[i?"_disable":"_enable"](),void(this.options[t]=i)):(this._super(t,i),void("content"===t&&e.each(this.tooltips,function(e,t){n._updateContent(t)})))},_disable:function(){var t=this;e.each(this.tooltips,function(i,n){
var s=e.Event("blur");s.target=s.currentTarget=n[0],t.close(s,!0)}),this.element.find(this.options.items).addBack().each(function(){var t=e(this);t.is("[title]")&&t.data("ui-tooltip-title",t.attr("title")).attr("title","")})},_enable:function(){this.element.find(this.options.items).addBack().each(function(){var t=e(this);t.data("ui-tooltip-title")&&t.attr("title",t.data("ui-tooltip-title"))})},open:function(t){var i=this,n=e(t?t.target:this.element).closest(this.options.items);n.length&&!n.data("ui-tooltip-id")&&(n.attr("title")&&n.data("ui-tooltip-title",n.attr("title")),n.data("ui-tooltip-open",!0),t&&"mouseover"===t.type&&n.parents().each(function(){var t,n=e(this);n.data("ui-tooltip-open")&&(t=e.Event("blur"),t.target=t.currentTarget=this,i.close(t,!0)),n.attr("title")&&(n.uniqueId(),i.parents[this.id]={element:this,title:n.attr("title")},n.attr("title",""))}),this._updateContent(n,t))},_updateContent:function(e,t){var i,n=this.options.content,s=this,o=t?t.type:null;return"string"==typeof n?this._open(t,e,n):(i=n.call(e[0],function(i){e.data("ui-tooltip-open")&&s._delay(function(){t&&(t.type=o),this._open(t,e,i)})}),void(i&&this._open(t,e,i)))},_open:function(i,n,s){function o(e){c.of=e,a.is(":hidden")||a.position(c)}var a,r,l,c=e.extend({},this.options.position);if(s){if(a=this._find(n),a.length)return void a.find(".ui-tooltip-content").html(s);n.is("[title]")&&(i&&"mouseover"===i.type?n.attr("title",""):n.removeAttr("title")),a=this._tooltip(n),t(n,a.attr("id")),a.find(".ui-tooltip-content").html(s),this.options.track&&i&&/^mouse/.test(i.type)?(this._on(this.document,{mousemove:o}),o(i)):a.position(e.extend({of:n},this.options.position)),a.hide(),this._show(a,this.options.show),this.options.show&&this.options.show.delay&&(l=this.delayedShow=setInterval(function(){a.is(":visible")&&(o(c.of),clearInterval(l))},e.fx.interval)),this._trigger("open",i,{tooltip:a}),r={keyup:function(t){if(t.keyCode===e.ui.keyCode.ESCAPE){var i=e.Event(t);i.currentTarget=n[0],this.close(i,!0)}},remove:function(){this._removeTooltip(a)}},i&&"mouseover"!==i.type||(r.mouseleave="close"),i&&"focusin"!==i.type||(r.focusout="close"),this._on(!0,n,r)}},close:function(t){var n=this,s=e(t?t.currentTarget:this.element),o=this._find(s);this.closing||(clearInterval(this.delayedShow),s.data("ui-tooltip-title")&&s.attr("title",s.data("ui-tooltip-title")),i(s),o.stop(!0),this._hide(o,this.options.hide,function(){n._removeTooltip(e(this))}),s.removeData("ui-tooltip-open"),this._off(s,"mouseleave focusout keyup"),s[0]!==this.element[0]&&this._off(s,"remove"),this._off(this.document,"mousemove"),t&&"mouseleave"===t.type&&e.each(this.parents,function(t,i){e(i.element).attr("title",i.title),delete n.parents[t]}),this.closing=!0,this._trigger("close",t,{tooltip:o}),this.closing=!1)},_tooltip:function(t){var i="ui-tooltip-"+n++,s=e("<div>").attr({id:i,role:"tooltip"}).addClass("ui-tooltip ui-widget ui-corner-all ui-widget-content "+(this.options.tooltipClass||""));return e("<div>").addClass("ui-tooltip-content").appendTo(s),s.appendTo(this.document[0].body),this.tooltips[i]=t,s},_find:function(t){var i=t.data("ui-tooltip-id");return i?e("#"+i):e()},_removeTooltip:function(e){e.remove(),delete this.tooltips[e.attr("id")]},_destroy:function(){var t=this;e.each(this.tooltips,function(i,n){var s=e.Event("blur");s.target=s.currentTarget=n[0],t.close(s,!0),e("#"+i).remove(),n.data("ui-tooltip-title")&&(n.attr("title",n.data("ui-tooltip-title")),n.removeData("ui-tooltip-title"))})}})}(jQuery),function(e,t){function i(e,t,i){var n=d[t.type]||{};return null==e?i||!t.def?null:t.def:(e=n.floor?~~e:parseFloat(e),isNaN(e)?t.def:n.mod?(e+n.mod)%n.mod:0>e?0:n.max<e?n.max:e)}function n(t){var i=c(),n=i._rgba=[];return t=t.toLowerCase(),m(l,function(e,s){var o,a=s.re.exec(t),r=a&&s.parse(a),l=s.space||"rgba";return r?(o=i[l](r),i[h[l].cache]=o[h[l].cache],n=i._rgba=o._rgba,!1):void 0}),n.length?("0,0,0,0"===n.join()&&e.extend(n,o.transparent),i):o[t]}function s(e,t,i){return i=(i+1)%1,1>6*i?e+(t-e)*i*6:1>2*i?t:2>3*i?e+(t-e)*(2/3-i)*6:e}var o,a="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",r=/^([\-+])=\s*(\d+\.?\d*)/,l=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[e[1],e[2],e[3],e[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[2.55*e[1],2.55*e[2],2.55*e[3],e[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(e){return[e[1],e[2]/100,e[3]/100,e[4]]}}],c=e.Color=function(t,i,n,s){return new e.Color.fn.parse(t,i,n,s)},h={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},d={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},u=c.support={},p=e("<p>")[0],m=e.each;p.style.cssText="background-color:rgba(1,1,1,.5)",u.rgba=p.style.backgroundColor.indexOf("rgba")>-1,m(h,function(e,t){t.cache="_"+e,t.props.alpha={idx:3,type:"percent",def:1}}),c.fn=e.extend(c.prototype,{parse:function(s,a,r,l){if(s===t)return this._rgba=[null,null,null,null],this;(s.jquery||s.nodeType)&&(s=e(s).css(a),a=t);var d=this,u=e.type(s),p=this._rgba=[];return a!==t&&(s=[s,a,r,l],u="array"),"string"===u?this.parse(n(s)||o._default):"array"===u?(m(h.rgba.props,function(e,t){p[t.idx]=i(s[t.idx],t)}),this):"object"===u?(s instanceof c?m(h,function(e,t){s[t.cache]&&(d[t.cache]=s[t.cache].slice())}):m(h,function(t,n){var o=n.cache;m(n.props,function(e,t){if(!d[o]&&n.to){if("alpha"===e||null==s[e])return;d[o]=n.to(d._rgba)}d[o][t.idx]=i(s[e],t,!0)}),d[o]&&e.inArray(null,d[o].slice(0,3))<0&&(d[o][3]=1,n.from&&(d._rgba=n.from(d[o])))}),this):void 0},is:function(e){var t=c(e),i=!0,n=this;return m(h,function(e,s){var o,a=t[s.cache];return a&&(o=n[s.cache]||s.to&&s.to(n._rgba)||[],m(s.props,function(e,t){return null!=a[t.idx]?i=a[t.idx]===o[t.idx]:void 0})),i}),i},_space:function(){var e=[],t=this;return m(h,function(i,n){t[n.cache]&&e.push(i)}),e.pop()},transition:function(e,t){var n=c(e),s=n._space(),o=h[s],a=0===this.alpha()?c("transparent"):this,r=a[o.cache]||o.to(a._rgba),l=r.slice();return n=n[o.cache],m(o.props,function(e,s){var o=s.idx,a=r[o],c=n[o],h=d[s.type]||{};null!==c&&(null===a?l[o]=c:(h.mod&&(c-a>h.mod/2?a+=h.mod:a-c>h.mod/2&&(a-=h.mod)),l[o]=i((c-a)*t+a,s)))}),this[s](l)},blend:function(t){if(1===this._rgba[3])return this;var i=this._rgba.slice(),n=i.pop(),s=c(t)._rgba;return c(e.map(i,function(e,t){return(1-n)*s[t]+n*e}))},toRgbaString:function(){var t="rgba(",i=e.map(this._rgba,function(e,t){return null==e?t>2?1:0:e});return 1===i[3]&&(i.pop(),t="rgb("),t+i.join()+")"},toHslaString:function(){var t="hsla(",i=e.map(this.hsla(),function(e,t){return null==e&&(e=t>2?1:0),t&&3>t&&(e=Math.round(100*e)+"%"),e});return 1===i[3]&&(i.pop(),t="hsl("),t+i.join()+")"},toHexString:function(t){var i=this._rgba.slice(),n=i.pop();return t&&i.push(~~(255*n)),"#"+e.map(i,function(e){return e=(e||0).toString(16),1===e.length?"0"+e:e}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),c.fn.parse.prototype=c.fn,h.hsla.to=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t,i,n=e[0]/255,s=e[1]/255,o=e[2]/255,a=e[3],r=Math.max(n,s,o),l=Math.min(n,s,o),c=r-l,h=r+l,d=.5*h;return t=l===r?0:n===r?60*(s-o)/c+360:s===r?60*(o-n)/c+120:60*(n-s)/c+240,i=0===c?0:.5>=d?c/h:c/(2-h),[Math.round(t)%360,i,d,null==a?1:a]},h.hsla.from=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t=e[0]/360,i=e[1],n=e[2],o=e[3],a=.5>=n?n*(1+i):n+i-n*i,r=2*n-a;return[Math.round(255*s(r,a,t+1/3)),Math.round(255*s(r,a,t)),Math.round(255*s(r,a,t-1/3)),o]},m(h,function(n,s){var o=s.props,a=s.cache,l=s.to,h=s.from;c.fn[n]=function(n){if(l&&!this[a]&&(this[a]=l(this._rgba)),n===t)return this[a].slice();var s,r=e.type(n),d="array"===r||"object"===r?n:arguments,u=this[a].slice();return m(o,function(e,t){var n=d["object"===r?e:t.idx];null==n&&(n=u[t.idx]),u[t.idx]=i(n,t)}),h?(s=c(h(u)),s[a]=u,s):c(u)},m(o,function(t,i){c.fn[t]||(c.fn[t]=function(s){var o,a=e.type(s),l="alpha"===t?this._hsla?"hsla":"rgba":n,c=this[l](),h=c[i.idx];return"undefined"===a?h:("function"===a&&(s=s.call(this,h),a=e.type(s)),null==s&&i.empty?this:("string"===a&&(o=r.exec(s),o&&(s=h+parseFloat(o[2])*("+"===o[1]?1:-1))),c[i.idx]=s,this[l](c)))})})}),c.hook=function(t){var i=t.split(" ");m(i,function(t,i){e.cssHooks[i]={set:function(t,s){var o,a,r="";if("transparent"!==s&&("string"!==e.type(s)||(o=n(s)))){if(s=c(o||s),!u.rgba&&1!==s._rgba[3]){for(a="backgroundColor"===i?t.parentNode:t;(""===r||"transparent"===r)&&a&&a.style;)try{r=e.css(a,"backgroundColor"),a=a.parentNode}catch(l){}s=s.blend(r&&"transparent"!==r?r:"_default")}s=s.toRgbaString()}try{t.style[i]=s}catch(l){}}},e.fx.step[i]=function(t){t.colorInit||(t.start=c(t.elem,i),t.end=c(t.end),t.colorInit=!0),e.cssHooks[i].set(t.elem,t.start.transition(t.end,t.pos))}})},c.hook(a),e.cssHooks.borderColor={expand:function(e){var t={};return m(["Top","Right","Bottom","Left"],function(i,n){t["border"+n+"Color"]=e}),t}},o=e.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(jQuery),function(e){e.fn.autofill=function(t){var i={value:"First Name",prePopulate:"",defaultTextColor:"#666",activeTextColor:"#333"},t=e.extend(i,t);return this.each(function(){var i=e(this),n="password"==i.attr("type"),s=!1;n&&(i.hide(),i.after('<input type="text" id="'+this.id+'_autofill" class="'+e(this).attr("class")+'" />'),s=i,i=i.next()),document.activeElement!=i[0]&&i.css({color:t.defaultTextColor}).val(t.value),i.each(function(){e(this.form).submit(function(){i.val()==t.value&&i.val(t.prePopulate)})}),i.focus(function(){i.val()==t.value&&(n&&(i.hide(),s.show().focus()),i.val(t.prePopulate).css({color:t.activeTextColor}))}).blur(function(){(i.val()==t.prePopulate||""==i.val())&&i.css({color:t.defaultTextColor}).val(t.value)}),s&&s.length>0&&s.blur(function(){""==s.val()&&(s.hide(),i.show().css({color:t.defaultTextColor}).val(t.value))})})}}(jQuery),function(e){"use strict";function t(e){return(e||"").toLowerCase()}var i="2.1.6";e.fn.cycle=function(i){var n;return 0!==this.length||e.isReady?this.each(function(){var n,s,o,a,r=e(this),l=e.fn.cycle.log;if(!r.data("cycle.opts")){(r.data("cycle-log")===!1||i&&i.log===!1||s&&s.log===!1)&&(l=e.noop),l("--c2 init--"),n=r.data();for(var c in n)n.hasOwnProperty(c)&&/^cycle[A-Z]+/.test(c)&&(a=n[c],o=c.match(/^cycle(.*)/)[1].replace(/^[A-Z]/,t),l(o+":",a,"("+typeof a+")"),n[o]=a);s=e.extend({},e.fn.cycle.defaults,n,i||{}),s.timeoutId=0,s.paused=s.paused||!1,s.container=r,s._maxZ=s.maxZ,s.API=e.extend({_container:r},e.fn.cycle.API),s.API.log=l,s.API.trigger=function(e,t){return s.container.trigger(e,t),s.API},r.data("cycle.opts",s),r.data("cycle.API",s.API),s.API.trigger("cycle-bootstrap",[s,s.API]),s.API.addInitialSlides(),s.API.preInitSlideshow(),s.slides.length&&s.API.initSlideshow()}}):(n={s:this.selector,c:this.context},e.fn.cycle.log("requeuing slideshow (dom not ready)"),e(function(){e(n.s,n.c).cycle(i)}),this)},e.fn.cycle.API={opts:function(){return this._container.data("cycle.opts")},addInitialSlides:function(){var t=this.opts(),i=t.slides;t.slideCount=0,t.slides=e(),i=i.jquery?i:t.container.find(i),t.random&&i.sort(function(){return Math.random()-.5}),t.API.add(i)},preInitSlideshow:function(){var t=this.opts();t.API.trigger("cycle-pre-initialize",[t]);var i=e.fn.cycle.transitions[t.fx];i&&e.isFunction(i.preInit)&&i.preInit(t),t._preInitialized=!0},postInitSlideshow:function(){var t=this.opts();t.API.trigger("cycle-post-initialize",[t]);var i=e.fn.cycle.transitions[t.fx];i&&e.isFunction(i.postInit)&&i.postInit(t)},initSlideshow:function(){var t,i=this.opts(),n=i.container;i.API.calcFirstSlide(),"static"==i.container.css("position")&&i.container.css("position","relative"),e(i.slides[i.currSlide]).css({opacity:1,display:"block",visibility:"visible"}),i.API.stackSlides(i.slides[i.currSlide],i.slides[i.nextSlide],!i.reverse),i.pauseOnHover&&(i.pauseOnHover!==!0&&(n=e(i.pauseOnHover)),n.hover(function(){i.API.pause(!0)},function(){i.API.resume(!0)})),i.timeout&&(t=i.API.getSlideOpts(i.currSlide),i.API.queueTransition(t,t.timeout+i.delay)),i._initialized=!0,i.API.updateView(!0),i.API.trigger("cycle-initialized",[i]),i.API.postInitSlideshow()},pause:function(t){var i=this.opts(),n=i.API.getSlideOpts(),s=i.hoverPaused||i.paused;t?i.hoverPaused=!0:i.paused=!0,s||(i.container.addClass("cycle-paused"),i.API.trigger("cycle-paused",[i]).log("cycle-paused"),n.timeout&&(clearTimeout(i.timeoutId),i.timeoutId=0,i._remainingTimeout-=e.now()-i._lastQueue,(i._remainingTimeout<0||isNaN(i._remainingTimeout))&&(i._remainingTimeout=void 0)))},resume:function(e){var t=this.opts(),i=!t.hoverPaused&&!t.paused;e?t.hoverPaused=!1:t.paused=!1,i||(t.container.removeClass("cycle-paused"),0===t.slides.filter(":animated").length&&t.API.queueTransition(t.API.getSlideOpts(),t._remainingTimeout),t.API.trigger("cycle-resumed",[t,t._remainingTimeout]).log("cycle-resumed"))},add:function(t,i){var n,s=this.opts(),o=s.slideCount,a=!1;"string"==e.type(t)&&(t=e.trim(t)),e(t).each(function(t){var n,o=e(this);i?s.container.prepend(o):s.container.append(o),s.slideCount++,n=s.API.buildSlideOpts(o),i?s.slides=e(o).add(s.slides):s.slides=s.slides.add(o),s.API.initSlide(n,o,--s._maxZ),o.data("cycle.opts",n),s.API.trigger("cycle-slide-added",[s,n,o])}),s.API.updateView(!0),a=s._preInitialized&&2>o&&s.slideCount>=1,a&&(s._initialized?s.timeout&&(n=s.slides.length,s.nextSlide=s.reverse?n-1:1,s.timeoutId||s.API.queueTransition(s)):s.API.initSlideshow())},calcFirstSlide:function(){var e,t=this.opts();e=parseInt(t.startingSlide||0,10),(e>=t.slides.length||0>e)&&(e=0),t.currSlide=e,t.reverse?(t.nextSlide=e-1,t.nextSlide<0&&(t.nextSlide=t.slides.length-1)):(t.nextSlide=e+1,t.nextSlide==t.slides.length&&(t.nextSlide=0))},calcNextSlide:function(){var e,t=this.opts();t.reverse?(e=t.nextSlide-1<0,t.nextSlide=e?t.slideCount-1:t.nextSlide-1,t.currSlide=e?0:t.nextSlide+1):(e=t.nextSlide+1==t.slides.length,t.nextSlide=e?0:t.nextSlide+1,t.currSlide=e?t.slides.length-1:t.nextSlide-1)},calcTx:function(t,i){var n,s=t;return s._tempFx?n=e.fn.cycle.transitions[s._tempFx]:i&&s.manualFx&&(n=e.fn.cycle.transitions[s.manualFx]),n||(n=e.fn.cycle.transitions[s.fx]),s._tempFx=null,this.opts()._tempFx=null,n||(n=e.fn.cycle.transitions.fade,s.API.log('Transition "'+s.fx+'" not found.  Using fade.')),n},prepareTx:function(e,t){var i,n,s,o,a,r=this.opts();return r.slideCount<2?void(r.timeoutId=0):(!e||r.busy&&!r.manualTrump||(r.API.stopTransition(),r.busy=!1,clearTimeout(r.timeoutId),r.timeoutId=0),void(r.busy||(0!==r.timeoutId||e)&&(n=r.slides[r.currSlide],s=r.slides[r.nextSlide],o=r.API.getSlideOpts(r.nextSlide),a=r.API.calcTx(o,e),r._tx=a,e&&void 0!==o.manualSpeed&&(o.speed=o.manualSpeed),r.nextSlide!=r.currSlide&&(e||!r.paused&&!r.hoverPaused&&r.timeout)?(r.API.trigger("cycle-before",[o,n,s,t]),a.before&&a.before(o,n,s,t),i=function(){r.busy=!1,r.container.data("cycle.opts")&&(a.after&&a.after(o,n,s,t),r.API.trigger("cycle-after",[o,n,s,t]),r.API.queueTransition(o),r.API.updateView(!0))},r.busy=!0,a.transition?a.transition(o,n,s,t,i):r.API.doTransition(o,n,s,t,i),r.API.calcNextSlide(),r.API.updateView()):r.API.queueTransition(o))))},doTransition:function(t,i,n,s,o){var a=t,r=e(i),l=e(n),c=function(){l.animate(a.animIn||{opacity:1},a.speed,a.easeIn||a.easing,o)};l.css(a.cssBefore||{}),r.animate(a.animOut||{},a.speed,a.easeOut||a.easing,function(){r.css(a.cssAfter||{}),a.sync||c()}),a.sync&&c()},queueTransition:function(t,i){var n=this.opts(),s=void 0!==i?i:t.timeout;return 0===n.nextSlide&&0===--n.loop?(n.API.log("terminating; loop=0"),n.timeout=0,s?setTimeout(function(){n.API.trigger("cycle-finished",[n])},s):n.API.trigger("cycle-finished",[n]),void(n.nextSlide=n.currSlide)):void 0!==n.continueAuto&&(n.continueAuto===!1||e.isFunction(n.continueAuto)&&n.continueAuto()===!1)?(n.API.log("terminating automatic transitions"),n.timeout=0,void(n.timeoutId&&clearTimeout(n.timeoutId))):void(s&&(n._lastQueue=e.now(),void 0===i&&(n._remainingTimeout=t.timeout),n.paused||n.hoverPaused||(n.timeoutId=setTimeout(function(){n.API.prepareTx(!1,!n.reverse)},s))))},stopTransition:function(){var e=this.opts();e.slides.filter(":animated").length&&(e.slides.stop(!1,!0),e.API.trigger("cycle-transition-stopped",[e])),e._tx&&e._tx.stopTransition&&e._tx.stopTransition(e)},advanceSlide:function(e){var t=this.opts();return clearTimeout(t.timeoutId),t.timeoutId=0,t.nextSlide=t.currSlide+e,t.nextSlide<0?t.nextSlide=t.slides.length-1:t.nextSlide>=t.slides.length&&(t.nextSlide=0),t.API.prepareTx(!0,e>=0),!1},buildSlideOpts:function(i){var n,s,o=this.opts(),a=i.data()||{};for(var r in a)a.hasOwnProperty(r)&&/^cycle[A-Z]+/.test(r)&&(n=a[r],s=r.match(/^cycle(.*)/)[1].replace(/^[A-Z]/,t),o.API.log("["+(o.slideCount-1)+"]",s+":",n,"("+typeof n+")"),a[s]=n);a=e.extend({},e.fn.cycle.defaults,o,a),a.slideNum=o.slideCount;try{delete a.API,delete a.slideCount,delete a.currSlide,delete a.nextSlide,delete a.slides}catch(l){}return a},getSlideOpts:function(t){var i=this.opts();void 0===t&&(t=i.currSlide);var n=i.slides[t],s=e(n).data("cycle.opts");return e.extend({},i,s)},initSlide:function(t,i,n){var s=this.opts();i.css(t.slideCss||{}),n>0&&i.css("zIndex",n),isNaN(t.speed)&&(t.speed=e.fx.speeds[t.speed]||e.fx.speeds._default),t.sync||(t.speed=t.speed/2),i.addClass(s.slideClass)},updateView:function(e,t,i){var n=this.opts();if(n._initialized){var s=n.API.getSlideOpts(),o=n.slides[n.currSlide];!e&&t!==!0&&(n.API.trigger("cycle-update-view-before",[n,s,o]),n.updateView<0)||(n.slideActiveClass&&n.slides.removeClass(n.slideActiveClass).eq(n.currSlide).addClass(n.slideActiveClass),e&&n.hideNonActive&&n.slides.filter(":not(."+n.slideActiveClass+")").css("visibility","hidden"),0===n.updateView&&setTimeout(function(){n.API.trigger("cycle-update-view",[n,s,o,e])},s.speed/(n.sync?2:1)),0!==n.updateView&&n.API.trigger("cycle-update-view",[n,s,o,e]),e&&n.API.trigger("cycle-update-view-after",[n,s,o]))}},getComponent:function(t){var i=this.opts(),n=i[t];return"string"==typeof n?/^\s*[\>|\+|~]/.test(n)?i.container.find(n):e(n):n.jquery?n:e(n)},stackSlides:function(t,i,n){var s=this.opts();t||(t=s.slides[s.currSlide],i=s.slides[s.nextSlide],n=!s.reverse),e(t).css("zIndex",s.maxZ);var o,a=s.maxZ-2,r=s.slideCount;if(n){for(o=s.currSlide+1;r>o;o++)e(s.slides[o]).css("zIndex",a--);for(o=0;o<s.currSlide;o++)e(s.slides[o]).css("zIndex",a--)}else{for(o=s.currSlide-1;o>=0;o--)e(s.slides[o]).css("zIndex",a--);for(o=r-1;o>s.currSlide;o--)e(s.slides[o]).css("zIndex",a--)}e(i).css("zIndex",s.maxZ-1)},getSlideIndex:function(e){return this.opts().slides.index(e)}},e.fn.cycle.log=function(){window.console&&console.log&&console.log("[cycle2] "+Array.prototype.join.call(arguments," "))},e.fn.cycle.version=function(){return"Cycle2: "+i},e.fn.cycle.transitions={custom:{},none:{before:function(e,t,i,n){e.API.stackSlides(i,t,n),e.cssBefore={opacity:1,visibility:"visible",display:"block"}}},fade:{before:function(t,i,n,s){var o=t.API.getSlideOpts(t.nextSlide).slideCss||{};t.API.stackSlides(i,n,s),t.cssBefore=e.extend(o,{opacity:0,visibility:"visible",display:"block"}),t.animIn={opacity:1},t.animOut={opacity:0}}},fadeout:{before:function(t,i,n,s){var o=t.API.getSlideOpts(t.nextSlide).slideCss||{};t.API.stackSlides(i,n,s),t.cssBefore=e.extend(o,{opacity:1,visibility:"visible",display:"block"}),t.animOut={opacity:0}}},scrollHorz:{before:function(e,t,i,n){e.API.stackSlides(t,i,n);var s=e.container.css("overflow","hidden").width();e.cssBefore={left:n?s:-s,top:0,opacity:1,visibility:"visible",display:"block"},e.cssAfter={zIndex:e._maxZ-2,left:0},e.animIn={left:0},e.animOut={left:n?-s:s}}}},e.fn.cycle.defaults={allowWrap:!0,autoSelector:".cycle-slideshow[data-cycle-auto-init!=false]",delay:0,easing:null,fx:"fade",hideNonActive:!0,loop:0,manualFx:void 0,manualSpeed:void 0,manualTrump:!0,maxZ:100,pauseOnHover:!1,reverse:!1,slideActiveClass:"cycle-slide-active",slideClass:"cycle-slide",slideCss:{position:"absolute",top:0,left:0},slides:"> img",speed:500,startingSlide:0,sync:!0,timeout:4e3,updateView:0},e(document).ready(function(){e(e.fn.cycle.defaults.autoSelector).cycle()})}(jQuery),function(e){"use strict";function t(t,n){var s,o,a,r=n.autoHeight;if("container"==r)o=e(n.slides[n.currSlide]).outerHeight(),n.container.height(o);else if(n._autoHeightRatio)n.container.height(n.container.width()/n._autoHeightRatio);else if("calc"===r||"number"==e.type(r)&&r>=0){if(a="calc"===r?i(t,n):r>=n.slides.length?0:r,a==n._sentinelIndex)return;n._sentinelIndex=a,n._sentinel&&n._sentinel.remove(),s=e(n.slides[a].cloneNode(!0)),s.removeAttr("id name rel").find("[id],[name],[rel]").removeAttr("id name rel"),s.css({position:"static",visibility:"hidden",display:"block"}).prependTo(n.container).addClass("cycle-sentinel cycle-slide").removeClass("cycle-slide-active"),s.find("*").css("visibility","hidden"),n._sentinel=s}}function i(t,i){var n=0,s=-1;return i.slides.each(function(t){var i=e(this).height();i>s&&(s=i,n=t)}),n}function n(t,i,n,s,o){var a=e(s).outerHeight();i.container.animate({height:a},i.autoHeightSpeed,i.autoHeightEasing)}function s(i,o){o._autoHeightOnResize&&(e(window).off("resize orientationchange",o._autoHeightOnResize),o._autoHeightOnResize=null),o.container.off("cycle-slide-added cycle-slide-removed",t),o.container.off("cycle-destroyed",s),o.container.off("cycle-before",n),o._sentinel&&(o._sentinel.remove(),o._sentinel=null)}e.extend(e.fn.cycle.defaults,{autoHeight:0,autoHeightSpeed:250,autoHeightEasing:null}),e(document).on("cycle-initialized",function(i,o){function a(){t(i,o)}var r,l=o.autoHeight,c=e.type(l),h=null;("string"===c||"number"===c)&&(o.container.on("cycle-slide-added cycle-slide-removed",t),o.container.on("cycle-destroyed",s),"container"==l?o.container.on("cycle-before",n):"string"===c&&/\d+\:\d+/.test(l)&&(r=l.match(/(\d+)\:(\d+)/),r=r[1]/r[2],o._autoHeightRatio=r),"number"!==c&&(o._autoHeightOnResize=function(){clearTimeout(h),h=setTimeout(a,50)},e(window).on("resize orientationchange",o._autoHeightOnResize)),setTimeout(a,30))})}(jQuery),function(e){"use strict";e.extend(e.fn.cycle.defaults,{caption:"> .cycle-caption",captionTemplate:"{{slideNum}} / {{slideCount}}",overlay:"> .cycle-overlay",overlayTemplate:"<div>{{title}}</div><div>{{desc}}</div>",captionModule:"caption"}),e(document).on("cycle-update-view",function(t,i,n,s){if("caption"===i.captionModule){e.each(["caption","overlay"],function(){var e=this,t=n[e+"Template"],o=i.API.getComponent(e);o.length&&t?(o.html(i.API.tmpl(t,n,i,s)),o.show()):o.hide()})}}),e(document).on("cycle-destroyed",function(t,i){var n;e.each(["caption","overlay"],function(){var e=this,t=i[e+"Template"];i[e]&&t&&(n=i.API.getComponent("caption"),n.empty())})})}(jQuery),function(e){"use strict";var t=e.fn.cycle;e.fn.cycle=function(i){var n,s,o,a=e.makeArray(arguments);return"number"==e.type(i)?this.cycle("goto",i):"string"==e.type(i)?this.each(function(){var r;return n=i,o=e(this).data("cycle.opts"),void 0===o?void t.log('slideshow must be initialized before sending commands; "'+n+'" ignored'):(n="goto"==n?"jump":n,s=o.API[n],e.isFunction(s)?(r=e.makeArray(a),r.shift(),s.apply(o.API,r)):void t.log("unknown command: ",n))}):t.apply(this,arguments)},e.extend(e.fn.cycle,t),e.extend(t.API,{next:function(){var e=this.opts();if(!e.busy||e.manualTrump){var t=e.reverse?-1:1;e.allowWrap===!1&&e.currSlide+t>=e.slideCount||(e.API.advanceSlide(t),e.API.trigger("cycle-next",[e]).log("cycle-next"))}},prev:function(){var e=this.opts();if(!e.busy||e.manualTrump){var t=e.reverse?1:-1;e.allowWrap===!1&&e.currSlide+t<0||(e.API.advanceSlide(t),e.API.trigger("cycle-prev",[e]).log("cycle-prev"))}},destroy:function(){this.stop();var t=this.opts(),i=e.isFunction(e._data)?e._data:e.noop;clearTimeout(t.timeoutId),t.timeoutId=0,t.API.stop(),t.API.trigger("cycle-destroyed",[t]).log("cycle-destroyed"),t.container.removeData(),i(t.container[0],"parsedAttrs",!1),t.retainStylesOnDestroy||(t.container.removeAttr("style"),t.slides.removeAttr("style"),t.slides.removeClass(t.slideActiveClass)),t.slides.each(function(){var n=e(this);n.removeData(),n.removeClass(t.slideClass),i(this,"parsedAttrs",!1)})},jump:function(e,t){var i,n=this.opts();if(!n.busy||n.manualTrump){var s=parseInt(e,10);if(isNaN(s)||0>s||s>=n.slides.length)return void n.API.log("goto: invalid slide index: "+s);if(s==n.currSlide)return void n.API.log("goto: skipping, already on slide",s);n.nextSlide=s,clearTimeout(n.timeoutId),n.timeoutId=0,n.API.log("goto: ",s," (zero-index)"),i=n.currSlide<n.nextSlide,n._tempFx=t,n.API.prepareTx(!0,i)}},stop:function(){var t=this.opts(),i=t.container;clearTimeout(t.timeoutId),t.timeoutId=0,t.API.stopTransition(),t.pauseOnHover&&(t.pauseOnHover!==!0&&(i=e(t.pauseOnHover)),i.off("mouseenter mouseleave")),t.API.trigger("cycle-stopped",[t]).log("cycle-stopped")},reinit:function(){var e=this.opts();e.API.destroy(),e.container.cycle()},remove:function(t){for(var i,n,s=this.opts(),o=[],a=1,r=0;r<s.slides.length;r++)i=s.slides[r],r==t?n=i:(o.push(i),e(i).data("cycle.opts").slideNum=a,a++);n&&(s.slides=e(o),s.slideCount--,e(n).remove(),t==s.currSlide?s.API.advanceSlide(1):t<s.currSlide?s.currSlide--:s.currSlide++,s.API.trigger("cycle-slide-removed",[s,t,n]).log("cycle-slide-removed"),s.API.updateView())}}),e(document).on("click.cycle","[data-cycle-cmd]",function(t){t.preventDefault();var i=e(this),n=i.data("cycle-cmd"),s=i.data("cycle-context")||".cycle-slideshow";e(s).cycle(n,i.data("cycle-arg"))})}(jQuery),function(e){"use strict";function t(t,i){var n;return t._hashFence?void(t._hashFence=!1):(n=window.location.hash.substring(1),void t.slides.each(function(s){if(e(this).data("cycle-hash")==n){if(i===!0)t.startingSlide=s;else{var o=t.currSlide<s;t.nextSlide=s,t.API.prepareTx(!0,o)}return!1}}))}e(document).on("cycle-pre-initialize",function(i,n){t(n,!0),n._onHashChange=function(){t(n,!1)},e(window).on("hashchange",n._onHashChange)}),e(document).on("cycle-update-view",function(e,t,i){i.hash&&"#"+i.hash!=window.location.hash&&(t._hashFence=!0,window.location.hash=i.hash)}),e(document).on("cycle-destroyed",function(t,i){i._onHashChange&&e(window).off("hashchange",i._onHashChange)})}(jQuery),function(e){"use strict";e.extend(e.fn.cycle.defaults,{loader:!1}),e(document).on("cycle-bootstrap",function(t,i){function n(t,n){function o(t){var o;"wait"==i.loader?(r.push(t),0===c&&(r.sort(a),s.apply(i.API,[r,n]),i.container.removeClass("cycle-loading"))):(o=e(i.slides[i.currSlide]),s.apply(i.API,[t,n]),o.show(),i.container.removeClass("cycle-loading"))}function a(e,t){return e.data("index")-t.data("index")}var r=[];if("string"==e.type(t))t=e.trim(t);else if("array"===e.type(t))for(var l=0;l<t.length;l++)t[l]=e(t[l])[0];t=e(t);var c=t.length;c&&(t.css("visibility","hidden").appendTo("body").each(function(t){function a(){0===--l&&(--c,o(h))}var l=0,h=e(this),d=h.is("img")?h:h.find("img");return h.data("index",t),d=d.filter(":not(.cycle-loader-ignore)").filter(':not([src=""])'),d.length?(l=d.length,void d.each(function(){this.complete?a():e(this).load(function(){a()}).on("error",function(){0===--l&&(i.API.log("slide skipped; img not loaded:",this.src),0===--c&&"wait"==i.loader&&s.apply(i.API,[r,n]))})})):(--c,void r.push(h))}),c&&i.container.addClass("cycle-loading"))}var s;i.loader&&(s=i.API.add,i.API.add=n)})}(jQuery),function(e){"use strict";function t(t,i,n){var s,o=t.API.getComponent("pager");o.each(function(){var o=e(this);if(i.pagerTemplate){var a=t.API.tmpl(i.pagerTemplate,i,t,n[0]);s=e(a).appendTo(o)}else s=o.children().eq(t.slideCount-1);s.on(t.pagerEvent,function(e){t.pagerEventBubble||e.preventDefault(),t.API.page(o,e.currentTarget)})})}function i(e,t){var i=this.opts();if(!i.busy||i.manualTrump){var n=e.children().index(t),s=n,o=i.currSlide<s;i.currSlide!=s&&(i.nextSlide=s,i._tempFx=i.pagerFx,i.API.prepareTx(!0,o),i.API.trigger("cycle-pager-activated",[i,e,t]))}}e.extend(e.fn.cycle.defaults,{pager:"> .cycle-pager",pagerActiveClass:"cycle-pager-active",pagerEvent:"click.cycle",pagerEventBubble:void 0,pagerTemplate:"<span>&bull;</span>"}),e(document).on("cycle-bootstrap",function(e,i,n){n.buildPagerLink=t}),e(document).on("cycle-slide-added",function(e,t,n,s){t.pager&&(t.API.buildPagerLink(t,n,s),t.API.page=i)}),e(document).on("cycle-slide-removed",function(t,i,n,s){if(i.pager){var o=i.API.getComponent("pager");o.each(function(){var t=e(this);e(t.children()[n]).remove()})}}),e(document).on("cycle-update-view",function(t,i,n){var s;i.pager&&(s=i.API.getComponent("pager"),s.each(function(){e(this).children().removeClass(i.pagerActiveClass).eq(i.currSlide).addClass(i.pagerActiveClass)}))}),e(document).on("cycle-destroyed",function(e,t){var i=t.API.getComponent("pager");i&&(i.children().off(t.pagerEvent),t.pagerTemplate&&i.empty())})}(jQuery),function(e){"use strict";e.extend(e.fn.cycle.defaults,{next:"> .cycle-next",nextEvent:"click.cycle",disabledClass:"disabled",prev:"> .cycle-prev",prevEvent:"click.cycle",swipe:!1}),e(document).on("cycle-initialized",function(e,t){if(t.API.getComponent("next").on(t.nextEvent,function(e){e.preventDefault(),t.API.next()}),t.API.getComponent("prev").on(t.prevEvent,function(e){e.preventDefault(),t.API.prev()}),t.swipe){var i=t.swipeVert?"swipeUp.cycle":"swipeLeft.cycle swipeleft.cycle",n=t.swipeVert?"swipeDown.cycle":"swipeRight.cycle swiperight.cycle";t.container.on(i,function(e){t._tempFx=t.swipeFx,t.API.next()}),t.container.on(n,function(){t._tempFx=t.swipeFx,t.API.prev()})}}),e(document).on("cycle-update-view",function(e,t,i,n){if(!t.allowWrap){var s=t.disabledClass,o=t.API.getComponent("next"),a=t.API.getComponent("prev"),r=t._prevBoundry||0,l=void 0!==t._nextBoundry?t._nextBoundry:t.slideCount-1;t.currSlide==l?o.addClass(s).prop("disabled",!0):o.removeClass(s).prop("disabled",!1),t.currSlide===r?a.addClass(s).prop("disabled",!0):a.removeClass(s).prop("disabled",!1)}}),e(document).on("cycle-destroyed",function(e,t){t.API.getComponent("prev").off(t.nextEvent),t.API.getComponent("next").off(t.prevEvent),t.container.off("swipeleft.cycle swiperight.cycle swipeLeft.cycle swipeRight.cycle swipeUp.cycle swipeDown.cycle")})}(jQuery),function(e){"use strict";e.extend(e.fn.cycle.defaults,{progressive:!1}),e(document).on("cycle-pre-initialize",function(t,i){if(i.progressive){var n,s,o=i.API,a=o.next,r=o.prev,l=o.prepareTx,c=e.type(i.progressive);if("array"==c)n=i.progressive;else if(e.isFunction(i.progressive))n=i.progressive(i);else if("string"==c){if(s=e(i.progressive),n=e.trim(s.html()),!n)return;if(/^(\[)/.test(n))try{n=e.parseJSON(n)}catch(h){return void o.log("error parsing progressive slides",h)}else n=n.split(new RegExp(s.data("cycle-split")||"\n")),n[n.length-1]||n.pop()}l&&(o.prepareTx=function(e,t){var s,o;return e||0===n.length?void l.apply(i.API,[e,t]):void(t&&i.currSlide==i.slideCount-1?(o=n[0],n=n.slice(1),i.container.one("cycle-slide-added",function(e,t){setTimeout(function(){t.API.advanceSlide(1)},50)}),i.API.add(o)):t||0!==i.currSlide?l.apply(i.API,[e,t]):(s=n.length-1,o=n[s],n=n.slice(0,s),i.container.one("cycle-slide-added",function(e,t){setTimeout(function(){
t.currSlide=1,t.API.advanceSlide(-1)},50)}),i.API.add(o,!0)))}),a&&(o.next=function(){var e=this.opts();if(n.length&&e.currSlide==e.slideCount-1){var t=n[0];n=n.slice(1),e.container.one("cycle-slide-added",function(e,t){a.apply(t.API),t.container.removeClass("cycle-loading")}),e.container.addClass("cycle-loading"),e.API.add(t)}else a.apply(e.API)}),r&&(o.prev=function(){var e=this.opts();if(n.length&&0===e.currSlide){var t=n.length-1,i=n[t];n=n.slice(0,t),e.container.one("cycle-slide-added",function(e,t){t.currSlide=1,t.API.advanceSlide(-1),t.container.removeClass("cycle-loading")}),e.container.addClass("cycle-loading"),e.API.add(i,!0)}else r.apply(e.API)})}})}(jQuery),function(e){"use strict";e.extend(e.fn.cycle.defaults,{tmplRegex:"{{((.)?.*?)}}"}),e.extend(e.fn.cycle.API,{tmpl:function(t,i){var n=new RegExp(i.tmplRegex||e.fn.cycle.defaults.tmplRegex,"g"),s=e.makeArray(arguments);return s.shift(),t.replace(n,function(t,i){var n,o,a,r,l=i.split(".");for(n=0;n<s.length;n++)if(a=s[n]){if(l.length>1)for(r=a,o=0;o<l.length;o++)a=r,r=r[l[o]]||i;else r=a[i];if(e.isFunction(r))return r.apply(a,s);if(void 0!==r&&null!==r&&r!=i)return r}return i})}})}(jQuery),function(e){e.doWhen=function(t){return e.Deferred(function(i){var n=e.extend({},{when:null,exec:function(){},interval:100,attempts:100,delayed:0},t,{checkId:null}),s=function(){return n.when()===!0?(n.exec.call(i.promise()),void i.resolve()):void(n.checkId=setInterval(function(){0===n.attempts?(clearInterval(n.checkId),i.reject()):(--n.attempts,n.when()===!0&&(n.attempts=0,clearInterval(n.checkId),n.exec.call(i.promise()),i.resolve()))},n.interval))};n.delayed>0?setTimeout(s,Number(n.delayed)):s()}).promise()}}(jQuery),function(t,i,n,o){function a(e,i){this.element=e,this.options=t.extend(!0,{},l,i),this.options.share=i.share,this._defaults=l,this._name=r,this.init()}var r="sharrre",l={className:"sharrre",share:{googlePlus:!1,facebook:!1,twitter:!1,digg:!1,delicious:!1,stumbleupon:!1,linkedin:!1,pinterest:!1},shareTotal:0,template:"",title:"",url:n.location.href,text:n.title,urlCurl:"sharrre.php",count:{},total:0,shorterTotal:!0,enableHover:!0,enableCounter:!0,enableTracking:!1,hover:function(){},hide:function(){},click:function(){},render:function(){},buttons:{googlePlus:{url:"",urlCount:!1,size:"medium",lang:"en-US",annotation:"",callback:""},facebook:{url:"",urlCount:!1,action:"like",layout:"button_count",width:"",send:"false",faces:"false",colorscheme:"",font:"",lang:"en_US"},twitter:{url:"",urlCount:!1,count:"horizontal",hashtags:"",via:"",related:"",lang:"en"},digg:{url:"",urlCount:!1,type:"DiggCompact"},delicious:{url:"",urlCount:!1,size:"medium"},stumbleupon:{url:"",urlCount:!1,layout:"1"},linkedin:{url:"",urlCount:!1,counter:"",onsuccess:""},pinterest:{url:"",media:"",description:"",layout:"horizontal"}}},c={googlePlus:"",facebook:"https://graph.facebook.com/fql?q=SELECT%20url,%20normalized_url,%20share_count,%20like_count,%20comment_count,%20total_count,commentsbox_count,%20comments_fbid,%20click_count%20FROM%20link_stat%20WHERE%20url=%27{url}%27&callback=?",twitter:"http://cdn.api.twitter.com/1/urls/count.json?url={url}&callback=?",digg:"http://services.digg.com/2.0/story.getInfo?links={url}&type=javascript&callback=?",delicious:"http://feeds.delicious.com/v2/json/urlinfo/data?url={url}&callback=?",stumbleupon:"",linkedin:"http://www.linkedin.com/countserv/count/share?format=jsonp&url={url}&callback=?",pinterest:""},h={googlePlus:function(e){var s=e.options.buttons.googlePlus;t(e.element).find(".buttons").append('<div class="button googleplus"><div class="g-plusone" data-size="'+s.size+'" data-href="'+(""!==s.url?s.url:e.options.url)+'" data-annotation="'+s.annotation+'" data-callback="'+s.callback+'"></div></div>'),i.___gcfg={lang:e.options.buttons.googlePlus.lang};var o=0;"undefined"==typeof gapi&&0==o?(o=1,function(){var e=n.createElement("script");e.type="text/javascript",e.async=!0,e.src="//apis.google.com/js/plusone.js";var t=n.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()):gapi.plusone.go()},facebook:function(e){var i=e.options.buttons.facebook;t(e.element).find(".buttons").append('<div class="button facebook"><div id="fb-root"></div><div class="fb-like" data-href="'+(""!==i.url?i.url:e.options.url)+'" data-send="'+i.send+'" data-layout="'+i.layout+'" data-width="'+i.width+'" data-show-faces="'+i.faces+'" data-action="'+i.action+'" data-colorscheme="'+i.colorscheme+'" data-font="'+i.font+'" data-via="'+i.via+'"></div></div>');var s=0;"undefined"==typeof FB&&0==s?(s=1,function(e,t,n){var s,o=e.getElementsByTagName(t)[0];e.getElementById(n)||(s=e.createElement(t),s.id=n,s.src="//connect.facebook.net/"+i.lang+"/all.js#xfbml=1",o.parentNode.insertBefore(s,o))}(n,"script","facebook-jssdk")):FB.XFBML.parse()},twitter:function(e){var i=e.options.buttons.twitter;t(e.element).find(".buttons").append('<div class="button twitter"><a href="https://twitter.com/share" class="twitter-share-button" data-url="'+(""!==i.url?i.url:e.options.url)+'" data-count="'+i.count+'" data-text="'+e.options.text+'" data-via="'+i.via+'" data-hashtags="'+i.hashtags+'" data-related="'+i.related+'" data-lang="'+i.lang+'">Tweet</a></div>');var s=0;"undefined"==typeof twttr&&0==s?(s=1,function(){var e=n.createElement("script");e.type="text/javascript",e.async=!0,e.src="//platform.twitter.com/widgets.js";var t=n.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()):t.ajax({url:"//platform.twitter.com/widgets.js",dataType:"script",cache:!0})},digg:function(e){var i=e.options.buttons.digg;t(e.element).find(".buttons").append('<div class="button digg"><a class="DiggThisButton '+i.type+'" rel="nofollow external" href="http://digg.com/submit?url='+encodeURIComponent(""!==i.url?i.url:e.options.url)+'"></a></div>');var s=0;"undefined"==typeof __DBW&&0==s&&(s=1,function(){var e=n.createElement("SCRIPT"),t=n.getElementsByTagName("SCRIPT")[0];e.type="text/javascript",e.async=!0,e.src="//widgets.digg.com/buttons.js",t.parentNode.insertBefore(e,t)}())},delicious:function(e){if("tall"==e.options.buttons.delicious.size)var i="width:50px;",n="height:35px;width:50px;font-size:15px;line-height:35px;",s="height:18px;line-height:18px;margin-top:3px;";else var i="width:93px;",n="float:right;padding:0 3px;height:20px;width:26px;line-height:20px;",s="float:left;height:20px;line-height:20px;";var o=e.shorterTotal(e.options.count.delicious);"undefined"==typeof o&&(o=0),t(e.element).find(".buttons").append('<div class="button delicious"><div style="'+i+'font:12px Arial,Helvetica,sans-serif;cursor:pointer;color:#666666;display:inline-block;float:none;height:20px;line-height:normal;margin:0;padding:0;text-indent:0;vertical-align:baseline;"><div style="'+n+'background-color:#fff;margin-bottom:5px;overflow:hidden;text-align:center;border:1px solid #ccc;border-radius:3px;">'+o+'</div><div style="'+s+'display:block;padding:0;text-align:center;text-decoration:none;width:50px;background-color:#7EACEE;border:1px solid #40679C;border-radius:3px;color:#fff;"><img src="http://www.delicious.com/static/img/delicious.small.gif" height="10" width="10" alt="Delicious" /> Add</div></div></div>'),t(e.element).find(".delicious").on("click",function(){e.openPopup("delicious")})},stumbleupon:function(e){var o=e.options.buttons.stumbleupon;t(e.element).find(".buttons").append('<div class="button stumbleupon"><su:badge layout="'+o.layout+'" location="'+(""!==o.url?o.url:e.options.url)+'"></su:badge></div>');var a=0;"undefined"==typeof STMBLPN&&0==a?(a=1,function(){var e=n.createElement("script");e.type="text/javascript",e.async=!0,e.src="//platform.stumbleupon.com/1/widgets.js";var t=n.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}(),s=i.setTimeout(function(){"undefined"!=typeof STMBLPN&&(STMBLPN.processWidgets(),clearInterval(s))},500)):STMBLPN.processWidgets()},linkedin:function(e){var s=e.options.buttons.linkedin;t(e.element).find(".buttons").append('<div class="button linkedin"><script type="in/share" data-url="'+(""!==s.url?s.url:e.options.url)+'" data-counter="'+s.counter+'" data-onsuccess="'+s.onsuccess+'"></script></div>');var o=0;"undefined"==typeof i.IN&&0==o?(o=1,function(){var e=n.createElement("script");e.type="text/javascript",e.async=!0,e.src="//platform.linkedin.com/in.js";var t=n.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()):i.IN.init()},pinterest:function(e){var i=e.options.buttons.pinterest;t(e.element).find(".buttons").append('<div class="button pinterest"><a href="http://pinterest.com/pin/create/button/?url='+(""!==i.url?i.url:e.options.url)+"&media="+i.media+"&description="+i.description+'" class="pin-it-button" count-layout="'+i.layout+'">Pin It</a></div>'),function(){var e=n.createElement("script");e.type="text/javascript",e.async=!0,e.src="//assets.pinterest.com/js/pinit.js";var t=n.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()}},d={googlePlus:function(){},facebook:function(){fb=i.setInterval(function(){"undefined"!=typeof FB&&(FB.Event.subscribe("edge.create",function(e){_gaq.push(["_trackSocial","facebook","like",e])}),FB.Event.subscribe("edge.remove",function(e){_gaq.push(["_trackSocial","facebook","unlike",e])}),FB.Event.subscribe("message.send",function(e){_gaq.push(["_trackSocial","facebook","send",e])}),clearInterval(fb))},1e3)},twitter:function(){tw=i.setInterval(function(){"undefined"!=typeof twttr&&(twttr.events.bind("tweet",function(e){e&&_gaq.push(["_trackSocial","twitter","tweet"])}),clearInterval(tw))},1e3)},digg:function(){},delicious:function(){},stumbleupon:function(){},linkedin:function(){},pinterest:function(){}},u={googlePlus:function(e){i.open("https://plus.google.com/share?hl="+e.buttons.googlePlus.lang+"&url="+encodeURIComponent(""!==e.buttons.googlePlus.url?e.buttons.googlePlus.url:e.url),"","toolbar=0, status=0, width=900, height=500")},facebook:function(e){i.open("http://www.facebook.com/sharer/sharer.php?u="+encodeURIComponent(""!==e.buttons.facebook.url?e.buttons.facebook.url:e.url)+"&t="+e.text,"","toolbar=0, status=0, width=900, height=500")},twitter:function(e){i.open("https://twitter.com/intent/tweet?text="+encodeURIComponent(e.text)+"&url="+encodeURIComponent(""!==e.buttons.twitter.url?e.buttons.twitter.url:e.url)+(""!==e.buttons.twitter.via?"&via="+e.buttons.twitter.via:""),"","toolbar=0, status=0, width=650, height=360")},digg:function(e){i.open("http://digg.com/tools/diggthis/submit?url="+encodeURIComponent(""!==e.buttons.digg.url?e.buttons.digg.url:e.url)+"&title="+e.text+"&related=true&style=true","","toolbar=0, status=0, width=650, height=360")},delicious:function(e){i.open("http://www.delicious.com/save?v=5&noui&jump=close&url="+encodeURIComponent(""!==e.buttons.delicious.url?e.buttons.delicious.url:e.url)+"&title="+e.text,"delicious","toolbar=no,width=550,height=550")},stumbleupon:function(e){i.open("http://www.stumbleupon.com/badge/?url="+encodeURIComponent(""!==e.buttons.delicious.url?e.buttons.delicious.url:e.url),"stumbleupon","toolbar=no,width=550,height=550")},linkedin:function(e){i.open("https://www.linkedin.com/cws/share?url="+encodeURIComponent(""!==e.buttons.delicious.url?e.buttons.delicious.url:e.url)+"&token=&isFramed=true","linkedin","toolbar=no,width=550,height=550")},pinterest:function(e){i.open("http://pinterest.com/pin/create/button/?url="+encodeURIComponent(""!==e.buttons.pinterest.url?e.buttons.pinterest.url:e.url)+"&media="+encodeURIComponent(e.buttons.pinterest.media)+"&description="+e.buttons.pinterest.description,"pinterest","toolbar=no,width=700,height=300")}};a.prototype.init=function(){var e=this;""!==this.options.urlCurl&&(c.googlePlus=this.options.urlCurl+"?url={url}&type=googlePlus",c.stumbleupon=this.options.urlCurl+"?url={url}&type=stumbleupon",c.pinterest=this.options.urlCurl+"?url={url}&type=pinterest"),t(this.element).addClass(this.options.className),"undefined"!=typeof t(this.element).data("title")&&(this.options.title=t(this.element).attr("data-title")),"undefined"!=typeof t(this.element).data("url")&&(this.options.url=t(this.element).data("url")),"undefined"!=typeof t(this.element).data("text")&&(this.options.text=t(this.element).data("text")),t.each(this.options.share,function(t,i){i===!0&&e.options.shareTotal++}),e.options.enableCounter===!0?t.each(this.options.share,function(t,i){if(i===!0)try{e.getSocialJson(t)}catch(n){}}):""!==e.options.template?this.options.render(this,this.options):this.loadButtons(),t(this.element).hover(function(){0===t(this).find(".buttons").length&&e.options.enableHover===!0&&e.loadButtons(),e.options.hover(e,e.options)},function(){e.options.hide(e,e.options)}),t(this.element).click(function(){return e.options.click(e,e.options),!1})},a.prototype.loadButtons=function(){var e=this;t(this.element).append('<div class="buttons"></div>'),t.each(e.options.share,function(t,i){1==i&&(h[t](e),e.options.enableTracking===!0&&d[t]())})},a.prototype.getSocialJson=function(e){var i=this,n=0,s=c[e].replace("{url}",encodeURIComponent(this.options.url));this.options.buttons[e].urlCount===!0&&""!==this.options.buttons[e].url&&(s=c[e].replace("{url}",this.options.buttons[e].url)),""!=s&&""!==i.options.urlCurl?t.getJSON(s,function(t){if("undefined"!=typeof t.count){var s=t.count+"";s=s.replace("",""),n+=parseInt(s,10)}else t.data&&t.data.length>0&&"undefined"!=typeof t.data[0].total_count?n+=parseInt(t.data[0].total_count,10):"undefined"!=typeof t.shares?n+=parseInt(t.shares,10):"undefined"!=typeof t[0]?n+=parseInt(t[0].total_posts,10):"undefined"!=typeof t[0];i.options.count[e]=n,i.options.total+=n,i.renderer(),i.rendererPerso()}).error(function(){i.options.count[e]=0,i.rendererPerso()}):(i.renderer(),i.options.count[e]=0,i.rendererPerso())},a.prototype.rendererPerso=function(){var t=0;for(e in this.options.count)t++;t===this.options.shareTotal&&this.options.render(this,this.options)},a.prototype.renderer=function(){var e=this.options.total,i=this.options.template;this.options.shorterTotal===!0&&(e=this.shorterTotal(e)),""!==i?(i=i.replace("{total}",e),t(this.element).html(i)):t(this.element).html('<div class="box"><a class="count" href="#">'+e+"</a>"+(""!==this.options.title?'<a class="share" href="#">'+this.options.title+"</a>":"")+"</div>")},a.prototype.shorterTotal=function(e){return e>=1e6?e=(e/1e6).toFixed(2)+"M":e>=1e3&&(e=(e/1e3).toFixed(1)+"k"),e},a.prototype.openPopup=function(e){if(u[e](this.options),this.options.enableTracking===!0){var t={googlePlus:{site:"Google",action:"+1"},facebook:{site:"facebook",action:"like"},twitter:{site:"twitter",action:"tweet"},digg:{site:"digg",action:"add"},delicious:{site:"delicious",action:"add"},stumbleupon:{site:"stumbleupon",action:"add"},linkedin:{site:"linkedin",action:"share"},pinterest:{site:"pinterest",action:"pin"}};_gaq.push(["_trackSocial",t[e].site,t[e].action])}},a.prototype.simulateClick=function(){var e=t(this.element).html();t(this.element).html(e.replace(this.options.total,this.options.total+1))},a.prototype.update=function(e,t){""!==e&&(this.options.url=e),""!==t&&(this.options.text=t)},t.fn[r]=function(e){var i=arguments;return e===o||"object"==typeof e?this.each(function(){t.data(this,"plugin_"+r)||t.data(this,"plugin_"+r,new a(this,e))}):"string"==typeof e&&"_"!==e[0]&&"init"!==e?this.each(function(){var n=t.data(this,"plugin_"+r);n instanceof a&&"function"==typeof n[e]&&n[e].apply(n,Array.prototype.slice.call(i,1))}):void 0}}(jQuery,window,document),function(e){function t(e,t){if(!(e.originalEvent.touches.length>1)){e.preventDefault();var i=e.originalEvent.changedTouches[0],n=document.createEvent("MouseEvents");n.initMouseEvent(t,!0,!0,window,1,i.screenX,i.screenY,i.clientX,i.clientY,!1,!1,!1,!1,0,null),e.target.dispatchEvent(n)}}if(e.support.touch="ontouchend"in document,e.support.touch){var i,n=e.ui.mouse.prototype,s=n._mouseInit,o=n._mouseDestroy;n._touchStart=function(e){var n=this;!i&&n._mouseCapture(e.originalEvent.changedTouches[0])&&(i=!0,n._touchMoved=!1,t(e,"mouseover"),t(e,"mousemove"),t(e,"mousedown"))},n._touchMove=function(e){i&&(this._touchMoved=!0,t(e,"mousemove"))},n._touchEnd=function(e){i&&(t(e,"mouseup"),t(e,"mouseout"),this._touchMoved||t(e,"click"),i=!1)},n._mouseInit=function(){var t=this;t.element.bind({touchstart:e.proxy(t,"_touchStart"),touchmove:e.proxy(t,"_touchMove"),touchend:e.proxy(t,"_touchEnd")}),s.call(t)},n._mouseDestroy=function(){var t=this;t.element.unbind({touchstart:e.proxy(t,"_touchStart"),touchmove:e.proxy(t,"_touchMove"),touchend:e.proxy(t,"_touchEnd")}),o.call(t)}}}(jQuery),window.console||(window.console={}),"function"!=typeof window.console.log&&(window.console.log=function(){}),"function"!=typeof window.console.warn&&(window.console.warn=function(){}),function(){function e(e,t,i){var n=e.split(t);if(!i)return n;if(n.length<i)return n;var s=n.splice(0,i-1),o=n.join(t);return s.push(o),s}function t(e,t){return e==A?(IN.$extensions(t),null):(C.test(e)&&(t=t.replace(b,S)),""==t?null:t)}function i(e,i){if(i=t(e,i)){if(e=e.replace(w,function(){return arguments[1].toUpperCase()}),"lang"===e&&!k.test(i))try{var n=i.replace("-","_").split("_");if(n=[n[0].substr(0,2).toLowerCase(),n[1].substr(0,2).toUpperCase()].join("_"),!k.test(n))throw new Error;i=n}catch(s){h||IN.ENV.js.suppressWarnings||!i||console.warn("'"+i+"' is not a supported language, defaulting to 'en_US'"),i="en_US"}IN.ENV.js[e]=i;var o=[encodeURIComponent(e),encodeURIComponent(i)].join("=");for(var a in z)if(z.hasOwnProperty(a)&&z[a]===e)return void U.push(o);F.push(o)}}function n(e,t){return e+(/\?/.test(e)?"&":"?")+t.join("&")}var s,o,a,r,l,c,h,d={bootstrapInit:+new Date},u=document,p=/^https?:\/\/.*?linkedin.*?\/in\.js.*?$/,m=/async=true/,f=/^https:\/\//,g=/\/\*((?:.|[\s])*?)\*\//m,v=/\r/g,b=/[\s]/g,y=/^[\s]*(.*?)[\s]*:[\s]*(.*)[\s]*$/,w=/_([a-z])/gi,_=/^[\s]+|[\s]+$/g,k=/^[a-z]{2}(_)[A-Z]{2}$/,I=/suppress(Warnings|_warnings):true/gi,C=/^api(Key|_key)$/gi,$="\n",x=",",S="",T="@",A="extensions",M="on",P="onDOMReady",E="onOnce",N="script",D="https://www.linkedin.com/uas/js/userspace?v=0.0.2000-RC1.30628-1408",R="https://platform.linkedin.com/js/secureAnonymousFramework?v=0.0.2000-RC1.30628-1408",O="http://platform.linkedin.com/js/nonSecureAnonymousFramework?v=0.0.2000-RC1.30628-1408",L=u.getElementsByTagName("head")[0],B=u.getElementsByTagName(N),F=[],U=[],z=["lang"],H=!1;if(window.IN&&IN.ENV&&IN.ENV.js)return void(IN.ENV.js.suppressWarnings||console.warn("duplicate in.js loaded, any parameters will be ignored"));for(window.IN=window.IN||{},IN.ENV={},IN.ENV.js={},IN.ENV.js.extensions={},statsQueue=IN.ENV.statsQueue=[],statsQueue.push(d),s=IN.ENV.evtQueue=[],IN.Event={on:function(){s.push({type:M,args:arguments})},onDOMReady:function(){s.push({type:P,args:arguments})},onOnce:function(){s.push({type:E,args:arguments})}},IN.$extensions=function(t){var i,n,s,o,a=IN.ENV.js.extensions;i=t.split(x);for(var r=0,l=i.length;l>r;r++)n=e(i[r],T,2),s=n[0].replace(_,S),o=n[1],a[s]||(a[s]={src:o?o.replace(_,S):S,loaded:!1})},o="",q=0,Y=B.length;Y>q;q++){var j=B[q];if(p.test(j.src)){m.test(j.src)&&(H=!0);try{o=j.innerHTML.replace(_,S)}catch(V){try{o=j.text.replace(_,S)}catch(W){}}}}o=o.replace(g,"$1").replace(_,S).replace(v,S),h=I.test(o.replace(b,S));for(var q=0,G=o.split($),Y=G.length;Y>q;q++){var K=G[q];if(K&&!(K.replace(b,S).length<=0)){try{a=K.match(y),r=a[1].replace(_,S),l=a[2].replace(_,S)}catch(X){h||console.warn("script tag contents must be key/value pairs separated by a colon. Source: "+X);continue}i(r,l)}}i("secure",f.test(document.location.href)?1:0),IN.init=function(e){var t;e=e||{};for(var s in e)e.hasOwnProperty(s)&&i(s,e[s]);c=u.createElement(N),t=IN.ENV.js.apiKey?n(D,F):IN.ENV.js.secure?R:O,c.src=n(t,U),L.appendChild(c),statsQueue.push({userspaceRequested:+new Date})},statsQueue.push({bootstrapLoaded:+new Date}),H||IN.init()}(),window.OB_releaseVer="129115",OBR=window.OBR||{},OBR.h=OBR.h||[],OBR.oa=OBR.oa||{},window.OBR$=function(e){return document.getElementById(e)},OBR.c=OBR.c||function(){var e={},t={v:function(){return e},i:function(t){e.O=t,e.ma=[],e.startTime=(new Date).getTime()},startTime:function(){return e.startTime},log:function(t){var i=((new Date).getTime()-e.startTime)/1e3;1e3>e.ma.length&&e.ma.push(i+" >"+t)},printLog:function(){if(e.O.b.$e)window.console.log(e.ma.join("\n"));else{var t=e.O.a.Ca();t&&(t.innerHTML=e.ma.join("<br>"),t.style.display="block")}return e.ma.join("\n")}};return t.i(OBR),t}(),OBR.printLog=OBR.c.printLog,OBR.p=function(){this.D=[]},OBR.p.prototype.add=function(e,t){var i;"string"==typeof e&&"function"==typeof t&&(i={},i.name=e,i.re=t,this.D.push(i))},OBR.p.prototype.Db=function(e){var t,i;for(OBR.c.log("remove event :"+e),t=0,i=this.D.length;i>t;t+=1)if(this.D[t]&&this.D[t].name&&this.D[t].name===e)try{this.D.splice(t,1)}catch(n){OBR.c.log("rm evnt err: "+n)}},OBR.p.prototype.k=function(e,t,i){var n,s,o,a;for(t=t||[],i=!!i,OBR.c.log("event fire:"+e),n=0,s=this.D.length;s>n;n+=1)if(o=this.D[n].name||"",a=this.D[n].re,o===e)try{a.apply(this,t)}catch(r){OBR.c.log("fire evnt *"+e+"* error: "+r)}!0===i&&this.Db(e)},OBR.p.prototype.P=function(){this.D=[]},OBR.a=OBR.a||function(){var e={},t={},i=document,n=OBR;return t.v=function(){return e.O=n,e},t.i=function(e){n=e},t.aa=function(){return function(){}},t.Pe=function(){var e=window.jQuery;return void 0!==e?!(/1\.(0|1|2|3|4)\.(0|1)/.test(e.fn.jquery)||/^1\.1/.test(e.fn.jquery)||/^1\.2/.test(e.fn.jquery)||/^1\.3/.test(e.fn.jquery)):!1},t.U=function(e){return null===e||isNaN(e)?null:n.o("outbrain_widget_"+e)},t.Ca=function(){return n.o("ob_holder")},t.ob=function(){if(!n.o(n.b.La)){var e=n.a.createElement("iframe",n.b.La),i=e.style;i.display="none",i.width="1px",i.height="1px",e.src="about:blank",(i=t.Ca())||(i=t.jc()),n.a.V(e,i)}},t.jc=function(){if(i.body)return i.body;var e;return e=n.a.Ba("","","body",!0),0>=e.length?i.lastChild:e[0]},t.createElement=function(e,t,n){return e=i.createElement(e),"string"==typeof t&&e.setAttribute("id",t),"string"==typeof n&&(e.style.cssText=n),e},t.Ma=function(e){if(n.b.Ld===n.b.Pb)try{document.createStyleSheet().cssText=e}catch(t){}else{var s=i.createElement("style"),o=i.body?"string"==typeof i.body.style.WebkitAppearance:!1;s.type="text/css",i.getElementsByTagName("head")[0].appendChild(s),s[o?"innerText":"innerHTML"]=e}},t.C=function(e,t){var s=i.createElement("script");return s.type=n.b.rf,s.src=e,s.async=!!t,s.defer=!1,s},t.Xg=function(e,t){var i=n.a.createElement("link",e);return i.setAttribute("rel","stylesheet"),i.setAttribute("type",n.b.be),t&&i.setAttribute("href",t),i},t.Ud=function(e){var t=n.o("ob_iframe");t&&(t.src=e)},t.Qc=function(){var e;return e=isNaN(e)?1e5:e,Math.floor(Math.random()*e)},t.cg=function(e,t,i){return e.replace(t,i)},t.Fe=function(e,t){var i=[];return i.push('<body onload="'),i.push("var js = document.createElement('script');"),i.push("js.src = '"+e+"';"),"number"==typeof t&&i.push("js.onerror = function(){ top.OBR.extern.errorInjectionHandler("+t+") };"),i.push("var d = document;d.getElementsByTagName('head')[0].appendChild(js);\">"),i.push("<script type='text/javascript'>"),i.push("window.OBR={extern:{}};"),i.push("OBR.extern.returnedHtmlData=function(json,idx){(top.OBR.extern.returnedHtmlData)&& top.OBR.extern.returnedHtmlData(json,idx); };"),i.push("OBR.extern.returnedIrdData=function(json,idx){(top.OBR.extern.returnedIrdData)&& top.OBR.extern.returnedIrdData (json,idx);};"),i.push("OBR.extern.returnedJsonData=function(json,idx){(top.OBR.extern.returnedJsonData)&& top.OBR.extern.returnedJsonData(json,idx);};"),i.push("OBR.extern.returnedError=function(json){(top.OBR.extern.returnedError)&& top.OBR.extern.returnedError(json);};"),i.push("window.outbrain={};"),i.push("outbrain.returnedIrdJsonData=function(json,idx){(top.outbrain.returnedIrdJsonData) && top.outbrain.returnedIrdJsonData(json,idx);  };"),i.push("outbrain.returnedJsonData =function(json,idx){(top.outbrain.returnedJsonData) && top.outbrain.returnedJsonData(json,idx); };"),i.push("outbrain.returnedError=function(json){(top.outbrain.returnedError) && top.outbrain.returnedError(json);};"),i.push("</script>"),i.push("</body>"),i.join("")},t.Ee=function(){var e;if(e=OBR.o("objsonpp")){if(!t.ef())return OBR.o("objsonpp");t.W(e.parentNode)&&e.parentNode.removeChild(e)}return e=document.createElement("iframe"),e.id="objsonpp",e.ig&&(e.ig="seamless"),(e.frameElement||e).style.cssText="width: 0; height: 0; border: 0",e.src="javascript:false",document.body.appendChild(e),e},t.We=function(e){var i=t.Ee(),i=i.contentWindow||i.contentDocument;i.document&&(i=i.document),i.open().write(e),i.close()},t.H=function(e){var t,i,s=n.b.fe;i=s.getElementsByTagName("head");try{i&&0<i.length?i[0].insertBefore(e,i[0].firstChild):(t=s.getElementsByTagName("script"),t[0].insertBefore(e,t[0].firstChild))}catch(o){n.c.log("Err insertToHead:"+o)}},t.Ze=function(e,i){var n=t.Fe(i,e);t.rb(n)||t.We(n)},t.ah=function(e){return e=e||OBR,"function"!=typeof e.p?(OBR.c.log("namespace.EventManager not function"),null):new e.p},t.L=function(e){return encodeURIComponent(e)},t.W=function(e){return null!==e},t.nf=function(){var e,i,s,o,a;for(e=document.getElementsByTagName("div"),i=e.length,a=n.b.Ua,s=0;i>s;s+=1)if(o=e[s].getAttribute(a),t.rb(o))return!0;return!1},t.mf=function(e){return t.qb(e)||"1"!==(n.b.hg[e.qc().recMode||""]||"")||!t.nf()?!1:!0},t.qb=function(e){return"undefined"==typeof e||null===e},t.rb=function(e){return t.qb(e)||""===e},t.Ba=function(e,n,s,o){var a,r,l,c,h;for(r=[],o=!!o,a=t.rb(a)?!0:!1,s=i.getElementsByTagName(s||"*"),l=0,c=s.length;c>l;l+=1)h="class"===e?s[l].className:s[l].getAttribute(e),null!==h&&(!1===a&&(h=h.toLowerCase(),n=n.toLowerCase()),(h=""===e?!0:o?-1<h.indexOf(n):h===n)&&r.push(s[l]));return r},t.bg=function(e){var t=window;t.detachEvent?t.detachEvent("onscroll",e):t.removeEventListener&&t.removeEventListener("scroll",e,!1)},t.m=function(e,t,i){e.attachEvent?e.attachEvent("on"+t,function(){i.call(e)}):e.addEventListener&&e.addEventListener(t,i,!1)},t.V=function(e,t){try{t.appendChild(e)}catch(i){n.c.log("fail insert into Dom:"+i)}},t.Ta=function(e){e=n.o(e),!t.qb(e)&&t.W(e.parentNode)&&e.parentNode.removeChild(e)},t.insertBefore=function(e,t){return t.parentNode.insertBefore(e,t)},t.isArray=function(e){return e instanceof Array?!0:"[object Array]"===Object.prototype.toString.call(e)},t.Wa=function(e,t){var i=/htt(p|ps)?:\/\/127\.0\.0\.1(:\d\d\d\d)?$/i;return/htt(p|ps)?:\/\/([\w\-]*|[\w\-]*\.[\w\-]*)\.outbrain\.com(:\d\d\d\d)?$/i.test(e)||i.test(e)?e:t},t.Jg=function(e){e=e.replace(/^(\s*)/g,"");var t=i.createElement("div");return t.innerHTML=e,t.childNodes},t.F=function(e,t){return e?e.getAttribute(t):null},t.B=function(e,t,i){e&&e.setAttribute(t,i)},t.Qb=function(e,t){e&&(e.className+=" "+t)},t.Q=function(e,t){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var i,n;try{return i=RegExp("[\\?&]"+e+"=([^&#]*)","i"),n=i.exec(window.location.href),null===n?t:n[1]}catch(s){return t}},t.Yd=function(e){return"string"==typeof e&&0<e.indexOf("#")&&(e=e.substr(0,e.lastIndexOf("#"))),e},t.Yb=function(e){var t=n.b.$+"/strip_default.png";e.src!==t&&(e.alt="",e.title="",e.src=t)},t.je=function(){var e,t,n=null,s=null;if("string"==typeof window.OB_MP_feed)n=window.OB_MP_feed;else if((e=i.getElementsByTagName("head"))&&0<e.length)for(t=e[0].getElementsByTagName("link"),e=0;e<t.length;e+=1)if(s=t[e],null!==s.type&&("application/rss+xml"===s.type||"application/atom+xml"===s.type)&&null!==s.href&&""!==s.href){n=s.href;break}return n},t.rc=function(e){var t=null;return e.currentStyle?t=e.currentStyle.color:window.getComputedStyle&&(t=document.defaultView.getComputedStyle(e,null).getPropertyValue("color")),t},t.mg=function(){var e,i,s=t.Ca();t.W(s)&&(e=n.a.createElement("span","ob_a"),t.insertBefore(e,s),e.innerHTML=".",i=t.rc(e),t.Ta("ob_a"),e=n.a.createElement("a","ob_a"),e.setAttribute("href","void(0)"),e.innerHTML=".",t.insertBefore(e,s),s=t.rc(e),t.Ta("ob_a"),i="rgb(0, 0, 0)"===i||"#000000"===i?"#555":i,t.Ma(".ob-tcolor{color:"+i+"} .ob-lcolor{color:"+s+"} .ob-bgtcolor{background-color:"+i+"} .item-link-container:hover .ob-tcolor{border-color:"+i+"}"))},t.Be=function(){var e=t.oc("property","og:url","meta","content");return null===e&&(e=t.oc("rel","canonical","link","href")),null===e&&(e=window.location.href),e},t.oc=function(e,i,n,s){var o=null;return e=t.Ba(e,i,n,!1),null!==e&&0<e.length&&(o=e[0].getAttribute(s)),o},t.Vd=function(e){var i,s,o;s=n.h[e].l("tracking",!1),i=n.b.Oa,e=n.h[e].l("comScoreEnabled",!0),o=n.b.Zb,!1===s&&!1===i&&!0===e&&!1===o&&(t.ob(),i=n.o(n.b.La))&&(i.src=n.b.$+"/"+n.b.Sa+"3rd/comScore/comScore.htm",n.b.Zb=!0)},t.Ne=function(){var e=t.Ga(8),i="";return"string"==typeof window.name&&(""===window.name||-1<window.name.indexOf("frame"))?(window.name=e,i=window.name):i="string"==typeof window.name&&""!==window.name?window.name:e,i},t.Ga=function(e){var t,i;for(t=[],e="number"==typeof e?e:8,i=0;e>i;i+=1)t.push("0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz".charAt(Math.floor(61*Math.random())));return t.join("")},t.Ea=function(e){for(var t in n.oa)if(n.oa[t].j===e)return n.oa[t];return null},t.tc=function(e){var t,i;for(i=n.h,t=0;t<i.length;t+=1)if(i[t].ka()===e)return i[t];return null},t.jf=function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},t.ba=function(e,t){return"function"!=typeof e?null:"undefined"==typeof t?e():e(t)},t.ef=function(){return"Microsoft Internet Explorer"==navigator.appName},t.ce=function(e,t){return e*t},t.mc=function(e){return e&&""!==e?(e=e.replace("","").replace("http://","").replace("https://","").replace("www.","").replace("www2.","").split("/"),e.pop(),0<e.length?e:[]):[]},t.ye=function(e,i){var n=t.mc(e),s=[],o="";if(i>=n.length)o=n.join(".");else{for(s[0]=n[0],o=1;i>=o;o+=1)s[o]=n[o];o=s.join(".")}return o},t.Je=function(){return"http"+("https:"===i.location.protocol?"s":"")},t.He=function(){var e,n;return e=i.getElementById("widgetVersionSync"),null===e&&(e=t.createElement("iframe","widgetVersionSync"),n=t.createElement("div",null,"display:none; height:0px; width:0px; border:none;"),n.appendChild(e),t.jc().appendChild(n)),e},t.Og=function(e){var i;i=window.OB_releaseVer,isNaN(i)||isNaN(e)||i>=e||(e=t.Je()+"://widgets.outbrain.com/external/sync/outbrainjs.html?needToBeVer="+e.toString(),i=t.He(),i.src=e)},t.Jd=function(e){e=e.l("widgetVersionSync",1),isNaN(e)||""===e||(e=parseInt(e,10)||1,t.Og(e))},t.Ie=function(e,i){var n=e.parentNode;return n?n.tagName.toLowerCase()==i?n:t.Ie(n,i):!1},t.i(OBR),t}(),OBR.N=function(e,t,i,n,s,o,a,r,l){var c,h;c=this,h=0,l="function"==typeof l?l:OBR.a.ce,c.start=function(){var d;h+=1,OBR.a.ba(e,h)?OBR.a.ba(t,h):(d=OBR.a.ba(r,h))?OBR.a.ba(n,h):(d=h===o&&1e3!==o)?OBR.a.ba(n,h):(OBR.a.ba(i,h),d=a?l(h,s):s,setTimeout(function(){c.start()},d))},c.start()},OBR.cc=OBR.cc||{bf:function(){return"complete"===document.readyState}},OBR.le=function(){var e={},t=[];return e.add=function(e){t.push(e)},e.top=function(){return 0<t.length?t.shift():null},e.Xd=function(){t=[]},e},OBR.b=OBR.b||function(){var e,t={},i={},n=OBR;return i.yd="opera",i.Pb="msie",i.sd="firefox",i.rd="chrome",i.Bd="safari",i.vd="mozilla",i.Vg="boolean",i.rh="string",i.jh="object",i.sh="undefined",i.La="ob_iframe",i.xc=!0,i.Oc=0,i.Kb="outbrain_widget_",i.rf="text/javascript",i.be="text/css",i.fe=document,i.Bc="undefined"!=typeof document.createElement("script").async,i.pd=n.a.Ne(),i.$f=document.referrer,i.Zf=n.a.L(document.referrer),i.tf=document.location.href,i.gh=n.a.L(i.tf),i.ya=!1,i.Id=navigator.userAgent.toLowerCase(),i.nh=navigator.platform.toLowerCase(),e=i.Id,i.Ld=/opera/.test(e)?i.yd:/msie/.test(e)?i.Pb:/firefox/.test(e)?i.sd:/chrome/.test(e)?i.rd:/safari/.test(e)?i.Bd:i.vd,i.Oa=!!/(iphone|ipod|symbian|android|windows ce|blackberry|palm|ipad)/.test(e),i.gf=0,i.ff=function(){return void 0===window.XMLHttpRequest&&void 0!==ActiveXObject},i.Uf=window.OB_platformType||null,i.Qa="number"==typeof i.Uf,i.bd=null,i.dc=null,i.Ig=function(){i.Qa&&i.bd&&i.dc&&(i.bd(),i.dc())},i.ua="string"==typeof window.OB_releaseVer?window.OB_releaseVer:"0",i.Af=!0===window.OB_disable_odbl,
e=("https:"===document.location.protocol?"https":"http")+"://",i.Rd="/blogutils/ExcludeRec.action?bocr=",i.kh="html",i.Re=n.a.Wa(n.a.Q("wiodb",e+"hpr.outbrain.com"),e+"hpr.outbrain.com"),i.zb=n.a.Wa(n.a.Q("wiodb",e+"odb.outbrain.com"),e+"odb.outbrain.com"),i.Sd="http://storage.outbrain.com/",i.$=n.a.Wa(n.a.Q("wihost",e+"widgets.outbrain.com"),e+"widgets.outbrain.com"),i.Pf=n.a.Wa(n.a.Q("wiout",e+"outbrain.com"),e+"outbrain.com"),i.Nc=e+"log.outbrain.com/",i.Sa="nanoWidget/",i.Qf=i.Qa?"NANOWDGTLT13":"NANOWDGT01",i.xf=i.$+"/"+i.Sa+i.ua+(i.Qa?"/moduleLT":"/module"),i.wf=i.$+"/"+i.Sa+"3rd",i.$e="object"==typeof window.console,i.hd=n.a.Yd(n.a.je()),i.gd=null===i.hd?"":n.a.L(i.hd),i.Zb=!1,i.Bf="true"===n.a.Q("obdraft",!1)?"&obDraft=true":"",i.Ed=!1!==n.a.Q("obAbtest",!1)?"&obAbtest="+n.a.Q("obAbtest",""):"",i.ed=function(e){return i.Na=i.Na||e,i.Na},i.Na=i.ed("true"===n.a.Q("advanceLoader","false").toLowerCase()),i.Fc=0,i.na=null,i.Ua="data-obscrollable",i.hg={touch_strip:"1"},i.v=function(){return t.O=n,t},i}(),OBR.d=OBR.d||function(){var e,t={},i={};return t.i=function(i,n){e=i,t.Yf(n)},t.f={$a:"POPUPDESCRIPTION",wa:"WIDGETSTATISTICS",va:"WHATIS",Za:"FLYTHROUGH",eb:"VIDEOPLUGIN",ga:"POSCUL",bb:"SCROLL",cb:"SCROLLEXTERNAL",ab:"RECINIFRAME"},t.Ad=function(e,t){var i={Yg:e,url:t,version:-1,state:0,fb:null,$b:this,Wd:function(){if(2===i.state)i.Ec();else if(0===i.state){var e=OBR.a.C(i.url,!0);i.state=1,OBR.a.H(e)}},Ec:function(){i.state=2,"function"==typeof i.fb&&i.fb.call(i.$b)}};return i},t.Yf=function(i){function n(t){return e.b.xf+"/"+t}function s(e,n){i[e]||(i[e]=new t.Ad(e,n))}s(t.f.$a,n("popupDescription.js")),s(t.f.wa,n("widgetStatistics.js")),s(t.f.va,n("whatis.js")),s(t.f.Za,n("flyThrough.js")),s(t.f.eb,n("videoPlugin.js")),s(t.f.ga,n("positionCalculation.js")),s(t.f.ab,n("recInIframe.js")),s(t.f.bb,n("scroll.js")),s(t.f.cb,e.b.wf+"/scroll/scrollExternal.js")},t.Ce=function(e){return i[e]},t.A=function(e,i,n){(e=t.Ce(e))&&(e.fb=i||OBR.a.aa(),e.$b=n,e.Wd())},t.pc=function(e){return i[e].state},t.M=function(t){"-1"!==e.b.ua&&i[t].Ec()},t.i(OBR,i),t}(),OBR.i=OBR.i||void 0,OBR.o=function(e){return document.getElementById(e)},OBR.I=OBR.I||function(){var e,t,i={},n={};return n.i=function(n){e=n=n||OBR,i.pa=new e.p,t=!1},n.v=function(){return i},i.Ye=function(){var t,n;t=e.a.createElement("iframe","ob_ping"),t.setAttribute("id","ob_ping"),t.style.border="0px",t.style.width="0px",t.style.height="0px",t.setAttribute("src",e.b.zb+"/utils/ping.html?r="+e.a.Qc()),e.a.m(t,"load",function(){e.c.log("ping returned"),e.b.Oc=2,i.pa.k("success"),e.I.Xc()}),n=e.a.Ca(),null!==n&&(e.c.log("ping inserted"),e.a.V(t,n))},i.Tf=function(){e.c.log("ping Wait"),new e.N(function(){return 2===e.b.Oc},function(){},e.a.aa(),function(){i.pa.k("fail"),e.I.Xc()},50,200,!1)},n.Xc=function(){e.a.Ta("ob_ping")},n.Lf=function(e){i.pa.add("success",e)},n.Kf=function(e){i.pa.add("fail",e)},n.kf=function(){return t},n.fd=function(){t=!0},n.Sf=function(){i.Ye(),i.Tf()},n.u=function(){i.pa.P()},n.i(OBR),n}(),OBR.ca=OBR.ca||function(){var e,t,i={},n={};return i.i=function(i){e=i=i||OBR,t=new e.p},i.v=function(){return n},n.hb=function(i){var n,s;for(n=0,s=i.length;s>n;n+=1)e.a.B(i[n],"data-ob-mark","true"),t.k("find",[i[n]])},n.ic=function(){return e.a.Ba("class","OUTBRAIN","div",!0)},n.xe=function(t){var i,n,s=[],o=[];for(i=0,n=t.length;n>i;i+=1)if("string"==typeof t[i].containerId)if(e.o(t[i].containerId)){var a=e.o(t[i].containerId);"string"==typeof t[i].widgetId&&e.a.B(a,"data-widget-id",t[i].widgetId),"string"==typeof t[i].permalink&&e.a.B(a,"data-src",t[i].permalink),"boolean"==typeof t[i].advanceLoader&&e.a.B(a,"data-advance-loader",t[i].advanceLoader),"boolean"==typeof t[i].dynLoad&&e.a.B(a,"data-dynLoad",t[i].dynLoad),"string"==typeof t[i].widgetType&&e.a.B(a,"data-widget-type",t[i].widgetType),"string"==typeof t[i].timeout&&e.a.B(a,"data-timeout",t[i].timeout),"string"==typeof t[i].fbk&&e.a.B(a,"data-fbk",t[i].fbk),o.push(a)}else s.push(t[i]);return window.OB_elements=s,o},n.Ge=function(){var e=[];return"object"==typeof window.OB_elements&&0<window.OB_elements.length&&(e=window.OB_elements),e},n.De=function(){var t,i,s=[],o=n.ic();for(t=0,i=o.length;i>t;t+=1){var a=e.a.F(o[t],"data-ob-mark");null!==a&&"true"===a||!o[t]||s.push(o[t])}if(t=n.Ge(),0<t.length)for(e.c.log("Array of elements found!"),o=n.xe(t),t=0,i=o.length;i>t;t+=1)s.push(o[t]);return s},i.Tg=function(e){n.fc(e)},n.fc=function(i){if(void 0===i){var s=!1;e.c.log("searching for containers"),new e.N(function(){return s},e.a.aa(),function(){s=e.cc.bf();var t=n.De();s&&e.c.log("checking:("+s+")"),0<t.length&&n.hb(t)},t.k("stopSearch"),50,1e3,!1)}else 0<(i.length||0)&&n.hb(i)},i.dh=function(){return 0<n.ic().length},i.Ef=function(e){t.add("find",e)},i.mh=function(e){t.add("stopSearch",e)},i.ec=function(){n.fc()},i.me=function(t){var i,s,o=[];for(e.r.Ue(),i=0,s=e.h.length;s>i;i+=1){var a=e.a.U(i);null!==a&&("string"==typeof t&&e.a.B(a,"data-src",t),e.a.B(a,"data-ob-mark","false"),o.push(a))}0<o.length&&(e.h=[],n.hb(o))},i.u=function(){t.P(),e.h=[]},i.i(OBR),i}(),OBR.r=OBR.r||function(){var e,t={},i={};return i.i=function(i){e=i=i||OBR,t.Bb=new e.le,t.yb=new e.p,t.Pa=!1},t.te=function(t){var i;i=t.Me();var n,s=e.a.cg;return i=i&&"hp"===i?e.b.Re+"/utils/get?url=$LNK$SRC&settings=$SET&recs=$REC&widgetJSId=$WID&key=$KEY&idx=$IDX&version=$VER&ref=$REF&apv=$APV&sig=$SIG&format=$FRT&rand=$RND$DRFT$ABTEST":e.b.zb+"/utils/get?url=$LNK$SRC&settings=$SET&recs=$REC&widgetJSId=$WID&key=$KEY&idx=$IDX&version=$VER&ref=$REF&apv=$APV&sig=$SIG&format=$FRT&rand=$RND$DRFT$ABTEST",n=t.ka(),i=s(i+(""!==n&&null!==n?"&fbk="+n:""),"$LNK",e.a.L(t.da())),i=s(i,"$SRC",0<e.b.gd.length?"&srcUrl="+e.b.gd:""),i=s(i,"$IDX",t.j),i=s(i,"$SET",!0),i=s(i,"$REC",!0),i=s(i,"$KEY",e.b.Qf),i=s(i,"$WID",t.w()),i=s(i,"$VER",e.b.ua),i=s(i,"$REF",e.b.Zf),i=s(i,"$SIG",e.b.pd),i=s(i,"$APV",e.b.ya),i=s(i,"$FRT",t.ze()),i=s(i,"$RND",e.a.Qc()),i=s(i,"$DRFT",e.b.Bf),i=s(i,"$ABTEST",e.b.Ed)},t.nb=function(i,n,s){s=e.b.Na&&s;var o=n.j;n.t.vg(),s?e.a.Ze(o,i):(s=e.a.C(i,!0),""!==n.ka()&&e.a.m(s,"error",function(){OBR.extern.errorInjectionHandler(o)}),e.a.H(s)),t.yb.k("onOdbFire_"+o+"_"+n.w(),[n],!0),e.c.log("fire this src "+i)},t.wg=function(i){e.b.Bc&&setTimeout(function(){t.Wc(i.j,i.w())},1e4)},t.Wc=function(t,i){e.a.Ta("ob_odbCall_"+t+i)},i.k=function(){if(!0!==t.Pa&&!0===e.I.kf()){t.Pa=!0;var i,n=t.Bb.top();n?(e.c.log("fire odb for "+n.da()),i=t.te(n),t.nb(i,n,!0),t.wg(n)):t.Pa=!1}},i.If=function(e,i){t.yb.add("onOdbFire_"+e.j+"_"+e.w(),i)},i.Ib=function(e,i){t.Pa=!1,t.Wc(e,i)},i.lg=function(e){!0===e&&(OBR.b.ya=e)},i.Ue=function(){OBR.b.ya=!1},i.Uc=function(n){t.Bb.add(n),e.c.log("register odb for "+n.da()),i.k()},i.Md=function(e){i.Ib(e.j,e.w()),i.k()},i.u=function(){t.Bb.Xd(),t.yb.P()},i.v=function(){return t.O=e,t},i.i(OBR),i}(),OBR.g=OBR.g||function(){function e(){i.c.log("ping fail")}function t(){i.c.log("ping success"),i.I.fd(),i.display.Df(o.Hd),i.r.k()}var i,n,s={},o={};return o.vb="manualDataReady",o.ub="manualClickReady",s.i=function(e){i=e=e||OBR,n=new i.p},s.v=function(){return o},o.Hd=function(e){i.c.log("rec "+e+" was rendered");var t=i.h[e];t.Z(!0),t.t.yg(),0===e&&i.a.mg(),o.pf(t)&&o.kg(t),i.a.Jd(t),i.display.Xe(t)},o.Ke=function(e){return Math.floor(Math.random()*e)+1},o.pf=function(e){var t=i.b.Oa,n=e.l("tracking",!1);return!e.l("widgetStatistics",!1)||t||n?!1:(e=e.l("wsSampling",0),0===e?!0:o.Ke(e)===e)},o.kg=function(e){2===i.d.pc(i.d.f.wa)&&2===i.d.pc(i.d.f.ga)?i.q.Sb(e.j):i.d.A(i.d.f.ga,function(){i.d.A(i.d.f.wa,function(){i.q.Sb(e.j)},this)},this)},o.Ng=function(e){i.c.log("widget was found"),e=i.Ya.Gd(e),0===e.j&&o.Nd(),!0===e.cf()?i.c.log("Dynamic loader - stop odb!"):i.r.Uc(e)},s.Ic=function(e,t){var a,r="NA",l=e&&e.response?e.response:null;(a=i.a.Ea(t))&&(n.k("onmManualOdbReturned_"+t,[l,t]),a.X())||(l&&l.request&&l.request.widgetJsId&&(r=l.request.widgetJsId),i.r.Ib(t,r),a&&l&&l.documents&&(a.Z(!0),s.hc(o.vb,t,r,e)),i.r.k())},s.Jf=function(e,t){n.add("onmManualOdbReturned_"+e,t)},s.hc=function(e,t,i,s){e=e+t+i,n.k(e,[s.response.documents,t]),n.Db(e)},s.Gc=function(e,t){if(null!==e){var a=0,r=e.permalink,l=e.widgetId,c=e.widgetType,h=e.fbk,d=e.timeout;r&&"string"==typeof r&&l&&"string"==typeof l&&(i.c.log("manual Odb call"),a=s.uf(r),s.Ra(o.vb+a+l,t),r=i.Ya.ac(a,r,l,!1,c,h,d,!0),r.sg(),i.oa[a]=r,n.k("onmManualOdbCall",[r,o.vb]),i.I.fd(),i.r.Uc(r))}},s.Ra=function(e,t){n.add(e,t)},s.Nf=function(e){n.add("onmManualOdbCall",e)},s.uf=function(e){var t=0,n=i.b;return null===n.na&&(n.na=0<i.h.length?i.h[0].da():null),n.na===e?t=n.Fc+1:n.na=e,n.Fc=t},s.tb=function(e,t){var s=OBR.o(i.b.La);if(i.a.W(s)&&i.a.W(s.parentNode)&&s.parentNode.removeChild(s),i.a.ob(),"function"==typeof t&&n.add(o.ub,t),null!==e&&(s=e.link)&&"string"==typeof s){if(i.c.log("manual Click"),null===s.match(/http:\/\/.+outbrain.com/i))throw"Wrong redirect link: "+s;i.a.Ud(s+"&noRedirect=true"),n.k(o.ub),n.Db(o.ub)}},o.of=function(e){return o.Ac(e)||e.l("stopWidget",!1)},o.Ac=function(e){return e.l("stopRater",!1)},o.Nd=function(){i.I.Lf(t),i.I.Kf(e),i.b.Af||i.b.Bc?(i.c.log("async - no ping"),t()):i.I.Sf()},s.Ab=function(e,t){var a,r;OBR.c.log("HTML returned"),(a=i.h[t])?(a.t.ug(),a.X()||(a.setData(e),r=a.w(),o.of(a)||o.qf(a.Da())||(i.r.lg(e.response.settings.apv),s.lf(a)?s.fa(t):s.Oe(a),r&&n.k("odbRtn_"+r,[a]))),s.pe(a)):i.c.log("odbHtmlReturned : Widget not found")},o.qf=function(e){var t=!1;return null!==e.match(/(<\/?met|<\/?scr)/i)&&(t=!0,i.c.log("SECURITY")),t},s.pe=function(e){o.Ac(e)||(i.r.Ib(e.j,e.w()),i.r.k())},s.lf=function(e){var t=!0;return(e.Dc()||e.yc())&&(t=!1),t},s.Oe=function(e){var t=e.j;e.Dc()?i.d.A(i.d.f.eb,function(){i.Xa.ae(t)},this):e.yc()&&i.display.Ve(e)},s.fa=function(e){i.display.fa(i.h[e]),i.c.log("HTML - Render"),s.Vf(e)},s.Vf=function(e){i.a.Vd(e)},s.Rc=function(e,t){i.a.Qb(t,"ob_clicked");var n=i.a.F(t,"data-redirect");return null!==n&&(t.href=n),!0},s.Tc=function(e){return i.q&&i.q.Mc(),i.ca.me(e),!0},s.u=function(){n.P()},s.$c=function(){i.ca.Ef(o.Ng),i.b.Qa?i.b.Ig():i.ca.ec()},s.Qd=function(e,t,n){if(confirm("Removing this recommendation will remove it permanently for this section and will refresh the recommendations.\n Are you sure you want to remove this recommendation?")){var s="https://my.outbrain.com/manage/";i.c.log("isAd = "+n+" type = "+typeof n),s=!1===n?s+("add-zapped-document?publisherId="+t+"&docUrl="+i.a.L(e)):s+("add-rule?publisherId="+t+"&ruleValue="+i.a.L(e)+"&ruleType="+n),e=i.a.C(s,!0),i.a.H(e)}},s.Pd=function(e){confirm("Removing this recommendation will remove it permanently for this section and will refresh the recommendations.\n Are you sure you want to remove this recommendation?")&&(e=i.a.C(i.b.zb+i.b.Rd+e+"&index=1&templateIndex=1&sig="+i.b.pd,!0),i.a.H(e))},s.gg=function(e){e&&e.ob_exclude_resp&&e.ob_exclude_resp.code&&1!==e.ob_exclude_resp.code&&s.Tc()},s.Vc=function(e,t){if(t&&"function"==typeof t){var s="odbRtn_"+e;n.add(s,t);var o=i.Lb.uc(e);o&&o.af()&&n.k(s,[o])}},s.ue=function(e){return(e=i.Lb.uc(e))?e.G("tcr",-1):null},s.fg=function(){i.ca.ec()},s.P=function(){i.q&&i.q.Mc(),i.display.u(),i.r.u(),i.I.u(),this.u(),i.ca.u(),i.ia&&i.ia.u(),i.b.ya=!1},s.ag=function(){this.P(),this.$c()},s.i(OBR),s}(),OBR.display=OBR.display||function(){var e,t,i={};return i.i=function(i){e=i=i||OBR,t=new e.p},i.vc=function(t,i){var n=e.a.Jg(t),s=e.a.U(i.j);s&&n&&0<n.length&&(s.innerHTML="",e.a.V(n[0],s),e.c.log("element inserted"))},i.lh=function(e){t.add("beforeRender",e)},i.Df=function(e){t.add("afterRender",e)},i.Xe=function(t){e.a.mf(t)&&OBR.d.A(OBR.d.f.bb,function(){OBR.scroll.vf()},this)},i.Ve=function(t){OBR.d.A(OBR.d.f.ga,e.a.aa(),this),OBR.d.A(OBR.d.f.Za,function(){i.qe(t)},this)},i.qe=function(e){i.vc(OBR.Aa.Se(e),e),OBR.Aa.i(),t.k("afterRender",[e.j])},i.fa=function(n){e.c.log("HTML - render widget with "+n.Da()),i.vc(n.Da(),n),n.Z(!0),t.k("afterRender",[n.j])},i.u=function(){t.P()},i.i(OBR),i}(),OBR.md=OBR.md||function(e){var t={},i={},n={},s="",o=null,a=null,r=!1,l=0,c="html",h=!1,d=4e3,u="nano",p=!1,m=!1,f={},g=new OBR.p;return t.Sg=0,t.Rg=1e3,t.Qg=2,t.j=e,t.za="",t.qg=function(e,t){g.add("onInjectError_"+e.j,t)},t.oe=function(e){g.k("onInjectError_"+e,[e],!0)},t.t={Kc:-1,Jc:-1,Zc:-1,Ha:function(){var e=[];return e.push(t.t.Kc),e.push(t.t.Jc),e.push(t.t.Zc),e},vg:function(){t.t.Kc=(new Date).getTime()},ug:function(){t.t.Jc=(new Date).getTime()},yg:function(){t.t.Zc=(new Date).getTime()}},t.ke={slow:7e3,normal:5e3,fast:3e3,qa:5},t.setData=function(e){e&&e.response&&(e=e.response,e.request&&(n=e.request),e.settings&&(i=e.settings),e.html&&(s=e.html),h=!0)},t.qc=function(){return i},t.l=function(e,t){var n;return n=i[e],"undefined"!=typeof n&&null!==n?n:t},t.G=function(e,t){var i=n[e];return i?i:t},t.Da=function(){return s},t.w=function(){return o},t.Cg=function(e){o="string"==typeof e?e:"NA"},t.sg=function(){c="japi"},t.ze=function(){return c},t.oh=function(e){l=e},t.$g=function(){return l},t.da=function(){return a},t.xg=function(e){a=e},t.cf=function(){return r},t.og=function(e){r="true"===e||!0===e},t.yc=function(){return"flyThrough"===t.l("displayMode","")},t.Dc=function(){return"video"===t.l("displayMode","")},t.eh=function(){return"recInIframe"===t.l("displayMode","")},t.af=function(){return h},t.Me=function(){return u},t.Dg=function(e){"string"==typeof e&&(u=e.toLowerCase())},t.Ag=function(e){"string"==typeof e&&""!==e&&(t.za=e)},t.df=function(){return!isNaN(parseInt(t.za,10))},t.ka=function(){var e;return e=parseInt(t.za,10),t.df()&&"number"==typeof e&&e>=0&&10>e?OBR.a.ye(a,e):t.za},t.X=function(){return p},t.Z=function(e){"boolean"==typeof e&&(p=e)},t.bh=function(){return"hp"===u},t.n=function(){return f},t.pg=function(){var e={timeout:0,ra:null,gb:0,Vb:!1,Cf:!1,Ra:"",Ka:!1,Gb:!1,Cb:!1,xa:!1,od:"NA",reason:0,pb:!0};"object"==typeof e&&(f=e)},t.hf=function(){return m},t.nc=function(){return d},t.rg=function(e){d=t.ke[e]||6e3},t.tg=function(e){"boolean"==typeof e&&(m=e)},t},OBR.Ya=OBR.Ya||function(){var e=OBR,t={},i=new e.p;return t.ac=function(t,n,s,o,a,r,l,c){return t=new e.md(t),t.xg(n),t.Cg(s),t.og(o),t.Dg(a),t.Ag(r),t.rg(l),"boolean"==typeof c&&t.tg(c),i.k("onWidgetCreate",[t]),t},t.Gd=function(i){var n=e.a.F(i,"data-src"),s=e.a.F(i,"data-widget-id"),o=e.a.F(i,"data-widget-type"),a=e.a.F(i,"data-timeout"),r=e.a.F(i,"data-fbk"),l=e.a.F(i,"data-advance-loader"),c=e.a.F(i,"data-dynLoad");return e.a.B(i,"data-dynLoad",""),e.b.ed("true"===(l||"").toLowerCase()),null===n&&(n=e.a.Be()),l=0===e.h.length&&e.b.na===n?1:e.h.length,n=t.ac(l,n,s,c,o,r,a,!1),e.h[l]=n,0===l&&(s=e.a.createElement("div","ob_holder"),s.style.display="none",e.a.insertBefore(s,i),e.a.ob()),i.id=e.b.Kb+l,n},t.Mf=function(e){i.add("onWidgetCreate",e)},t}(),OBR.Lb=OBR.Lb||function(){var e=OBR;return{uc:function(t){var i,n,s;if(e.h)for(n=e.h.length,i=0;n>i;i+=1)if((s=e.h[i])&&s.w()===t)return s;return null}}}(),OBR.ia=OBR.ia||function(){var e={},t=OBR,i={},n=new t.p;return i.he=function(t){t.pg(),""!==t.ka()&&(t.qg(t,function(){e.Qe(t.j)}),OBR.r.If(t,function(){i.Bg(t)}),OBR.g.Vc(t.w(),e.Hf))},i.Bg=function(e){var t;t=e.n(),t.timeout=e.nc(),t.Ka||(t.ra=setTimeout(function(){i.Td(e)},t.timeout))},e.Hf=function(e){var t=e.n();t.Cf=!0,e.l("ispartialrecs",!1)&&(clearTimeout(t.ra),t.reason=3,t.Cb=!0,i.jb(e))},e.Ff=function(e,n){var s;e&&e.settings&&!0===e.settings.ispartialrecs&&(s=t.a.Ea(n),clearTimeout(s.n().ra),i.Yc(s))},i.Gf=function(i,n){i.n().Ra=n,t.g.Jf(i.j,e.Ff)},t.Ya.Mf(i.he),t.g.Nf(i.Gf),e.Ub=function(e,n){var s,o,a;e&&e.response&&(s=e.response,OBR.c.log("Cdn response returned"),(o=i.sc(n))?(t.r.Md(o),a=o.n(),a.sb=e,s.request&&(a.od=s.request.widgetJsId||"NA"),a.Vb=(new Date).getTime(),a.Ka&&!a.xa?(a.Ka=!1,i.mb(o)):a.Gb&&!a.xa?(a.Gb=!1,i.mb(o)):a.Cb&&!a.xa&&(a.Cb=!1,i.mb(o))):t.c.log("Editorial Widget : Widget not found"))},i.mb=function(t){var n=t.n();n.xa=!0,i.Yc(t),e.ud(t),clearTimeout(t.n().ra),n.reason=0,n.pb=!0},i.sc=function(e){var i=t.h[e];return i?i:t.a.Ea(e)},i.tc=function(e){return(e=t.a.tc(e))?e:t.a.Ea("fbk")},i.Td=function(e){var t=e.n();e.X()||(t.reason=1,t.Gb=!0,i.jb(e))},i.Yc=function(e){var i=e.n();e.X()&&!e.l("ispartialrecs",!1)?i.pb=!1:(e.hf()?t.g.hc(i.Ra,e.j,i.od,i.sb):(e.setData(i.sb),OBR.g.fa(e.j)),e.Z(!0))},e.ud=function(e){var i,n,s;n=e.n(),t.a.jf(e.qc())&&e.setData(n.sb),s=""!==e.da()?t.a.L(e.da()):window.location.href,i=e.l("irdfb",""),""!==i&&(i+="&reason="+n.reason||"",i=i+("&url="+s||"")+("&at="+(e.n().Vb-e.n().gb)||""),i+="&to="+e.nc()||"",i+="&ir="+(n.pb?1:0)||"",e=OBR.a.C(i,!1),OBR.a.H(e))},i.jb=function(e){if(0===e.n().gb){var n=i.se(e);i.nb(n,e),t.c.log("CDN call: cdnCall")}},i.se=function(e){var i;return i=t.b.Sd,e=e.ka()+"_"+e.w()+"_"+e.j,i+e},e.Qe=function(e){e=i.sc(e);var t;e&&(t=e.n(),clearTimeout(t.ra),t.Ka=!0,t.reason=2,i.jb(e))},i.nb=function(e,i){var n=t.a.C(e,!1);i.n().gb=(new Date).getTime(),t.a.H(n),t.c.log("fire this src "+e)},e.u=function(){n.P()},e.v=function(){return i},e}(),OBR.extern=OBR.extern||function(){var e=OBR;return{getStat:function(){e.q.ad()},showDescription:function(t,i){e.d.A(OBR.d.f.$a,function(){OBR.Pc.sf(t,i)},this)},returnedHtmlData:function(t,i){e.g.Ab(t,i)},returnedIrdData:function(t,i){e.ia.Ub(t,i)},returnedJsonData:function(t,i){e.g.Ic(t,i)},returnedError:function(t){OBR.c.log("Call made using extern class"),e.c.log("Callback error"+t)},callRecs:function(t,i){OBR.c.log("Call made using extern class"),e.g.Gc(t,i)},callClick:function(t,i){OBR.c.log("Call made using extern class"),e.g.tb(t,i)},callWhatIs:function(e,t,i,n,s,o){return OBR.d.A(OBR.d.f.va,function(){OBR.Jb.Tb(e,t,i,n,s,o)},this),!1},recClicked:function(t,i){OBR.c.log("Call made using extern class"),e.g.Rc(t,i)},imageError:function(t){OBR.c.log("Call made using extern class"),e.a.Yb(t)},showRecInIframe:function(t,i,n,s,o){e.d.A(e.d.f.ab,function(){e.Sc.Eg(t,i,n,s,o)},this)},errorInjectionHandler:function(e){OBR.h[e].oe(e)},reloadWidget:function(){OBR.c.log("reload widget"),e.g.ag()},researchWidget:function(){OBR.c.log("research widget"),e.g.fg()},cancelRecommendation:function(t){OBR.c.log("cancel recommendation with bocr "+t),e.g.Pd(t)},cancelRecs:function(t,i,n){OBR.c.log("cancel recommendation by doc url "+t+" publisher id = "+i+" isAd = "+n),e.g.Qd(t,i,n)},refreshWidget:function(t){OBR.c.log("refresh widget"),e.g.Tc(t)},getCountOfRecs:function(t){return e.g.ue(t)},onOdbReturn:function(t,i){e.g.Vc(t,i)},closeCard:function(){e.Aa.Zd()},closeModal:function(){try{e.modal.hideModal()}catch(t){}},scrollLoad:function(){try{OBR.d.M(OBR.d.f.cb)}catch(e){}}}}(),window.outbrain=window.outbrain||{},window.outbrain.returnedHtmlData=function(e,t){OBR.g.Ab(e,t)},window.outbrain.returnedIrdJsonData=function(e,t){OBR.ia.Ub(e,t)},window.outbrain.returnedJsonData=function(e,t){OBR.g.Ic(e,t)},window.outbrain.returnedError=function(e){OBR.c.log("Callback error"+e)},window.outbrain.callRecs=function(e,t){OBR.g.Gc(e,t)},window.outbrain.callClick=function(e,t){OBR.g.tb(e,t)},window.outbrain.callWhatIs=function(e,t,i,n,s,o){OBR.d.A(OBR.d.f.va,function(){OBR.Jb.Tb(e,t,i,n,s,o)},this)},window.outbrain.recClicked=function(e,t){OBR.g.Rc(e,t)},window.outbrain.imageError=function(e){OBR.a.Yb(e)},window.outbrain.closeModal=function(){try{OBR.modal.hideModal()}catch(e){}},window.outbrain_rater=window.outbrain_rater||{},window.outbrain_rater.returnedHtmlData=function(e,t){OBR.g.Ab(e,t)},window.outbrain_rater.returnedCancelOdbData=function(e){OBR.g.gg(e)},!0===OBR.b.xc&&(OBR.c.log("Widget Start!"),OBR.b.xc=!1,"boolean"==typeof window.OB_PASSIVE_MODE&&!0===window.OB_PASSIVE_MODE?OBR.c.log("passive"):OBR.g.$c()),$(function(){if(Modernizr.localstorage&&localStorage){if(localStorage.getItem("incPinboardData")||localStorage.setItem("incPinboardData",JSON.stringify(new Array)),localStorage.getItem("incPinboardSorting")||localStorage.setItem("incPinboardSorting",JSON.stringify({home:"notset",channel:"notset"})),!localStorage.getItem("incSponsoredTileInfo")){var e=new Object;e.queue=new Array,e.seen=new Array,localStorage.setItem("incSponsoredTileInfo",JSON.stringify(e))}var t=$.parseJSON(localStorage.getItem("incPinboardData")),i=location.href.split("/");if(""==i[i.length-1]&&(i=i.slice(0,i.length-1)),isNaN(i[i.length-1])||isNaN(parseInt(i[i.length-1],10)))var n=i.join("/");else var n=i.slice(0,i.length-1).join("/");for(var s=-1,o=t.length-1;o>=0;o--)if(t[o].href==n){s=o;break}if(-1==s)t.push({timestamp:(new Date).getTime(),href:n}),t.length>20&&t.shift();else{var a=t.splice(s,1)[0];t.push(a),t[t.length-1].timestamp=(new Date).getTime()}localStorage.setItem("incPinboardData",JSON.stringify(t))}});var Comments=function(){this.appPath,this.li,this.tw,this.incid,this.facebookStatus=!1,this.stopmulticlick=!1,this.commentcount=0,this.rboxflag=!1,this.postcommentflag=!1,this.facebookTimer=0,this.oid=_.uniqueId("Comments_"),inc.comments[this.oid]=this,this.month=new Array(12),this.month[0]="JANUARY",this.month[1]="FEBRUARY",this.month[2]="MARCH",this.month[3]="APRIL",this.month[4]="MAY",this.month[5]="JUNE",this.month[6]="JULY",this.month[7]="AUGUST",this.month[8]="SEPTEMBER",this.month[9]="OCTOBER",this.month[10]="NOVEMBER",this.month[11]="DECEMBER";var e=this;this.init=function(t,i,n){return e.incid=t,e.appPath=i,e.$el=n,e.$el.attr("id",this.oid),"undefined"==typeof e.incid?void console.log("Comments: an incid is required for initialization"):(location.origin||(location.origin="http://"+location.host),getCookie("inctwli")&&(1==parseInt(getCookie("inctwli"))?e.tw=1:2==parseInt(getCookie("inctwli"))?e.li=1:3==parseInt(getCookie("inctwli"))&&(e.tw=1,e.li=1)),e.$el.on("click",function(e){$(e.target).data("onclick")&&$(e.target).data("onclick")()}),e.pullInComments(!1),e.$el.find(".addemailinput").on("keydown",function(t){13==t.keyCode&&e.postComment()}),void e.$el.find(".raddemailinput").on("keydown",function(t){13==t.keyCode&&e.postReply()}))},this.checkFacebookStatus=function(){"undefined"!=typeof FB?FB.api("/me",function(t){"undefined"==typeof t.error?(t.id&&getCookie("incid")&&FB.api("/me/permissions",function(t){"undefined"!=typeof t.data[0].publish_stream&&1==t.data[0].publish_stream?(e.$el.find(".fbcheck").find("img").attr("src","http://images.inc.com/comments/comment-fb-badge.png"),e.$el.find(".ptfacebook").addClass("fbon")):e.$el.find(".fbcheck").data("onclick",function(){FB.login(function(e){},{scope:"email,publish_stream"}),e.checkClick(this)})}),e.facebookStatus=!0):"undefined"!=typeof t.error&&e.facebookTimer>20?e.facebookStatus=!0:setTimeout(function(){e.checkFacebookStatus()},200)}):setTimeout(function(){e.checkFacebookStatus()},200)},this.validateemail=function(e){var t=e,i=t.indexOf("@"),n=t.lastIndexOf(".");return 1>i||i+2>n||n+2>=t.length?!1:!0},this.urldecode=function(e){return decodeURIComponent((e+"").replace(/\+/g,"%20").replace(RegExp("(%0A)","g"),"<br />"))},this.getUrlVars=function(){var e={};window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(t,i,n){e[i]=n});return e},this.promptLogin=function(){"undefined"!=typeof inc&&$("#RightMenuButton").click()},this.checkClick=function(t){t.lastChild.className&&t.lastChild.className.search("fbon")>-1?(t.firstChild.attributes.src.value="http://images.inc.com/comments/comment-fb-badge-off.png","fbcheck"==t.className?e.$el.find(".ptfacebook").removeClass("fbon"):"rfbcheck"==t.className&&e.$el.find(".rptfacebook").removeClass("fbon"),FB.api("/me",function(i){i.id?FB.api("/me/permissions",function(i){"undefined"!=typeof i.data[0].publish_stream&&1==i.data[0].publish_stream?t.attributes.onclick.value="inc.comments."+e.oid+".checkClick(this);":t.attributes.onclick.value="FB.login(function(response){},{scope: 'email,publish_stream'});inc.comments."+e.oid+".checkClick(this);"}):t.attributes.onclick.value="window.open('https://www.facebook.com/login.php?api_key=139291179414843&cancel_url=http%3A%2F%2Fwww.inc.com%2F&display=page&fbconnect=1&req_perms=email%2Cpublish_stream&next="+encodeURIComponent(e.appPath+"lib/facebook/end.php")+"&return_session=1&session_version=3&v=1.0','','scrollbars=no,menubar=no,height=600,width=800,resizable=yes,toolbar=no,location=no,status=no');inc.comments."+e.oid+".checkClick(this);"})):(t.attributes.onclick.value="inc.comments."+e.oid+".checkClick(this);",t.firstChild.attributes.src.value="http://images.inc.com/comments/comment-fb-badge.png","fbcheck"==t.className?e.$el.find(".ptfacebook").addClass("fbon"):"rfbcheck"==t.className&&e.$el.find(".rptfacebook").addClass("fbon"))},this.scrollToFocus=function(e){$("html,body").animate({scrollTop:$("#"+e).offset().top+100},"slow")},this.closeReplyBox=function(t){if(0==e.rboxflag)try{t.parentNode.removeChild(t)}catch(i){}else e.rboxflag=!1},this.postReply=function(){var t="";if(getCookie("inche")&&e.validateemail(e.$el.find(".raddemailinput").val())&&(t="&emailaddress="+encodeURIComponent(e.$el.find(".raddemailinput").val()),e.deleteCookie("inche","/",inc.i.cookieDomain)),getCookie("incid")&&!getCookie("inche")){if(""!=e.$el.find(".rtextbox")[0].value&&!e.postcommentflag){e.postcommentflag=!0;var i;i="rexpandcontainer"==e.$el.find(".rtextbox")[0].parentNode.parentNode.parentNode.className?e.$el.find(".rtextbox")[0].parentNode.parentNode.parentNode.className.replace("rexpandcontainer",""):e.$el.find(".rtextbox")[0].parentNode.parentNode.parentNode.parentNode.firstChild.id;var n=document.getElementById(i).attributes.name.value,s=e.$el.find(".rtextbox")[0].value,o="&swtwitter=FALSE";if(e.$el.find(".rpttwitter")[0].className&&e.$el.find(".rpttwitter")[0].className.search("fbon")>-1)try{var a=new XMLHttpRequest;a.open("GET",e.appPath+"lib/twitter/confirm.php?message="+encodeURIComponent(s+" "+location.origin+location.pathname),!0),a.send();var o="&swtwitter=TRUE"}catch(r){}var l="&swlinkedin=FALSE";if(e.$el.find(".rptlinkedin")[0].className&&e.$el.find(".rptlinkedin")[0].className.search("fbon")>-1)try{var a=new XMLHttpRequest;a.open("GET",e.appPath+"lib/seancomments/lishare.php?comment="+encodeURIComponent(s)+"&title="+encodeURIComponent(cactitle)+"&deck="+encodeURIComponent(cacdeck)+"&url="+encodeURI(location.origin+location.pathname)+"&image="+encodeURIComponent(e.appPath)+"uploaded_files/image/100x100/"+encodeURIComponent(cacbucket),!0),a.send();var l="&swlinkedin=TRUE"}catch(r){}var c=new XMLHttpRequest;c.onreadystatechange=function(){4==c.readyState&&(200==c.status||-1==window.location.href.indexOf("http"))&&e.pullInComments(!0),e.postcommentflag=!1},e.$el.find(".rptfacebook")[0].className&&e.$el.find(".rptfacebook")[0].className.search("fbon")>-1?FB.api("/me",function(a){a.id?""!=n?FB.api(n+"/comments","post",{message:s,link:location.origin+location.pathname},function(n){n.id?(c.open("POST",e.appPath+"lib/seancomments/addinccomments.php",!0),c.setRequestHeader("Content-type","application/x-www-form-urlencoded"),c.send("incid="+cincid+"&comment="+encodeURIComponent(s)+"&url="+encodeURIComponent(location.origin+location.pathname)+"&post_fbid="+n.id+"&parentid="+i+o+l+t)):(c.open("POST",e.appPath+"lib/seancomments/addinccomments.php",!0),c.setRequestHeader("Content-type","application/x-www-form-urlencoded"),c.send("incid="+cincid+"&comment="+encodeURIComponent(s)+"&url="+encodeURIComponent(location.origin+location.pathname)+"&parentid="+i+o+l+t))}):FB.api("me/feed/","post",{message:s,link:location.origin+location.pathname},function(n){n.id?(c.open("POST",e.appPath+"lib/seancomments/addinccomments.php",!0),c.setRequestHeader("Content-type","application/x-www-form-urlencoded"),c.send("incid="+cincid+"&comment="+encodeURIComponent(s)+"&url="+encodeURIComponent(location.origin+location.pathname)+"&parentid="+i+o+l+t)):(c.open("POST",e.appPath+"lib/seancomments/addinccomments.php",!0),c.setRequestHeader("Content-type","application/x-www-form-urlencoded"),c.send("incid="+cincid+"&comment="+encodeURIComponent(s)+"&url="+encodeURIComponent(location.origin+location.pathname)+"&parentid="+i+o+l+t))}):(c.open("POST",e.appPath+"lib/seancomments/addinccomments.php",!0),c.setRequestHeader("Content-type","application/x-www-form-urlencoded"),c.send("incid="+cincid+"&comment="+encodeURIComponent(s)+"&url="+encodeURIComponent(location.origin+location.pathname)+"&parentid="+i+o+l+t))}):(c.open("POST",e.appPath+"lib/seancomments/addinccomments.php",!0),c.setRequestHeader("Content-type","application/x-www-form-urlencoded"),c.send("incid="+cincid+"&comment="+encodeURIComponent(s)+"&url="+encodeURIComponent(location.origin+location.pathname)+"&parentid="+i+o+l+t)),setCookie("inccomment","1",10,{path:"/",domain:inc.i.cookieDomain})}}else getCookie("inche")||this.promptLogin()},this.postComment=function(){var t="";if(getCookie("inche")&&e.validateemail(e.$el.find(".addemailinput").val())&&(t="&emailaddress="+encodeURIComponent(e.$el.find(".addemailinput").val()),e.deleteCookie("inche","/",inc.i.cookieDomain)),getCookie("incid")&&!getCookie("inche")){if(""!=e.$el.find(".ctextbox")[0].value&&!e.postcommentflag){e.postcommentflag=!0;var i=e.$el.find(".ctextbox")[0].value,n="&swtwitter=FALSE";if(e.$el.find(".pttwitter")[0]&&e.$el.find(".pttwitter")[0].className&&e.$el.find(".pttwitter")[0].className.search("fbon")>-1)try{var s=new XMLHttpRequest;s.open("GET",e.appPath+"lib/twitter/confirm.php?message="+encodeURIComponent(i+" "+location.origin+location.pathname),!0),s.send();var n="&swtwitter=TRUE"}catch(o){}var a="&swlinkedin=FALSE";if(e.$el.find(".ptlinkedin").length>0&&e.$el.find(".ptlinkedin")[0].className&&e.$el.find(".ptlinkedin")[0].className.search("fbon")>-1)try{var s=new XMLHttpRequest;s.open("GET",e.appPath+"lib/seancomments/lishare.php?comment="+encodeURIComponent(i)+"&title="+encodeURIComponent(cactitle)+"&deck="+encodeURIComponent(cacdeck)+"&url="+encodeURI(location.origin+location.pathname)+"&image="+encodeURIComponent(e.appPath)+"uploaded_files/image/100x100/"+encodeURIComponent(cacbucket),!0),s.send();var a="&swlinkedin=TRUE"}catch(o){}var r=new XMLHttpRequest;r.onreadystatechange=function(){4==r.readyState&&(200==r.status||-1==window.location.href.indexOf("http"))&&e.pullInComments(!0),e.postcommentflag=!1},e.$el.find(".ptfacebook").length>0&&e.$el.find(".ptfacebook")[0].className&&e.$el.find(".ptfacebook")[0].className.search("fbon")>-1?FB.api("me/feed/","post",{message:i,link:location.origin+location.pathname},function(s){s.id?(r.open("POST",e.appPath+"lib/seancomments/addinccomments.php",!0),r.setRequestHeader("Content-type","application/x-www-form-urlencoded"),r.send("incid="+cincid+"&comment="+encodeURIComponent(i)+"&url="+encodeURIComponent(location.origin+location.pathname)+"&post_fbid="+s.id+n+a+t)):(r.open("POST",e.appPath+"lib/seancomments/addinccomments.php",!0),r.setRequestHeader("Content-type","application/x-www-form-urlencoded"),r.send("incid="+cincid+"&comment="+encodeURIComponent(i)+"&url="+encodeURIComponent(location.origin+location.pathname)+n+a+t))}):(r.open("POST",e.appPath+"lib/seancomments/addinccomments.php",!0),r.setRequestHeader("Content-type","application/x-www-form-urlencoded"),r.send("incid="+cincid+"&comment="+encodeURIComponent(i)+"&url="+encodeURIComponent(location.origin+location.pathname)+n+a+t)),setCookie("inccomment","1",10,{path:"/",domain:inc.i.cookieDomain})}}else getCookie("inche")||this.promptLogin()},this.commentReply=function(t){if(getCookie("incid"))if(e.$el.find(".replybox").remove(),t="rexpandcontainer"==document.getElementById(t).parentNode.className?document.getElementById(t).parentNode.parentNode:document.getElementById(t).parentNode,"undefined"!=typeof FB)FB.api("/me",function(i){var n=getCookie("incid");if(n.indexOf(":")>-1){var s=n.split(":");usrid=s[0],username=s[1]}else usrid=n,username=getCookie("incun");replybox=document.createElement("div"),replybox.setAttribute("id",e.oid+"-replybox"),replybox.setAttribute("class","replybox"),replybox.setAttribute("onclick","inc.comments."+e.oid+".rboxflag=true;"),getCookie("incid")?getCookie("inche")?replybox.innerHTML='<div class="cpost"><div class="topofcbox">You\'re logged in as '+(getCookie("incun")||"").replace("'","'").replace('"','"').replace("+","").replace("+","")+' | Not you? <a href="'+e.appPath+"logout?ret="+encodeURIComponent(location.href)+'">Log Out</a>.</div><div class="leftcbox"><div class="commentcount">'+e.commentcount+'</div><div class="commentcountlabel">COMMENTS</div><div></div></div><div class="commentinputcontainer"><textarea class="rtextbox"></textarea><div class="cbuttoncontainer"><span class="ptlabel">POST TO:</span><a class="rfbcheck" href="#/" onclick="inc.comments.'+e.oid+'.checkClick(this);return false;"><img src="http://images.inc.com/comments/comment-fb-badge-off.png" /><span class="rptfacebook"></span></a><a class="rtwchecka" href="#/" onclick="inc.comments.'+e.oid+'.postToTwitter(this);"><img src="http://images.inc.com/comments/comment-tw-badge-off.png" /><span class="rpttwitter"></span></a><a class="rlichecka" href="#/" onclick="inc.comments.'+e.oid+'.postToLinkedIn(this);"><img src="http://images.inc.com/comments/comment-li-badge-off.png" /><span class="rptlinkedin"></span></a><div class="aecontainer"><span>PLEASE ENTER YOUR EMAIL ADDRESS:</span><input type="text" class="raddemailinput"></input></div><a href="#/" onclick="inc.comments.'+e.oid+'.postReply();return false" class="cbutton"><img src="http://images.inc.com/comments/commentsubmit.png" /></a></div></div></div>':replybox.innerHTML='<div class="cpost"><div class="topofcbox">You\'re logged in as '+(getCookie("incun")||"").replace("'","'").replace('"','"').replace("+","").replace("+","")+' | Not you? <a href="'+e.appPath+"logout?ret="+encodeURIComponent(location.href)+'">Log Out</a>.</div><div class="leftcbox"><div class="commentcount">'+e.commentcount+'</div><div class="commentcountlabel">COMMENTS</div><div></div></div><div class="commentinputcontainer"><textarea class="rtextbox"></textarea><div class="cbuttoncontainer"><span class="ptlabel">POST TO:</span><a class="rfbcheck" href="#/" onclick="inc.comments.'+e.oid+'.checkClick(this);return false;"><img src="http://images.inc.com/comments/comment-fb-badge-off.png" /><span class="rptfacebook"></span></a><a class="rtwchecka" href="#/" onclick="inc.comments.'+e.oid+'.postToTwitter(this);"><img src="http://images.inc.com/comments/comment-tw-badge-off.png" /><span class="rpttwitter"></span></a><a class="rlichecka" href="#/" onclick="inc.comments.'+e.oid+'.postToLinkedIn(this);"><img src="http://images.inc.com/comments/comment-li-badge-off.png" /><span class="rptlinkedin"></span></a><a href="#/" onclick="inc.comments.'+e.oid+'.postReply();return false" class="cbutton"><img src="http://images.inc.com/comments/commentsubmit.png" /></a></div></div></div>':replybox.innerHTML='<div class="cpost"><div class="topofcbox"></div><div class="leftcbox"><div class="commentcount">'+e.commentcount+'</div><div class="commentcountlabel">COMMENTS</div><div></div></div><div class="commentinputcontainer"><textarea class="rtextbox"></textarea><div class="cbuttoncontainer"><span class="ptlabel">POST TO:</span><a class="rfbcheck" href="#/" onclick="inc.comments.'+e.oid+'.checkClick(this);return false;"><img src="http://images.inc.com/comments/comment-fb-badge-off.png" /><span class="rptfacebook"></span></a><a class="rtwchecka" href="#/" onclick="inc.comments.'+e.oid+'.postToTwitter(this);"><img src="http://images.inc.com/comments/comment-tw-badge-off.png" /><span class="rpttwitter"></span></a><a class="rlichecka" href="#/" onclick="inc.comments.'+e.oid+'.postToLinkedIn(this);"><img src="http://images.inc.com/comments/comment-li-badge-off.png" /><span class="rptlinkedin"></span></a><a href="#/" onclick="inc.comments.'+e.oid+'.postReply();return false" class="cbutton"><img src="http://images.inc.com/comments/commentsubmit.png" /></a></div></div></div>',
t.appendChild(replybox),e.rboxflag=!0,document.getElementsByTagName("body")[0].setAttribute("onclick","inc.comments."+e.oid+'.closeReplyBox(document.getElementById("'+e.oid+'-replybox"));'),e.$el.find(".rtextbox").autosize().autofill({value:"Add your comment"}),setTimeout(function(){e.rboxflag=!1},50),i.id?FB.api("/me/permissions",function(t){"undefined"!=typeof t.data[0].publish_stream&&1==t.data[0].publish_stream?(e.$el.find(".rfbcheck")[0].firstChild.attributes.src.value="http://images.inc.com/comments/comment-fb-badge.png",e.$el.find(".rptfacebook").addClass("fbon")):e.$el.find(".rfbcheck")[0].attributes.onclick.value="FB.login(function(response){},{scope: 'email,publish_stream'});inc.comments."+e.oid+".checkClick(this);"}):e.$el.find(".rfbcheck")[0].attributes.onclick.value="window.open('https://www.facebook.com/login.php?api_key=139291179414843&cancel_url=http%3A%2F%2Fwww.inc.com%2F&display=page&fbconnect=1&req_perms=email%2Cpublish_stream&next="+encodeURIComponent(e.appPath+"lib/facebook/end.php")+"&return_session=1&session_version=3&v=1.0','','scrollbars=no,menubar=no,height=600,width=800,resizable=yes,toolbar=no,location=no,status=no');inc.comments."+e.oid+".checkClick(this);","undefined"!=typeof e.tw&&1==e.tw?(e.$el.find(".rtwchecka")[0].firstChild.attributes.src.value="http://images.inc.com/comments/comment-tw-badge.png",e.$el.find(".rpttwitter").addClass("fbon")):e.$el.find(".rtwchecka")[0].attributes.onclick.value="inc.comments."+e.oid+".postToTwitter(this);window.open(inc.comments."+e.oid+".appPath+'lib/twitter/startmobile.php','','scrollbars=no,menubar=no,height=600,width=800,resizable=yes,toolbar=no,location=no,status=no');","undefined"!=typeof e.li&&1==e.li?(e.$el.find(".rlichecka")[0].firstChild.attributes.src.value="http://images.inc.com/comments/comment-li-badge.png",e.$el.find(".rptlinkedin").addClass("fbon")):e.$el.find(".rlichecka")[0].attributes.onclick.value="inc.comments."+e.oid+".postToLinkedIn(this);window.open(inc.comments."+e.oid+".appPath+'lib/linkedin/startlogin.php','','scrollbars=no,menubar=no,height=400,width=600,resizable=yes,toolbar=no,location=no,status=no');",e.$el.find(".rfbcheck").hover(function(){e.$el.find(".rfbcheck")[0].firstChild.attributes.src.value="http://images.inc.com/comments/comment-fb-badge.png",e.$el.find(".rptfacebook").addClass("hoverbon")},function(){-1==e.$el.find(".rfbcheck")[0].lastChild.className.search("fbon")&&(e.$el.find(".rfbcheck")[0].firstChild.attributes.src.value="http://images.inc.com/comments/comment-fb-badge-off.png"),e.$el.find(".rptfacebook").removeClass("hoverbon")}),e.$el.find(".rtwchecka").hover(function(){e.$el.find(".rtwchecka")[0].firstChild.attributes.src.value="http://images.inc.com/comments/comment-tw-badge.png",e.$el.find(".rpttwitter").addClass("hoverbon")},function(){-1==e.$el.find(".rtwchecka")[0].lastChild.className.search("fbon")&&(e.$el.find(".rtwchecka")[0].firstChild.attributes.src.value="http://images.inc.com/comments/comment-tw-badge-off.png"),e.$el.find(".rpttwitter").removeClass("hoverbon")}),e.$el.find(".rlichecka").hover(function(){e.$el.find(".rlichecka")[0].firstChild.attributes.src.value="http://images.inc.com/comments/comment-li-badge.png",e.$el.find(".rptlinkedin").addClass("hoverbon")},function(){-1==e.$el.find(".rlichecka")[0].lastChild.className.search("fbon")&&(e.$el.find(".rlichecka")[0].firstChild.attributes.src.value="http://images.inc.com/comments/comment-li-badge-off.png"),e.$el.find(".rptlinkedin").removeClass("hoverbon")})});else{var i=getCookie("incid");if(i.indexOf(":")>-1){var n=i.split(":");usrid=n[0],username=n[1]}else usrid=i,username=getCookie("incun");replybox=document.createElement("div"),replybox.setAttribute("id",e.oid+"-replybox"),replybox.setAttribute("class","replybox"),replybox.setAttribute("onclick","inc.comments."+e.oid+".rboxflag=true;"),getCookie("incid")?replybox.innerHTML='<div class="cpost"><div class="topofcbox">You\'re logged in as '+(getCookie("incun")||"").replace("'","'").replace('"','"').replace("+","").replace("+","")+' | Not you? <a href="'+e.appPath+"logout?ret="+encodeURIComponent(location.href)+'">Log Out</a>.</div><div class="leftcbox"><div class="commentcount">'+e.commentcount+'</div><div class="commentcountlabel">COMMENTS</div><div></div></div><div class="commentinputcontainer"><textarea class="rtextbox"></textarea><div class="cbuttoncontainer"><span class="ptlabel">POST TO:</span><a class="rfbcheck" href="#/" onclick="inc.comments.'+e.oid+'.checkClick(this);return false;"><img src="http://images.inc.com/comments/comment-fb-badge-off.png" /><span class="rptfacebook"></span></a><a class="rtwchecka" href="#/" onclick="inc.comments.'+e.oid+'.postToTwitter(this);"><img src="http://images.inc.com/comments/comment-tw-badge-off.png" /><span class="rpttwitter"></span></a><a class="rlichecka" href="#/" onclick="inc.comments.'+e.oid+'.postToLinkedIn(this);"><img src="http://images.inc.com/comments/comment-li-badge-off.png" /><span class="rptlinkedin"></span></a><a href="#/" onclick="inc.comments.'+e.oid+'.postReply();return false" class="cbutton"><img src="http://images.inc.com/comments/commentsubmit.png" /></a></div></div></div>':replybox.innerHTML='<div class="cpost"><div class="topofcbox"></div><div class="leftcbox"><div class="commentcount">'+e.commentcount+'</div><div class="commentcountlabel">COMMENTS</div><div></div></div><div class="commentinputcontainer"><textarea class="rtextbox"></textarea><div class="cbuttoncontainer"><span class="ptlabel">POST TO:</span><a class="rfbcheck" href="#/" onclick="inc.comments.'+e.oid+'.checkClick(this);return false;"><img src="http://images.inc.com/comments/comment-fb-badge-off.png" /><span class="rptfacebook"></span></a><a class="rtwchecka" href="#/" onclick="inc.comments.'+e.oid+'.postToTwitter(this);"><img src="http://images.inc.com/comments/comment-tw-badge-off.png" /><span class="rpttwitter"></span></a><a class="rlichecka" href="#/" onclick="inc.comments.'+e.oid+'.postToLinkedIn(this);"><img src="http://images.inc.com/comments/comment-li-badge-off.png" /><span class="rptlinkedin"></span></a><a href="#/" onclick="inc.comments.'+e.oid+'.postReply();return false" class="cbutton"><img src="http://images.inc.com/comments/commentsubmit.png" /></a></div></div></div>',t.appendChild(replybox),e.rboxflag=!0,document.getElementsByTagName("body")[0].setAttribute("onclick","inc.comments."+e.oid+'.closeReplyBox(document.getElementById("'+e.oid+'-replybox"));'),e.$el.find(".rtextbox").autosize().autofill({value:"Add your comment"}),setTimeout(function(){e.rboxflag=!1},50),e.$el.find(".rfbcheck")[0].attributes.onclick.value="window.open('https://www.facebook.com/login.php?api_key=139291179414843&cancel_url=http%3A%2F%2Fwww.inc.com%2F&display=page&fbconnect=1&req_perms=email%2Cpublish_stream&next="+encodeURIComponent(e.appPath+"lib/facebook/end.php")+"&return_session=1&session_version=3&v=1.0','','scrollbars=no,menubar=no,height=600,width=800,resizable=yes,toolbar=no,location=no,status=no');inc.comments."+e.oid+".checkClick(this);","undefined"!=typeof e.tw&&1==e.tw?(e.$el.find(".rtwchecka")[0].firstChild.attributes.src.value="http://images.inc.com/comments/comment-tw-badge.png",e.$el.find(".rpttwitter").addClass("fbon")):e.$el.find(".rtwchecka")[0].attributes.onclick.value="inc.comments."+e.oid+".postToTwitter(this);window.open(inc.comments."+e.oid+".appPath+'lib/twitter/startmobile.php','','scrollbars=no,menubar=no,height=600,width=800,resizable=yes,toolbar=no,location=no,status=no');","undefined"!=typeof e.li&&1==e.li?(e.$el.find(".rlichecka")[0].firstChild.attributes.src.value="http://images.inc.com/comments/comment-li-badge.png",e.$el.find(".rptlinkedin").addClass("fbon")):e.$el.find(".rlichecka")[0].attributes.onclick.value="inc.comments."+e.oid+".postToLinkedIn(this);window.open(inc.comments."+e.oid+".appPath+'lib/linkedin/startlogin.php','','scrollbars=no,menubar=no,height=400,width=600,resizable=yes,toolbar=no,location=no,status=no');",e.$el.find(".rfbcheck").hover(function(){e.$el.find(".rfbcheck")[0].firstChild.attributes.src.value="http://images.inc.com/comments/comment-fb-badge.png",e.$el.find(".rptfacebook").addClass("hoverbon")},function(){-1==e.$el.find(".rfbcheck")[0].lastChild.className.search("fbon")&&(e.$el.find(".rfbcheck")[0].firstChild.attributes.src.value="http://images.inc.com/comments/comment-fb-badge-off.png"),e.$el.find(".rptfacebook").removeClass("hoverbon")}),e.$el.find(".rtwchecka").hover(function(){e.$el.find(".rtwchecka")[0].firstChild.attributes.src.value="http://images.inc.com/comments/comment-tw-badge.png",e.$el.find(".rpttwitter").addClass("hoverbon")},function(){-1==e.$el.find(".rtwchecka")[0].lastChild.className.search("fbon")&&(e.$el.find(".rtwchecka")[0].firstChild.attributes.src.value="http://images.inc.com/comments/comment-tw-badge-off.png"),e.$el.find(".rpttwitter").removeClass("hoverbon")}),e.$el.find(".rlichecka").hover(function(){e.$el.find(".rlichecka")[0].firstChild.attributes.src.value="http://images.inc.com/comments/comment-li-badge.png",e.$el.find(".rptlinkedin").addClass("hoverbon")},function(){-1==e.$el.find(".rlichecka")[0].lastChild.className.search("fbon")&&(e.$el.find(".rlichecka")[0].firstChild.attributes.src.value="http://images.inc.com/comments/comment-li-badge-off.png"),e.$el.find(".rptlinkedin").removeClass("hoverbon")})}else getCookie("inche")||this.promptLogin()},this.likeComment=function(t){if(getCookie("incid")){var i=new XMLHttpRequest;i.onreadystatechange=function(){4==i.readyState&&(200==i.status||-1==window.location.href.indexOf("http"))&&1==parseInt(i.responseText)&&($("#"+t).find(".clikesnumber").html(parseInt($("#"+t).find(".clikesnumber").html())+1),$("#"+t).find(".clike").html('<span class="likedhighlight">LIKED</span>'),$("#"+t).find(".clike").attr("onclick","inc.comments."+e.oid+".unlikeComment('"+t+"'); return false;"))},""!=document.getElementById(t).attributes.name.value&&"undefined"!=typeof FB?FB.api("/me",function(n){n.id?FB.api(document.getElementById(t).attributes.name.value+"/likes","post",function(n){i.open("POST",e.appPath+"lib/seancomments/likeit.php",!0),i.setRequestHeader("Content-type","application/x-www-form-urlencoded"),i.send("comid="+t+"&type=1")}):(i.open("POST",e.appPath+"lib/seancomments/likeit.php",!0),i.setRequestHeader("Content-type","application/x-www-form-urlencoded"),i.send("comid="+t+"&type=1"))}):(i.open("POST",e.appPath+"lib/seancomments/likeit.php",!0),i.setRequestHeader("Content-type","application/x-www-form-urlencoded"),i.send("comid="+t+"&type=1"))}else this.promptLogin()},this.unlikeComment=function(t){if(getCookie("incid")){var i=new XMLHttpRequest;i.onreadystatechange=function(){4==i.readyState&&(200==i.status||-1==window.location.href.indexOf("http"))&&1==parseInt(i.responseText)&&($("#"+t).find(".clikesnumber").html(parseInt($("#"+t).find(".clikesnumber").html())-1),$("#"+t).find(".clike").html("LIKE"),$("#"+t).find(".clike").attr("onclick","inc.comments."+e.oid+".likeComment('"+t+"');return false;"))},""!=document.getElementById(t).attributes.name.value&&"undefined"!=typeof FB?FB.api("/me",function(n){n.id?FB.api(document.getElementById(t).attributes.name.value+"/likes","delete",function(n){i.open("POST",e.appPath+"lib/seancomments/likeit.php",!0),i.setRequestHeader("Content-type","application/x-www-form-urlencoded"),i.send("comid="+t+"&type=0")}):(i.open("POST",e.appPath+"lib/seancomments/likeit.php",!0),i.setRequestHeader("Content-type","application/x-www-form-urlencoded"),i.send("comid="+t+"&type=0"))}):(i.open("POST",e.appPath+"lib/seancomments/likeit.php",!0),i.setRequestHeader("Content-type","application/x-www-form-urlencoded"),i.send("comid="+t+"&type=0"))}else this.promptLogin()},this.getchtml=function(t,i){t.id=t.post_fbid,t.from?t.fromid=t.from.id:t.fromid=t.post_fbid,t.text||(t.text=t.message);new Date;if(t.time)var n=t.time.split(" ");else var n=t.created_time.split(" ");n[0]=n[0].split("-"),n[1]=n[1].split(":"),"10"!=n[0][1]&&(n[0][1]=n[0][1].replace("0",""));var s=new Date(parseInt(n[0][0]),parseInt(n[0][1])-1,parseInt(n[0][2]),parseInt(n[1][0]),parseInt(n[1][1]),parseInt(n[1][2]),0),o="";void 0!=t.likes&&(o=t.likes);var a=e.month[s.getMonth()]+" "+s.getDate()+", "+s.getFullYear()+" AT ";s.getHours()<=11?(a+=0==s.getHours()?"12":s.getHours(),a+=":",s.getMinutes()<10&&(a+="0"),a+=s.getMinutes()+"AM"):(a+=12==s.getHours()?"12":s.getHours()-12,a+=":",s.getMinutes()<10&&(a+="0"),a+=s.getMinutes()+"PM");var r="LIKE",l="inc.comments."+e.oid+".likeComment('"+t.cid+"');";if(t.user_likes&&(r='<span class="likedhighlight">LIKED</span>',l="inc.comments."+e.oid+".unlikeComment('"+t.cid+"');"),t.text||(t.text=""),t.text=e.urldecode(t.text),t.text.length>500)var c=t.usrname+" commented: "+t.text.substr(0,500)+"...",h=t.usrname+" commented: "+t.text.substr(0,500)+"...";else var c=t.usrname+" commented: "+t.text,h=t.usrname+" commented: "+t.text;var d=t.usrname+" commented: ";if(d.length+t.text.length>120)var u=d+t.text.substr(0,116-d.length)+"... ";else var u=d+t.text+" ";if(linktoprofile="#/",linkopennew="",t.usrid&&""!=t.usrid&&(linktoprofile=e.appPath+"member/"+t.usrid,linkopennew="_blank"),t.rid&&""!=t.rid)var p=t.rid+"&rid="+t.cid;else var p=t.cid;var m='<div id="'+t.cid+'" name="'+t.post_fbid+'" class="cpost'+i+'"><div class="cnamedatebox"><div class="poster"><a href="'+e.appPath+"member/"+t.usrid+'" target="'+linkopennew+'">'+t.usrname+'</a></div><div class="posttime">'+a+'</div></div><div class="cinrightcontainer"><div class="cmessage">'+t.text.replace(/\/'/gi,'"')+'</div><div class="cinteract"><img class="commentheart" src="http://images.inc.com/comments/commentheart.png"/><span class="clikesnumber">'+o+'</span><a href="#/" onclick="'+l+'return false;" class="clike">'+r+'</a> | <a id="'+t.cid+'r" href="#/" onclick="inc.comments.'+e.oid+".commentReply('"+t.cid+'\');return false;" class="creply">REPLY</a></div><div class="commentshare"><span class="cshlabel">SHARE ON:</span><a target="_blank" class="cfbshare" href="'+("http://www.facebook.com/dialog/feed?app_id=139291179414843&description=+&link="+encodeURIComponent(location.origin+location.pathname+"?comid="+p)+"&caption="+encodeURIComponent(c)+"&name="+encodeURIComponent(cactitle)+"&picture="+encodeURI(e.appPath+"uploaded_files/image/100x100/"+cacbucket)+"&redirect_uri="+encodeURI(e.appPath+"lib/facebook/end.php")).split("%2F'").join("%27")+'"><img src="http://images.inc.com/comments/comment-fb-badge.png" /></a><a target="_blank" class="ctwshare" href="'+("https://twitter.com/intent/tweet?status="+encodeURIComponent(u)+encodeURIComponent(location.origin+location.pathname+"?comid="+p)).split("%2F'").join("%27")+'"><img src="http://images.inc.com/comments/comment-tw-badge.png" /></a><a target="_blank" class="clishare" href="'+("http://www.linkedin.com/shareArticle?mini=true&title="+encodeURIComponent(cactitle)+"&summary="+encodeURIComponent(h)+"&source=http://www.inc.com&url="+encodeURIComponent(location.origin+location.pathname+"?comid="+p)).split("%2F'").join("%27")+'"><img src="http://images.inc.com/comments/comment-li-badge.png" /></a></div></div></div>';return m},this.getReplies=function(t){var n=document.createElement("div");if(n.setAttribute("class","comment"),n.innerHTML=e.getchtml(t,""),t&&t.comments&&t.comments.length>0){for(i=0;i<t.comments.length;i++)if(2==i){var s="";s+=e.getchtml(t.comments[i]," replytype")+'<div class="rexpandcontainer" id="rexpandcontainer'+t.cid+'">'}else i>2?s+=e.getchtml(t.comments[i]," replytype"):n.innerHTML+=e.getchtml(t.comments[i]," replytype");3==i?n.innerHTML+=s+"</div>":i>3&&(n.innerHTML+=s+'</div><div class="rexpandbox" id="rexpandbox'+t.cid+'" onclick="inc.comments.'+e.oid+".expandReplies("+t.cid+');"><img src="http://images.inc.com/comments/loadmorecomments.jpg" /></div>')}e.$el.append(n)},this.getRepliesExpand=function(t,n){var s=document.createElement("div");if(s.setAttribute("class","comment"),s.innerHTML=e.getchtml(t,""),t&&t.comments&&t.comments.length>0){for(i=0;i<t.comments.length;i++)if(2==i){var o="";o+=e.getchtml(t.comments[i]," replytype")+'<div class="rexpandcontainer" id="rexpandcontainer'+t.cid+'">'}else i>2?o+=e.getchtml(t.comments[i]," replytype"):s.innerHTML+=e.getchtml(t.comments[i]," replytype");3==i?s.innerHTML+=o+"</div>":i>3&&(s.innerHTML+=o+'</div><div class="rexpandbox" id="rexpandbox'+t.cid+'" onclick="inc.comments.'+e.oid+".expandReplies("+t.cid+');"><img src="http://images.inc.com/comments/loadmorecomments.jpg" /></div>')}$(n).append(s)},this.pullInComments=function(t){e.$el.css({"min-height":e.$el.height()+"px"}),e.$el.fadeTo(200,0,function(i){if(cincid=e.incid,e.$el.children().remove(),e.getUrlVars().comid)var n="&comid="+e.getUrlVars().comid;else var n="";var s=new XMLHttpRequest;s.onreadystatechange=function(){if(4==s.readyState&&(200==s.status||-1==window.location.href.indexOf("http"))){var t=JSON.parse(s.responseText).data;e.commentcount=JSON.parse(s.responseText).commentcount,e.printComments(t,n),e.$el.css({"min-height":"0px"})}},t=getCookie("inccomment")||t?"&clear=1":"","undefined"!=typeof currentoffset&&0!=currentoffset?(s.open("GET",e.appPath+"lib/seancomments/getcomments.php?id="+e.incid+"&limit="+(currentoffset+10)+t+n,!0),s.send()):(s.open("GET",e.appPath+"lib/seancomments/getcomments.php?id="+e.incid+t+n,!0),s.send())})},this.printComments=function(t,i,n){var s=document.createElement("div");s.setAttribute("class","cbox"),s.setAttribute("id","cboxid"),1==e.commentcount?commentcountlabel="COMMENT":commentcountlabel="COMMENTS",getCookie("incid")?getCookie("inche")?s.innerHTML='<div class="cpost"><div class="topofcbox">You\'re logged in as '+(getCookie("incun")||"").replace("'","'").replace('"','"').replace("+","").replace("+","")+' | Not you? <a href="'+e.appPath+"logout?ret="+encodeURIComponent(location.href)+'">Log Out</a>.</div><div class="leftcbox"><div class="commentcount">'+e.commentcount+'</div><div class="commentcountlabel">'+commentcountlabel+'</div><div></div></div><div class="commentinputcontainer"><textarea class="ctextbox"></textarea><div class="cbuttoncontainer"><span class="ptlabel">POST TO:</span><a class="fbcheck" href="#/" onclick="inc.comments.'+e.oid+'.checkClick(this);return false;"><img src="http://images.inc.com/comments/comment-fb-badge-off.png" /><span class="ptfacebook"></span></a><a class="twchecka" href="#/" onclick="inc.comments.'+e.oid+'.postToTwitter(this);"><img src="http://images.inc.com/comments/comment-tw-badge-off.png" /><span class="pttwitter"></span></a><a class="lichecka" href="#/" onclick="inc.comments.'+e.oid+'.postToLinkedIn(this);"><img src="http://images.inc.com/comments/comment-li-badge-off.png" /><span class="ptlinkedin"></span></a><div class="aecontainer"><span>PLEASE ENTER YOUR EMAIL ADDRESS:</span><input type="text" class="addemailinput"></input></div><a href="#/" onclick="inc.comments.'+e.oid+'.postComment();return false;" class="cbutton"><img src="http://images.inc.com/comments/commentsubmit.png" /></a></div></div></div>':s.innerHTML='<div class="cpost"><div class="topofcbox">You\'re logged in as '+(getCookie("incun")||"").replace("'","'").replace('"','"').replace("+","").replace("+","")+' | Not you? <a href="'+e.appPath+"logout?ret="+encodeURIComponent(location.href)+'">Log Out</a>.</div><div class="leftcbox"><div class="commentcount">'+e.commentcount+'</div><div class="commentcountlabel">'+commentcountlabel+'</div><div></div></div><div class="commentinputcontainer"><textarea class="ctextbox"></textarea><div class="cbuttoncontainer"><span class="ptlabel">POST TO:</span><a class="fbcheck" href="#/" onclick="inc.comments.'+e.oid+'.checkClick(this);return false;"><img src="http://images.inc.com/comments/comment-fb-badge-off.png" /><span class="ptfacebook"></span></a><a class="twchecka" href="#/" onclick="inc.comments.'+e.oid+'.postToTwitter(this);"><img src="http://images.inc.com/comments/comment-tw-badge-off.png" /><span class="pttwitter"></span></a><a class="lichecka" href="#/" onclick="inc.comments.'+e.oid+'.postToLinkedIn(this);"><img src="http://images.inc.com/comments/comment-li-badge-off.png" /><span class="ptlinkedin"></span></a><a href="#/" onclick="inc.comments.'+e.oid+'.postComment();return false;" class="cbutton"><img src="http://images.inc.com/comments/commentsubmit.png" /></a></div></div></div>':s.innerHTML='<div class="cpost"><div class="topofcbox"></div><div class="leftcbox"><div class="commentcount">'+e.commentcount+'</div><div class="commentcountlabel">'+commentcountlabel+'</div><div></div></div><div class="commentinputcontainer"><textarea class="ctextbox"></textarea><div class="cbuttoncontainer"><a href="#/" onclick="inc.comments.'+e.oid+'.postComment();return false;" class="cbutton"><img src="http://images.inc.com/comments/commentsubmit.png" /></a></div></div></div>',e.$el[0].appendChild(s),e.$el.prepend('<div class="DisabledMask"></div>'),e.$el.find(".ctextbox").autosize().autofill({value:"Add your comment"}),"undefined"!=typeof FB&&"undefined"!==n&&getCookie("incid")?FB.api("/me/permissions",function(t){"undefined"!=typeof t.data&&"undefined"!=typeof t.data[0].publish_stream&&1==t.data[0].publish_stream?(e.$el.find(".fbcheck")[0].firstChild.attributes.src.value="http://images.inc.com/comments/comment-fb-badge.png",e.$el.find(".ptfacebook").addClass("fbon")):e.$el.find(".fbcheck")[0].attributes.onclick.value="FB.login(function(response){},{scope: 'email,publish_stream'});inc.comments."+e.oid+".checkClick(this);"}):getCookie("incid")&&(e.$el.find(".fbcheck")[0].attributes.onclick.value="window.open('https://www.facebook.com/login.php?api_key=139291179414843&cancel_url=http%3A%2F%2Fwww.inc.com%2F&display=page&fbconnect=1&req_perms=email%2Cpublish_stream&next="+encodeURIComponent(e.appPath+"lib/facebook/end.php")+"&return_session=1&session_version=3&v=1.0','','scrollbars=no,menubar=no,height=600,width=800,resizable=yes,toolbar=no,location=no,status=no');inc.comments."+e.oid+".checkClick(this);"),"undefined"!=typeof e.tw&&e.tw&&1==e.tw&&getCookie("incid")?(e.$el.find(".twchecka")[0].firstChild.attributes.src.value="http://images.inc.com/comments/comment-tw-badge.png",e.$el.find(".pttwitter").addClass("fbon")):getCookie("incid")&&(e.$el.find(".twchecka")[0].attributes.onclick.value="inc.comments."+e.oid+".postToTwitter(this);window.open(inc.comments."+e.oid+".appPath+'lib/twitter/startmobile.php','','scrollbars=no,menubar=no,height=600,width=800,resizable=yes,toolbar=no,location=no,status=no');"),"undefined"!=typeof e.li&&e.li&&1==e.li&&getCookie("incid")?(e.$el.find(".lichecka")[0].firstChild.attributes.src.value="http://images.inc.com/comments/comment-li-badge.png",e.$el.find(".ptlinkedin").addClass("fbon")):getCookie("incid")&&(e.$el.find(".lichecka")[0].attributes.onclick.value="inc.comments."+e.oid+".postToLinkedIn(this);window.open(inc.comments."+e.oid+".appPath+'lib/linkedin/startlogin.php','','scrollbars=no,menubar=no,height=400,width=600,resizable=yes,toolbar=no,location=no,status=no');"),cactitle=t[0].inc_headline,cacdeck=t[0].inc_sharing_deck,cacbucket=t[0].img_bucketref;var o=1;for(o=1;o<t.length;o++)e.getReplies(t[o]);if(e.getUrlVars().comid)var i="&comid="+e.getUrlVars().comid;else var i="";var a=document.createElement("a");a.setAttribute("class","expandbox"),a.setAttribute("href","#/"),a.innerHTML='<img src="http://images.inc.com/comments/loadmorecomments.jpg" />',"undefined"!=typeof currentoffset?0==currentoffset?(a.setAttribute("onclick","inc.comments."+e.oid+".loadMoreComments(10);return false;"),e.$el[0].appendChild(a),""!=i&&(e.getUrlVars().rid?setTimeout("document.getElementById(inc.comments."+e.oid+".getUrlVars()['rid']).scrollIntoView();",1e3):setTimeout("document.getElementById(inc.comments."+e.oid+".getUrlVars()['comid']).scrollIntoView();",1e3))):(a.setAttribute("onclick","inc.comments."+e.oid+".loadMoreComments("+(currentoffset+10)+");return false;"),t.length-1==currentoffset+10&&1!=t.length&&e.$el[0].appendChild(a)):(a.setAttribute("onclick","inc.comments."+e.oid+".loadMoreComments(10);return false;"),currentoffset=0,t.length-1==10&&e.$el[0].appendChild(a),""!=i&&(e.getUrlVars().rid?setTimeout("document.getElementById(inc.comments."+e.oid+".getUrlVars()['rid']).scrollIntoView();",1e3):setTimeout("document.getElementById(inc.comments."+e.oid+".getUrlVars()['comid']).scrollIntoView();",1e3))),e.$el.fadeTo(200,1),getCookie("incid")&&(e.$el.find(".fbcheck").hover(function(){e.$el.find(".fbcheck")[0].firstChild.attributes.src.value="http://images.inc.com/comments/comment-fb-badge.png",e.$el.find(".ptfacebook").addClass("hoverbon")},function(){-1==e.$el.find(".fbcheck")[0].lastChild.className.search("fbon")&&(e.$el.find(".fbcheck")[0].firstChild.attributes.src.value="http://images.inc.com/comments/comment-fb-badge-off.png"),e.$el.find(".ptfacebook").removeClass("hoverbon")}),e.$el.find(".twchecka").hover(function(){e.$el.find(".twchecka")[0].firstChild.attributes.src.value="http://images.inc.com/comments/comment-tw-badge.png",e.$el.find(".pttwitter").addClass("hoverbon")},function(){-1==e.$el.find(".twchecka")[0].lastChild.className.search("fbon")&&(e.$el.find(".twchecka")[0].firstChild.attributes.src.value="http://images.inc.com/comments/comment-tw-badge-off.png"),e.$el.find(".pttwitter").removeClass("hoverbon")}),e.$el.find(".lichecka").hover(function(){e.$el.find(".lichecka")[0].firstChild.attributes.src.value="http://images.inc.com/comments/comment-li-badge.png",e.$el.find(".ptlinkedin").addClass("hoverbon")},function(){-1==e.$el.find(".lichecka")[0].lastChild.className.search("fbon")&&(e.$el.find(".lichecka")[0].firstChild.attributes.src.value="http://images.inc.com/comments/comment-li-badge-off.png"),e.$el.find(".ptlinkedin").removeClass("hoverbon")})),e.facebookStatus||e.checkFacebookStatus()},this.deleteCookie=function(e,t,i){getCookie(e)&&(document.cookie=e+"="+(t?";path="+t:"")+(i?";domain="+i:"")+";expires=Thu, 01-Jan-1970 00:00:01 GMT")},this.loadMoreComments=function(t){var i=new XMLHttpRequest;if(i.onreadystatechange=function(){if(4==i.readyState&&(200==i.status||-1==window.location.href.indexOf("http"))){var n=JSON.parse(i.responseText).data;e.commentcount=JSON.parse(i.responseText).commentcount,e.$el[0].removeChild(e.$el[0].lastChild);var s=document.createElement("div");s.setAttribute("class","expandcontainer"),s.setAttribute("id",e.oid+"-expandcontainer"+t),e.$el[0].appendChild(s);var o=1;for(o=1;o<n.length;o++)e.getRepliesExpand(n[o],s);if(n.length-1==10){var a=document.createElement("a");a.setAttribute("class","expandbox"),a.setAttribute("href","#/"),a.setAttribute("onclick","inc.comments."+e.oid+".loadMoreComments("+(t+10)+");return false;"),a.innerHTML='<img src="http://images.inc.com/comments/loadmorecomments.jpg" />',e.$el[0].appendChild(a)}currentoffset+=10,e.scrollToFocus(e.oid+"-expandcontainer"+t),$("#"+e.oid+"-expandcontainer"+t).slideDown("slow")}},e.getUrlVars().comid)var n="&comid="+e.getUrlVars().comid;else var n="";i.open("GET",e.appPath+"lib/seancomments/getcomments.php?id="+cincid+"&limit=10&offset="+t+n,!0),i.send()},this.expandReplies=function(t){e.scrollToFocus("rexpandcontainer"+t),$("#rexpandcontainer"+t).slideDown("slow"),document.getElementById("rexpandbox"+t).parentNode.removeChild(document.getElementById("rexpandbox"+t))},this.postToTwitter=function(t){t.lastChild.className&&t.lastChild.className.search("fbon")>-1?(t.firstChild.attributes.src.value="http://images.inc.com/comments/comment-tw-badge-off.png?asdf","twchecka"==t.className?e.$el.find(".pttwitter").removeClass("fbon"):"rtwchecka"==t.className&&e.$el.find(".rpttwitter").removeClass("fbon"),1==e.tw?t.attributes.onclick.value="inc.comments."+e.oid+".postToTwitter(this);":t.attributes.onclick.value="inc.comments."+e.oid+".postToTwitter(this);window.open(inc.comments."+e.oid+".appPath+'lib/twitter/startmobile.php','','scrollbars=no,menubar=no,height=600,width=800,resizable=yes,toolbar=no,location=no,status=no');"):(t.firstChild.attributes.src.value="http://images.inc.com/comments/comment-tw-badge.png","twchecka"==t.className?e.$el.find(".pttwitter").addClass("fbon"):"rtwchecka"==t.className&&e.$el.find(".rpttwitter").addClass("fbon"),t.attributes.onclick.value="inc.comments."+e.oid+".postToTwitter(this);")},this.postToLinkedIn=function(t){t.lastChild.className&&t.lastChild.className.search("fbon")>-1?(t.firstChild.attributes.src.value="http://images.inc.com/comments/comment-li-badge-off.png","lichecka"==t.className?e.$el.find(".ptlinkedin").removeClass("fbon"):"rtwchecka"==t.className&&e.$el.find(".rptlinkedin").removeClass("fbon"),1==e.li?t.attributes.onclick.value="inc.comments."+e.oid+".postToLinkedIn(this);":t.attributes.onclick.value="inc.comments."+e.oid+".postToLinkedIn(this);window.open(inc.comments."+e.oid+".appPath+'lib/linkedin/startlogin.php','','scrollbars=no,menubar=no,height=400,width=600,resizable=yes,toolbar=no,location=no,status=no');"):(t.firstChild.attributes.src.value="http://images.inc.com/comments/comment-li-badge.png","lichecka"==t.className?e.$el.find(".ptlinkedin").addClass("fbon"):"rtwchecka"==t.className&&e.$el.find(".rptlinkedin").addClass("fbon"),t.attributes.onclick.value="inc.comments."+e.oid+".postToLinkedIn(this);")}};Inc.Views.Picture=Inc.ToggleView.extend({type:"Picture",className:"picture",tagName:"span",initialize:function(e){e||(e={}),e.reset?(this.model=e.model||null,this.template=e.template||this.template||null):Inc.ToggleView.prototype.initialize.apply(this,arguments),this.loaded=!1,this.errored=!1,this.alwaysResize=_.isBoolean(e.alwaysResize)?e.alwaysResize:_.isBoolean(this.alwaysResize)?this.alwaysResize:!1,this.fitHeight=_.isBoolean(e.fitHeight)?e.fitHeight:_.isBoolean(this.fitHeight)?this.fitHeight:!1,this.zoomOnly=_.isBoolean(e.zoomOnly)?e.zoomOnly:_.isBoolean(this.zoomOnly)?this.zoomOnly:!1,this.expandToFit=_.isBoolean(e.expandToFit)?e.expandToFit:_.isBoolean(this.expandToFit)?this.expandToFit:!1,this.imageWidth=void 0,this.imageHeight=void 0,this.imageAspectRatio=void 0,this.appliedAspectRatio=e.aspectRatio||void 0,this.mediaQueries=e.mediaQueries||[],this.model&&this.template&&this.render();for(var t=this.$el.find(".picture-inner span"),i=0;i<t.length;i++){var n=t[i].className.split(" ");this.mediaQueries=this.mediaQueries.concat(n)}this.mediaQueries=_.uniq(_.compact(this.mediaQueries)),!this.cropTool&&(this.cropTool=null),!e.reset&&this.listenTo(inc,"mq:match",this.mediaQueryMatched),this.$el.css("visibility","hidden"),inc.mq&&this.mediaQueryMatched(inc.mq.name,inc.mq.retina),(this.appliedAspectRatio||this.alwaysResize)&&(_.findWhere(this._listeningTo,{_listenID:dispatcher._listenID})||this.listenTo(dispatcher,"window:resized",this.resize),this.resize())},render:function(){return this.$(".picture-inner").remove(),this.$el.prepend(this.template({image:this.model})),this},mediaQueryMatched:function(e,t){if("undefined"==typeof t&&(t=!1),-1!=_.indexOf(this.mediaQueries,e)){var i,n,s=this.$el.find(".picture-inner img");s.length>0?n=$(s[0]):(i=new Image,this.loaded=this.errored=!1,i.onload=_.bind(function(){i.removeAttribute("width"),i.removeAttribute("height"),this.imageWidth||(this.imageWidth=i.naturalWidth||i.width),this.imageHeight||(this.imageHeight=i.naturalHeight||i.height),this.imageAspectRatio||(this.imageAspectRatio=this.imageWidth/this.imageHeight),this.resize(),this.$el.parent().toggleClass("imageLoaded",!0),this.$el.css("visibility","visible"),this.loaded=!0,this.trigger("loaded",this)},this),i.onerror=i.onabort=_.bind(function(){this.errored=!0,this.loaded=!0,this.trigger("errored",this),this.trigger("loaded",this)},this),n=$(i));for(var o=this.$el.find(".picture-inner span"),a=0;a<o.length;a++){var r=$(o[a]);if(r.hasClass(e)){t||n.attr("src")==r.attr("data-src")||(this.loaded=this.errored=!1,n.attr("src",r.attr("data-src"))),!t||n.attr("src")==r.attr("data-src-x2")&&r.attr("data-src-x2")||(this.loaded=this.errored=!1,n.attr("src",r.attr("data-src-x2")||r.attr("data-src"))),n.attr("onclick")!=r.attr("data-onclick")&&n.attr("onclick",r.attr("data-onclick")),n.attr("alt")!=r.attr("data-alt")&&n.attr("alt",r.attr("data-alt"));
break}}0==s.length&&this.$(".picture-inner").prepend(n)}else this.$el.find(".picture-inner img").remove()},resize:function(){if(this.imageAspectRatio&&(this.alwaysResize||this.cropTool||this.model&&_.isString(this.model.getID()))){this.zoomOnly&&this.fitHeight?this.$el.css("width",this.$el.height()*this.imageAspectRatio+"px"):this.$el.css("width","");var e,t,i,n,s,o,a,r,l=this.$(".picture-inner"),c=$(l.children("img")[0]),h=this.appliedAspectRatio||(this.cropTool?this.cropTool.appliedAspectRatio:this.imageAspectRatio),d=this.fitHeight,u=this.zoomOnly,p=this.expandToFit,m=u&&d?this.$el.height()*this.imageAspectRatio:this.$el.width(),f=d||p?this.$el.height():m/h;p&&(h=m/f);var g=this.model&&this.model.croppable()&&this.model.get("transform")?_.clone(this.model.get("transform")):{x:0,y:0,zoom:1};this.$el.css("height",d||p?"":f+"px"),this.imageAspectRatio<h&&!d?(e=m*g.zoom,t=m/this.imageAspectRatio*g.zoom,i=f-t,n=m-e):(e=f*this.imageAspectRatio*g.zoom,t=f*g.zoom,i=f-t,n=m-e),a=Math.abs(i/2)+g.y*t,a>Math.abs(i)?(a=Math.abs(i),g.y=a/t):0>a&&(a=0,g.y=i/t),r=Math.abs(n/2)+g.x*e,r>Math.abs(n)?(r=Math.abs(n),g.x=r/e):0>r&&(r=0,g.x=n/e),s=m>e-n?m:e-n,o=f>t-i?f:t-i,l.css({width:s+"px",height:o+"px",top:(0>i?i:0)+"px",left:(0>n?n:0)+"px"}),c.css({position:"absolute",width:e+"px",height:t+"px",top:a+"px",left:r+"px"}),c.data("ui-draggable")&&(d||m>=e&&f>=t)?(c.css("cursor",""),c.draggable("disable")):c.data("ui-draggable")&&(c.css("cursor","move"),c.draggable("enable"))}else this.$el.css("height","");return this},crop:function(e,t){return"undefined"==typeof e?(!this.model||this.cropTool&&this.model.getID()!=this.cropTool.originalModel.getID())&&this.trashCropTool():this.cropTool&&this.cropTool.originalModel.getID()!=e.getID()&&this.trashCropTool(),this.cropTool||(this.cropTool=new Inc.Editors.Crop({model:new Inc.Models.Image,originalModel:e||this.model,picture:this,appliedAspectRatio:t,label:"Crop Image"}),this.$el.append(this.cropTool.$el)),this.cropTool.activate(),dispatcher.trigger("inc:edit"),this},trashCropTool:function(){if(!this.cropTool)return this;var e=this.cropTool.oid;return this.cropTool.trash(),this.cropTool=null,this.trigger("croptool:trash",this,e),this},reset:function(e){return e||(e={}),e.reset=!0,this.initialize(e),this},trash:function(){return this.trashCropTool(),Inc.ToggleView.prototype.trash.apply(this,arguments),this}}),Inc.Controllers.User={type:"UserController",extend:Inc.extend,spawn:Inc.spawn,init:function(e){return e||(e={}),this.loggedin=!1,this.admin=null,this.allowedUnauthorizedViewsOfContentBeforeDisplayWall=1,this.doingAdminVerification=!1,this.administratorVerificationAttempts=0,this.defaultLoginSuccessCallback=this.loginSuccessCallback,this.loadUserDataFromCookie(!0),$(document).ready(_.bind(function(){this.loggedin?this.setLoggedInUser():$("#leftMenuHeader").append('<div id="LeftMenuLogin"><span>Login</span> or <span>Signup</span></div>'),$("#forgotpass-form").on("submit",function(){return this.doUserForgot(),!1}),$("body").on("submit","#TopNavLoginRegister",function(e){var t=$(this);return inc.user.loggedin?inc.user.setUserNewsletters(t,!0):$(t).find(".userForgotPass").is(":visible")?inc.user.doUserForgot(t):$(t).find(".registrationOptions").is(":visible")?inc.user.doUserRegister(t):inc.user.doUserLogin(t),!1}),$("#LoginLanderRegister").on("submit",function(e){var t=$(this);return $(t).find(".registrationOptions").is(":visible")?inc.user.doUserRegister(t):inc.user.doUserLogin(t),!1}),$("#MobileLoginLogin").on("submit",function(e){var t=$(this);return inc.user.doUserLogin(t),!1}),$("#MobileLoginRegister").on("submit",function(e){var t=$(this);return inc.user.doUserRegister(t),!1}),$("#lander_register_form").on("submit",function(e){var t=$(this);return inc.user.doUserRegister(t),!1}),$(".forgotPassLink").on("click",function(e){return $(".userForgotPass").slideToggle(),!1}),$(document).on("keypress","#newsletterLanderSubscribe #NewsletterEmailValue",_.bind(function(e){var t=e.currentTarget;$(t).closest("form").find("#NewsletterSubmit").val("REGISTER");var i=$(t).closest("form").find("#NewsletterEmailValue").val()+String.fromCharCode(e.which).toLowerCase();Inc.Utilities.isValidEmailAddress(i)&&inc.user.emailAlreadyRegistered(i,function(e){e?($(t).closest("form").find("#NewsletterSubmit").val("LOGIN"),$(t).closest("form").find(".hxhid").hide()):($(t).closest("form").find("#NewsletterSubmit").val("REGISTER"),$(t).closest("form").find(".hxhid").show())})},this)),$("#newsletterLanderSubscribe").on("submit",function(e){var t=$(this),i=$("#newsletterLanderSubscribe #NewsletterSubmit").val();return"LOGIN"==i&&inc.user.doUserLogin(t),"REGISTER"==i&&inc.user.doUserRegister(t),"SIGN UP"==i&&inc.user.setUserNewsletters(t,!0),!1}),$(document).on("keypress","#topNavNewsletterUser #NewsletterEmailValue",_.bind(function(e){$("#NewsletterSubmit").val("REGISTER");var t=$("#NewsletterEmailValue").val()+String.fromCharCode(e.which).toLowerCase();Inc.Utilities.isValidEmailAddress(t)&&inc.user.emailAlreadyRegistered(t,function(e){e?($("#TopNavOverlayNewsletters #NewsletterSubmit").val("LOGIN"),$(".hxhid").hide()):($("#TopNavOverlayNewsletters #NewsletterSubmit").val("REGISTER"),$(".hxhid").show())})},this)),$("#topNavNewsletterUser").on("submit",function(e){var t=$(this),i=$("#topNavNewsletterUser #NewsletterSubmit").val();return"LOGIN"==i&&inc.user.doUserLogin(t),"REGISTER"==i&&inc.user.doUserRegister(t),"SIGN UP"==i&&inc.user.setUserNewsletters(t,!0),!1})},this)),this},setLoggedInUser:function(){return this.loggedin?(this.buildUserObject(function(){}),$("body").addClass("loggedin"),$("#TopNavOverlayLogin").addClass("loggedin"),$("#MainNavBarContainer .thatGuy").addClass("loggedin"),$("#TopNavNewsletterRegister").hide(),$("body.newsletter").length>0&&($("h1.welcomed").html("Hello, "+this.username+'! <br />Sign Up for Inc. Newsletters <span class="smallerTitle">Not '+this.username+'? Sign out <a href="'+application_url+"logout?ret="+application_url+'newsletter" rel="nofollow">here</a>.</span>'),$("body.newsletter #TopNavNewsletterRegister").hide()),this):void 0},showPanelOptions:function(e){var t={};return"newsletter"==e?this.loggedin?(t.username=this.displayname,$("#TopNavOverlayLogin .topNavPanelContainer .standardPanelMessages").remove(),$("#TopNavOverlayLogin .topNavPanelContainer").html(_.template($("#StandardPanelNewsletterTopper").html())(t)),$("#TopNavOverlayLogin .topNavPanelContainer").append(_.template($("#MainLoginForm").html())(t)),$("#TopNavOverlayLogin .topNavPanelContainer .newsletterContainer").show(),$("#TopNavOverlayLogin .topNavPanelContainer .submissionContainer").show(),this.getUserSubscriptions(this.email)):(t.username="Stranger",$("#TopNavOverlayLogin .topNavPanelContainer .standardPanelMessages").remove(),$("#TopNavOverlayLogin .topNavPanelContainer .newsletterContainer").prepend(_.template($("#StandardPanelNewsletterTopper").html())(t)),$("#TopNavOverlayLogin .topNavPanelContainer .newsletterContainer").show()):this.loggedin?(t.username=this.displayname,$("#TopNavOverlayLogin .topNavPanelContainer .standardPanelMessages").remove(),$("#TopNavOverlayLogin .topNavPanelContainer").prepend(_.template($("#StandardPanelLoggedIn").html())(t)),$("#TopNavOverlayLogin .topNavPanelContainer .newsletterContainer").hide(),$("#TopNavOverlayLogin .topNavPanelContainer .submissionContainer").hide(),$("#TopNavOverlayLogin .topNavPanelContainer .demoPanel").hide()):($("#TopNavOverlayLogin .topNavPanelContainer .standardPanelMessages").remove(),$("#TopNavOverlayLogin .topNavPanelContainer .newsletterContainer").hide()),this},getUserSubscriptions:function(e){$.get(inc.restURL+"getsubscriptions",{email:e},function(e){_.each(e,function(e,t){$('#TopNavOverlayLogin .topNavPanelContainer .optionsContainer input[alt="'+e+'"]').prop("checked",!0),$('body.newsletter #newsletterLanderSubscribe .tile input[alt="'+e+'"]').prop("checked",!0)})}).done(function(){}).fail(function(){}).always(function(){});return this},loadUserDataFromCookie:function(e){if("undefined"==typeof e&&(e=!1),e&&(inc.i.internationalWallCookieWasTrue="true"==Inc.Utilities.getCookie("incShowInternationalWall")),Inc.Utilities.getCookie("incid")){var t=Inc.Utilities.getCookie("incid").split(":");if(this.loggedin=!0,this.id=parseInt(t[0]),Inc.Utilities.getCookie("incun")){var i=Inc.Utilities.getCookie("incun");this.username=i.replace("+"," ")}else this.username=t[1].replace("+"," ");this.syncUserData()}else Modernizr.localstorage&&window.localStorage.removeItem("IncUser");if(!this.loggedin&&inc.adManager.adBlockerEnabled||"true"==inc.urlParameters.forceInternationalWallForTesting)if(Inc.Utilities.getCookie("incUnauthorizedViews"))this.unauthorizedViews=Number(Inc.Utilities.getCookie("incUnauthorizedViews"));else{this.unauthorizedViews=0,Inc.Utilities.setCookie("incUnauthorizedViews",this.unauthorizedViews,7,{path:"/",domain:inc.i.cookieDomain});var n=inc.i.internationalWallActive;inc.i.internationalWallActive=!1,!e&&n&&this.removeInternationalWall(),Inc.Utilities.deleteCookie("incShowInternationalWall","/",inc.i.cookieDomain)}else{Inc.Utilities.deleteCookie("incUnauthorizedViews","/",inc.i.cookieDomain);var n=inc.i.internationalWallActive;inc.i.internationalWallActive=!1,!e&&n&&this.removeInternationalWall(),Inc.Utilities.deleteCookie("incShowInternationalWall","/",inc.i.cookieDomain)}return this},syncUserData:function(){if(Modernizr.localstorage){var e=window.localStorage.getItem("IncUser");e=e?$.parseJSON(e):{};var t=!1;if(_.isUndefined(e.id)||_.isUndefined(this.id)||_.isNull(this.id)||e.id==this.id?_.isUndefined(e.id)&&!_.isUndefined(this.id)&&(e.id=this.id,t=!0):(window.localStorage.removeItem("IncUser"),e={},e.id=this.id,t=!0),this.admin&&(!this.admin.version||"1.0"!=this.admin.version))return this.doAdminVerification(function(){inc.admin.activateAdminMode()}.bind(this)),this;if(!_.isUndefined(e.admin)&&_.isNull(this.admin)){if(!e.admin.version||"1.0"!=e.admin.version)return this.doAdminVerification(function(){inc.admin.activateAdminMode()}.bind(this)),this;this.admin={},this.admin.role=e.admin.role,this.admin.roleID=e.admin.roleID,this.admin.author=e.admin.author,this.admin.version=e.admin.version;var i=this.getAdminSettingDefaults();for(var n in i)_.has(e.admin.settings,n)||(e.admin.settings[n]=i[n]);this.admin.settings=e.admin.settings}else if(!_.isNull(this.admin)){e.admin={},e.admin.role=this.admin.role,e.admin.roleID=this.admin.roleID,e.admin.author=this.admin.author,e.admin.version=this.admin.version,_.isUndefined(this.admin.settings)?e.admin.settings=this.admin.settings=this.getAdminSettingDefaults():e.admin.settings=this.admin.settings;var i=this.getAdminSettingDefaults();for(var n in i)_.has(e.admin.settings,n)||(e.admin.settings[n]=i[n]);t=!0}this.admin&&!Inc.Utilities.getCookie("incadminBypassCache")&&Inc.Utilities.setCookie("incadminBypassCache",!0,360,{path:"/",domain:inc.i.cookieDomain}),t&&window.localStorage.setItem("IncUser",JSON.stringify(e))}return this},getAdminSettingDefaults:function(){return{StartOpen:!0,StartInEdit:!1}},getAdminSetting:function(e){return _.isNull(this.admin)||_.isUndefined(this.admin.settings[e])?null:this.admin.settings[e]},setAdminSetting:function(e,t){return _.isNull(this.admin)||(this.admin.settings[e]=t,this.syncUserData()),this},isAuthorizedToViewContent:function(){return!this.loggedin&&inc.adManager.adBlockerEnabled&&"article"==inc.i.op&&inc.i.geo&&"United States"!=inc.i.geo?!1:!0},incrementUnauthorizedViews:function(){return _.isNumber(this.unauthorizedViews)||(this.unauthorizedViews=0),this.unauthorizedViews++,Inc.Utilities.setCookie("incUnauthorizedViews",this.unauthorizedViews,7,{path:"/",domain:inc.i.cookieDomain}),this.unauthorizedViews>=this.allowedUnauthorizedViewsOfContentBeforeDisplayWall&&-1==navigator.userAgent.toLowerCase().search("msnbot|googlebot|yahoo! slurp|yahooseeker|bingbot|youdaobot|yodaobot|scoutjet|baiduspider|iaskspider|teoma")&&(inc.i.internationalWallActive=!0,Inc.Utilities.setCookie("incShowInternationalWall",!0,7,{path:"/",domain:inc.i.cookieDomain})),this},removeInternationalWall:function(){switch(inc.i.internationalWallActive=!1,inc.i.internationalWallDisplayed=!1,inc.tracker.trackRegistrationConversion(inc.i.article.id),inc.currentController.type){case"ArticlePage":inc.currentController.removeInternationalWall()}return this},buildFormValueArray:function(e){var t={};return $.each($(e).serializeArray(),function(e,i){t[i.name]=i.value}),t},doUserLogin:function(e){var t=this.buildFormValueArray(e),i=document.referrer,n=t.inputEmail,s=t.inputPassword,o="",a="",r="",l="",c="",h="";if(!Inc.Utilities.isValidEmailAddress(n))return alert("Please enter a valid email address"),!1;var d={};d.type="account",d.style="login",d.increturl=encodeURI(i),d.email=encodeURI(n),d.password1=encodeURI(s),d.geocountry=encodeURI(o),d.geocity=encodeURI(a),d.geozip=encodeURI(h),d.georegion=encodeURI(r),d.geolat=encodeURI(l),d.geolong=encodeURI(c);var u=!1;return u=$(e).find(".newsletterContainer").is(":visible"),$("#newsletterLanderSubscribe").length>0&&(u=!0),u?d.subscribe=!0:d.subscribe=!1,this.submitUserLogin(d,e),!0},submitUserLogin:function(e,t){var i=this;$.post(inc.restURL+"account",e,_.bind(function(n){var s=n;if("OK"==s.overallstatus)if(i.loadUserDataFromCookie(),i.loginSuccessCallback(),i.loginSuccessCallback=null,i.email=s.email,s.loginfromlogin||s.loginfrommobile){var o=inc.urlParameters.returnurl;""==o||void 0===o?window.location="http://www.inc.com":window.location=o}else{if(i.setLoggedInUser(),$("#leftMenuHeader #LeftMenuLogin").html('<a href="'+application_url+"logout?ret="+application_url+'" rel="nofollow"><span>Logout</span></a>'),$("#TopNavOverlayNewsletters .panelTitle").html("Hello, "+s.username+'! Sign Up for Inc. Newsletters <span class="smallerTitle">Not '+s.username+'? Sign out <a href="'+application_url+"logout?ret="+application_url+'" rel="nofollow">here</a>.</span>'),$("#newsletterLanderSubscribe").length>0&&$("#newsletterLanderSubscribe #NewsletterSubmit").val("SIGN UP"),$("body.newsletter").length>0){var a=i.email;$("div.loggedTextContainer").show(),$("input#mc-embedded-subscribe").show(),$("input#emailz2").attr("value",a),$('input[name="letteroption[]"]').show()}else $("#wrappermask").click();e.subscribe&&this.onlySetNewsletters(t),$("#TopNavOverlayClose").click()}else alert(s.errormsg),console.log("There was a problem logging in")},this)).done(function(){}).fail(function(){alert("incorrect email or password"),console.log("fail")}).always(function(){},"json");return this},doUserRegister:function(e){var t=this.buildFormValueArray(e),i=document.referrer,n=t.inputEmail,s=t.inputPassword,o=t.inputFirstName,a=t.inputLastName,r="",l="",c="",h="",d="",u="";if(!Inc.Utilities.isValidEmailAddress(n))return alert("Please enter a valid email address"),!1;if(""==o)return alert("Please provide your First Name"),!1;if(""==a)return alert("Please provide your Last Name"),!1;if(""==s)return alert("Please choose a strong password"),!1;var p={};p.type="account",p.style="register",p.increturl=encodeURI(i),p.efname=encodeURI(o),p.elname=encodeURI(a),p.email=encodeURI(n),p.password1=encodeURI(s),p.geocountry=encodeURI(r),p.geocity=encodeURI(l),p.geozip=encodeURI(u),p.georegion=encodeURI(c),p.geolat=encodeURI(h),p.geolong=encodeURI(d);var m=!1;return m=$(e).find(".newsletterContainer").is(":visible"),$("#newsletterLanderSubscribe").length>0&&(m=!0),m?p.subscribe=!0:p.subscribe=!1,this.submitUserRegister(p,e),!0},submitUserRegister:function(e,t){var i=this;$.post(inc.restURL+"account",e,_.bind(function(n){var s=n;if("OK"==s.overallstatus){if(console.log("User registered successfully"),i.loadUserDataFromCookie(),i.loginSuccessCallback(),i.loginSuccessCallback=null,i.email=s.email,i.firstname=s.firstname,i.lastname=s.lastname,i.setLoggedInUser(),s.loginfromlogin)if("register"==s.action)this.loadPanel("demo","login");else{var o=inc.urlParameters.returnurl;""==o||void 0===o?window.location="http://www.inc.com":window.location=o}else if(s.loginfrommobile)if("register"==s.action)this.loadPanel("demo","mobilelogin");else{var o=inc.urlParameters.returnurl;""==o||void 0===o?window.location="http://www.inc.com":window.location=o}else if($("#welcome_loggedout").hide(),$("#welcome").show(),$("#welcome #memberlink").html(s.username),$("#leftMenuHeader #LeftMenuLogin").html('<a href="'+application_url+"logout?ret="+application_url+'" rel="nofollow"><span>Logout</span></a>'),$("#MainNavBarContainer .thatGuy").addClass("loggedin"),$("#TopNavOverlayNewsletters .panelTitle").html("Hello, "+s.username+'! Sign Up for Inc. Newsletters <span class="smallerTitle">Not '+s.username+'? Sign out <a href="'+application_url+"logout?ret="+application_url+'" rel="nofollow">here</a>.</span>'),$("#newsletterLanderSubscribe").length>0&&$("#newsletterLanderSubscribe #NewsletterSubmit").val("SIGN UP"),e.subscribe?this.setUserNewsletters(t,!0):this.loadPanel("demo",""),$("body.newsletter").length>0){var a=i.email;$("div#please_login").hide(),$("div.loggedTextContainer").show(),$("input#mc-embedded-subscribe").show(),$("input#emailz2").attr("value",a),$('input[name="letteroption[]"]').show()}}else alert(s.errormsg),console.log("There was a problem logging the user in :(")},this)).done(function(){}).fail(function(){alert("email already registered"),console.log("fail")}).always(function(){},"json");return this},setUserDemographics:function(e){var t=this.buildFormValueArray(e),i=document.referrer,n=t.demo_zipcode,s=t.demo_companyname,o=t.demo_employeenum,a=t.demo_usercountry,r=t.demo_jobtitle,l={};return l.type="demo",l.loggedinid=this.id,l.zipcode=n,l.coname=s,l.employeenum=encodeURI(o),l.usercountry=a,l.userjobtitle=encodeURI(r),l.increturl=encodeURI(i),this.submitUserDemo(l),!0},submitUserDemo:function(e){$.post(inc.restURL+"demographics",e,_.bind(function(e){var t=e;return"OK"!=t.overallstatus?(console.log("Error saving user demographics"),!1):(console.log("User demographic info stored successfully"),void($("body.login").length>0?this.loadPanel("newsletters","login"):$("body.mobilelogin").length>0?this.loadPanel("newsletters","mobilelogin"):this.loadPanel("newsletters","")))},this)).done(function(){}).fail(function(){console.log("fail")}).always(function(){},"json");return this},setUserNewsletters:function(e,t){var i=$(e).attr("id"),n=document.referrer,s=[];$("#"+i+" :checked").each(function(){s.push($(this).attr("alt"))});var o=this.email,a="undefined"==typeof this.firstname?"Unknown":this.firstname,r="undefined"==typeof this.lastname?"Unknown":this.lastname,l="undefined"==typeof this.displayname?o:this.displayname,c={};return c.type="newsletter",c.increturl=encodeURI(n),c.useremail=encodeURI(o),c.userid=this.id,c.userfirstname=encodeURI(a),c.userlastname=encodeURI(r),c.userfullname=encodeURI(l),c.newsletterchoices=encodeURI(s),$("body.login").length>0?this.loadPanel("complete","login"):$("body.mobilelogin").length>0?this.loadPanel("complete","mobilelogin"):$("body.newsletter").length>0||(t?$("#TopNavOverlayClose").click():this.loadPanel("complete","")),""!=s&&this.submitUserNewsletters(c),!0},submitUserNewsletters:function(e){$.post(inc.restURL+"newsletters",e,_.bind(function(e){var t=e;return"OK"!=t.overallstatus?(console.log("There was a problem: "+t.message),!1):void console.log("Newsletter subscriptions successful")},this)).done(function(){}).fail(function(){console.log("fail")}).always(function(){},"json");return this},doUserForgot:function(e){var t=this.buildFormValueArray(e),i=t.forgotPass,n=document.referrer;if(!Inc.Utilities.isValidEmailAddress(i))return alert("Email required for password reset."),!1;var s={};return s.type="forgot",s.increturl=encodeURI(n),s.email=encodeURI(i),this.doPostForgot(s),$(e).find(".userForgotPass").append('<span class="the_white">Check your email for reset instructions!</span>'),!0},doPostForgot:function(e){$.post(inc.restURL+"forgotpass",e,_.bind(function(e){var t=e;return"OK"!=t.overallstatus?(console.log("There was a problem with password reset :("),!1):void console.log("Password reset begun successfully")},this)).done(function(){}).fail(function(){console.log("fail")}).always(function(){},"json");return this},logout:function(){return this.loggedin=!1,this.admin=null,this.id=void 0,Modernizr.localstorage&&window.localStorage.removeItem("IncUser"),Inc.Utilities.deleteCookie("inci","/",inc.i.cookieDomain),Inc.Utilities.deleteCookie("incd","/",inc.i.cookieDomain),Inc.Utilities.deleteCookie("incun","/",inc.i.cookieDomain),Inc.Utilities.deleteCookie("incid","/",inc.i.cookieDomain),Inc.Utilities.deleteCookie("incadminBypassCache","/",inc.i.cookieDomain),inc.isMode("admin")&&inc.removeMode("admin"),inc.isMode("edit")&&inc.removeMode("edit"),this},doAdminVerification:function(e){var t=this;return this.doingAdminVerification=!0,e||(e=function(){}),this.loggedin&&_.isNull(this.admin)&&this.administratorVerificationAttempts<3?(this.administratorVerificationAttempts++,$.post(inc.restURL+"adminverification").done(function(i){_.isUndefined(i.verified)?inc.admin.notify("SERVER ERROR"):(i.verified&&(t.admin={},t.admin.role=i.role,t.admin.roleID=i.roleID,t.admin.author=i.author,t.admin.version=i.version,t.administratorVerificationAttempts=0,t.syncUserData()),e()),t.doingAdminVerification=!1}).fail(function(){inc.admin.notify("CONNECTION ERROR"),t.doingAdminVerification=!1})):this.loggedin&&_.isNull(this.admin)?inc.admin.notify("VERIFICATION ATTEMPT LIMIT EXCEEDED"):this.loggedin&&!_.isNull(this.admin)?(this.administratorVerificationAttempts=0,e(),this.doingAdminVerification=!1):(this.doingAdminVerification=!1,_.isNull(this.admin)||this.getAdminSetting("StartOpen")||(this.loginSuccessCallback=function(){}),this.promptForLogin(_.partial(this.doAdminVerification,e))),this},loginSuccessCallback:function(){var e=!1;if(Inc.Utilities.getCookie("incid")){var t=Inc.Utilities.getCookie("incid").split(":");"undefined"!=typeof t[7]&&1==parseInt(t[7])&&(e=!0)}return(!_.isNull(this.admin)||e)&&inc.admin.activateAdminMode(),this},promptForLogin:function(e){e&&(this.loginSuccessCallback=e),$("#TopNavOverlayLogin .registrationOptions").hide(),$("#TopNavOverlayLogin").is(":visible")||$(".memberButton").click();var t=this;return setTimeout(function(){t.loginSuccessCallback=t.defaultLoginSuccessCallback},6e4),this},promptForSignup:function(e){e&&(this.loginSuccessCallback=e),$("#TopNavOverlayLogin .registrationOptions").show(),$("#TopNavOverlayLogin").is(":visible")||$(".memberButton").click();var t=this;return setTimeout(function(){t.loginSuccessCallback=t.defaultLoginSuccessCallback},6e4),this},hasPermission:function(e,t){return _.isUndefined(t)&&(t=e,e=void 0),!_.isNull(this.admin)&&_.isUndefined(e)?t(!0):_.isNull(this.admin)?!this.doingAdminVerification&&_.isNull(this.admin)&&this.doAdminVerification(_.bind(function(){this.hasPermission(e,t)},this)):t(this.admin.roleID<=e?!0:!1),this},loadPanel:function(e,t){return inc.user.loggedin?"demo"===e?this.showDemoPanel(t):"newsletters"===e?this.showNewsletterPanel(t):"complete"===e&&this.showCompletePanel(t):alert("You must login to do this"),this},showCompletePanel:function(e){var t=this,i={};return i.id="completePanel",i.panelheadline="Congratulations!",i.panelblurb1="Congratulations! You're now a part of the Inc. community, the leading online resource for private business leaders and innovators.",i.panelblurb2='<span class="large_lang">As a logged in visitor</span>, you\'ll have access to all that Inc.com has to offer, and <span class="large_lang">registered users</span> receive priority invites to free Inc. networking events, exclusive web events and video chats, and more!',i.welcomeoffer="",i.footermsgs="",i.intlfootermsgs=["",""],""==e?($("#TopNavOverlayLogin .topNavPanelContainer").children().fadeOut(function(){$("#TopNavOverlayLogin .topNavPanelContainer").html(_.template($("#StandardPanelComplete").html())(i)),$("#"+i.id).on("click","#member_complete_submit",function(){t.setLoggedInUser(),$("#TopNavOverlay").slideUp()}),$("#"+i.id+" .cancel_button").click(function(){return inc.user.loadPanel("newsletters",""),!1})}),$("#TopNavOverlayLogin .topNavPanelContainer").children().fadeIn()):"login"==e?$(".loginlander-inner").children().fadeOut(function(){$(".loginlander-inner").html(_.template($("#StandardPanelComplete").html())(i)),$("#loginlander-container").children().fadeIn(function(){$(".completePanel .button-right").click(function(){var e=inc.urlParameters.returnurl;""==e||void 0===e?window.location="http://www.inc.com":window.location=e}),$("#"+i.id+" .cancel_button").click(function(){return inc.user.loadPanel("newsletters","login"),!1})})}):$(".mobileLoginContainer").children().fadeOut(function(){$(".mobileLoginContainer").html(_.template($("#StandardPanelComplete").html())(i)),$(".mobileLoginContainer").children().fadeIn(function(){$(".completePanel .button-right").click(function(){var e=inc.urlParameters.returnurl;""==e||void 0===e?window.location="http://www.inc.com":window.location=e}),$("#"+i.id+" .cancel_button").click(function(){return inc.user.loadPanel("newsletters","login"),!1})})}),this},showNewsletterPanel:function(e){var t={};return t.id="newsletterPanel",""==e?($("#TopNavOverlayLogin .topNavPanelContainer").children().fadeOut(function(){$("#TopNavOverlayLogin .topNavPanelContainer").html(_.template($("#StandardPanelNewsletters").html())(t)),$("#TopNavOverlayLogin .topNavPanelContainer #newsletter_form").on("submit",function(e){var t=$(this);return inc.user.setUserNewsletters(t,!1),!1}),$("#"+t.id+" .cancel_button").click(function(){return inc.user.loadPanel("demo",""),!1})}),$("#TopNavOverlayLogin .topNavPanelContainer").children().fadeIn()):"login"==e?$(".loginlander-inner").children().fadeOut(function(){$(".loginlander-inner").html(_.template($("#StandardPanelNewsletters").html())(t)),$("#newsletterPanel").prepend('<div id="login_language"><div class="larger_lang">Stay on top of the news entrepreneurs need.</div>You\'re automatically signed up for the Inc. Wire, so you never miss a single day\'s most important news, tips, or ideas.</div>'),$("#loginlander-container").children().fadeIn(function(){$("#loginlander-container #newsletter_form").on("submit",function(e){var t=$(this);return inc.user.setUserNewsletters(t,!1),!1}),$("#"+t.id+" .cancel_button").click(function(){return inc.user.loadPanel("demo","login"),!1})})}):$(".mobileLoginContainer").children().fadeOut(function(){$(".mobileLoginContainer").html(_.template($("#StandardPanelNewsletters").html())(t)),$("#newsletterPanel").prepend('<div id="login_language"><div class="larger_lang">Stay on top of the news entrepreneurs need.</div>You\'re automatically signed up for the Inc. Wire, so you never miss a single day\'s most important news, tips, or ideas.</div>'),$(".mobileLoginContainer").children().fadeIn(function(){$(".mobileLoginContainer #newsletter_form").on("submit",function(e){var t=$(this);return inc.user.setUserNewsletters(t,!1),!1}),$("#"+t.id+" .cancel_button").click(function(){return inc.user.loadPanel("demo","login"),!1})})}),this},showDemoPanel:function(e){var t={};return t.id="demographicsPanel",t.countries=["United States","Afganistan","Albania","Algeria","American Samoa","Andorra","Angola","Anguilla","Antigua &amp; Barbuda","Argentina","Armenia","Aruba","Australia","Austria","Azerbaijan","Bahamas","Bahrain","Bangladesh","Barbados","Belarus","Belgium","Belize","Benin","Bermuda","Bhutan","Bolivia","Bonaire","Bosnia &amp; Herzegovina","Botswana","Brazil","British Indian Ocean Ter","Brunei","Bulgaria","Burkina Faso","Burundi","Cambodia","Cameroon","Canada","Canary Islands","Cape Verde","Cayman Islands","Central African Republic","Chad","Channel Islands","Chile","China","Christmas Island","Cocos Island","Colombia","Comoros","Congo","Cook Islands","Costa Rica","Cote DIvoire","Croatia","Cuba","Curaco","Cyprus","Czech Republic","Denmark","Djibouti","Dominica","Dominican Republic","East Timor","Ecuador","Egypt","El Salvador","Equatorial Guinea","Eritrea","Estonia","Ethiopia","Falkland Islands","Faroe Islands","Fiji","Finland","France","French Guiana","French Polynesia","French Southern Ter","Gabon","Gambia","Georgia","Germany","Ghana","Gibraltar","Great Britain","Greece","Greenland","Grenada","Guadeloupe","Guam","Guatemala","Guinea","Guyana","Haiti","Hawaii","Honduras","Hong Kong","Hungary","Iceland","India","Indonesia","Iran","Iraq","Ireland","Isle of Man","Israel","Italy","Jamaica","Japan","Jordan","Kazakhstan","Kenya","Kiribati","Korea North","Korea Sout","Kuwait","Kyrgyzstan","Laos","Latvia","Lebanon","Lesotho","Liberia","Libya","Liechtenstein","Lithuania","Luxembourg","Macau","Macedonia","Madagascar","Malaysia","Malawi","Maldives","Mali","Malta","Marshall Islands","Martinique","Mauritania","Mauritius","Mayotte","Mexico","Midway Islands","Moldova","Monaco","Mongolia","Montserrat","Morocco","Mozambique","Myanmar","Nambia","Nauru","Nepal","Netherland Antilles","Netherlands","Nevis","New Caledonia","New Zealand","Nicaragua","Niger","Nigeria","Niue","Norfolk Island","Norway","Oman","Pakistan","Palau Island","Palestine","Panama","Papua New Guinea","Paraguay","Peru","Phillipines","Pitcairn Island","Poland","Portugal","Puerto Rico","Qatar","Republic of Montenegro","Republic of Serbia","Reunion","Romania","Russia","Rwanda","St Barthelemy","St Eustatius","St Helena","St Kitts-Nevis","St Lucia","St Maarten","St Pierre &amp; Miquelon","St Vincent &amp; Grenadines","Saipan","Samoa","Samoa American","San Marino","Sao Tome &amp; Principe","Saudi Arabia","Senegal","Seychelles","Sierra Leone","Singapore","Slovakia","Slovenia","Solomon Islands","Somalia","South Africa","Spain","Sri Lanka","Sudan","Suriname","Swaziland","Sweden","Switzerland","Syria","Tahiti","Taiwan","Tajikistan","Tanzania","Thailand","Togo","Tokelau","Tonga","Trinidad &amp; Tobago","Tunisia","Turkey","Turkmenistan","Turks &amp; Caicos Is","Tuvalu","Uganda","Ukraine","United Arab Erimates","United Kingdom","Uraguay","Uzbekistan","Vanuatu","Vatican City State","Venezuela","Vietnam","Virgin Islands (Brit)","Virgin Islands (USA)","Wake Island","Wallis &amp; Futana Is","Yemen","Zaire","Zambia","Zimbabwe"],t.jobtitles=[{value:"1",label:"Chairperson"},{value:"2",label:"Board member"},{value:"3",label:"Owner/Partner"},{value:"4",label:"CEO"},{value:"5",label:"CFO"},{value:"6",label:"CIO/CTO"},{value:"7",label:"COO"},{value:"8",label:"CMO"},{value:"9",label:"President"},{value:"10",label:"Managing Director"},{value:"11",label:"Senior Vice President/Executive Vice President"},{value:"12",label:"Vice President"},{value:"13",label:"General Manager"},{value:"14",label:"Owner/Partner"},{value:"15",label:"Controller/Treasurer"},{value:"16",label:"Technical staff/Information Systems"},{value:"17",label:"Director"},{value:"18",label:"Sales Representative/Account Executive"},{value:"19",label:"Manager"},{value:"20",label:"Consultant"},{value:"21",label:"Professional"},{value:"22",label:"Clerical/Support staff/Administrator"},{value:"23",label:"Coordinator/Assistant"},{value:"24",label:"Government/Public Official"},{value:"25",label:"Teacher/Lecturer"},{value:"26",label:"Student"},{value:"27",label:"Not employed"},{value:"28",label:"Retired"}],t.employeenums=[{value:"Founders Only",label:"Founders Only"},{value:"1-9",label:"1 to 9"},{value:"10-24",label:"10 to 24"},{value:"25-49",label:"25 to 49"},{value:"50-99",label:"50 to 99"},{value:"100-499",label:"100 to 499"},{value:"500-999",label:"500 to 999"},{value:"1000-4999",label:"1,000 to 4,999"},{value:"5000-9999",label:"5,000 to 9,999"},{value:"10000+",label:"10,000 or more"}],""==e?($("#TopNavOverlayLogin .topNavPanelContainer").children().fadeOut(function(){$("#TopNavOverlayLogin .topNavPanelContainer").html(_.template($("#StandardPanelDemographics").html())(t)),$("#demo_usercountry").change(function(){var e=$("#demo_usercountry option:selected").val();"United States"===e?$("#zipcodeFieldContainer").show():$("#zipcodeFieldContainer").hide()}),$("#demographic_form").on("submit",function(e){var t=$(this);return inc.user.setUserDemographics(t),!1}),$("#"+t.id+" .cancel_button").click(function(){
$("#TopNavOverlayClose").click()})}),$("#TopNavOverlayLogin .topNavPanelContainer").children().fadeIn()):"login"==e?$(".loginlander-inner").children().fadeOut(function(){$(".loginlander-inner").html(_.template($("#StandardPanelDemographics").html())(t)),$("#demographicsPanel").prepend('<div id="login_language"><div class="larger_lang">More Inc.com Benefits</div>Let us know a bit more about you and your business, and you\'ll receive additional benefits, such as priority invitations to free Inc. events in your area.</div>'),$("#loginlander-container").children().fadeIn(function(){$("#demo_usercountry").change(function(){var e=$("#demo_usercountry option:selected").val();"United States"===e?$("#zipcodeFieldContainer").show():$("#zipcodeFieldContainer").hide()}),$("#demographic_form").on("submit",function(e){var t=$(this);return inc.user.setUserDemographics(t),!1}),$("#"+t.id+" .cancel_button").click(function(){var e=inc.urlParameters.returnurl;""==e||void 0===e?window.location="http://www.inc.com":window.location=e})})}):"newsletter"==e?$("body.newsletter .panel1").children().fadeOut(function(){$("body.newsletter .panel1").html(_.template($("#StandardPanelDemographics").html())(t)),$("#demographicsPanel").prepend('<div id="login_language"><div class="larger_lang">More Inc.com Benefits</div>Let us know a bit more about you and your business, and you\'ll receive additional benefits, such as priority invitations to free Inc. events in your area.</div>'),$("body.newsletter .panel1").children().fadeIn(function(){$("#demo_usercountry").change(function(){var e=$("#demo_usercountry option:selected").val();"United States"===e?$("#zipcodeFieldContainer").show():$("#zipcodeFieldContainer").hide()}),$("#demographic_form").on("submit",function(e){var t=$(this);return inc.user.setUserDemographics(t),!1}),$("#"+t.id+" .cancel_button").click(function(){var e=inc.urlParameters.returnurl;""==e||void 0===e?window.location="http://www.inc.com":window.location=e})})}):$(".mobileLoginContainer").children().fadeOut(function(){$(".mobileLoginContainer").html(_.template($("#StandardPanelDemographics").html())(t)),$("#demographicsPanel").prepend('<div id="login_language"><div class="larger_lang">More Inc.com Benefits</div>Let us know a bit more about you and your business, and you\'ll receive additional benefits, such as priority invitations to free Inc. events in your area.</div>'),$(".mobileLoginContainer").children().fadeIn(function(){$("#demo_usercountry").change(function(){var e=$("#demo_usercountry option:selected").val();"United States"===e?$("#zipcodeFieldContainer").show():$("#zipcodeFieldContainer").hide()}),$("#demographic_form").on("submit",function(e){var t=$(this);return inc.user.setUserDemographics(t),!1}),$("#"+t.id+" .cancel_button").click(function(){var e=inc.urlParameters.returnurl;""==e||void 0===e?window.location="http://www.inc.com":window.location=e})})}),this},buildUserObject:function(e){var t=this;$.post(inc.restURL+"builduserobj",_.bind(function(e){t.email=e.email,t.firstname=e.firstname,t.lastname=e.lastname,t.displayname=e.username,t.getUserSubscriptions(e.email)},this)).done(function(){e(t)}).fail(function(){console.log("fail")}).always(function(){},"json");return this},onlySetNewsletters:function(e){inc.user.buildUserObject(function(){inc.user.setUserNewsletters(e,!0)})},emailAlreadyRegistered:function(e,t){$.get(inc.restURL+"areq.php",{email:e},function(e){t(Number(e)>Number(1)?!0:!1)}).done(function(){}).fail(function(){}).always(function(){});return this}},_.extend(Inc.Controllers.User,Backbone.Events),Inc.Controllers.Tracker={type:"Tracker",extend:Inc.extend,spawn:Inc.spawn,init:function(e){return e||(e={}),this.intentionInterceptURL=e.intentionInterceptURL||inc.applicationURL+"rest/intentionintercept",this.photoEssayLogURL=e.photoEssayLogURL||inc.applicationURL+"rest/peimpression",this},RecordRecommendImpressions:function(e){var t="recommend",i=(inc.i.channelArray.topid,[]),n=inc.currentController.sections[inc.currentController.currentSectionIndex].model.getID();return $("[recid]").each(function(){i.push($(this).attr("recid"))}),$.ajax({type:"POST",url:"http://tempo.inc.com/pinboard",data:{incid:n,usrid:usrid,tempid:Inc.Utilities.getCookie("incrnd"),abgroup:Inc.Utilities.getCookie("incab"),scroll:inc.scrollMonitor.scrollPosition,position:t,cnlid:inc.i.channelArray.topid,incids:i}}),this},RecordMustReadImpressions:function(e,t,i){var n="mustread",s=(inc.i.channelArray.topid,Inc.Pages.Inc5000Profile.isPrototypeOf(inc.currentController)?0:inc.currentController.sections[inc.currentController.currentSectionIndex].model.getID()),o=e.slice(t,i);return $.ajax({type:"POST",url:"http://tempo.inc.com/pinboard",data:{incid:s,usrid:usrid,tempid:Inc.Utilities.getCookie("incrnd"),abgroup:Inc.Utilities.getCookie("incab"),scroll:inc.scrollMonitor.scrollPosition,position:n,cnlid:inc.i.channelArray.topid,incids:o}}),this},recordArticleClick:function(e,t){e.scroll=inc.scrollMonitor.scrollPosition,"undefined"!=typeof usrid&&(e.usrid=usrid),"undefined"!=typeof Inc.Utilities.getCookie("incrnd")&&(e.tempid=Inc.Utilities.getCookie("incrnd")),"undefined"!=typeof Inc.Utilities.getCookie("incab")&&(e.abgroup=Inc.Utilities.getCookie("incab"));try{$.post("http://tempo.inc.com/intentionintercept",e).done(function(){location.href=t}).fail(function(){location.href=t})}catch(i){}return this},recordPatternImpressions:function(e){return"undefined"!=typeof usrid&&(e.usrid=usrid),"undefined"!=typeof Inc.Utilities.getCookie("incrnd")&&(e.tempid=Inc.Utilities.getCookie("incrnd")),"undefined"!=typeof Inc.Utilities.getCookie("incab")&&(e.abgroup=Inc.Utilities.getCookie("incab")),e.scroll=inc.scrollMonitor.scrollPosition,$.post("http://tempo.inc.com/pinboard",e),this},recordPhotoEssayImpressions:function(e){return"undefined"!=typeof usrid&&(e.usrid=usrid),"undefined"!=typeof Inc.Utilities.getCookie("incrnd")&&(e.tempid=Inc.Utilities.getCookie("incrnd")),$.post("http://tempo.inc.com/pinboard",e),this},recordSlideshowImpression:function(e,t,i,n){var s=t.slideshows.get(t.currentSlideshowID),o=inc.collections.article.find(function(e){var t=e.get("slideshows");return 20==e.get("inc_typid")&&t.length>0&&t[0].id==s.id&&0==t[0].sortorder});o||(o=e.model);var a=s_gi(s_account);a.pageName=inc.applicationURL+(o.get("inc_filelocation")||"");var r=_.find(inc.i.bootstrappedArticlePrimaryChannelArrays,function(e){return e.incid==o.id});r=r?r.primarychannelarray:[],a.channel=r.length>0?r[0]:"",a.server=t.embedded?"embeddedss":"ss",a.prop3=o.get("inc_headline")||o.get("inc_title")||"",a.prop4=("undefined"!=typeof r[0]?r[0]+": ":"")+("undefined"!=typeof r[1]?r[1]+": ":"")+("undefined"!=typeof r[2]?r[2]+": ":"")+a.prop3,0!=usrid?a.prop21="member":a.prop21="guest";var l=o.get("authors")||[];a.prop8=l.length>0?_.pluck(l,"aut_name").join(","):"",a.prop9=o.get("inc_pubdate")?o.get("inc_pubdate")+" UTC":"",a.prop10=o.id;var c=null;o.get("inc_autid")&&(c=_.find(inc.i.bootstrappedEditorNames,function(e){return parseInt(e.autid)==o.get("inc_autid")})),a.prop11=c&&c.name||"None",a.prop13=t.currentFrame+1,a.prop22=a.prop21+"+"+a.pageName,0!=usrid&&(a.prop27=usrid),a.prop28=t.embedded?"embeddedss":"ss",a.eVar49=Inc.Utilities.getCookie("abgrp"),a.events="event9",a.t(),COMSCORE.beacon({c1:2,c2:6916907});try{$.post("http://tempo.inc.com/view",{incid:o.id,autid:null,usrid:inc.user.id,tempid:getCookie("incrnd"),incab:getCookie("incab"),geo_city:"",geo_country:"",geo_region:"",geo_zip:"",geo_lat:"",geo_long:"",useragent:navigator.userAgent,referrer:thisreferrer})}catch(h){}return this},recordSectionArticleImpression:function(e,t){var i=s_gi(s_account);i.pageName=inc.applicationURL+(e.get("inc_filelocation")||"");var n=_.find(inc.i.bootstrappedArticlePrimaryChannelArrays,function(t){return t.incid==e.id});n=n?n.primarychannelarray:[],i.channel=n.length>0?n[0]:"",i.server="loadunder",i.prop3=e.get("inc_headline")||e.get("inc_title")||"",i.prop4=("undefined"!=typeof n[0]?n[0]+": ":"")+("undefined"!=typeof n[1]?n[1]+": ":"")+("undefined"!=typeof n[2]?n[2]+": ":"")+i.prop3,0!=usrid?i.prop21="member":i.prop21="guest";var s=e.get("authors")||[];i.prop8=s.length>0?_.pluck(s,"aut_name").join(","):"",i.prop9=e.get("inc_pubdate")?e.get("inc_pubdate")+" UTC":"",i.prop10=e.id;var o=null;e.get("inc_autid")&&(o=_.find(inc.i.bootstrappedEditorNames,function(t){return parseInt(t.autid)==e.get("inc_autid")})),i.prop11=o&&o.name||"",i.prop13=t,i.prop22=i.prop21+"+"+i.pageName,0!=usrid&&(i.prop27=usrid),i.prop28="article",i.eVar49=Inc.Utilities.getCookie("abgrp"),i.events="event9",i.t(),setTimeout(function(){COMSCORE.beacon({c1:2,c2:6916907})},100),Krux("ns:mansueto","page:load",function(e){},{pageView:!0});try{$.post("http://tempo.inc.com/view",{incid:e.id,autid:null,usrid:inc.user.id,tempid:getCookie("incrnd"),incab:getCookie("incab"),geo_city:"",geo_country:"",geo_region:"",geo_zip:"",geo_lat:"",geo_long:"",useragent:navigator.userAgent,referrer:thisreferrer})}catch(a){}return this},recordPageView:function(){recordPageView();try{$.post("http://tempo.inc.com/view",{incid:incid,autid:autid,usrid:usrid,tempid:getCookie("incrnd"),incab:getCookie("incab"),useragent:navigator.userAgent,referrer:thisreferrer}).done(function(e){_.isString(e)&&(e=e.replace(/"/g,"").trim(),""!=e&&e!=Inc.Utilities.getCookie("incgeo")&&(Inc.Utilities.getCookie("incInternationalSimulation")&&(e="International Simulation"),Inc.Utilities.setCookie("incgeo",e,360,{path:"/",domain:inc.i.cookieDomain}),inc.i.geo=e))})}catch(e){}},trackRegistration:function(e){$(window).width()>759?platform="desktop":platform="mobile",$.ajax({type:"POST",url:"/rest/regtrack.php",data:{incid:e,platform:platform}})},trackRegistrationConversion:function(e){$.ajax({type:"POST",url:"/rest/regtrack.php",data:{conv:"true",incid:e}})},trackFalseWall:function(e){$.ajax({type:"POST",url:"/rest/regtrack.php",data:{falsewall:"true",incid:e}})}},_.extend(Inc.Controllers.Tracker,Backbone.Events),$(document).on("click","div.reccomendedVideoThumbnail a, div.reccomendedVideoTitle a",function(e){var t=$(this).parents().eq(1).attr("recid"),i="recommended",n=inc.scrollMonitor.scrollPosition,s=inc.currentController.sections[inc.currentController.currentSectionIndex].model.getID(),o=$(this).parents().eq(1).attr("vslot"),a="article";"undefined"!=typeof Inc.Utilities.getCookie("incrnd")&&(tempid=Inc.Utilities.getCookie("incrnd")),"undefined"!=typeof Inc.Utilities.getCookie("incab")&&(abgroup=Inc.Utilities.getCookie("incab"));try{$.post("http://tempo.inc.com/intentionintercept",{slot:o,thattype:a,usrid:usrid,tempid:tempid,position:i,scroll:n,thisincid:s,thatincid:t,abgroup:abgroup}).done(function(){location.href=redirectURL}).fail(function(){location.href=redirectURL})}catch(r){console.log(r)}}),Inc.Feeds.Article={type:"ArticleFeed",extend:Inc.extend,spawn:Inc.spawn,init:function(e){return e||(e={}),this.readyCallback=e.readyCallback||function(){},this.loading=!1,this.id=e.id||"",this.feed=[],this.requestedAmount=0,this.offset=0,this.abort=!1,this.limit=20,this.restURL=e.restURL||null,this.time=null,this},load:function(){var e=this;this.loading=!0;var t={offset:this.offset,limit:this.limit};return this.time&&(t.time=encodeURIComponent(this.time)),t=this.processDataSentToServer(t),$.ajax({dataType:"json",url:this.restURL,data:t}).done(function(t){return this.abort?void(this.abort=!1):(e.time=t.time,e.feed=e.feed.concat(t.data),e.offset+=t.data.length,void(e.feed.length<e.requestedAmount&&"popular"==_.last(e.restURL.split("/"))?(e.restURL=e.restURL.replace("popular","latest"),e.offset=0,e.load()):(e.loading=!1,e.readyCallback(e.id,e.feed.splice(0,e.requestedAmount)))))}).fail(function(t){e.loading=!1}),this},request:function(e){return-1!=this.restURL.search("articlesidebar")&&this.offset>40?!1:this.offset>500?!1:this.loading?!1:(this.requestedAmount=e,this.requestedAmount<=this.feed.length?this.readyCallback(this.id,this.feed.splice(0,this.requestedAmount)):this.load(),!0)},processDataSentToServer:function(e){return inc.parameterNotEmpty("homid")&&(e.homid=inc.urlParameters.homid),"undefined"!=typeof inc.incid&&(e.article="true"),e},reset:function(){return this.loading&&(this.abort=!0),this.loading=!1,this.feed=[],this.requestedAmount=0,this.offset=0,this}},_.extend(Inc.Feeds.Article,Backbone.Events),Inc.Feeds.Outbrain={type:"OutbrainFeed",extend:Inc.extend,spawn:Inc.spawn,init:function(e){return e||(e={}),this.loading=!1,this.id=e.id||"",this.feed=[],this.minAmount=e.minAmount||8,this.widgetId=e.widgetId||"AD_2",this.callbackQueue=[],inc&&(this.baseURL=inc.applicationURL.substr(0,inc.applicationURL.length-1)),this},load:function(){return this.loading=!0,OBR.extern.callRecs({permalink:baseURL,widgetId:this.widgetId},_.bind(this.process,this)),this},process:function(e){for(console.log("process");e.doc.length>0;)if(this.callbackQueue.length>0&&e.doc.length>3){newOutbrainItems=e.doc.slice(0,4),console.log("sending"),console.log(newOutbrainItems);var t=this.callbackQueue.shift();t.callback(t.elementID,newOutbrainItems),e.doc=e.doc.slice(4)}else this.feed.push(e.doc.shift());return this.loading=!1,this.callbackQueue.length>0,this},getNextOutbrainAd:function(e){return this.feed.length>0&&0==this.callbackQueue.length?e.callback(e.elementID,this.feed.shift()):this.callbackQueue.push(e),!this.loading&&this.feed.length<this.minAmount&&this.load(),this}},_.extend(Inc.Feeds.Outbrain,Backbone.Events),Inc.Feeds.Partner={type:"PartnerFeed",extend:Inc.extend,spawn:Inc.spawn,init:function(e){return e||(e={}),this.loading=!1,this.id=e.id||"",this.feed=[],this.offset=0,this.limit=10,this.minAmount=e.minAmount||10,this.callbackQueue=[],this.restURL=e.restURL||null,this.noMoreDataToLoad=!1,this.time=null,this.load(),this},load:function(){var e=this;this.loading=!0;var t=this.restURL;return t+="?offset="+this.offset+"&limit="+this.limit,this.time&&(t+="&time="+encodeURIComponent(this.time)),$.ajax({dataType:"json",url:t}).done(function(t){e.time=t.time,e.offset+=t.data.length;for(var i=0;i<t.data.length;i++){var n=t.data[i];if(e.callbackQueue.length>0){var s=e.callbackQueue.shift();s.callback(s.elementID,n)}else e.feed.push(n)}for(;e.callbackQueue.length>0&&e.feed.length>0;){var s=e.callbackQueue.shift();s.callback(s.elementID,e.feed.shift())}if(t.data.length<e.minAmount&&(e.noMoreDataToLoad=!0),e.callbackQueue.length>0){if(!e.noMoreDataToLoad)return void e.load();for(;e.callbackQueue.length>0;){var s=e.callbackQueue.shift();s.callback(s.elementID,!1)}}e.loading=!1}).fail(function(t){e.loading=!1}),this},getNextPartnerArticle:function(e){return this.feed.length>0&&0==this.callbackQueue.length?e.callback(e.elementID,this.feed.shift()):this.callbackQueue.push(e),!this.loading&&this.feed.length<this.minAmount&&this.load(),this}},_.extend(Inc.Feeds.Partner,Backbone.Events),Inc.Patterns.Pattern={type:"Pattern",extend:Inc.extend,spawn:Inc.spawn,init:function(e){return e||(e={}),this.name=e.name||null,this.repeats=e.repeats||!1,this.structure=e.structure||[],this},setPattern:function(e){return this.name=e.name,this.structure=e.structure,this},setName:function(e){return this.name=e,this},setRepeats:function(e){return this.repeats=e,this},setStructure:function(e){return this.structure=e,this},addTile:function(e){return this.structure.push(e),this},getNextOccurrenceOfClassName:function(e){for(var t=0;t<this.structure.length;t++)if(this.structure[t].className==e)return this.structure[t];return!1},removeNextOccurrenceOfClassName:function(e){for(var t=0;t<this.structure.length;t++)if(this.structure[t].className==e){this.structure.splice(t,1);break}return this},replaceNextOccurrenceOfClassNameWith:function(e,t){for(var i=0;i<this.structure.length;i++)if(this.structure[i].className==e){this.structure[i]=t;break}return this},insertAfterNextOccurrenceOfClassNameWith:function(e,t){_.isArray(t)||(t=[t]);for(var i=0;i<this.structure.length;i++)if(this.structure[i].className==e){for(var n=0;n<t.length;n++)this.structure.splice(i+1+n,0,t[n]);break}return this},getNextOccurrenceOfCategory:function(e){for(var t=0;t<this.structure.length;t++)if(this.structure[t].category==e)return this.structure[t];return!1},replaceNextOccurrenceOfCategoryWith:function(e,t){for(var i=0;i<this.structure.length;i++)if(this.structure[i].category==e){this.structure[i]=t;break}return this},insertAfterNextOccurrenceOfCategoryWith:function(e,t){_.isArray(t)||(t=[t]);for(var i=0;i<this.structure.length;i++)if(this.structure[i].category==e){for(var n=0;n<t.length;n++)this.structure.splice(i+1+n,0,t[n]);break}return this},insertAtBeginning:function(e){return _.isArray(e)||(e=[e]),this.structure=e.concat(this.structure),this},getArticleTileCount:function(){for(var e=0,t=0;t<this.structure.length;t++)"undefined"!=typeof this.structure[t].category&&"article"==this.structure[t].category&&e++;return e},getNextTile:function(){var e=this.structure.shift();return this.structure.push(e),e}},_.extend(Inc.Patterns.Pattern,Backbone.Events),Inc.Patterns.PatternContainer={type:"PatternContainer",extend:Inc.extend,spawn:Inc.spawn,init:function(e){return e||(e={}),this.controller=e.controller||null,this.elementID=e.elementID||null,this.patterns=e.patterns||[],this.index=0,this.printedPatternsWaitingForContent=[],this.totalTiles=0,this.printedCounts=[],this.subUnits=[],this.clickTrackingObject=e.clickTrackingObject||{},this.impressionsTrackingObject=e.impressionsTrackingObject||{},this.wasReset=!1,this},addPattern:function(e){return this.patterns.push(e),this.printedCounts.push(0),this},getPattern:function(e){return _.findWhere(this.patterns,{name:e})},getNextPatternArticleTotal:function(){for(var e=0,t=this.patterns[this.index].structure,i=0;i<t.length;i++)"article"==t[i].category&&e++;return e},getWaitingPatternArticleTotal:function(){return 0==this.printedPatternsWaitingForContent.length?0:this.printedPatternsWaitingForContent[0].tileArray.length},printNextPattern:function(e,t,i){"undefined"==typeof t&&(t=!0),"undefined"==typeof i&&(i=!1);-1!=e.search("scroll")?this.createNewSubUnit("","",i):this.createNewSubUnit("",e,i);for(var n=this.patterns[this.index],s=!1,o={id:e,tileArray:[]},a=0;a<n.structure.length;a++){var r=n.getNextTile();r.templates&&(r=new Inc.Patterns.Tile(r)),r.adGroup=e,"LoadMore"==r.name&&(s=!0),("Standard"==r.name||"Sponsored"==r.name||"IMU"==r.name||"Outbrain"==r.name)&&r.$el.attr("pslot",a),"startSubSubUnit"!=r.category?(this.totalTiles++,("article"==r.category||"profile"==r.category)&&o.tileArray.push(r),r.preDisplay(),$("#"+_.last(_.last(this.subUnits).subSubUnits).elementID).append(r.renderSkeleton().$el),"TwitterFeed"==r.name&&r.$el.append(_.template(r.templates[0])(inc.i.author)),r.postDisplay()):this.createNewSubSubUnit(r.additionalClasses)}if(this.printedPatternsWaitingForContent.push(o),this.printedCounts[this.index]++,(_.isBoolean(n.repeats)&&!n.repeats||_.isFinite(n.repeats)&&0==n.repeats||_.isFinite(n.repeats)&&n.repeats>0&&this.printedCounts[this.index]==n.repeats)&&(this.index++,this.index==this.patterns.length&&(this.index=0)),!t||"scroll0"==e&&0!=inc.pushState||inc.adManager.refreshGroup(e),s){var l=$("#"+_.last(this.subUnits).elementID);l.addClass("showLoadMore").addClass("loading")}return this},dataAvailable:function(e){if("article"==inc.i.op&&"MainPatternContainer"==this.elementID&&$("#MainPatternContainerSubSubUnit0").hide(),this.printedPatternsWaitingForContent.length>0&&e.length>0){if(this.wasReset&&($("#"+this.elementID).css("height","auto").children(".LoadingWheel").remove(),this.wasReset=!1),this.subUnits.length>0)for(var t=0;t<this.subUnits.length-1;t++)$("#"+this.subUnits[t].elementID).removeClass("showLoadMore").removeClass("loading");for(var i=[],n=[],s=this.printedPatternsWaitingForContent.shift(),o=!1,t=0;t<s.tileArray.length;t++){if(0==t&&s.tileArray[0].$el.parent().parent().removeClass("contentNotInserted"),"article"==s.tileArray[t].category){var a=e.shift();if("undefined"==typeof a){s.tileArray[t].$el.addClass("collapsed"),o=!0;continue}s.tileArray[t].data=a,a.tile=s.tileArray[t],a.elementID=s.tileArray[t].$el.attr("id"),a.onclick=inc.buildOnClick.call(this,this.clickTrackingObject,a),a.tile.$(".innerpcell").prepend(_.template(s.tileArray[t].templates[0])(a)),a.tile.$(".innerpcell").append(_.template(s.tileArray[t].templates[1])(a)),"MainPatternContainer"==this.elementID&&_.isNull(inc.firstMainDisplayedID)&&("channel"==inc.i.op?("scroll1"==s.id||352==inc.i.cnlid&&"scroll2"==s.id)&&(inc.firstMainDisplayedID=a.id):inc.firstMainDisplayedID=a.id),inc.displayedIDs.push(a.id),i.push(a.id),a.pslot=s.tileArray[t].$el.attr("pslot"),n.push(a.pslot),a.skyscraperimage&&a.tile.$el.hasClass("partiallyCollapsed")&&(a.tile.$el.removeClass("partiallyCollapsed"),a.tile.$el.parent().find(".filler").hide())}else if("profile"==s.tileArray[t].category){var a=e.shift();if("undefined"==typeof a){s.tileArray[t].$el.addClass("collapsed"),o=!0;continue}a.tile=s.tileArray[t],a.elementID=s.tileArray[t].$el.attr("id"),a.tile.$(".profile").attr("id","company"+a.profileId),a.tile.$(".responsive").append(a.responsive),a.tile.$(".relatedLists").append(a.relatedLists),a.tile.$(".MoreFromTheInc5000").append(a.moreFromInc5000)}s.tileArray[t].postInsertContent()}return o&&($("#"+this.elementID+" .LoadMoreTile").addClass("collapsed"),"undefined"!=typeof this.controller.noMoreMainContent&&(this.controller.noMoreMainContent=!0)),inc.recordImpressions.call(this,this.impressionsTrackingObject,i,n),e}return $("#"+this.elementID+" .LoadMoreTile").addClass("collapsed"),e},createNewSubUnit:function(e,t,i){"undefined"==typeof i&&(i=!1);var n=this.elementID+"SubUnit"+this.subUnits.length;return e||(e=""),!_.isArray(e)&&(e=[e]),$('<div id="'+n+'" class="PatternContainerSubUnit contentNotInserted '+e.join(" ")+'"></div>').appendTo($("#"+this.elementID)),this.subUnits.push({elementID:n,subSubUnits:[]}),0==i&&("undefined"==typeof t||""==t?inc.scrollMonitor.addScrollUnit("#"+n):inc.scrollMonitor.addIndependentAdGroup({elementID:"#"+n,adGroup:t})),this},createNewSubSubUnit:function(e){for(var t=0,i=0;i<this.subUnits.length;i++)t+=this.subUnits[i].subSubUnits.length;var n=this.elementID+"SubSubUnit"+t;return e||(e=""),!_.isArray(e)&&(e=[e]),$('<div id="'+n+'" class="PatternContainerSubSubUnit '+e.join(" ")+'"><div class="leftBorderMask"></div><div class="rightBorderMask"></div></div>').appendTo($("#"+_.last(this.subUnits).elementID)),_.last(this.subUnits).subSubUnits.push({elementID:n}),this},reset:function(e){e||(e=""),this.printedPatternsWaitingForContent=[],this.wasReset=!0;var t=$("#"+this.elementID);t.height($("#"+this.subUnits[0].elementID).height());var i=$('<div class="LoadingWheel"><img src="http://images.inc.com/ajaxloader/ajax-loader.gif"/></div>');return i.css("top",$("#pinboardSortLatestClicker").offset().top-t.offset().top+"px"),this.index=0,this.totalTiles=0,this.printedCounts=[],this.subUnits=[],t.children().remove(),t.append(i),this}},_.extend(Inc.Patterns.PatternContainer,Backbone.Events),Inc.Patterns.TileTypeRegistry={type:"TileTypeRegistry",extend:Inc.extend,spawn:Inc.spawn,init:function(e){return e||(e={}),this.tileTypes=[{name:"Standard",className:"StandardTile",category:"article",configurations:[{name:"Default",className:"DefaultStandardConfiguration"},{name:"TextOnly",className:"TextOnlyStandardConfiguration"},{name:"Portrait",className:"PortraitStandardConfiguration"},{name:"MainFeature",className:"MainFeatureStandardConfiguration"},{name:"SmallMainFeature",className:"SmallMainFeatureStandardConfiguration"},{name:"SubFeature",className:"SubFeatureStandardConfiguration"},{name:"WideRow",className:"WideRowStandardConfiguration"},{name:"HomeFeatured",className:"HomeFeaturedStandardConfiguration"},{name:"SmallText",className:"SmallTextStandardConfiguration"}],templateSkeleton:_.template($("#StandardTileSkeletonTemplate").html()),templates:[$("#StandardTileTemplatePart1").html(),$("#StandardTileTemplatePart2").html()]},{name:"Outbrain",className:"OutbrainTile",category:"outbrain",configurations:[{name:"Default",className:"OutbrainDefaultConfiguration"}],templateSkeleton:_.template($("#BlankTileSkeletonTemplate").html()),templates:[$("#OutbrainTileTemplate").html()]},{name:"Partner",className:"PartnerTile",category:"partner",configurations:[{name:"Default",className:"PartnerDefaultConfiguration"}],templateSkeleton:_.template($("#BlankTileSkeletonTemplate").html()),templates:[$("#PartnerTileTemplate").html()]},{name:"Subscription",className:"SubscriptionTile",category:"subscription",configurations:[{name:"Default",className:"SubscriptionDefaultConfiguration"}],templateSkeleton:_.template($("#SubscriptionTileSkeletonTemplate").html()),templates:[""]},{name:"Inc5000LanderHeader",className:"inc5000lander-pinboard-header",category:"header",configurations:[{name:"Default",className:"Inc5000LanderHeaderDefaultConfiguration"}],templateSkeleton:_.template($("#Inc5000LanderHeaderSkeletonTemplate").html()),templates:[""]},{name:"Follow",className:"FollowTile",category:"follow",configurations:[{name:"Default",className:"FollowDefaultConfiguration"}],templateSkeleton:_.template($("#FollowTileSkeletonTemplate").html()),templates:[""]},{name:"Sponsored",className:"SponsoredTile",category:"sponsored",configurations:[{name:"Default",className:"SponsoredDefaultConfiguration"},{name:"IMUStyle",className:"IMUStyleDefaultConfiguration"}],templateSkeleton:_.template($("#SponsoredTileSkeletonTemplate").html()),templates:[$("#StandardTileTemplatePart1").html(),$("#StandardTileTemplatePart2").html()]},{name:"IMU",className:"IMUTile",category:"ad",configurations:[{name:"fixedrectangle",className:"IMUsmallConfiguration"},{name:"fixedsmallrectangle",className:"IMUtinyConfiguration"},{name:"flexiblehalfpage",className:"IMUlargeConfiguration"},{name:"flexibleportrait",className:"IMUlargeConfiguration"},{name:"mobilerectangle",className:"IMUmobileConfiguration"},{name:"commentsrectangle",className:"IMUsmallConfiguration"}],templateSkeleton:_.template($("#IMUTileTemplate").html()),templates:[""]},{name:"WideAd",className:"WideAdTile",category:"ad",configurations:[{name:"flexiblebillboard",className:"FlexibleBillboardConfiguration"},{name:"fixedleaderboard",className:"FixedLeaderboardConfiguration"},{name:"mobilebanner",className:"MobileBannerConfiguration"}],templateSkeleton:_.template($("#WideAdTileTemplate").html()),templates:[""]},{name:"Blank",className:"BlankTile",category:"blank",configurations:[{name:"Default",className:"BlankDefaultConfiguration"}],templateSkeleton:_.template($("#BlankTileSkeletonTemplate").html()),templates:[""]},{name:"LoadMore",className:"LoadMoreTile",category:"ui",configurations:[{name:"Default",className:"LoadMoreDefaultConfiguration"},{name:"Block",className:"LoadMoreBlockConfiguration"}],templateSkeleton:_.template($("#LoadMoreTileTemplate").html()),templates:[""]},{name:"LatestPopularToggle",className:"LatestPopularToggleTile",category:"ui",configurations:[{name:"Default",className:"LatestPopularToggleDefaultConfiguration"}],templateSkeleton:_.template($("#LatestPopularToggleTileTemplate").html()),templates:[""]},{name:"TwitterFeed",className:"TwitterFeedTile",category:"widget",configurations:[{name:"Default",className:"TwitterFeedDefaultConfiguration"}],templateSkeleton:_.template($("#BlankTileSkeletonTemplate").html()),templates:[$("#TwitterFeedTileTemplate").html()]},{name:"FeaturedUser",className:"FeaturedUserTile",category:"widget",configurations:[{name:"Default",className:"FeaturedUserDefaultConfiguration"}],templateSkeleton:_.template($("#BlankTileSkeletonTemplate").html()),templates:[$("#FeaturedUserTileTemplate").html()]},{name:"Inc5000Profile",className:"Inc5000ProfileTile",category:"profile",configurations:[{name:"Default",className:"Inc5000ProfileDefaultConfiguration"}],templateSkeleton:_.template($("#Inc5000Profile-Tile-Template").html()),templates:[""]}],this},getTileType:function(e,t,i){var n=_.findWhere(this.tileTypes,{name:e});i||(i={});var s={name:n.name,category:n.category,className:n.className,templateSkeleton:n.templateSkeleton,templates:n.templates};return"undefined"==typeof t?(s.configurationName=n.configurations[0].name,s.configurationClassName=n.configurations[0].className):(s.configurationName=_.findWhere(n.configurations,{name:t}).name,s.configurationClassName=_.findWhere(n.configurations,{name:t}).className),_.extend(s,i),s}},_.extend(Inc.Patterns.TileTypeRegistry,Backbone.Events),Inc.Patterns.Tile=Inc.ToggleView.extend({type:"Tile",initialize:function(e){return e||(e={}),Inc.ToggleView.prototype.initialize.apply(this,arguments),this.name=e.name||null,this.category=e.category||null,this.templateSkeleton=e.templateSkeleton||null,this.templates=e.templates||null,this.adGroup=e.adGroup||null,this.adName=e.adName||null,this.additionalClasses=e.additionalClasses||[],this.additionalClasses=_.isArray(this.additionalClasses)?this.additionalClasses:[this.additionalClasses],this.configurationName=e.configurationName||null,this.configurationClassName=e.configurationClassName||null,this.preDisplay=e.preDisplay||function(){},this.postDisplay=e.postDisplay||function(){},this.preInsertContent=e.preInsertContent||function(){},this.postInsertContent=e.postInsertContent||function(){},this.adCallback=e.adCallback||function(){},this.$el.attr("id",this.id()),this.$el.toggleClass("PatternTile",!0),this.configurationName&&this.$el.toggleClass(this.configurationName,!0),this.configurationClassName&&this.$el.toggleClass(this.configurationClassName,!0),_.each(this.additionalClasses,function(e){this.$el.toggleClass(e,!0)},this),this},renderSkeleton:function(){return this.$el.html(this.templateSkeleton(this)),this}}),Inc.Controllers.PromotionManager={type:"AddManager",extend:Inc.extend,spawn:Inc.spawn,init:function(e){e||(e={}),_.extend(this,adInfo);return this.adGroups=[],this.reportedUnfilledToOmniture=!1,this.ready=!1,this.queueCheckerID=null,this.queue=[],this.adBlockerEnabled=!1,this.welcomeAd=null,this.welcomeAdDisplaying=!1,this.welcomeAdRefreshQueue=[],"undefined"==typeof inc.i.inc_typid||4!=inc.i.inc_typid&&11!=inc.i.inc_typid||(this.video="yes"),"undefined"!=typeof inc.i.ser_styid&&3==inc.i.ser_styid&&(this.video="yes"),this.video||(this.video="no"),this.adTypes=[{type:"interstitial",sizes:[[2,2]],sizeMappings:[[[0,0],[]],[[1050,200],[2,2]]]},{type:"nativetrigger",sizes:[[3,3]]},{type:"oop"},{type:"flexiblepushdown",sizes:[[970,250],[728,90],[970,90],[970,60],[970,66]]},{type:"flexiblelogo",sizes:[[88,31],[120,60],[120,90],[160,90]]},{type:"flexiblehalfpage",sizes:[[300,600],[300,250]]},{type:"flexibleportrait",sizes:[[300,1050],[300,600],[300,250],[2,1]]},{type:"fixedrectangle",sizes:[300,250]},{type:"ssrectangle",sizes:[300,250]},{type:"morerectangle",sizes:[300,250]},{type:"fixedsmallrectangle",sizes:[300,120]},{type:"commentsrectangle",sizes:[300,250]},{type:"flexiblebillboard",sizes:[[970,250],[728,90]]},{type:"fixedleaderboard",sizes:[[728,90]]},{type:"ssleaderboard",sizes:[[728,90]]},{type:"moreleaderboard",sizes:[[728,90]]},{type:"smallbanner",sizes:[[320,50],[300,50]]},{type:"mobilerectangle",sizes:[[320,250]]},{type:"mobileinsertion",sizes:[[320,250]]},{type:"ssinterstitialrectangle",sizes:[[320,250]]},{type:"moreinterstitialrectangle",sizes:[[320,250]]},{type:"custommini",sizes:[[300,100]]},{type:"welcomead",sizes:[[600,600],[640,480]]}],"undefined"==typeof existsIfAdBlockDoesNot&&(this.adBlockerEnabled=!0,$(function(){$("body").addClass("adBlockerEnabled")})),this.adBlockerEnabled||this.loadGPT(),this},checkUnfilled:function(e,t){if(e.isEmpty&&0==window.location.href.search("http://www.inc.com")&&0!=t.oid.search("flexiblelogo")&&0!=t.oid.search("oop")&&0!=t.oid.search("interstitial")&&0!=t.oid.search("fixedsmallrectangle"))try{"undefined"!=typeof _gaq&&_gaq.push(["_trackEvent","gpt_unfilled",t.oid,window.location.pathname]),this.reportedUnfilledToOmniture||(nofillintercept(),this.reportedUnfilledToOmniture=!0)}catch(i){}return this},clearQueue:function(){var e=this.queue.slice();this.queue=[];for(var t=0;t<e.length;t++)e[t]();return this},displayAdSlot:function(e,t,i){if(this.adBlockerEnabled)return this;
var n=this;return inc.ready||"welcomead"==e?this.getAdGroup(e).displayAdSlot(t,i||void 0):this.queue.push(_.bind(function(){this.getAdGroup(e).displayAdSlot(t,i||void 0)},n)),this},refreshGroup:function(e,t,i){if(this.adBlockerEnabled)return this;"undefined"==typeof t||_.isBoolean(t)?"undefined"!=typeof t&&_.isBoolean(t)?(i=t,t=[]):t=[]:(_.isArray(t)||(t=[t]),i="undefined"!=typeof i&&_.isBoolean(i)?i:!1),i="undefined"==typeof i?!1:i;var n=this.getAdGroup(e);return n?(t.length>0?this.welcomeAdDisplaying&&"welcomead"!=e?this.welcomeAdRefreshQueue.push(function(){this.getAdGroup(e).refresh(t,i)}):this.getAdGroup(e).refresh(t,i):this.welcomeAdDisplaying&&"welcomead"!=e?this.welcomeAdRefreshQueue.push(function(){this.getAdGroup(e).refresh(i)}):this.getAdGroup(e).refresh(i),this):this},afterGPTInitialized:function(){if(this.addEmptyAdGroup("default"),this.adBlockerEnabled)try{"undefined"!=typeof _gaq&&_gaq.push(["_trackEvent","adblock","enabled",window.location.pathname]),adblockintercept()}catch(e){}return this.adBlockerEnabled||(_.isUndefined(inc.urlParameters.welcomeme)||"false"==inc.urlParameters.welcomeme)&&("test"==environment||inc.urlParameters.cid&&("ps"==inc.urlParameters.cid.substring(0,2)||"pc"==inc.urlParameters.cid.substring(0,2)||"ad"==inc.urlParameters.cid.substring(0,2))||"small"==inc.mqState||readCookie("inc_splash")||1==getCookie("inc_splash")||-1!=this.adzone.indexOf("microsite")||-1!=location.href.indexOf("?partner="))?inc.tracker.recordPageView():(this.welcomeAdDisplaying=!0,this.welcomeAd=new Inc.Views.Welcome({hidden:!0}),this.listenTo(this.welcomeAd,"filled",this.onWelcomeFilled),this.listenTo(this.welcomeAd,"close empty",this.removeWelcome),$("#sitecontainer").append(this.welcomeAd.$el),this.welcomeAd.render(),this.refreshGroup("welcomead"),setCookie("inc_splash",1,.5,{path:"/",domain:cookieDomain}),setCookie("inc_referrer",document.referrer,.1,{path:"/",domain:cookieDomain})),this.ready=!0,this},onWelcomeFilled:function(){return $("html").css("overflow","hidden"),this.welcomeAd.show(),this},removeWelcome:function(){return $("html").css("overflow",""),this.welcomeAd.trash(),this.welcomeAd=null,this.welcomeAdDisplaying=!1,this.clearWelcomeRefreshQueue(),inc.tracker.recordPageView(),inc.scrollMonitor.processScroll(),this},clearWelcomeRefreshQueue:function(){var e=this.welcomeAdRefreshQueue.slice();this.welcomeAdRefreshQueue=[];for(var t=0;t<e.length;t++)e[t].call(this);return this},addEmptyAdGroup:function(e,t){return this.adBlockerEnabled?this:"undefined"!=typeof e&&_.isString(e)&&"undefined"==typeof this.getAdGroup(e)?(this.adGroups.push(Inc.Controllers.PromotionGroup.spawn({name:e,dataForGPT:t||adinfo||{}})),!0):!1},removeAdGroup:function(e){return this.adGroups=_.reject(this.adGroups,function(t){return t.name==e}),this},removeIndependentAdGroup:function(e){return this.removeAdGroup(e),inc.scrollMonitor.removeIndependentAdGroup(e),this},getAdGroup:function(e){return _.findWhere(this.adGroups,{name:e})},createAds:function(e){if(this.adBlockerEnabled)return this;_.isArray(e)||(e=[e]);for(var t=0;t<e.length;t++)this.getAdGroup(e[t].groupName).add(e[t].options);return this},loadGPT:function(){var e=this;return googletag=googletag||{},googletag.cmd=googletag.cmd||[],function(){var e=document.createElement("script");e.async=!0,e.type="text/javascript";var t="https:"==document.location.protocol;e.src=(t?"https:":"http:")+"//www.googletagservices.com/tag/js/gpt.js";var i=document.getElementsByTagName("script")[0];i.parentNode.insertBefore(e,i)}(),googletag.cmd.push(_.bind(function(){googletag.pubads().disableInitialLoad(),googletag.pubads().enableSingleRequest(),googletag.pubads().addEventListener("slotRenderEnded",function(t){e.trigger("ad:rendered",t,e),e.trigger("ad:rendered:"+t.slot.get("ad-oid"),t,e)}),googletag.enableServices(),$(document).ready(_.bind(this.afterGPTInitialized,this))},this)),this},reset:function(e){for(var t=[],i=0;i<this.adGroups.length;i++)(-1==this.adGroups[i].name.search("scroll")||parseInt(this.adGroups[i].name.split("scroll")[1])<e)&&t.push(this.adGroups[i]);return this.adGroups=t,this},standardAdCallback:function(e,t){return inc.adManager.checkUnfilled(e,t),e.isEmpty?$("#"+t.oid).parent().css("display","none"):$("#"+t.oid).parent().css("display",""),this},insertInc5000ListAd:function(e){if(this.adBlockerEnabled)return this;var t="inc5000list"+e,i="inc5000listapp-ad-placement-"+e;this.removeIndependentAdGroup(t),this.addEmptyAdGroup(t);var n="inc5000listappWideAd";this.createAds({groupName:t,options:{name:n,type:"fixedleaderboard",mq:["large","medium"],collapse:!0,pos:"top"}});var s="inc5000listappMobileAd";this.createAds({groupName:t,options:{name:s,type:"mobilerectangle",mq:["small"],collapse:!0,pos:"top"}}),inc.scrollMonitor.addIndependentAdGroup({elementID:"#"+i,adGroup:t}),setTimeout(function(){$("#"+i).html(_.template($("#Inc5000ListApp-AdSlot-Template").html())({adGroup:t,wideAdName:n,mobileAdName:s})),setTimeout(function(){inc.scrollMonitor.processScroll()},5)},5)}},_.extend(Inc.Controllers.PromotionManager,Backbone.Events),Inc.Controllers.PromotionGroup={type:"AdGroup",extend:Inc.extend,spawn:Inc.spawn,init:function(e){return e||(e={}),this.name=e.name||null,this.ads=e.ads||[],this.dataForGPT=e.dataForGPT||{},0==this.name.search("scroll")&&(this.dataForGPT.scroll=this.name.split("scroll").join("")),this},add:function(e){e||(e={}),e=_.extend(_.clone(this.dataForGPT),e);var t=Inc.Controllers.Promotion.spawn(e);return t.setTargeting(e),this.ads.push(t),this},displayAdSlot:function(e,t){for(var i=0;i<this.ads.length;i++)if(this.ads[i].name==e&&!this.ads[i].displayed){googletag.cmd.push(_.bind(function(){this.ads[i].displayed=!0,$("#"+t).attr("id",this.ads[i].oid),googletag.display(this.ads[i].oid)},this));break}return this},refresh:function(e,t){var i=[];("undefined"!=typeof t||"undefined"==typeof t&&"undefined"!=typeof e)&&(_.isBoolean(e)?(t=e,e=void 0):_.isArray(e)||(e=[e])),t="undefined"==typeof t?!1:t;for(var n=[],s=0;s<this.ads.length;s++)(!t&&!this.ads[s].triggered||t)&&this.ads[s].displayed&&_.indexOf(this.ads[s].mq,inc.mqState)>-1&&("undefined"==typeof e&&!this.ads[s].onlyRefreshWhenExplicitlyCalled||-1!=_.indexOf(e,this.ads[s].name))&&(i.push(this.ads[s].slot),this.ads[s].triggered=!0,n.push(this.ads[s]));return n.length>0&&this.trigger("refreshed",this,n),googletag.cmd.push(_.bind(function(){googletag.pubads().refresh(i)},this)),this}},_.extend(Inc.Controllers.PromotionGroup,Backbone.Events),Inc.Controllers.Promotion={type:"Ad",extend:Inc.extend,spawn:Inc.spawn,init:function(e){e||(e={}),e.type&&(this.type=e.type),this.oid=_.uniqueId(this.type+"-"),this.adzone=e.adzone||this.adzone||"",this.adzone+="/"+this.type,this.name=e.name||void 0;var t=_.findWhere(inc.adManager.adTypes,{type:this.type});if(e.sizes?this.sizes=e.sizes:this.sizes=t&&t.sizes?t.sizes:[],e.sizeMappings?this.sizeMappings=e.sizeMappings:this.sizeMappings=t&&t.sizeMappings?t.sizeMappings:[],this.onlyRefreshWhenExplicitlyCalled=_.isBoolean(e.onlyRefreshWhenExplicitlyCalled)?e.onlyRefreshWhenExplicitlyCalled:!1,this.mq=e.mq||[],_.isArray(this.mq)||(this.mq=[this.mq]),this.triggered=_.isBoolean(e.triggered)?e.triggered:!1,this.callback=e.callback||function(){},this.displayed=_.isBoolean(e.displayed)?e.displayed:!1,inc.parameterSet("testpage")&&(this.adzone=this.adzone.replace("/mv.inc/","/mv.inctest/")),"oop"==this.type)this.slot=googletag.defineOutOfPageSlot(this.adzone,this.oid).addService(googletag.pubads()),"create"==inc.i.mod&&this.slot.setTargeting("noviu","1");else if(this.slot=googletag.defineSlot(this.adzone,this.sizes,this.oid).addService(googletag.pubads()),this.sizeMappings.length>0){var i=googletag.sizeMapping();_.each(this.sizeMappings,function(e){i.addSize(e[0],e[1])}),i=i.build(),this.slot.defineSizeMapping(i)}return this.slot.set("ad-oid",this.oid),this.listenTo(inc.adManager,"ad:rendered:"+this.oid,function(e,t){this.callback(e,this)}),!_.isBoolean(e.collapse)||e.collapse?this.slot.setCollapseEmptyDiv(!0,!0):this.slot.setCollapseEmptyDiv(!1),this},setTargeting:function(e){return e||(e={}),inc.parameterNotEmpty("cms")&&(e.cms=inc.urlParameters.cms),inc.parameterNotEmpty("cid")&&(e.cid=inc.urlParameters.cid),e.c_type&&this.slot.setTargeting("c_type",[e.c_type]),e.cms&&this.slot.setTargeting("cms",[e.cms]),e.cid&&this.slot.setTargeting("cid",[e.cid]),e.video&&this.slot.setTargeting("video",[e.video]),e.scroll&&this.slot.setTargeting("scroll",[e.scroll]),"boolean"==typeof videoPlaceholderArticle&&videoPlaceholderArticle&&this.slot.setTargeting("video",["yes"]),e.pos&&(_.isArray(e.pos)||(e.pos=[e.pos]),this.slot.setTargeting("pos",e.pos)),_.isArray(e.aut)&&e.aut.length>0&&this.slot.setTargeting("aut",e.aut),getCookie("incid")?this.slot.setTargeting("login",["yes"]):this.slot.setTargeting("login",["no"]),this.slot.setTargeting("ksg",Krux.segments),this.slot.setTargeting("kuid",Krux.user),e.channelArray&&(e.channelArray.primary&&e.channelArray.primary.length>0&&this.slot.setTargeting("chn",e.channelArray.primary),e.channelArray.sub&&e.channelArray.sub.length>0&&this.slot.setTargeting("schn",e.channelArray.sub),e.channelArray.subsub&&e.channelArray.subsub.length>0&&this.slot.setTargeting("sschn",e.channelArray.subsub)),"profile"==inc.i.op&&this.slot.setTargeting("chn","profile"),"undefined"!=typeof abgrp&&(_.isNumber(abgrp)||_.isString(abgrp))&&this.slot.setTargeting("abgroup",""+abgrp),this}},_.extend(Inc.Controllers.Promotion,Backbone.Events),Inc.Accessories.ShareBox={type:"ShareBox",extend:Inc.extend,spawn:Inc.spawn,init:function(e){return e||(e={}),this.elementID=e.elementID||_.uniqueId("ShareBox-"),this.parentElementID=e.parentElementID||null,this.controller=e.controller||void 0,this.buttons=e.buttons||{},this.buttonKeysToObjectMapping={facebook:Inc.Accessories.FacebookShareButton,twitter:Inc.Accessories.TwitterShareButton,linkedin:Inc.Accessories.LinkedInShareButton,googleplus:Inc.Accessories.GooglePlusShareButton,reddit:Inc.Accessories.RedditShareButton,stumbleupon:Inc.Accessories.StumbleuponShareButton,mail:Inc.Accessories.MailShareButton},this.label=e.label||"",this.rendered=!1,this.classes=e.classes||[],_.isArray(this.classes)||(this.classes=[this.classes]),-1==_.indexOf(this.classes,"ShareBox")&&this.classes.unshift("ShareBox"),this.template=e.template||'<div id="<%= ob.elementID %>" class="<%= ob.classes.join(\' \') %>"><div class="DisabledMask"></div><div class="ShareBoxLabel"><%= ob.label %></div><div class="ShareBoxButtons"></div></div>',this.initializeButtons(),this},initializeButtons:function(){for(var e={},t=_.keys(this.buttons),i=0;i<t.length;i++)if(_.isUndefined(this.buttonKeysToObjectMapping[t[i]]));else{var n=this.buttons[t[i]];n.shareBox=this,e[t[i]]=this.buttonKeysToObjectMapping[t[i]].spawn(n)}return this.buttons=e,this},render:function(e){if(!this.rendered){_.isUndefined(e)&&(e=$("#"+this.parentElementID)),e.append(_.template(this.template)({ob:this}));for(var t=$("#"+this.elementID+" .ShareBoxButtons"),i=_.keys(this.buttons),n=0;n<i.length;n++)t.append(this.buttons[i[n]].render(t));this.rendered=!0}return this},enable:function(){return $("#"+this.elementID).toggleClass("disabled",!1),this},disable:function(){return $("#"+this.elementID).toggleClass("disabled",!0),this},trash:function(){return _.each(this.buttons,function(e){e.trash&&e.trash()}),$("#"+this.elementID).off(),$("#"+this.elementID).remove(),this}},_.extend(Inc.Accessories.ShareBox,Backbone.Events),Inc.Accessories.ShareButton={type:"ShareButton",extend:Inc.extend,spawn:Inc.spawn,init:function(e){return e||(e={}),this.elementID=_.uniqueId("ShareButton-"),this.shareBox=e.shareBox||null,this.title=e.title||"",this.url=e.url||"",this.caption=e.caption||"Inc.com",this.description=e.description||null,this.media=e.media||null,this.hidden=e.hidden||!1,this.rendered=!1,this.template=e.template||"",this.clickCallback=e.clickCallback||function(){},_.isUndefined(e.click)?this.click=_.bind(this.click,this):this.click=_.bind(e.click,this),this},render:function(e){return this.rendered||(e.append(_.template(this.template)({ob:this})),this.setupClick(),this.rendered=!0),this},setupClick:function(){var e=this;return $("#"+this.elementID).on("click",function(t){return e.click(t,$(this)),!0}),this},click:function(e,t){return _.isUndefined(t)&&$("#"+this.elementID).trigger("click"),this.clickCallback(),this},trash:function(){return $("#"+this.elementID).off(),$("#"+this.elementID).remove(),this}},_.extend(Inc.Accessories.ShareButton,Backbone.Events),Inc.Accessories.FacebookShareButton=Inc.Accessories.ShareButton.extend({type:"FacebookShareButton",init:function(e){return Inc.Accessories.ShareButton.init.apply(this,arguments),this.template=e.template||'<div id="<%= ob.elementID %>" class="ShareButton FacebookShareButton"></div>',this.actionLinkName=e.actionLinkName||this.title,this.actionLinkURL=e.actionLinkURL||this.url,this},click:function(e,t){if(Inc.Accessories.ShareButton.click.apply(this,arguments),_.isUndefined(FB))return this;var i={method:"feed",name:this.title,caption:this.caption,link:this.url,actions:{name:this.actionLinkName,link:this.actionLinkURL}};return this.description&&(i.description=this.description),this.media&&this.media.url&&(i.picture=this.media.url),FB.ui(i,function(e){e&&!e.error_message&&($(t).parent().parent().append('<div class="youLikeUs"><div class="arrow_box">Thanks for sharing! Care to like?<div class="fb-like" data-href="http://www.inc.com" data-layout="button_count" data-action="like" data-show-faces="false" data-share="false"></div></div></div>'),FB.XFBML.parse())}),this}}),Inc.Accessories.TwitterShareButton=Inc.Accessories.ShareButton.extend({type:"TwitterShareButton",init:function(e){return Inc.Accessories.ShareButton.init.apply(this,arguments),this.via=e.via||"Inc",this.related=e.related||this.via,this.text=this.title||"",this.text.length>108&&(lastIndex=this.text.substring(0,105).lastIndexOf(" "),this.text=this.text.substring(0,105).substring(0,lastIndex)+"..."),this.template=e.template||'<div id="<%= ob.elementID %>" class="ShareButton TwitterShareButton"><a class="ShareButtonAnchor" href="https://twitter.com/intent/tweet?url=<%= encodeURIComponent(ob.url) %>&via=<%= ob.via %>&text=<%= encodeURIComponent(ob.text) %>&related=<%= ob.related %>"></a></div>',this}}),Inc.Accessories.LinkedInShareButton=Inc.Accessories.ShareButton.extend({type:"LinkedInShareButton",init:function(e){return Inc.Accessories.ShareButton.init.apply(this,arguments),this.summary=e.summary||"",this.summary=encodeURIComponent(this.summary).replace(/\'/g,"\\'"),this.title=encodeURIComponent(this.title).replace(/\'/g,"\\'"),this.template="<div id=\"<%= ob.elementID %>\" class=\"ShareButton LinkedInShareButton\" onclick=\"window.open('http://www.linkedin.com/shareArticle?mini=true&url=<%= encodeURIComponent(ob.url) %>&title=<%= ob.title %>&summary=<%= ob.summary %>&source=Inc.com','LinkedIn','width=750,height=465,location=no,menubar=no,status=no,toolbar=no');\"></div>",this}}),Inc.Accessories.GooglePlusShareButton=Inc.Accessories.ShareButton.extend({type:"GooglePlusShareButton",init:function(e){return Inc.Accessories.ShareButton.init.apply(this,arguments),this.clientid=e.clientid||inc.i.googleClientID,this.contenturl=e.contenturl||e.url||"",this.calltoactionlabel=e.calltoactionlabel||"READ",this.calltoactionurl=e.calltoactionurl||e.url||"",this.cookiepolicy=e.clientid||"http://inc.com",this.calltoactiondeeplinkid=e.calltoactiondeeplinkid||null,this.contentdeeplinkid=e.contentdeeplinkid||null,this.prefilltext=e.prefilltext||null,this.approvalprompt=e.approvalprompt||null,this.callback=e.callback||null,this.requestvisibleactions=e.requestvisibleactions||null,this.scope=e.scope||null,this.clickedCallback=e.clickedCallback||null,this.template='<div id="<%= ob.elementID %>" class="ShareButton GooglePlusShareButton"></div>',this},render:function(e){Inc.Accessories.ShareButton.render.apply(this,arguments);var t={clientid:this.clientid,contenturl:this.contenturl,calltoactionlabel:this.calltoactionlabel,calltoactionurl:this.calltoactionurl,cookiepolicy:this.cookiepolicy};return this.calltoactiondeeplinkid&&(t.calltoactiondeeplinkid=this.calltoactiondeeplinkid),this.contentdeeplinkid&&(t.contentdeeplinkid=this.contentdeeplinkid),this.prefilltext&&(t.prefilltext=this.prefilltext),this.approvalprompt&&(t.approvalprompt=this.approvalprompt),this.callback&&(t.callback=this.callback),this.requestvisibleactions&&(t.requestvisibleactions=this.requestvisibleactions),this.scope&&(t.scope=this.scope),"undefined"==typeof gapi?inc.gapiQueue.push(_.bind(function(){gapi.interactivepost.render(this.elementID,t)},this)):gapi.interactivepost.render(this.elementID,t),this},click:function(e,t){return Inc.Accessories.ShareButton.click.apply(this,arguments),this.clickedCallback&&_.isFunction(this.clickedCallback)&&this.clickedCallback(),this}}),Inc.Accessories.PinterestShareButton=Inc.Accessories.ShareButton.extend({type:"PinterestShareButton",init:function(e){return Inc.Accessories.ShareButton.init.apply(this,arguments),this.description=encodeURIComponent(this.description).replace(/\'/g,"\\'"),this.template="<div id=\"<%= ob.elementID %>\" class=\"ShareButton PinterestShareButton\" onclick=\"window.open('http://www.pinterest.com/pin/create/button/?url=<%= encodeURIComponent(ob.url) %>&media=<%= encodeURIComponent(ob.media.url) %>&description=<%= ob.description %>','Pinterest','width=750,height=300,location=no,menubar=no,status=no,toolbar=no');\"></div>",this}}),Inc.Accessories.StumbleuponShareButton=Inc.Accessories.ShareButton.extend({type:"StumbleuponShareButton",init:function(e){return Inc.Accessories.ShareButton.init.apply(this,arguments),this.template="<div id=\"<%= ob.elementID %>\" class=\"ShareButton StumbleuponShareButton\" onclick=\"window.open('https://www.stumbleupon.com/submit?url=<%= encodeURIComponent(ob.url) %>','Stumbleupon','width=800,height=400,location=no,menubar=no,status=no,toolbar=no');\"></div>",this}}),Inc.Accessories.RedditShareButton=Inc.Accessories.ShareButton.extend({type:"RedditShareButton",init:function(e){return Inc.Accessories.ShareButton.init.apply(this,arguments),this.template="<div id=\"<%= ob.elementID %>\" class=\"ShareButton RedditShareButton\" onclick=\"window.open('//www.reddit.com/submit?url=<%= encodeURIComponent(ob.url) %>&title=<%= ob.title %>','Reddit','width=800,height=400,location=no,menubar=no,status=no,toolbar=no');\"></div>",this}}),Inc.Accessories.MailShareButton=Inc.Accessories.ShareButton.extend({type:"MailShareButton",init:function(e){return Inc.Accessories.ShareButton.init.apply(this,arguments),this.template='<div id="<%= ob.elementID %>" class="ShareButton MailShareButton"></div>',this.subject=e.subject||null,this.body=e.body||null,this},click:function(e,t){Inc.Accessories.ShareButton.click.apply(this,arguments);var i="mailto:?";return this.subject&&(i+="subject="+encodeURIComponent(this.subject)),this.subject&&this.body&&(i+="&"),this.body&&(i+="body="+encodeURIComponent(this.body)),window.location.href=i,this}}),Inc.Navigation.TopNav=Inc.ToggleView.extend({type:"TopNav",initialize:function(e){this.unfixed=!1,this.adminMenu=null,this.$slidedownAd=$("#leaderboardwrapper").children(".leaderboard_abovenav"),this.$mainNavBar=this.$(".MainNavBar"),this.$placeholder=$("#TopNav-Placeholder"),this.$buttoncontainer=$(".MainNavBar"),this.$topoverlay=$("#TopNavOverlay"),this.$searchForm=this.$(".searchOverlay .SystemForm"),this.$search=this.$searchForm.find(".SearchInput"),this.listenTo(dispatcher,"window:scrolled window:resized",this.reposition),this.listenTo(inc,"mq:match",this.reposition),inc.editing&&inc.editing.asidePresenter&&this.listenTo(inc.editing.asidePresenter,"aside:change",this.asidePresented),this.reposition(),this.setButtons();var t=this;this.$searchForm.on("submit",function(e){e&&e.preventDefault(),t.search()})},setUnfixed:function(e){return this.unfixed!=e&&(this.unfixed=e,this.$el.toggleClass("unfixed",this.unfixed),this.trigger("change:unfixed",this,this.unfixed)),this},setButtons:function(){var e=this;return _.each(this.$buttoncontainer.find(".topNavButton"),function(t){$(t).click(function(){if($(this).hasClass("activebutton"));else{e.$buttoncontainer.find(".topNavButton").removeClass("activebutton"),e.$topoverlay.find(".topNavOverlayPanel").hide();var t=$(this).data("btnfor");$(this).toggleClass("activebutton"),t?("NewsLoginOverlay"==t?inc.user.showPanelOptions("newsletter"):"LoginOverlay"==t&&inc.user.showPanelOptions("member"),e.$topoverlay.slideDown({start:function(){e.$topoverlay.find("."+t).show()}})):e.$topoverlay.slideUp()}})}),inc.user.loggedin?$("#TopNavOverlayLogin .panelTitle").html("Hello, "+inc.user.username+'! Sign Up for Inc. Newsletters <span class="smallerTitle">Not '+inc.user.username+'? Sign out <a href="'+application_url+"logout?ret="+application_url+'" rel="nofollow">here</a>.</span>'):$("#TopNavOverlayLogin .panelTitle").html("Hey Stranger! Sign Up for Inc. Newsletters."),$("#TopNavOverlayNewsletters #NewsletterSubmitContainer #NewsletterEmailValue").focusin(function(){$("#TopNavNewsletterRegister").slideDown()}),$(".newMemberToggle").on("click",".memberToggle",function(){return $(".registrationOptions").slideToggle(),$(".toggleSignUp").toggle(),!1}),$("#TopNavOverlayClose").on("click",function(){e.$buttoncontainer.find(".topNavButton").removeClass("activebutton"),e.$topoverlay.slideUp()}),$("#TopNavOverlayNewsletters #newsletter_form").submit(function(){return"TopNavOverlayNewsletters"==$(this).parent().attr("id")&&($("#NewsletterWorking").show(),inc.user.doUserNewsletters(!0),inc.user.doUserRegister(!0)),!1}),$(document).mouseup(function(t){var i=t.target;if($(i).hasClass("topNavButton"));else{var n=$("#TopNavOverlay");n.is(t.target)||0!==n.has(t.target).length||(e.$buttoncontainer.find(".topNavButton").removeClass("activebutton"),e.$topoverlay.slideUp(),e.$topoverlay.find(".topNavOverlayPanel").hide())}}),this},asidePresented:function(e){return this.$el.toggleClass("aside",e),this},reposition:function(){return inc.fallback||"large"==inc.mqState&&!inc.alwaysMobileNavigation&&$(document).scrollTop()<=this.$slidedownAd.outerHeight(!0)?(this.setUnfixed(!0),this.$placeholder.toggleClass("unfixed",!0).hide()):(this.setUnfixed(!1),this.$placeholder.toggleClass("unfixed",!1).show()),this},addAdminMenu:function(e){return this.adminMenu=e,this.$(".inc5000header").length>0?this.$(".inc5000header").before(this.adminMenu.$el):this.$(".AsideWrapper").before(this.adminMenu.$el),this},addPhotoEssayNavigator:function(e,t){return this.adminMenu?this.adminMenu.$el.before(t):this.$(".AsideWrapper").before(t),this},getDistanceOfBottomFromTop:function(){var e=$(".TopNav").outerHeight(!0)+$(".AdminMenu").outerHeight();return this.unfixed?this.$el.offset().top+e-$(document).scrollTop():e},search:function(){var e=(this.$search.val()||"").trim();return""==e?this:(location.href=inc.applicationURL+"search?q="+encodeURIComponent(e),this)}}),Inc.Menus.Archetype=Inc.ToggleView.extend({type:"Menu",initialize:function(e){e||(e={});this.items=[],Inc.ToggleView.prototype.initialize.apply(this,arguments),this.template&&this.$el.html(this.template(this)),this.$items=this.$(".Items")},getItemByName:function(e){return _.findWhere(this.items,{name:e})},enable:function(){return this.disabled&&_.each(this.items,function(e){e.enable()}),Inc.ToggleView.prototype.enable.apply(this,arguments),this},disable:function(){return this.disabled||_.each(this.items,function(e){e.disable()}),Inc.ToggleView.prototype.disable.apply(this,arguments),this},trash:function(){return _.each(this.items,function(e){e.trash()}),this.items=[],this.$items=null,Inc.ToggleView.prototype.trash.apply(this,arguments),this}}),Inc.Menus.LeftNav={type:"LeftNavMenu",extend:Inc.extend,spawn:Inc.spawn,init:function(e){e||(e={}),this.menuItemHighlighted=!1,this.menuListing=inc.i.leftNavMenuListing;var t=this;return $(document).ready(function(){$("#leftMenu a").on("click",function(){return $("#leftMenu").css("-webkit-overflow-scrolling","auto"),setTimeout(function(){$("#leftMenu").css("-webkit-overflow-scrolling","touch")},1e3),$(this).parent().parent().hasClass("slideOutList")&&($("#leftMenu .slideOutList .active").removeClass("active"),$(this).addClass("active")),!0}),$("#leftMenu .menuListRightRegionContainer").on("click",function(){var e=$(this).parent();console.log(e),e.hasClass("Secondary")?thisheight=30:thisheight=39,e.hasClass("open")?(e.height(thisheight),e.removeClass("open")):(e.height(e.children("ul").children("li").length*thisheight+thisheight+1),e.addClass("open")),Modernizr.csstransitions?e.on("transitionend webkitTransitionEnd oTransitionEnd otransitionend MSTransitionEnd",function(e){$(this).off("transitionend webkitTransitionEnd oTransitionEnd otransitionend MSTransitionEnd"),$("#leftMenu").perfectScrollbar("update")}):$("#leftMenu").perfectScrollbar("update")}),$("#leftMenuHeader").on("click","#LeftMenuLogin",function(){t.listenToOnce(inc.slideOutMenuBehaviour,"hide:complete",function(){inc.user.promptForLogin()}),$("#wrappermask").click()}),Inc.Utilities.iOS||$("#leftMenu").css("overflow-y","hidden").perfectScrollbar({suppressScrollX:!0,useBothWheelAxes:!0,wheelPropagation:!1,direction:"y",distanceFromTopAndBottom:3})}),this.tryToHighlightTopLevelLocation(),this},tryToHighlightTopLevelLocation:function(){var e=[],t=[],i=[],n=[];"undefined"!=typeof inc.i.channelArray.subsubsubFilelocation&&(e=_.uniq(_.compact(inc.i.channelArray.subsubsubFilelocation.slice()),!0)),"undefined"!=typeof inc.i.channelArray.subsubFilelocation&&(t=_.uniq(_.compact(inc.i.channelArray.subsubFilelocation.slice()),!0)),"undefined"!=typeof inc.i.channelArray.subFilelocation&&(i=_.uniq(_.compact(inc.i.channelArray.subFilelocation.slice()),!0)),"undefined"!=typeof inc.i.channelArray.primaryFilelocation&&(n=_.uniq(_.compact(inc.i.channelArray.primaryFilelocation.slice()),!0)),"undefined"!=typeof inc.i.channelArray.topfilelocation&&""!=inc.i.channelArray.topfilelocation&&n.unshift(inc.i.channelArray.topfilelocation);for(var s=_.uniq(e.concat(t,i,n),!0),o=0,a=!1;!this.menuItemHighlighted&&o<s.length;){for(var r=0;r<this.menuListing.length;r++){if(this.menuListing[r].filelocation==s[o]){a=this.menuListing[r];break}if("undefined"!=typeof this.menuListing[r].children&&this.menuListing[r].children.length>0)for(var l=0;l<this.menuListing[r].children.length;l++)if(this.menuListing[r].children[l].filelocation==s[o]){a=this.menuListing[r].children[l];break}if(a)break}a&&(this.highlightMenuItem(a.href),this.menuItemHighlighted=!0),o++}return this.menuItemHighlighted||!_.isBoolean(a)||a||this.highlightMenuItem(inc.baseURL),this},highlightMenuItem:function(e){return $(document).ready(function(){var t=$("#leftMenu .slideOutMenuList").children("li").children('a[href="'+e+'"]');if(t.length>0)return void t.addClass("active");var t=$("#leftMenu .slideOutSubMenuList").children("li").children('a[href="'+e+'"]');if(t.length>0){t=$(t[0]).parent();var i=t.parent();i.parent().hasClass("open")||i.parent().children(".menuListRightRegionContainer").click(),t.children("a").addClass("active")}}),this}},_.extend(Inc.Menus.LeftNav,Backbone.Events),Inc.Menus.SlideOutMenuBehaviour={type:"SlideOutMenuBehaviour",extend:Inc.extend,spawn:Inc.spawn,init:function(e){e||(e={});var t=this;return this.menuIsAnimating=!0,this.killScrolling=!1,this.windowSwipeRecognizer=null,this.menus={left:{open:!1,position:0},right:{open:!1,position:0}},this.listenTo(dispatcher,"window:resized",this.resizeElements),$(document).ready(function(){t.start()}),this},resizeElements:_.throttle(function(){var e=$(window).height()-$("#leftMenuHeader").outerHeight(!0);$("#leftMenu").height(e).css("top",$(document).scrollTop()+$("#leftMenuHeader").outerHeight(!0)+"px"),$("#leftMenuInnerContainer").css("min-height",e+"px"),$("#leftMenuHeader").css("top",$(document).scrollTop()+"px")},100),start:function(){var e=this,t=$(window).height()-$("#leftMenuHeader").outerHeight(!0);return $("#leftMenu").height(t).css("top",$(document).scrollTop()+$("#leftMenuHeader").outerHeight(!0)+"px"),$("#leftMenuInnerContainer").css("min-height",t+"px"),$("#leftMenuHeader").css("top",$(document).scrollTop()+"px"),document.getElementById("leftMenu").ontouchstart=function(t){e.killScrolling=!1},document.getElementById("leftMenu").ontouchend=function(t){setInterval(function(){var t=document.getElementById("leftMenu");0==t.scrollTop?(t.scrollTop=1,clearInterval(),e.killScrolling=!1):t.scrollTop==t.scrollHeight-t.clientHeight&&(t.scrollTop=t.scrollHeight-t.clientHeight-1,clearInterval(),e.killScrolling=!1)},300)},this.registerMenuClicks(),this},completeLeftMenuVisibleAnimation:function(){var e=this;return this.menuIsAnimating=!1,$("html").css("overflow","hidden"),this.windowSwipeRecognizer=Inc.GestureRecognizers.Swipe.spawn({direction:"left"}),this.listenTo(this.windowSwipeRecognizer,"gesture:swipe",function(){$("#wrappermask").click()}),this.windowSwipeRecognizer.attachTo(window),$("#wrappermask, .incLogoInMenuContainer").on("click",function(t){if(!e.menuIsAnimating)if(e.menuIsAnimating=!0,e.menus.left.position=document.getElementById("leftMenu").scrollTop,document.ontouchmove=document.getElementById("wrappermask").ontouchstart=document.getElementById("wrappermask").ontouchmove=document.getElementById("leftMenuHeader").ontouchstart=document.getElementById("leftMenuHeader").ontouchmove=function(e){},Modernizr.csstransitions)$("#siteinnercontainer").on("transitionend webkitTransitionEnd oTransitionEnd otransitionend MSTransitionEnd",function(t){$(this).off("transitionend webkitTransitionEnd oTransitionEnd otransitionend MSTransitionEnd"),e.completeMenuHiddenAnimation()}),$("#siteinnercontainer, #TopNav, #adhesiveadcontainer").removeClass("leftMenuVisible");else{var i="#siteinnercontainer";$("#TopNav").hasClass("unfixed")||(i+=", #TopNav, #adhesiveadcontainer"),$(i).animate({left:0},{queue:!1,easing:"linear",duration:300,complete:function(){"siteinnercontainer"==$(this).attr("id")&&e.completeMenuHiddenAnimation()}})}}),this},completeMenuHiddenAnimation:function(){return this.windowSwipeRecognizer.trash(),this.windowSwipeRecognizer=null,$("#wrappermask, .incLogoInMenuContainer").off("click"),$("#wrappermask").hide(),$(".SectionUpDown").show(),this.menuIsAnimating=!1,this.killScrolling=!1,$("#leftMenu").css("-webkit-overflow-scrolling","auto"),$("html").css("overflow","visible"),this.registerMenuClicks(),this.trigger("hide:complete"),this},registerMenuClicks:function(){var e=this;return $("#LeftMenuButton").on("click",function(t){if(e.menuIsAnimating=!0,$("#LeftMenuButton, #RightMenuButton").off("click"),$("#leftMenu").css("-webkit-overflow-scrolling","touch"),$(".SectionUpDown").hide(),$("#wrappermask").show(),Modernizr.csstransitions)$("#siteinnercontainer").on("transitionend webkitTransitionEnd oTransitionEnd otransitionend MSTransitionEnd",function(t){$(this).off("transitionend webkitTransitionEnd oTransitionEnd otransitionend MSTransitionEnd"),e.completeLeftMenuVisibleAnimation()}),$("#siteinnercontainer, #TopNav, #adhesiveadcontainer").addClass("leftMenuVisible");else{var i="#siteinnercontainer";$("#TopNav").hasClass("unfixed")||(i+=", #TopNav, #adhesiveadcontainer"),$(i).animate({left:263},{queue:!1,easing:"linear",duration:300,complete:function(){"siteinnercontainer"==$(this).attr("id")&&e.completeLeftMenuVisibleAnimation()}})}var n=$(window).height()-$("#leftMenuHeader").outerHeight(!0);$("#leftMenu").height(n).css("top",$(document).scrollTop()+$("#leftMenuHeader").outerHeight(!0)+"px"),$("#leftMenuInnerContainer").css("min-height",n+"px"),$("#leftMenuHeader").css("top",$(document).scrollTop()+"px");var s=document.getElementById("leftMenu");0==e.menus.left.position&&(s.scrollTop=1),document.getElementById("wrappermask").ontouchstart=document.getElementById("wrappermask").ontouchmove=document.getElementById("leftMenuHeader").ontouchstart=document.getElementById("leftMenuHeader").ontouchmove=function(t){e.killScrolling=!0},document.ontouchmove=function(t){e.killScrolling&&t.preventDefault()}}),this}},_.extend(Inc.Menus.SlideOutMenuBehaviour,Backbone.Events),
Inc.Navigation.LiquidNavigator={type:"LiquidNavigator",extend:Inc.extend,spawn:Inc.spawn,init:function(e){return e||(e={}),this.prefix=e.prefix||"",this.controller=e.controller||null,this.elementID=_.uniqueId(this.prefix+"Navigator-"),this.parentElementID=e.parentElementID||null,this.items=e.items||[],this.templateID=this.prefix+"NavigatorTemplate",this.itemTemplateID=this.prefix+"NavigatorItemTemplate",this.ItemClassName=e.ItemClassName||Inc.Navigation.LiquidNavigatorItem,this.shown=e.shown||!1,this.slider=e.slider||!1,this.rendered=!1,this},render:function(){return $("#"+this.parentElementID).append(_.template($("#"+this.templateID).html())({ob:this})),this.slider&&$("#"+this.elementID).find(".Slider").perfectScrollbar(this.slider),this.rendered=!0,this},show:function(){return $("#"+this.elementID).removeClass("NotShown"),this.shown=!0,this.updatePosition(),this.slider&&this.updateSlider(),this.trigger("shown",this),this},hide:function(){var e=$("#"+this.elementID);return e.hasClass("NotShown")||e.addClass("NotShown"),this.shown=!1,this.trigger("hidden",this),this},updatePosition:function(){return this},updateSlider:function(){return $("#"+this.elementID).find(".Slider").perfectScrollbar("update"),this},appendItems:function(e,t){var i=0,n=0,s=$("#"+this.itemTemplateID).html();_.isArray(e)||(e=[e]);for(var o=0;o<e.length;o++){var a=this.items.length;_.isUndefined(t)||(a=t);var r=this.ItemClassName.spawn(_.extend({elementID:_.uniqueId(this.prefix+"NavigatorItem-"),nav:this,index:a,template:s,clickCallback:_.bind(this.clickCallback,this)},e[o]));if(!_.isUndefined(this.postItemInsert)&&_.isUndefined(r.postItemInsert)&&(r.postItemInsert=_.bind(this.postItemInsert,this)),_.isUndefined(t))this.items.push(r),$("#"+this.elementID+" ."+this.prefix+"NavigatorList").append(r.renderTemplate());else{this.items.splice(t,0,r),$($("#"+this.elementID+" ."+this.prefix+"NavigatorList").children()[t]).after(r.renderTemplate());for(var l=t+1;l<this.items.length;l++)this.items[l].index=l;t++}if(r.children&&r.children.length>0)for(var l=0;l<r.children.length;l++){var c=r.ChildItemClassName.spawn(_.extend({elementID:_.uniqueId(this.prefix+"NavigatorItem-"),nav:this,index:l,template:s,clickCallback:_.bind(this.clickCallback,this)},e[o].children[l]));r.children[l]=c,$("#"+r.elementID+" .AdminToolbarSubList").append(c.renderTemplate()),c.inserted=!0,c.postInsert(c)}r.inserted=!0,r.postInsert(r),i+=$("#"+r.elementID).outerWidth(!0),n+=$("#"+r.elementID).outerHeight(!0)}if(this.slider){var h=$("#"+this.elementID).find("."+this.prefix+"NavigatorList");"x"==this.slider.direction&&h.width(h.width()+i),this.updateSlider()}return this},removeItemByID:function(e){var t=_.findWhere(this.items,{id:e});if(t){this.items.splice(t.index,1),$($("#"+this.elementID+" ."+this.prefix+"NavigatorList").children("."+this.prefix+"Item")[t.index]).remove();for(var i=t.index;i<this.items.length;i++)this.items[i].index=i}return this},clickCallback:function(e){},trash:function(){return this.slider&&$("#"+this.elementID).find(".Slider").perfectScrollbar("destroy"),$("#"+this.elementID).remove(),this}},_.extend(Inc.Navigation.LiquidNavigator,Backbone.Events),Inc.Navigation.LiquidNavigatorItem={type:"LiquidNavigatorItem",extend:Inc.extend,spawn:Inc.spawn,init:function(e){return e||(e={}),this.id=e.id||null,this.elementID=e.elementID||null,this.index=e.index||0,this.nav=e.nav||null,this.inserted=e.inserted||!1,this.template=e.template||"",this.clickCallback=e.clickCallback||function(){},_.isUndefined(e.postInsert)||(this.postInsert=e.postInsert),this.value=e.value||null,this.active=_.isUndefined(e.active)?!1:e.active,this.children=e.children||null,this.ChildItemClassName=e.ChildItemClassName||Inc.Navigation.LiquidNavigatorItem,this},renderTemplate:function(){return _.template(this.template)({ob:this}).trim()},postInsert:function(){return $("#"+this.elementID).on("click",_.bind(this.click,this)),this},click:function(){return this.clickCallback(this),this}},_.extend(Inc.Navigation.LiquidNavigatorItem,Backbone.Events),Inc.Messages.Archetype=Inc.ToggleView.extend({type:"Message",tagName:"li",className:"Message",template:_.template($("#MessageTemplate").html()),initialize:function(e){e||(e={}),this.message=e.message||"",Inc.ToggleView.prototype.initialize.apply(this,arguments)},render:function(){return this.$el.html(this.template(this)),this}}),Inc.Modals.Archetype=Inc.ToggleView.extend({type:"Modal",className:"Modal",template:_.template($("#ModalTemplate").html()),constructor:function(e){e||(e={}),this.messages=e.messages||[],_.isArray(this.messages)||(this.messages=[this.messages]),this.$messageContainer=null,this.$buttonContainer=null,this.$content=e.$content||null,this.$parent=e.$parent||null,this.timeDisplayed=null,this.showAndCloseDelay=350,this.closeDisabled=_.isBoolean(e.closeDisabled)?e.closeDisabled:!1,this.priority=_.isNumber(e.priority)?e.priority:1;for(var t=0;t<this.messages.length;t++)_.isString(this.messages[t])&&(this.messages[t]=new Inc.Messages.Archetype({message:this.messages[t]}).render());Inc.ToggleView.apply(this,arguments)},initialize:function(e){this.hidden=e.hidden=!0,this.listenTo(dispatcher,"window:resized window:scrolled",_.bind(this.reposition,this)),Inc.ToggleView.prototype.initialize.apply(this,arguments)},events:function(){return{"click .OkButton":"close"}},render:function(){if(this.$content)this.$el.append(this.$content);else{this.$el.html(this.template(this));var e=this.$messageContainer=this.$(".MessageContainer");this.$buttonContainer=this.$(".ButtonContainer"),_.each(this.messages,function(t){e.append(t.$el)})}return this.className!=this.type&&this.$el.toggleClass(this.type,!0),this},show:function(){if(this.hidden){this.reposition();var e=this;this.timeDisplayed||(this.timeDisplayed=moment()),this.trigger("show:started",this),setTimeout(function(){e.trigger("show:finished",this)},this.showAndCloseDelay)}return Inc.ToggleView.prototype.show.apply(this,arguments),this},close:function(){if(this.trigger("close:requested",this),this.closeDisabled||this.disabled)return this;var e=this;return this.trigger("close:started",this),this.hide(),setTimeout(function(){e.$content&&e.$content.detach(),e.trigger("close:finished",e)},this.showAndCloseDelay),this},showButton:function(e){return this.$buttonContainer&&this.$buttonContainer.find("."+e).show(),this},hideButton:function(e){return this.$buttonContainer&&this.$buttonContainer.find("."+e).hide(),this},hideAllButtons:function(){return this.$buttonContainer&&this.$buttonContainer.find("button").hide(),this},reposition:function(){var e=$(window).height(),t=this.$el.height(),i=Math.floor(e/2-t/2),n=$(window).width(),s=this.$el.width(),o=Math.floor(n/2-s/2);return this.$el.css({top:i+"px",left:o+"px"}),this.trigger("repositioned",this),this},empty:function(){return _.each(this.messages,function(e){e.trash()}),this.messages=[],this},trash:function(){return this.$messageContainer=null,this.$buttonContainer=null,Inc.ToggleView.prototype.trash.apply(this,arguments),this}},{ClassName:"Modal"}),Inc.Modals.Save=Inc.Modals.Archetype.extend({type:"SaveModal",className:"Modal SaveModal",template:_.template($("#SaveModalTemplate").html()),constructor:function(e){this.barID=_.uniqueId("ProgressBar-"),Inc.Modals.Archetype.apply(this,arguments)},initialize:function(e){this.closeDisabled=!0,Inc.Modals.Archetype.prototype.initialize.apply(this,arguments),e.runner&&(this.listenTo(e.runner,"progress:update",this.updateProgress),this.listenTo(e.runner,"reset",this.reset),this.listenTo(e.runner,"finished",this.runnerFinished))},events:function(){return{"click .OkButton":"close","click .RetryButton":"onClickRetry"}},onClickRetry:function(){this.trigger("click:retry",this)},render:function(){return Inc.Modals.Archetype.prototype.render.apply(this,arguments),this.$(".ProgressBarContainer").append(_.template($("#ProgressBarTemplate").html())({barID:this.barID})),this.hideAllButtons(),this},updateProgress:function(e){return this.$("#"+this.barID).css("width",Math.floor(100*e)+"%"),this},reset:function(e){return this.closeDisabled=!0,this.hideAllButtons(),this.$el.toggleClass("hasErrors",!1),this.render().reposition(),this},runnerFinished:function(e){var t=e.getErrorMessages();if(t){this.showButton("OkButton").showButton("RetryButton");for(var i=[],n=0;n<t.length;n++){for(var s=!1,o=0;o<i.length;o++)if(i[o].header==t[n].header){i[o].messages.push(t[n].message),s=!0;break}s||i.push({header:t[n].header,messages:[t[n].message]})}this.$el.toggleClass("hasErrors",!0);var a=this.$(".ErrorMessageList");_.each(i,function(e){a.append(_.template($("#ErrorMessageListItemTemplate").html())(e))}),this.reposition()}else this.closeDisabled=!1,this.close();return this}},{ClassName:"SaveModal"}),Inc.Modals.Confirmation=Inc.Modals.Archetype.extend({type:"ConfirmationModal",className:"Modal ConfirmationModal",template:_.template($("#Confirmation-Modal-Template").html()),constructor:function(e){e||(e={}),this.yesText=e.yesText||"YES",this.noText=e.noText||"CANCEL",Inc.Modals.Archetype.apply(this,arguments)},events:function(){return{"click .YesButton":"onClickYes","click .NoButton":"onClickNo"}},onClickYes:function(){this.trigger("click:yes",this)},onClickNo:function(){this.trigger("click:no",this)}},{ClassName:"ConfirmationModal"}),Inc.Modals.YesNo=Inc.Modals.Archetype.extend({type:"YesNoModal",className:"Modal YesNoModal",template:_.template($("#YesNoModalTemplate").html()),constructor:function(e){e||(e={}),this.timeLimit=_.isNumber(e.timeLimit)?e.timeLimit:30,this.timeRemaining=this.timeLimit,this.timerID=_.uniqueId("Timer-"),this.timerChecker=null,this.yesText=e.yesText||"YES",this.noText=e.noText||"NO",Inc.Modals.Archetype.apply(this,arguments)},initialize:function(e){return Inc.Modals.Archetype.prototype.initialize.apply(this,arguments),this.timeLimit>0&&this.listenToOnce(this,"show:finished",function(){var e=this;this.timerChecker=setInterval(function(){e.updateTimer()},100)}),this},events:function(){return{"click .YesButton":"onClickYes","click .NoButton":"onClickNo"}},onClickYes:function(){this.trigger("click:yes",this)},onClickNo:function(){this.trigger("click:no",this)},updateTimer:function(){return this.timeRemaining=this.timeLimit-moment().diff(this.timeDisplayed,"seconds"),this.timeRemaining>0?this.$("#"+this.timerID).html(this.timeRemaining):(this.trigger("expired",this),this.killTimer()),this},killTimer:function(){_.isNumber(this.timerChecker)&&clearInterval(this.timerChecker),this.timerChecker=null},trash:function(){return _.isNumber(this.timerChecker)&&this.killTimer(),Inc.ToggleView.prototype.trash.apply(this,arguments)}},{ClassName:"YesNoModal"}),Inc.Modals.Editor=Inc.Modals.Archetype.extend({type:"EditorModal",className:"EditorModal",reposition:function(){return this}},{ClassName:"EditorModal"}),Inc.Modals.Aside=Inc.Modals.Archetype.extend({type:"AsideModal",className:"AsideModal",constructor:function(e){e||(e={}),this.editingContainerClass=e.editingContainerClass||null,Inc.Modals.Archetype.apply(this,arguments)},initialize:function(e){this.showAndCloseDelay=0,Inc.Modals.Archetype.prototype.initialize.apply(this,arguments)},render:function(){return Inc.Modals.Archetype.prototype.render.apply(this,arguments),0==this.$(".AsideModalBottomMask").length&&this.$el.append('<div class="AsideModalBottomMask"></div>'),this},reposition:function(){var e=$(window).height(),t=$(window).scrollTop(),i=$("#TopNav"),n=i.outerHeight(!0);return i.hasClass("unfixed")?n=this.$el.offset().top-t:n+=parseInt(i.css("top").replace("px","")),this.$el.parent().css("height",e-n+200+"px"),this.$el.css("height",e-n+"px"),this.trigger("repositioned",this),this}},{ClassName:"AsideModal"}),Inc.Modals.UploadDialog=Inc.Modals.Archetype.extend({type:"UploadDialogModal",className:"Modal AdminModal UploadDialogModal",template:_.template($("#UploadDialog-Modal-Template").html()),initialize:function(e){Inc.Modals.Archetype.prototype.initialize.apply(this,arguments),this.file=null,this.allowedFileTypes=["image/png","image/jpg","image/jpeg","image/gif"],this.render(),this.$form=this.$("form"),this.$el.on("change",function(){dispatcher.trigger("inc:edit")}),this.$uploadFileWrapper=this.$form.find(".upload-file"),this.$fileInput=this.$uploadFileWrapper.find('input[type="file"]'),this.$referenceNameWrapper=this.$form.find(".reference-name.input-wrapper"),this.$referenceName=this.$referenceNameWrapper.find("input"),this.$filenameWrapper=this.$form.find(".filename.input-wrapper"),this.$filename=this.$filenameWrapper.find("input"),this.$fileExtension=this.$filenameWrapper.find(".file-extension"),this.$el.on("input",".filename input",_.bind(this.validateFilename,this)),this.$captionWrapper=this.$form.find(".caption.input-wrapper"),this.$caption=this.$captionWrapper.find("textarea"),this.$customCreditWrapper=this.$form.find(".custom-credit.input-wrapper"),this.$customCredit=this.$form.find("input"),this.$reusableWrapper=this.$form.find(".reusable.input-wrapper"),this.$reusable=this.$reusableWrapper.find("input"),this.$rightsWrapper=this.$form.find(".rights.input-wrapper"),this.$rights=this.$rightsWrapper.find("input"),this.$el.on("change",".rights input",_.bind(this.validateRights,this));var t=this;this.$el.on("change",".upload-file input",function(e){t.onFileSelect.call(t,$(this),e)})},render:function(){return Inc.Modals.Archetype.prototype.render.apply(this,arguments),this.$(".MessageRow").append('<div class="upload-file"><button class="upload-file-button">CHOOSE FILE</button><input type="file" name="img_panoramicref"/></div>'),this.$(".MessageRow").append(_.template($("#LoadingIndicator-Template").html())),this},events:function(){return{"click .cancel":"close","submit form":"submit","click .submit":"submit"}},close:function(e){return e&&e.preventDefault(),Inc.Modals.Archetype.prototype.close.apply(this,arguments),dispatcher.trigger("inc:edit"),this},setLoading:function(e){return this.loading&&!e?this.enable():!this.loading&&e&&this.disable(),Inc.Modals.Archetype.prototype.setLoading.apply(this,arguments),this},onFileSelect:function(e,t){dispatcher.trigger("inc:edit");var i=e.prop("files");if(!i||!i[0])return this;this.$uploadFileWrapper.toggleClass("error",!1);var n=i[0];if(n.size&&n.size>2e6)return inc.admin.notify("Cannot upload an image over 2 MB in size."),this;if(-1==_.indexOf(this.allowedFileTypes,n.type))return inc.admin.notify("You can only upload a .png, .jpg, .jpeg, or .gif"),this;var s=new FileReader,o=new Image,a=this;return s.readAsDataURL(n),s.onload=function(e){o.onload=function(){if(this.width<970||this.height<450)return inc.admin.notify("Please select an image with a width of at least 970px and a height of at least 450px"),this;var e=n.name.split("."),t="."+e.pop(),i=e.join(".");a.$filename.val(i),a.$fileExtension.html(t)},o.onerror=function(){inc.admin.notify("Error: Something is wrong with the selected image.")},o.onabort=function(){},o.src=e.target.result},this},clearForm:function(){return this.$form.find("input, textarea").val(""),this.$form.find('input[name="img_usrid"]').val(inc.user.id),this.$form.find('input[type="checkbox"]').prop("checked",!1),this.clearErrors(),this},clearErrors:function(){return this.$uploadFileWrapper.toggleClass("error",!1),this.$form.find(".input-wrapper").toggleClass("error",!1),this},validateFilename:function(){var e=this.$filename.val();return""==e.trim()||e!=encodeURIComponent(e)?(this.$filenameWrapper.toggleClass("error",!0),!1):(this.$filenameWrapper.toggleClass("error",!1),!0)},validateRights:function(){return 0==this.$rights.prop("checked")?(this.$rightsWrapper.toggleClass("error",!0),!1):(this.$rightsWrapper.toggleClass("error",!1),!0)},submit:function(e){e&&e.preventDefault();var t=!0;return _.isString(this.$fileInput.val())&&""!=this.$fileInput.val().trim()||(this.$uploadFileWrapper.toggleClass("error",!0),t=!1),this.validateFilename()||(t=!1),this.validateRights()||(t=!1),dispatcher.trigger("inc:edit"),t?(this.setLoading(!0),$.ajax({url:"http://sitemanager.inc.com/getty/proxy-api.php?proxy_type=upload",type:"POST",data:new FormData(this.$form[0]),enctype:"multipart/form-data",processData:!1,contentType:!1}).done(_.bind(this.onUploadSuccess,this)).fail(_.bind(this.onUploadFail,this)),this):this},onUploadSuccess:function(e,t,i){return this.setLoading(!1),this.trigger("image:uploaded",e),this.close(),this},onUploadFail:function(e,t,i){return"invalid type"==i?inc.admin.notify("You can only upload a .png, .jpg, .jpeg, or .gif"):"invalid size"==i?inc.admin.notify("Cannot upload an image over 2 MB in size."):"invalid width"==i?inc.admin.notify("Please select an image with a width of at least 970px and a height of at least 450px"):inc.admin.notify("There was an error uploading, please try again"),this.setLoading(!1),this}},{ClassName:"UploadDialogModal"}),Inc.Accessories.StatusIndicator=Inc.ToggleView.extend({type:"StatusIndicator",className:"StatusIndicator",template:_.template($("#StatusIndicatorTemplate").html()),initialize:function(e){if(e||(e={}),this.hidden=e.hidden=!0,this.models=[],this.area=null,this.lastClicked=e.lastClicked||null,this.lastUpdateStarted=null,this.updateInterval=null,this.updatingFailed=!1,e.models){_.isArray(e.models)||(e.models=[e.models]);for(var t=0;t<e.models.length;t++)this.addModel(e.models[t])}this.$icon=null,this.$label=null,this.$timer=null,e.area&&(this.area=e.area,this.listenTo(this.area,"editor:add",this.editorAdded),this.listenTo(this.area,"disabled",this.onAreaDisabled),this.listenTo(this.area,"enabled",this.onAreaEnabled)),Inc.ToggleView.prototype.initialize.apply(this,arguments)},events:function(){return{"click.inc:content:edit":"click"}},editorAdded:function(e,t){return _.findWhere(this.models,{oid:e.model.oid})||(this.models.push(e.model),this.listenTo(e.model,"update:start",this.modelUpdateStarted),this.listenTo(e.model,"update:success",this.modelUpdateSuccess),this.listenTo(e.model,"update:fail",this.modelUpdateFail),e.model.updating?this.modelUpdateStarted(e.model):e.model.failedToUpdate&&(this.updatingFailed=!0,this.update())),this},onAreaDisabled:function(e){return this.$el.toggleClass("AreaDisabled",!0),this.$icon.toggleClass("fi-lock",!0).toggleClass("fi-unlock",!1),this},onAreaEnabled:function(e){return this.$el.toggleClass("AreaDisabled",!1),this},hasUneditableModels:function(){for(var e=0;e<this.models.length;e++){var t=this.models[e];if(t&&!t.editable())return!0}return!1},hasArticleModelWithEditorLock:function(){for(var e=0;e<this.models.length;e++){var t=this.models[e];if(t instanceof Inc.Models.Article&&t.get("inc_lock_articleflag")&&(!inc.user.admin||inc.user.admin.roleID>=3))return!0}return!1},getUneditableModel:function(){for(var e=0;e<this.models.length;e++)if(!this.models[e].editable())return this.models[e];return null},render:function(){return this.$el.html(this.template({})),this.$icon=this.$(".StatusIcon"),this.$label=this.$(".StatusLabel"),this.$timer=this.$(".StatusTimer"),this.update(),this},modelUpdateStarted:function(e){return this.lastUpdateStarted=moment(),this.activate(),this.update(),this.show(),this},modelUpdateSuccess:function(e,t,i){var n=750-moment().diff(this.lastUpdateStarted);return 1>n&&(n=1),_.bind(_.debounce(function(){var e=this.areModelsUpdating(),t=this.hasUneditableModels();if(!e){for(var i=!1,n=0;n<this.models.length;n++)if(this.models[n].failedToUpdate){i=!0;break}this.updatingFailed=i,this.deactivate()}this.update(),e||t||this.hide()},n),this)(),this},modelUpdateFail:function(e,t,i){var n=750-moment().diff(this.lastUpdateStarted);return 1>n&&(n=1),_.bind(_.debounce(function(){this.updatingFailed=!0,this.areModelsUpdating()||this.deactivate(),this.update()},n),this)(),this},areModelsUpdating:function(){for(var e=0;e<this.models.length;e++)if(this.models[e].updating)return!0;return!1},update:function(){var e=this.getUneditableModel();if(this.active)this.$icon&&this.$icon.toggleClass("fi-lock",!1).toggleClass("fi-unlock",!1),this.$label&&this.$label.empty(),this.$timer&&this.$timer.empty();else if(this.updatingFailed)this.$icon&&this.$icon.toggleClass("fi-lock",!0).toggleClass("fi-unlock",!1),this.$label&&this.$label.html("Connection error"),this.$timer&&this.$timer.empty(),!this.areModelsUpdating()&&moment().diff(this.lastClicked,"seconds")>=7&&this.hide();else{if(e)if(this.$icon&&this.$icon.toggleClass("fi-lock",!0).toggleClass("fi-unlock",!1),this.hasArticleModelWithEditorLock())this.$label&&this.$label.html("Locked for non-editors"),this.$timer&&this.$timer.empty();else if(e.lock&&!e.userHasLock()){this.$label&&this.$label.html(e.lock.get("adminName"));var t=e.getRemainingLockTime();t>0?this.$timer&&this.$timer.html(t+" sec"):e.requestLock()}else this.$label&&this.$label.empty(),this.$timer&&this.$timer.empty();else this.$el.hasClass("AreaDisabled")?this.$icon&&this.$icon.toggleClass("fi-lock",!0).toggleClass("fi-unlock",!1):this.$icon&&this.$icon.toggleClass("fi-lock",!1).toggleClass("fi-unlock",!1),this.$label&&this.$label.empty(),this.$timer&&this.$timer.empty();!this.areModelsUpdating()&&moment().diff(this.lastClicked,"seconds")>=7&&this.hide()}return this},show:function(){var e=this;return this.hidden&&(this.lastClicked=moment(),this.update(),this.updateInterval=setInterval(function(){e.update()},250)),Inc.ToggleView.prototype.show.apply(this,arguments)},hide:function(){return this.hidden||(clearInterval(this.updateInterval),this.updateInterval=null),Inc.ToggleView.prototype.hide.apply(this,arguments)},click:function(e,t){return this.lastClicked=moment(),this.hidden&&(this.areModelsUpdating()||this.hasUneditableModels()||this.$el.hasClass("AreaDisabled"))&&this.show(),0!=this.$el.parents(".inc_editable_area").length||"undefined"!=typeof t&&t.oid==this.area.oid||this.area.click(e,this),dispatcher.trigger("inc:edit"),this},trash:function(){return this.models=[],this.area=null,this.$icon=null,this.$label=null,this.$timer=null,Inc.ToggleView.prototype.trash.apply(this,arguments)}}),Inc.Accessories.ConnectionErrorIndicator=Inc.ToggleView.extend({type:"ConnectionErrorIndicator",tagName:"figure",className:"ConnectionErrorIndicator",template:_.template($("#ConnectionError-Indicator-Template").html()),initialize:function(e){Inc.ToggleView.prototype.initialize.apply(this,arguments),this.$el.html(this.template(this))}}),Inc.Accessories.AdminMenuIndicator=Inc.ToggleView.extend({type:"AdminIndicator",className:"AdminIndicator",template:_.template($("#AdminIndicatorTemplate").html()),initialize:function(e){this.listenTo(dispatcher,"inc:AdminMenu:activate",this.activate),this.listenTo(dispatcher,"inc:AdminMenu:deactivate",this.deactivate),this.listenTo(inc.admin.taskManager,"processing:started",_.partial(this.setProcessing,!0)),this.listenTo(inc.admin.taskManager,"processing:stopped",_.partial(this.setProcessing,!1)),this.$el.html(this.template({})),this.$el.attr("unselectable","on")},events:function(){return{click:"click"}},click:function(e){return this.active?dispatcher.trigger("inc:AdminMenu:deactivate"):dispatcher.trigger("inc:AdminMenu:activate"),this},setProcessing:function(e){return this.$el.toggleClass("processing",e),this}}),Inc.Accessories.SectionUpDown=Inc.ToggleView.extend({type:"SectionUpDown",className:"SectionUpDown",template:_.template($("#SectionUpDown-Template").html()),previousLabel:"Previous Article",nextLabel:"Next Article",initialize:function(e){Inc.ToggleView.prototype.initialize.apply(this,arguments),this.$el.attr("id",this.oid),this.$el.html(this.template(this)),this.$previous=this.$(".PreviousButton"),this.$next=this.$(".NextButton"),e.controller&&this.listenTo(e.controller,"change:section",this.onSectionChange),e.previousSectionModel&&(this.$previous.toggleClass("hidden",!1),this.$previous.find(".Preview").html(this.extractPreviewContent(e.previousSectionModel))),e.nextSectionModel&&(this.$next.toggleClass("hidden",!1),this.$next.find(".Preview").html(this.extractPreviewContent(e.nextSectionModel))),this.listenTo(dispatcher,"window:scrolled",function(){this.hidden&&$(document).scrollTop()>0&&this.show()}),this.listenTo(dispatcher,"window:resized",this.reposition),this.reposition()},events:function(){return{"click .PreviousButton":"previous","click .NextButton":"next"}},previous:function(e){return this.trigger("goto:section:previous",this),this},next:function(e){return this.trigger("goto:section:next",this),this},show:function(){Inc.ToggleView.prototype.show.apply(this,arguments);var e=this;return this.$el.toggleClass("highlight",!0),Inc.Utilities.setCookie("incHasSeenHighlightedSectionNav",!0,360,{path:"/",domain:inc.i.cookieDomain}),setTimeout(function(){e.$el.toggleClass("highlight",!1)},5e3),this},extractPreviewContent:function(e){return'<div class="PreviewText">'+Inc.Utilities.stripTags(e.get("inc_homepage_headline")||e.get("inc_headline")||e.get("inc_title"))+"</div>"},onSectionChange:function(e,t,i){return this.$el.toggleClass("highlight",!1),t?(this.$previous.toggleClass("hidden",!1),this.$previous.find(".Preview").html(this.extractPreviewContent(t))):(this.$previous.toggleClass("hidden",!0),this.$previous.find(".Preview").empty()),i?(this.$next.toggleClass("hidden",!1),this.$next.find(".Preview").html(this.extractPreviewContent(i))):(this.$next.toggleClass("hidden",!0),this.$next.find(".Preview").empty()),(t||i)&&this.resizePreviewText(),this},reposition:function(){return"small"==inc.mqState?this.$el.css("top",$(window).height()-this.$el.height()-100+"px"):this.$el.css("top",.75*$(window).height()-this.$el.height()/2+"px"),this.resizePreviewText(),this},resizePreviewText:function(){var e=this.$previous.find(".PreviewText"),t=this.$next.find(".PreviewText");if(this.$previous.find(".Preview").css("display","block"),e.height()>70)for(var i=e.html().split(" ");e.height()>70&&i.length>0;)i.pop(),e.html(i.join(" ")+" ...");if(this.$previous.find(".Preview").css("display",""),this.$next.find(".Preview").css("display","block"),t.height()>70)for(var i=t.html().split(" ");t.height()>70&&i.length>0;)i.pop(),t.html(i.join(" ")+" ...");return this.$next.find(".Preview").css("display",""),this}}),Inc.Accessories.ProfileUpDown=Inc.Accessories.SectionUpDown.extend({type:"ProfileUpDown",previousLabel:"Previous",nextLabel:"Next",extractPreviewContent:function(e){return'<img class="updown-profile-badge" src="'+e.badgeURL+'" onerror="this.style.display=\'none\';"/><div class="PreviewText">'+Inc.Utilities.stripTags(e.previewText)+"</div>"}}),Inc.MenuItems.Archetype=Inc.ToggleView.extend({type:"MenuItem",tagName:"li",className:"MenuItem",template:_.template($("#MenuItemTemplate").html()),initialize:function(e){e||(e={}),this.itemType=this.itemType||null,this.name=e.name||null,this.label=e.label||null,this.tooltip=e.tooltip||null,this.iconOnly=_.isBoolean(e.iconOnly)?e.iconOnly:!1,this.iconClass=e.iconClass||null,this.iconClass&&!_.isArray(this.iconClass)&&(this.iconClass=[this.iconClass]),this.permissionRequired=_.isNumber(e.permissionRequired)?e.permissionRequired:null,this.preventClickPropagation=_.isBoolean(e.preventClickPropagation)?e.preventClickPropagation:!0,this.permissionRequired&&(!inc.user.admin||inc.user.admin.roleID>this.permissionRequired)&&(this.hidden=e.hidden=!0),Inc.ToggleView.prototype.initialize.apply(this,arguments),e.el||(this.$el.html(this.template(this)),this.$el.attr("unselectable","on"),this.itemType&&this.$el.toggleClass(this.itemType+this.className,!0),this.name&&this.$el.toggleClass(this.name+this.className,!0),this.iconOnly&&this.$el.toggleClass("iconOnly",!0)),this.$el.children(".ClickableBox").on("click",this.click.bind(this))},click:function(e){return!this.disabled&&e&&this.preventClickPropagation&&e.stopPropagation(),this},show:function(){return this.permissionRequired&&(!inc.user.admin||inc.user.admin.roleID>this.permissionRequired)?this:(Inc.ToggleView.prototype.show.apply(this,arguments),this)}}),Inc.MenuItems.List=Inc.MenuItems.Archetype.extend({itemType:"list",initialize:function(e){e||(e={}),this.items=e.items||[],!_.isArray(this.items)&&(this.items=[items]),Inc.MenuItems.Archetype.prototype.initialize.apply(this,arguments),this.$list=this.$(".AdminSubList")},add:function(e){return!_.isArray(e)&&(e=[e]),_.each(e,function(e){this.items.push(e),this.listenTo(e,"clicked",this.deactivate),this.$list.append(e.$el)},this),this},click:function(e){return!this.disabled&&e&&this.preventClickPropagation&&e.stopPropagation(),this.disabled?this:(this.active?this.deactivate():this.activate(),"Main"==this.name&&inc.admin.adminMenu.settingsMenu.deactivate(),"Settings"==this.name&&inc.admin.adminMenu.mainMenu.deactivate(),this.trigger("click",this),this)},trash:function(){return this.$list=null,_.each(this.items,function(e){e.trash()}),this.items=[],Inc.MenuItems.Archetype.prototype.trash.apply(this,arguments),this}}),Inc.MenuItems.Toggle=Inc.MenuItems.Archetype.extend({itemType:"toggle",initialize:function(e){e||(e={}),e.click&&(this.click=e.click),this.onaction=this.onaction||e.onaction||function(){},this.offaction=this.offaction||e.offaction||function(){},Inc.MenuItems.Archetype.prototype.initialize.apply(this,arguments)},click:function(e){return!this.disabled&&e&&this.preventClickPropagation&&e.stopPropagation(),this.disabled?this:(this.active?this.deactivate().offaction():this.activate().onaction(),this)}}),Inc.MenuItems.Action=Inc.MenuItems.Archetype.extend({itemType:"action",initialize:function(e){e||(e={}),this.action=this.action||e.action||function(){},Inc.MenuItems.Archetype.prototype.initialize.apply(this,arguments)},click:function(e){return!this.disabled&&e&&this.preventClickPropagation&&e.stopPropagation(),this.disabled?this:(this.trigger("clicked"),this.action(),this)}}),Inc.MenuItems.Setting=Inc.MenuItems.Archetype.extend({itemType:"setting",initialize:function(e){e.name&&(this.name=e.name),this.active=e.active=inc.user.getAdminSetting(this.name),Inc.MenuItems.Archetype.prototype.initialize.apply(this,arguments)},click:function(e){return!this.disabled&&e&&this.preventClickPropagation&&e.stopPropagation(),this.disabled?this:(this.active?this.deactivate():this.activate(),inc.user.admin&&inc.user.setAdminSetting(this.name,this.active),this)}}),Inc.MenuItems.StartEditing=Inc.MenuItems.Action.extend({initialize:function(e){Inc.MenuItems.Action.prototype.initialize.apply(this,arguments),this.listenTo(dispatcher,"inc:mode:edit:off",this.show),this.listenTo(dispatcher,"inc:mode:edit:on",this.hide)}}),Inc.MenuItems.PressAndHold=Inc.MenuItems.Archetype.extend({itemType:"pressandhold",initialize:function(e){e||(e={}),Inc.MenuItems.Archetype.prototype.initialize.apply(this,arguments),this.$el.children(".ClickableBox").off()}}),Inc.Menus.Admin=Inc.ToggleView.extend({type:"AdminMenu",className:"AdminMenu",template:_.template($("#AdminMenuTemplate").html()),initialize:function(e){if(e||(e={}),this.indicator=new Inc.Accessories.AdminMenuIndicator,this.suggestionsMenuItems=[],this.contextMenuItems=[],this.listenTo(dispatcher,"inc:AdminMenu:activate",this.activate),this.listenTo(dispatcher,"inc:AdminMenu:deactivate",this.deactivate),Modernizr.csstransitions&&this.$el.on("transitionend webkitTransitionEnd oTransitionEnd otransitionend MSTransitionEnd",_.bind(function(e){35==this.$el.height()?this.$el.toggleClass("fullyOpen",!0):this.$el.toggleClass("fullyOpen",!1)},this)),this.render(),this.mainMenu=new Inc.MenuItems.List({name:"Main",label:"Menu",tooltip:"Menu",iconClass:"fi-list-thumbnails",iconOnly:!0}),this.$(".MainMenuRegion").append(this.mainMenu.$el),this.listenTo(this.mainMenu,"click",this.onClick),this.mainMenu.add(new Inc.MenuItems.Action({name:"NewArticle",label:"New Article",iconClass:"fi-page-add",permissionRequired:3,action:function(){location.href=inc.applicationURL+"newarticle"}})),this.mainMenu.add(new Inc.MenuItems.Action({name:"NewSlideshow",label:"New Slideshow",iconClass:"fa-film",permissionRequired:3,action:function(){location.href=inc.applicationURL+"newslideshow"}})),this.mainMenu.add(new Inc.MenuItems.Action({name:"NewVideoPage",label:"New Video Page",iconClass:"fa-video-camera",permissionRequired:3,action:function(){location.href=inc.applicationURL+"newvideopage";
}})),"create"!=inc.i.mod&&this.mainMenu.add(new Inc.MenuItems.StartEditing({name:"StartEditing",label:"Edit Page",iconClass:"fi-page-edit",iconOnly:!1,permissionRequired:3,action:_.debounce(function(){!inc.isMode("edit")&&inc.editing.activate()},1e3,!0)})),"create"!=inc.i.mod&&this.mainMenu.add(new Inc.MenuItems.Action({name:"Sitemanager",label:"Sitemanager",iconClass:"fi-layout",permissionRequired:2,action:inc.admin.openInSitemanager.bind(inc.admin)})),"article"==inc.i.op&&"create"!=inc.i.mod)if(20==inc.i.inc_typid){var t=new Inc.MenuItems.Action({name:"NewSlideshow",label:"New Slideshow",tooltip:"New Slideshow",iconClass:"fa-film",iconOnly:!0,permissionRequired:3,preventClickPropagation:!1,action:function(){location.href=inc.applicationURL+"newslideshow"}});this.suggestionsMenuItems.push(t),this.$(".SuggestionsMenuRegion").append(t.$el)}else if(4==inc.i.inc_typid){var i=new Inc.MenuItems.Action({name:"NewVideoPage",label:"New Video Page",tooltip:"New Video Page",iconClass:"fa-video-camera",iconOnly:!0,permissionRequired:3,preventClickPropagation:!1,action:function(){location.href=inc.applicationURL+"newvideopage"}});this.suggestionsMenuItems.push(i),this.$(".SuggestionsMenuRegion").append(i.$el)}else{var n=new Inc.MenuItems.Action({name:"NewArticle",label:"New Article",tooltip:"New Article",iconClass:"fi-page-add",iconOnly:!0,permissionRequired:3,preventClickPropagation:!1,action:function(){location.href=inc.applicationURL+"newarticle"}});this.suggestionsMenuItems.push(n),this.$(".SuggestionsMenuRegion").append(n.$el)}if("create"!=inc.i.mod){var s=new Inc.MenuItems.StartEditing({name:"StartEditing",label:"Edit Page",tooltip:"Edit Page",iconClass:"fi-page-edit",iconOnly:!0,permissionRequired:3,preventClickPropagation:!1,action:_.debounce(function(){!inc.isMode("edit")&&inc.editing.activate()},1e3,!0)});this.suggestionsMenuItems.push(s),this.$(".SuggestionsMenuRegion").append(s.$el)}this.listenTo(dispatcher,"inc:mode:edit:off",this.emptyContextMenu),this.listenTo(dispatcher,"inc:mode:edit:on",this.displayEditingContextMenu);var o=new Inc.MenuItems.Toggle({name:"ArticleListing",label:"Article Listing",tooltip:"Article Listing",iconClass:"fi-page-multiple",iconOnly:!0,permissionRequired:3,preventClickPropagation:!1,onaction:inc.admin.openArticleListing.bind(inc.admin),offaction:inc.admin.closeArticleListing.bind(inc.admin)});o.listenTo(inc.admin,"articlelisting:open",function(){this.active||this.activate()}),o.listenTo(inc.admin,"articlelisting:close",function(){this.active&&this.deactivate()}),this.$(".SettingsMenuRegion").append(o.$el),this.settingsMenu=new Inc.MenuItems.List({name:"Settings",label:"Settings",tooltip:"Settings",iconClass:"fi-widget",iconOnly:!0}),this.$(".SettingsMenuRegion").append(this.settingsMenu.$el),this.settingsMenu.add([new Inc.MenuItems.Setting({name:"StartOpen",label:"Start Open",iconClass:"fi-eye"}),new Inc.MenuItems.Setting({name:"StartInEdit",label:"Start In Edit",iconClass:"fi-page-edit",permissionRequired:3})]),this.listenTo(this.settingsMenu,"click",this.onClick),$("body").on("click.inc:AdminMenu",function(e){this.mainMenu.deactivate(),this.settingsMenu.deactivate()}.bind(this)),this.$el.on("click.inc:AdminMenu",_.bind(this.onClick,this))},render:function(){return this.$el.html(this.template(this)),this.$el.attr("unselectable","on"),this.$el.children(".AdminContentContainer").append(this.indicator.$el),this.indicator.render(),this},emptyContextMenu:function(){return _.each(this.contextMenuItems,function(e){e.trash()}),this.contextMenuItems=[],this},displayEditingContextMenu:function(){if("create"==inc.i.mod){if("article"==inc.i.op){var e=new Inc.MenuItems.Action({name:"SaveAsDraft",label:"Save as Draft",iconClass:"fi-archive",preventClickPropagation:!1,action:_.debounce(function(){inc.collections.article.get("NewArticle-"+inc.incid).set({inc_activeflag:!1,inc_staid:1}),inc.editing.save()},1e3,!0)});this.contextMenuItems.push(e),this.$(".ContextMenuRegion").append(e.$el.toggleClass("ContextMenuItem",!0));var t=new Inc.MenuItems.Action({name:"Publish",label:"Publish",hidden:!0,iconClass:"fa-paper-plane-o",preventClickPropagation:!1,action:_.debounce(function(){inc.collections.article.get("NewArticle-"+inc.incid).set({inc_activeflag:!0,inc_staid:7}),inc.editing.save()},1e3,!0)});t.listenTo(inc.collections.article.get("NewArticle-"+inc.incid),"change change:dirty",function(e){e.publishable()?this.show():this.hide()}),this.contextMenuItems.push(t),this.$(".ContextMenuRegion").append(t.$el.toggleClass("ContextMenuItem",!0))}}else{var i=new Inc.MenuItems.Action({name:"ExitEditing",label:"Exit",iconClass:"fi-x",preventClickPropagation:!1,action:_.debounce(function(){inc.editing.deactivate()},1e3,!0)});this.contextMenuItems.push(i),this.$(".ContextMenuRegion").append(i.$el.toggleClass("ContextMenuItem",!0));var n=new Inc.MenuItems.Action({name:"SaveEdits",label:"Save",iconClass:"fi-save",preventClickPropagation:!1,action:_.debounce(function(){inc.editing.save()},1e3,!0)});if(n.listenTo(dispatcher,"inc:mode:edit:dirty",n.activate),n.listenTo(dispatcher,"inc:mode:edit:notdirty",n.deactivate),this.contextMenuItems.push(n),this.$(".ContextMenuRegion").append(n.$el.toggleClass("ContextMenuItem",!0)),"article"==inc.i.op){var s=inc.collections.article.get(inc.incid),t=new Inc.MenuItems.Action({name:"Publish",label:"Publish",hidden:!0,iconClass:"fa-paper-plane-o",preventClickPropagation:!1,action:_.debounce(function(){inc.editing.publish(s)},1e3,!0)});t.listenTo(s,"change change:dirty",function(e){s.publishable()?this.show():this.hide()}),s.trigger("change",s),this.contextMenuItems.push(t),this.$(".ContextMenuRegion").append(t.$el.toggleClass("ContextMenuItem",!0));var o=new Inc.MenuItems.Action({name:"Unpublish",label:"Unpublish",hidden:!s.get("inc_activeflag"),iconClass:"fi-archive",preventClickPropagation:!1,permissionRequired:2,action:_.debounce(function(){inc.editing.unpublish(s)},1e3,!0)});o.listenTo(s,"change change:dirty",function(e){e.get("inc_activeflag")&&!e.dirty?this.show():this.hide()}),this.contextMenuItems.push(o),this.$(".ContextMenuRegion").append(o.$el.toggleClass("ContextMenuItem",!0));var a=new Inc.MenuItems.Action({name:"DeleteArticle",label:"Delete",hidden:!s.isDeletableByUser(),model:s,iconClass:"fa-trash-o",iconOnly:!0,tooltip:"Delete Article",preventClickPropagation:!1,permissionRequired:3,action:_.debounce(function(){inc.editing.deleteArticle(this.model)},1e3,!0)});a.listenTo(s,"change",function(e){e&&e.isDeletableByUser()?this.show():this.hide()}),this.contextMenuItems.push(a),this.$(".ContextMenuRegion").append(a.$el.toggleClass("ContextMenuItem",!0))}}return this},activate:function(){if(this.active)return this;Modernizr.csstransitions?this.$el.toggleClass("fullyOpen",!1):this.$el.toggleClass("fullyOpen",!0),Inc.ToggleView.prototype.activate.apply(this,arguments);var e=inc.topNav.$el;return e.hasClass("unfixed")&&(e.toggleClass("animateMarginBottom",!0),e.on("transitionend webkitTransitionEnd oTransitionEnd otransitionend MSTransitionEnd",function(t){e.off("transitionend webkitTransitionEnd oTransitionEnd otransitionend MSTransitionEnd"),e.toggleClass("animateMarginBottom",!1),this.$el.height()>=35&&this.$el.toggleClass("fullyOpen",!0)}.bind(this))),$("#contentcontainer").toggleClass("adminOpen",!0),e.toggleClass("adminOpen",!0),$("#TopNav-Placeholder").toggleClass("adminOpen",!0),this},deactivate:function(){if(!this.active)return this;this.$el.toggleClass("fullyOpen",!1),this.mainMenu.deactivate(),this.settingsMenu.deactivate();var e=inc.topNav.$el;return e.hasClass("unfixed")&&(e.toggleClass("animateMarginBottom",!0),e.on("transitionend webkitTransitionEnd oTransitionEnd otransitionend MSTransitionEnd",function(t){e.off("transitionend webkitTransitionEnd oTransitionEnd otransitionend MSTransitionEnd"),e.toggleClass("animateMarginBottom",!1),this.$el.height()>=35&&this.$el.toggleClass("fullyOpen",!0)}.bind(this))),$("#contentcontainer").toggleClass("adminOpen",!1),e.toggleClass("adminOpen",!1),$("#TopNav-Placeholder").toggleClass("adminOpen",!1),Inc.ToggleView.prototype.deactivate.apply(this,arguments),this},onClick:function(e){return this.$el.toggleClass("fullyOpen",35==this.$el.height()&&this.active),this},trash:function(){return _.each(this.suggestionsMenuItems,function(e){e.trash()}),this.suggestionsMenuItems=[],this.emptyContextMenu(),this.indicator.trash(),this.indicator=null,$("body").off("click.inc:AdminMenu"),Inc.ToggleView.prototype.trash.apply(this,arguments)}}),Inc.Menus.MainFigureTypeSelector=Inc.ToggleView.extend({type:"MainFigureTypeSelector",className:"main-figure-type-selector",template:_.template($("#MainFigureTypeSelector-Template").html()),initialize:function(e){e||(e={}),this.items=[],Inc.ToggleView.prototype.initialize.apply(this,arguments),4!=this.model.get("inc_typid")&&(this.model.getFeaturedImageID()||this.model.getFeaturedVideoID()&&!this.model.hasVideoAtBottom())||(this.hidden=!0),this.$el.html(this.template(this)),this.$items=this.$(".items");var t=new Inc.MenuItems.Action({name:"select-image",label:"Image",active:!this.model.hasVideoAtTop()&&-1==(this.model.getID()+"").search("NewArticle"),action:_.debounce(function(){this.onSelectImage()},1e3,!0).bind(this)});this.items.push(t),t.$el.children(".ClickableBox").prepend('<div class="menu-item-triangle"></div>'),this.$items.append(t.$el);var i=new Inc.MenuItems.Action({name:"select-video",label:"Video",active:this.model.hasVideoAtTop()||0==(this.model.getID()+"").search("NewArticle"),action:_.debounce(function(){this.onSelectVideo()},1e3,!0).bind(this)});this.items.push(i),this.$items.append(i.$el),this.isVideoSet()?i.$(".MenuItemLabel").css("padding-right","4px"):i.$(".MenuItemLabel").css("padding-right","8px");var n=new Inc.MenuItems.List({name:"video-options",label:"Video Options",tooltip:"Video Options",hidden:!this.isVideoSet(),iconClass:"fa-ellipsis-h",iconOnly:!0});this.items.push(n),this.$items.append(n.$el),n.add(new Inc.MenuItems.Action({name:"change",label:"Change",iconClass:"fa-exchange",action:_.debounce(function(){this.model.executeWhenEditable(_.bind(this.onChangeVideoClick,this))},1e3,!0).bind(this)})),n.add(new Inc.MenuItems.Action({name:"remove",label:"Remove",iconClass:"fa-trash-o",action:_.debounce(function(){this.model.executeWhenEditable(_.bind(this.onRemoveVideoClick,this))},1e3,!0).bind(this)})),4!=this.model.get("inc_typid")&&18!=this.model.get("inc_typid")&&n.add(new Inc.MenuItems.Action({name:"move-to-bottom",label:"Move to bottom",iconClass:"fa-arrow-down",action:_.debounce(function(){this.model.executeWhenEditable(_.bind(this.onMoveToBottomClick,this))},1e3,!0).bind(this)})),this.listenTo(dispatcher,"document:click",function(){this.getItemByName("video-options").deactivate()}),this.listenTo(this.model,"change:videos change:inc_display_video_at_bottomflag",this.onVideosChange)},getItemByName:function(e){return _.findWhere(this.items,{name:e})},enable:function(){return this.disabled&&_.each(this.items,function(e){e.enable()}),Inc.ToggleView.prototype.enable.apply(this,arguments),this},disable:function(){return this.disabled||_.each(this.items,function(e){e.disable()}),Inc.ToggleView.prototype.disable.apply(this,arguments),this},isVideoSet:function(){return this.model.getFeaturedVideoID()&&!this.model.get("inc_display_video_at_bottomflag")&&!this.model.hasVideoAtBottom()&&!this.model.hasInlineVideos()},onVideosChange:function(e,t,i){var n=this.getItemByName("select-video"),s=this.getItemByName("video-options");return this.isVideoSet()&&this.isVideoSelected()?(n.$(".MenuItemLabel").css("padding-right","4px"),s.show()):(n.$(".MenuItemLabel").css("padding-right","8px"),s.hide()),this},onSelectImage:function(){return _.each(this.items,function(e){"select-image"==e.name?e.activate():e.deactivate()}),this.getItemByName("select-video").$(".MenuItemLabel").css("padding-right","8px"),this.getItemByName("video-options").hide(),this.trigger("select:image",this),this},isImageSelected:function(){for(var e=0;e<this.items.length;e++)if("select-image"==this.items[e].name&&this.items[e].active)return!0;return!1},onSelectVideo:function(){return _.each(this.items,function(e){"select-video"==e.name?e.activate():e.deactivate()}),this.isVideoSet()&&(this.getItemByName("select-video").$(".MenuItemLabel").css("padding-right","4px"),this.getItemByName("video-options").show()),this.trigger("select:video",this),this},isVideoSelected:function(){for(var e=0;e<this.items.length;e++)if("select-video"==this.items[e].name&&this.items[e].active)return!0;return!1},onChangeVideoClick:function(){return this.trigger("change:video",this),this},onRemoveVideoClick:function(){return this.model.set("videos",[]),this},onMoveToBottomClick:function(){return this.model.set("inc_display_video_at_bottomflag",!0),this},trash:function(){return this.picture&&this.picture.trash()&&(this.picture=null),_.each(this.items,function(e){e.trash()}),this.items=[],this.$items=null,Inc.ToggleView.prototype.trash.apply(this,arguments),this}}),Inc.Menus.MainFigureInsertion=Inc.ToggleView.extend({type:"MainFigureInsertion",className:"MainFigureInsertion",template:_.template($("#MainFigureInsertion-Menu-Template").html()),initialize:function(e){e||(e={});this.items=[],Inc.ToggleView.prototype.initialize.apply(this,arguments),this.$el.html(this.template(this)),this.$el.attr("unselectable","on"),this.$items=this.$(".Items");var t=new Inc.MenuItems.Action({name:"AddImage",label:"Add<br/>Image",iconClass:["fa-file","fa-file-image-o"],action:_.debounce(function(){this.trigger("click:add",this,"image")},1e3,!0).bind(this)});this.items.push(t),this.$items.append(t.$el),this.picture=new Inc.Views.Picture({el:this.$el.children(".picture")[0]})},enable:function(){return this.disabled&&_.each(this.items,function(e){e.enable()}),Inc.ToggleView.prototype.enable.apply(this,arguments),this},disable:function(){return this.disabled||_.each(this.items,function(e){e.disable()}),Inc.ToggleView.prototype.disable.apply(this,arguments),this},trash:function(){return this.picture&&this.picture.trash()&&(this.picture=null),_.each(this.items,function(e){e.trash()}),this.items=[],this.$items=null,Inc.ToggleView.prototype.trash.apply(this,arguments),this}}),Inc.Menus.MainFigureEdit=Inc.ToggleView.extend({type:"MainFigureEdit",className:"MainFigureEdit",initialize:function(e){e||(e={});var t=this;this.items=[],Inc.ToggleView.prototype.initialize.apply(this,arguments),this.$el.html('<div class="TopRightButtonSet"></div>'),this.$el.attr("unselectable","on");var i=this.model.get("inc_show_feature_imageflag");i="undefined"==typeof i?!1:!i;var n=function(e,t,i){var n=inc.collections.image.get(e.getFeaturedImageID());n&&n.croppable()?this.show():this.hide()},s=new Inc.MenuItems.Action({name:"CropImage",label:"Crop",model:this.model,iconClass:"fa-crop",iconOnly:!0,tooltip:"Crop",action:function(){t.trigger("crop:image",t,this)}});s.listenTo(this.model,"change:images",n),n.call(s,this.model),this.items.push(s),this.$(".TopRightButtonSet").append(s.$el);var o=new Inc.MenuItems.Toggle({name:"ToggleVisibility",label:"Toggle Visibility",model:this.model,active:i,iconClass:["fa-eye","fa-eye-slash"],iconOnly:!0,tooltip:"Toggle Visibility",onaction:function(){this.model.set("inc_show_feature_imageflag",!1,{origin:this})},offaction:function(){this.model.set("inc_show_feature_imageflag",!0,{origin:this})}});o.listenTo(this.model,"change:inc_show_feature_imageflag",function(e,t,i){i||(i={}),i.origin&&i.origin.oid==this.oid||(t?this.deactivate():this.activate())}),this.items.push(o),this.$(".TopRightButtonSet").append(o.$el);var a=new Inc.MenuItems.Action({name:"RemoveFeatureImage",label:"Remove",model:this.model,iconClass:"fa-trash-o",iconOnly:!0,tooltip:"Remove",action:function(){inc.admin.taskManager.askForConfirmation({messages:"Remove the Feature Image?",yesText:"REMOVE"},function(){this.model.set({images:[],inc_show_feature_imageflag:!0,inc_image_caption_override:null},{origin:this}),t.trigger("remove:featureimage",t)}.bind(this))}});this.items.push(a),this.$(".TopRightButtonSet").append(a.$el);var r=new Inc.MenuItems.Action({name:"AddCaption",label:"Add Caption",model:this.model,action:function(){t.trigger("add:caption",t,this)}});r.$(".MenuItemIcon").html('<div class="CaptionIcon" unselectable="on"><div class="CaptionIconLine CaptionIconLineOne" unselectable="on"></div><div class="CaptionIconLine CaptionIconLineTwo" unselectable="on"></div></div>'),this.items.push(r),this.$el.append(r.$el)},enable:function(){return this.disabled&&_.each(this.items,function(e){e.enable()}),Inc.ToggleView.prototype.enable.apply(this,arguments),this},disable:function(){return this.disabled||_.each(this.items,function(e){e.disable()}),Inc.ToggleView.prototype.disable.apply(this,arguments),this},trash:function(){return _.each(this.items,function(e){e.trash()}),this.items=[],this.model=null,Inc.ToggleView.prototype.trash.apply(this,arguments),this}}),Inc.Menus.VideoInsertion=Inc.Menus.Archetype.extend({type:"VideoInsertion",className:"VideoInsertion",tagName:"figure",template:_.template($("#MainFigureInsertion-Menu-Template").html()),initialize:function(e){e||(e={});Inc.Menus.Archetype.prototype.initialize.apply(this,arguments);var t=new Inc.MenuItems.Action({name:"AddVideo",label:"Add<br/>Video",iconClass:["fa-file","fa-file-video-o"],action:_.debounce(function(){this.model.executeWhenEditable(_.bind(function(){this.trigger("select:video",this)},this))},1e3,!0).bind(this)});this.items.push(t),this.$items.append(t.$el),this.picture=new Inc.Views.Picture({el:this.$el.children(".picture")[0]})},trash:function(){return this.picture&&this.picture.trash()&&(this.picture=null),Inc.Menus.Archetype.prototype.trash.apply(this,arguments),this}}),Inc.Menus.ArticleVideoBottom=Inc.Menus.Archetype.extend({type:"ArticleVideoBottomMenu",className:"article-video-bottom-menu",template:_.template($("#ArticleVideoBottomMenu-Template").html()),initialize:function(e){e||(e={}),Inc.Menus.Archetype.prototype.initialize.apply(this,arguments),this.$items=this.$(".items");var t=new Inc.MenuItems.Action({name:"add-video",label:"Add Video",active:!1,hidden:this.isVideoSet(),action:_.debounce(function(){this.model.executeWhenEditable(_.bind(this.onAddVideoClick,this))},1e3,!0).bind(this)});this.items.push(t),t.$el.children(".ClickableBox").prepend('<div class="menu-item-triangle"></div>'),this.$items.append(t.$el);var i=new Inc.MenuItems.List({name:"video-options",label:"Video Options",tooltip:"Video Options",hidden:!this.isVideoSet(),iconClass:"fa-ellipsis-h",iconOnly:!0});this.items.push(i),i.$el.children(".ClickableBox").prepend('<div class="menu-item-triangle"></div>'),this.$items.append(i.$el),i.add(new Inc.MenuItems.Action({name:"change",label:"Change",iconClass:"fa-exchange",action:_.debounce(function(){this.model.executeWhenEditable(_.bind(this.onChangeVideoClick,this))},1e3,!0).bind(this)})),i.add(new Inc.MenuItems.Action({name:"remove",label:"Remove",iconClass:"fa-trash-o",action:_.debounce(function(){this.model.executeWhenEditable(_.bind(this.onRemoveVideoClick,this))},1e3,!0).bind(this)})),i.add(new Inc.MenuItems.Action({name:"move-to-top",label:"Move to top",iconClass:"fa-arrow-up",action:_.debounce(function(){this.model.executeWhenEditable(_.bind(this.onMoveToTopClick,this))},1e3,!0).bind(this)})),this.listenTo(dispatcher,"document:click",function(){this.getItemByName("video-options").deactivate()}),this.listenTo(this.model,"change:inc_display_video_at_bottomflag change:videos",this.onVideosChange)},isVideoSet:function(){return this.model.hasVideoAtBottom()&&!this.model.hasVideoAtTop()&&!this.model.hasInlineVideos()},onVideosChange:function(e,t,i){var n=this.getItemByName("add-video"),s=this.getItemByName("video-options");return this.isVideoSet()?(n.hide(),s.show()):(n.show(),s.hide()),this},onAddVideoClick:function(){return this.trigger("add:video",this),this},onChangeVideoClick:function(){return this.trigger("change:video",this),this},onRemoveVideoClick:function(){return this.model.set("videos",[]),this},onMoveToTopClick:function(){return this.model.set("inc_display_video_at_bottomflag",!1),this}}),Inc.Menus.InlineVideo=Inc.Menus.Archetype.extend({type:"InlineVideoMenu",className:"inline-video-menu",template:_.template($("#InlineVideoMenu-Template").html()),initialize:function(e){e||(e={}),Inc.Menus.Archetype.prototype.initialize.apply(this,arguments),this.$items=this.$(".items");var t=new Inc.MenuItems.List({name:"video-options",label:"Video Options",tooltip:"Video Options",iconClass:"fa-ellipsis-h",iconOnly:!0});this.items.push(t),t.$el.children(".ClickableBox").prepend('<div class="menu-item-triangle"></div>'),this.$items.append(t.$el),t.add(new Inc.MenuItems.Action({name:"change",label:"Change",iconClass:"fa-exchange",action:_.debounce(function(){this.onChangeVideoClick()},1e3,!0).bind(this)})),t.add(new Inc.MenuItems.Action({name:"remove",label:"Remove",iconClass:"fa-trash-o",action:_.debounce(function(){this.onRemoveVideoClick()},1e3,!0).bind(this)})),this.listenTo(dispatcher,"document:click",function(){this.getItemByName("video-options").deactivate()})},onChangeVideoClick:function(){return this.trigger("change:video",this),this},onRemoveVideoClick:function(){return this.trigger("remove:video",this),this}}),Inc.Video.Player=Inc.ToggleView.extend({type:"VideoPlayer",className:"VideoPlayer",template:_.template($("#VideoPlayer-Template").html()),initialize:function(e){e||(e={}),Inc.ToggleView.prototype.initialize.apply(this,arguments),this.$el.attr("id",this.oid),this.parentID=e.parentID||void 0,this.adinfo=e.adinfo||{},this.hidePreroll=_.isBoolean(e.hidePreroll)?e.hidePreroll:_.isBoolean(this.hidePreroll)?this.hidePreroll:!1,this.listenTo(dispatcher,"inc:mode:edit:on",this.onEnterEditMode),this.listenTo(dispatcher,"inc:mode:edit:off",this.onExitEditMode),async.nextTick(_.bind(this.render,this))},assembleLiveRailCalls:function(){var e=["overlayon","inc","share"],t=this.adinfo.adzone.split("/");""!=t[4]&&e.push(t[4]),""!=t[3]&&e.push(t[3]),this.adinfo.channelArray.primary&&""!=this.adinfo.channelArray.primary&&e.push(this.adinfo.channelArray.primary[0]),this.adinfo.channelArray.sub&&""!=this.adinfo.channelArray.sub&&e.push(this.adinfo.channelArray.sub);var i=inc.collections.article.get(this.parentID);if(i){var n=inc.collections.articleseries.get(i.get("inc_serid"));n&&(e.push(n.get("ser_name")),e.push(n.get("ser_adzone")))}e=e.concat(this.model.tags);for(var s=0;s<e.length;s++)e[s]=encodeURIComponent(e[s]);var o="http://ad4.liverail.com/?",a="LR_PUBLISHER_ID=1562&",r="LR_ADUNIT=ov&",l="LR_SCHEMA=vast2-vpaid&",c="LR_FORMAT=application/javascript;application/x-shockwave-flash&",h="LR_VIDEO_ID="+encodeURIComponent(this.model.id)+"&",d="LR_TITLE="+encodeURIComponent(this.model.get("vid_title"))+"&",u="LR_TAGS="+e+"&",p="LR_DESCRIPTION="+encodeURIComponent(this.model.get("vid_description"))+"&";(new Date).getTime();return this.prerollCall=this.hidePreroll?"":o+a+l+c+h+d+p+u,this.overlayCall=this.hidePreroll?"":o+a+l+r+c+h+d+p+u,this},render:function(){if(!this.model)return this;this.assembleLiveRailCalls(),this.$el.html(this.template(this));var e="kaltura-video-player-"+this.oid;return kWidget.embed({targetId:e,wid:"_1034971",uiconf_id:30174211,flashvars:{moreViewOptionsComponent:{plugin:!0,iframeHTML5Js:"/js/kaltura/moreViewOptions.js?a",iframeHTML5Css:"/views/css/kaltura/moreViewOptions.css",showmore:!0,smallhed:this.model.get("vid_title"),watchurl:this.parentID+"_"+this.model.id},autoPlay:!1,vast:{numPreroll:"1",prerollInterval:"1",prerollUrl:this.prerollCall,overlayStartAt:"2",overlayInterval:"1",overlayUrl:this.overlayCall},IframeCustomPluginCss1:"http://images.inc.com/video/player_components.css?1"},cache_st:1408116528,entry_id:this.model.get("vid_kaltura_id")}),inc.isMode("edit")&&this.onEnterEditMode(),this},onEnterEditMode:function(){return this},onExitEditMode:function(){return this},reset:function(){return kWidget.destroy("kaltura-video-player-"+this.oid),this.undelegateEvents(),this.stopListening(),this.$el.off(),this.$el.empty(),this.model&&(this.model=null),_.each(this.gestureRecognizers,function(e){e.trash()}),this.gestureRecognizers=[],this.trigger("reset",this),this},trash:function(){return kWidget.destroy("kaltura-video-player-"+this.oid),Inc.ToggleView.prototype.trash.apply(this,arguments)}}),Inc.Video.VideoSectionPlayer=Inc.Video.Player.extend({type:"VideoSectionPlayer",className:"VideoPlayer VideoSectionPlayer",render:function(){this.assembleLiveRailCalls(),this.$el.html(this.template(this));var e="kaltura-video-player-"+this.oid;return kWidget.embed({targetId:e,wid:"_1034971",uiconf_id:30174211,flashvars:{theaterModeComponent:{plugin:!0,img:"http://images.inc.com/dev/video/theatre_expand.png",containerid:e,iframeHTML5Js:"/js/kaltura/theaterModeInfinite.js?a"},chaptersView:{chapterRenderer:"onChapterRendererSample1",layout:"vertical",overflow:!0},transcriptViewComponent:{plugin:!0,img:"http://images.inc.com/dev/video/view_transcript.png",iframeHTML5Js:"/js/kaltura/transcriptView.js?a",iframeHTML5Css:"/views/css/kaltura/infiniteTranscriptView.css"},segmentViewComponent:{plugin:!0,img:"http://images.inc.com/dev/video/view_vid_segments.png",iframeHTML5Js:"/js/kaltura/segmentView.js?a",iframeHTML5Css:"/views/css/kaltura/infiniteSegmentView.css"},moreViewOptionsComponent:{plugin:!0,iframeHTML5Js:"/js/kaltura/moreViewOptions.js?a",iframeHTML5Css:"/views/css/kaltura/moreViewOptions.css",showmore:!0,smallhed:this.model.get("vid_title"),watchurl:this.parentID+"_"+this.model.id},autoPlay:!1,vast:{numPreroll:"1",prerollInterval:"1",prerollUrl:this.prerollCall,overlayStartAt:"2",overlayInterval:"1",overlayUrl:this.overlayCall},IframeCustomPluginCss1:"http://images.inc.com/video/player_components.css?1"},cache_st:1408116528,entry_id:this.model.get("vid_kaltura_id")}),inc.isMode("edit")&&this.onEnterEditMode(),this}}),Inc.Video.VideoWatchSectionPlayer=Inc.Video.Player.extend({type:"VideoWatchSectionPlayer",className:"VideoPlayer VideoWatchSectionPlayer",render:function(){this.assembleLiveRailCalls(),this.$el.html(this.template(this));var e="kaltura-video-player-"+this.oid;return kWidget.embed({targetId:e,wid:"_1034971",uiconf_id:30174211,readyCallback:_.bind(this.onReady,this),flashvars:{chaptersView:{plugin:!0,chapterRenderer:"onChapterRendererSample1",layout:"vertical",overflow:!0},theaterModeComponent:{plugin:!0,img:"http://images.inc.com/dev/video/theatre_expand.png",iframeHTML5Js:"/js/kaltura/theaterMode.js?a"},transcriptViewComponent:{plugin:!0,img:"http://images.inc.com/dev/video/view_transcript.png",iframeHTML5Js:"/js/kaltura/transcriptView.js?a",iframeHTML5Css:"/views/css/kaltura/infiniteTranscriptView.css"},segmentViewComponent:{plugin:!0,img:"http://images.inc.com/dev/video/view_vid_segments.png",iframeHTML5Js:"/js/kaltura/segmentView.js?a",iframeHTML5Css:"/views/css/kaltura/infiniteSegmentView.css"},moreViewOptionsComponent:{plugin:!0,iframeHTML5Js:"/js/kaltura/moreViewOptions.js?a",iframeHTML5Css:"/views/css/kaltura/moreViewOptions.css",showmore:!1,smallhed:this.model.get("vid_title")},vast:{plugin:!0,numPreroll:"1",prerollInterval:"1",prerollStartWith:"1",prerollUrl:this.prerollCall,overlayStartAt:"3",overlayInterval:"300",overlayUrl:this.overlayCall,preSequence:"1"},IframeCustomPluginCss1:"http://images.inc.com/video/player_components.css?1"},cache_st:1408116528,entry_id:this.model.get("vid_kaltura_id")}),inc.isMode("edit")&&this.onEnterEditMode(),this},onReady:function(e){return this.trigger("ready",this),this}}),Inc.Video.InlinePlayer=Inc.Video.Player.extend({type:"InlinePlayer",className:"VideoPlayer InlinePlayer",initialize:function(e){e||(e={}),this.menu=null,this.area=e.area||null,Inc.Video.Player.prototype.initialize.apply(this,arguments)},render:function(){if(!this.model)return this;this.assembleLiveRailCalls(),this.menu&&this.menu.trash(),this.$el.html(this.template(this)),this.menu=new Inc.Menus.InlineVideo({hidden:!0}),this.$el.prepend(this.menu.$el),this.listenTo(this.menu,"change:video",this.changeVideo),this.listenTo(this.menu,"remove:video",this.removeVideo);var e="kaltura-video-player-"+this.oid;return kWidget.embed({targetId:e,wid:"_1034971",uiconf_id:30174211,flashvars:{moreViewOptionsComponent:{plugin:!0,iframeHTML5Js:"/js/kaltura/moreViewOptions.js?a",iframeHTML5Css:"/views/css/kaltura/moreViewOptions.css",showmore:!0,smallhed:this.model.get("vid_title"),watchurl:this.parentID+"_"+this.model.id},autoPlay:!1,vast:{numPreroll:"1",prerollInterval:"1",prerollUrl:this.prerollCall,overlayStartAt:"2",overlayInterval:"1",overlayUrl:this.overlayCall},IframeCustomPluginCss1:"http://images.inc.com/video/player_components.css?1"},cache_st:1408116528,entry_id:this.model.get("vid_kaltura_id")}),inc.isMode("edit")&&this.onEnterEditMode(),this},changeVideo:function(){this.$el.toggleClass("beingEdited",!0);var e=this.area.getInlineVideoPlayerWidget(this.$el.data("inlinePlayerIdentifier")),t=new Inc.Editors.VideoSelector({area:this.area,label:"Video",model:inc.collections.article.get(this.parentID),fieldname:"videos",editingInlineVideo:!0,ckeditorInstance:this.area.getBodycopyEditor().editorObject,closeWidget:_.bind(e.exit,e),inlinePlayerIdentifier:this.$el.data("inlinePlayerIdentifier")});return this.area.addEditor(t),t.click(),dispatcher.trigger("inc:edit"),this},removeVideo:function(){var e=this.area.getInlineVideoPlayerWidget(this.$el.data("inlinePlayerIdentifier"));e&&e.exit();var t=this.area.getBodycopyEditor();return t&&t.contentChanged(),this},reset:function(){return this.menu&&this.menu.trash(),Inc.Video.Player.prototype.reset.apply(this,arguments)},trash:function(){return this.menu&&this.menu.trash(),this.area=null,Inc.Video.Player.prototype.trash.apply(this,arguments)}}),Inc.Areas.Archetype=Inc.ToggleView.extend({type:"Area",initialize:function(e){var t=this;Inc.ToggleView.prototype.initialize.apply(this,arguments),this.editors=[],this.statusIndicator=new Inc.Accessories.StatusIndicator({area:this}),this.$editableAwaitingUnlock=null;var i=this.$el.hasClass("inc_editable")?this.$el.parent():this.$el,n=this.$el.data();n.statustop&&this.statusIndicator.$el.css("top",n.statustop),i.prepend(this.statusIndicator.$el),this.$el.data("areaID",this.oid),this.$el.on("click.inc:content:edit",".inc_editable",function(e){t.onEditableClick($(this),e)}),this.statusIndicator.render(),inc.areas.push(this)},events:function(){return{"click.inc:content:edit":"click"}},createEditor:function(e){var t=e.data(),i=_.findWhere(Inc.Editors,{ClassName:t.editorClass}),n=new i({area:this,$editable:e});return t.editorID=n.oid,this.addEditor(n),n},getEditor:function(e){return _.findWhere(this.editors,{oid:e})},addEditor:function(e){var t=this;if(e&&_.isUndefined(this.getEditor(e.oid))){var i=_.find(this.editors,function(t){return t.model&&e.model.oid==t.model.oid});i||(this.listenTo(e.model,"update:success",this.modelUpdateSuccess),this.listenTo(e.model,"update:fail",this.modelUpdateFail)),this.editors.push(e),inc.editing.addEditor(e),e.disabled&&!this.disabled&&this.disable(),this.trigger("editor:add",e,t),this.listenTo(e,"click",this.click),this.listenTo(e,"request:lock",this.lockRequested)}return this},hasUneditableModels:function(){for(var e=0;e<this.editors.length;e++){var t=this.editors[e];if(t.model&&!t.model.editable())return!0}return!1},modelUpdateSuccess:function(e){for(var t=!1,i=0;i<this.editors.length;i++){if(this.requestingLocks&&this.editors[i].model&&this.editors[i].model.updating)return this;this.editors[i].model&&this.editors[i].model.updating&&(t=!0)}return!t&&this.requestingLocks&&(this.requestingLocks=!1,this.trigger("requestingLocksFinished",this,!0)),this.disabled&&!this.hasUneditableModels()?this.enable():!this.disabled&&this.hasUneditableModels()&&this.disable(),this},modelUpdateFail:function(e){for(var t=!1,i=0;i<this.editors.length;i++)this.editors[i].model&&this.editors[i].model.updating&&(t=!0);return!t&&this.requestingLocks&&(this.requestingLocks=!1,this.trigger("requestingLocksFinished",this,!1)),this.disabled||this.disable(),this},disable:function(){
return this.disabled||_.each(this.editors,function(e){e.disabled||e.disable()}),Inc.ToggleView.prototype.disable.apply(this,arguments),this},enable:function(){return this.disabled&&(_.each(this.editors,function(e){e.disabled&&e.enable()}),this.$editableAwaitingUnlock&&(this.$editableAwaitingUnlock.trigger("click"),this.$editableAwaitingUnlock=null)),Inc.ToggleView.prototype.enable.apply(this,arguments)},click:function(e,t){return inc.isMode("edit")?($(e.target).hasClass("inc_editable")||0!=$(e.target).parents(".inc_editable").length||1!=this.$(".inc_editable").length||this.$(".inc_editable").trigger("click"),(this.disabled||!this.statusIndicator.hidden&&!this.statusIndicator.active)&&(this.hasUneditableModels()||this.disabled)&&_.each(this.editors,function(e){!e.model||e.model.updating||e.model.editable()||e.model.requestLock()}),0!=this.$(".StatusIndicator").length&&0!=$(e.target).parents(".StatusIndicator").length||$(e.target).hasClass("StatusIndicator")||"undefined"!=typeof t&&t.oid==this.statusIndicator.oid||this.statusIndicator.click(e,this),this):this},lockRequested:function(e,t){return this.requestingLocks?this:(_.each(this.editors,function(e){!e.model||e.model.updating||e.model.editable()||(this.requestingLocks||this.listenToOnce(this,"requestingLocksFinished",function(e,i){"undefined"!=typeof i&&i&&"undefined"!=typeof t&&t()}),this.requestingLocks=!0,_.findWhere(inc.editing.modelsBeingEdited,{oid:e.model.oid})||inc.editing.modelsBeingEdited.push(e.model),e.model.requestLock())},this),this)},onEditableClick:function(e,t){if(!inc.isMode("edit"))return this;_.each(inc.areas,function(e){e.$editableAwaitingUnlock=null});var i=e.data();return this.hasUneditableModels()||i.editorID?i.editorID||(this.$editableAwaitingUnlock=e):!_.isBoolean(i.editable)||i.editable?this.createEditor(e).click(t):inc.admin.notify("Sorry, the "+i.label+" is not editable."),this},activationAllowed:function(e){return!0},trash:function(){return inc.areas=_.reject(inc.areas,function(e){return e.oid==this.oid},this),_.each(this.editors,function(e){e.trash()}),this.editors=[],this.statusIndicator.trash(),this.statusIndicator=null,this.$editableAwaitingUnlock=null,Inc.ToggleView.prototype.trash.apply(this,arguments)}},{ClassName:"Archetype"}),Inc.Areas.ArticleAuthors=Inc.Areas.Archetype.extend({type:"ArticleAuthorsArea",authorsTemplate:_.template($("#AuthorCredits-Template").html().trim()),initialize:function(e){if(Inc.Areas.Archetype.prototype.initialize.apply(this,arguments),this.$authors=this.$(".Authors"),this.listenTo(this.model,"change:authors",function(){this.render()}),this.$el.on("transitionend webkitTransitionEnd oTransitionEnd otransitionend MSTransitionEnd",".authorbiobox",function(e){if(e.originalEvent&&"opacity"==e.originalEvent.propertyName){var t=parseInt($(this).css("opacity"));0==t?($(this).css("visibility","hidden"),clearTimeout(bioRead)):1==t&&($(this).css("visibility","visible"),trackEvent("bioview"),bioRead=setTimeout(function(){trackEvent("bioread")},2e3))}}),"create"==inc.i.mod)if(_.size(inc.user.admin.author)>0){inc.collections.author.add(inc.user.admin.author);var t=inc.collections.author.get(inc.user.admin.author.id).copyAttributes();t.sortorder=0,this.model.set("authors",[t])}else this.render([(new Inc.Models.Author).copyAttributes()]);var i=this;this.$authors.on("click",".BoxLeft",function(e){i.onBoxLeftClick.call(i,e,$(this))}),this.listenTo(dispatcher,"inc:mode:edit:on",this.onEnterEditMode),this.listenTo(dispatcher,"inc:mode:edit:off",this.onExitEditMode),inc.isMode("edit")&&this.onEnterEditMode()},onBoxLeftClick:function(e,t){var i=t;if("small"!=inc.mqState){if(i.hasClass("active"))return this;e.preventDefault(),i.toggleClass("active",!0),i.on("mouseleave",function(){i.toggleClass("active",!1),i.off()})}else i.toggleClass("active",!1);return this},onEnterEditMode:function(){return this.$authors.find(".authorbiobox").css("visibility","hidden"),"create"!=inc.i.mod&&0==this.model.get("authors").length&&this.render([(new Inc.Models.Author).copyAttributes()]),this},onExitEditMode:function(){return"create"!=inc.i.mod&&0==this.model.get("authors").length&&this.render([]),this},render:function(e){var e=e||this.model.get("authors");this.$authors.toggleClass("multiple",e.length>1),this.$authors.find("a").off(),this.$authors.find(".authorbiobox").off();var t=this.$authors.children(".ListEditorModal").detach();return 0==e.length?this.$authors.empty():(this.$authors.html(this.authorsTemplate({authors:e})),this.truncateBios()),t&&this.$authors.append(t),inc.isMode("edit")&&dispatcher.trigger("inc:editing:change:content"),this},truncateBios:function(){var e=this.model.get("authors");return e.length!=this.$authors.find(".authorcredit").length?this:(this.$authors.find(".authorcredit").each(function(t){var i=$($(this).find(".authorbio")[0]);i.height()>60?Inc.Utilities.truncate({$el:i,height:60,more:'&hellip;&nbsp;<a class="author-fullbio-link" href="'+inc.applicationURL+"author/"+e[t].aut_base_filelocation+'">Full bio</a>'}):0==i.find(".author-fullbio-link").length&&i.append('&nbsp;<a class="author-fullbio-link" href="'+inc.applicationURL+"author/"+e[t].aut_base_filelocation+'">Full bio</a>')}),this)}}),Inc.Areas.ArticleChannel=Inc.Areas.Archetype.extend({type:"ArticleChannel",className:"channel-article-header article-page-channel ArticleChannel inc_editable_area inc_editable",template:_.template($("#ArticleChannel-Template").html()),initialize:function(e){Inc.Areas.Archetype.prototype.initialize.apply(this,arguments),this.listenTo(this.model,"change:caption change:captionURL change:precaption change:precaptionURL",this.render),"create"==inc.i.mod&&this.render(),this.listenTo(dispatcher,"inc:mode:edit:on",this.onEnterEditMode),this.listenTo(dispatcher,"inc:mode:edit:off",this.onExitEditMode),inc.isMode("edit")&&this.onEnterEditMode()},onEnterEditMode:function(){return"create"!=inc.i.mod&&0==this.model.get("channels").length&&this.render(),this},onExitEditMode:function(){return"create"!=inc.i.mod&&0==this.model.get("channels").length&&this.render(),this},render:function(){var e=this.$(".channel-container"),t=e.children(".ListEditorModal").detach(),i=this.model.primaryChannel();return e.find("a").off(),e.html(this.template(this)),"VideoWatchPage"==inc.currentController.type?this.$el.css("background-color",""):i?this.$el.css("background-color","#"+(i.cnl_custom_color||i.cnl_calculated_color||"000000")):"Channel"==this.model.caption()?this.$el.css("background-color","#"+(new Inc.Models.Channel).get("cnl_custom_color")):this.$el.css("background-color","#000000"),t.length>0&&e.append(t),inc.isMode("edit")&&dispatcher.trigger("inc:editing:change:content"),this},changeModelTo:function(e){return this.model&&this.stopListening(e),this.model=e,this.listenTo(this.model,"change:caption change:captionURL change:precaption change:precaptionURL",this.render),this.$(".channel-container").data("contentId",this.model.getID()),this.render(),this}}),Inc.Areas.ArticleHeadlineAndAuthors=Inc.Areas.Archetype.extend({type:"ArticleHeadlineAndAuthorsArea",authorsTemplate:_.template($("#AuthorCredits-Authors-Template").html().trim()),twitterhandlesTemplate:_.template($("#AuthorCredits-TwitterHandles-Template").html().trim()),initialize:function(e){if(Inc.Areas.Archetype.prototype.initialize.apply(this,arguments),this.$authors=this.$(".Authors"),this.$twitterHandles=this.$(".TwitterHandles"),this.listenTo(this.model,"change:authors",function(){this.render()}),"create"==inc.i.mod)if(_.size(inc.user.admin.author)>0){inc.collections.author.add(inc.user.admin.author);var t=inc.collections.author.get(inc.user.admin.author.id).copyAttributes();t.sortorder=0,this.model.set("authors",[t])}else this.render([(new Inc.Models.Author).copyAttributes()]);this.listenTo(dispatcher,"inc:mode:edit:on",this.onEnterEditMode),this.listenTo(dispatcher,"inc:mode:edit:off",this.onExitEditMode),inc.isMode("edit")&&this.onEnterEditMode()},onEnterEditMode:function(){return"create"!=inc.i.mod&&0==this.model.get("authors").length&&this.render([(new Inc.Models.Author).copyAttributes()]),this},onExitEditMode:function(){return"create"!=inc.i.mod&&0==this.model.get("authors").length&&this.render([]),this},render:function(e){var e=e||this.model.get("authors");this.$authors.find("a").off();var t=this.$authors.children(".ListEditorModal").detach();0==e.length?this.$authors.empty():this.$authors.html(this.authorsTemplate({authors:e})),t&&this.$authors.append(t),e.length>0&&(e=_.reject(e,function(e){return!e.aut_twitter_id||""==e.aut_twitter_id})),this.$twitterHandles.find("a").off();var t=this.$twitterHandles.children(".ListEditorModal").detach();return 0==e.length?this.$twitterHandles.empty():this.$twitterHandles.html(this.twitterhandlesTemplate({authors:e})),t&&this.$twitterHandles.append(t),inc.isMode("edit")&&dispatcher.trigger("inc:editing:change:content"),this}}),Inc.Areas.ArticleBody=Inc.Areas.Archetype.extend({type:"ArticleBody",initialize:function(e){this.inlineVideoPlayers=[],Inc.Areas.Archetype.prototype.initialize.apply(this,arguments),this.generateInlineVideoPlayers(),this.listenTo(dispatcher,"inc:mode:edit:off",this.onExitEditMode)},generateInlineVideoPlayers:function(){if(0==this.model.get("videos").length||!this.model.hasInlineVideos())return this;var e=this;return this.$(".inlinevideo").each(function(){(function(e){var t=e.data("contentId"),i=inc.collections.video.get(t),n=_.find(this.inlineVideoPlayers,function(e){return e.model&&e.model.getID()==t});if(n&&(0==e.children().length||0==e.find(".kaltura-video-player").children().length)){var s=_.find(this.inlineVideoPlayers,function(e){return e.$el.data("contentId")==t});s&&s.reset(),this.inlineVideoPlayers=_.reject(this.inlineVideoPlayers,function(e){return e.$el.data("contentId")==t}),n=!1}if(!n){var o=new Inc.Video.InlinePlayer({el:e[0],model:i,area:this,parentID:this.model.getID(),adinfo:this.model.adinfo,hidePreroll:this.model.get("inc_hide_video_prerollflag")});this.inlineVideoPlayers.push(o)}}).call(e,$(this))}),this},resetInlineVideoPlayers:function(e){"undefined"==typeof e&&(e=!1);var t=[];return _.each(this.inlineVideoPlayers,function(i){e||i.$el.data("possiblyJustMoved")?(i.reset(),i.$el.data("possiblyJustMoved",!1)):t.push(i)}),this.inlineVideoPlayers=t,this},getBodycopyEditor:function(){var e=_.find(this.editors,function(e){return"inc_clean_text"==e.fieldname});return e},getInlineVideoPlayerWidget:function(e){var t=this.getBodycopyEditor();if(t){var i=_.find(t.editorObject.widgets.instances,function(t){return"inlinevideos"==t.name&&$(t.element.$).data("inlinePlayerIdentifier")==e});return i}return null},onExitEditMode:function(){this.resetInlineVideoPlayers(!0);for(var e=[],t=0;t<this.inlineVideoPlayers.length;t++){var i=this.inlineVideoPlayers[t];i.model?e.push(i):i.trash()}return this.inlineVideoPlayers=e,async.nextTick(_.bind(this.generateInlineVideoPlayers,this)),this}},{ClassName:"ArticleBody"}),Inc.Areas.ArticleDates=Inc.Areas.Archetype.extend({type:"ArticleDates",initialize:function(e){e||(e={}),Inc.Areas.Archetype.prototype.initialize.apply(this,arguments),this.listenTo(this.model,"change:inc_pubdate change:inc_custom_pubdate change:inc_typid",this.render)},render:function(){var e=this.model.get("inc_pubdate"),t=this.model.get("inc_custom_pubdate"),i=this.model.get("inc_typid"),n="";return t&&""!=t?n=t:e&&""!=e&&"0000-00-00 00:00:00"!=e&&3!=i&&6!=i&&(n="PUBLISHED ON: "+moment(e,Inc.Utilities.mysqlTimeFormat).format("MMM D, YYYY").toUpperCase()),this.$(".PubdateContent").html(n),this}}),Inc.Areas.ArticleMainFigure=Inc.Areas.Archetype.extend({type:"ArticleMainFigureArea",initialize:function(e){e||(e={}),Inc.Areas.Archetype.prototype.initialize.apply(this,arguments),this.originalPictureContent=this.$(".articleheaderimage").html(),this.picture=new Inc.Views.Picture({el:this.$(".articleheaderimage"),template:_.template($("#Article-MainPicture-Template").html())}),this.listenTo(this.picture,"loaded",this.onPictureLoaded),this.listenTo(this.picture,"croptool:trash",this.onCropToolTrashed),this.picture.loaded&&this.onPictureLoaded(),this.pictureImageID=null,this.$pancaption_default=this.$(".pancaption_default"),this.$pancaption_override=this.$(".pancaption_override"),this.$image_credits=this.$(".image_credits"),this.originalDefaultCaptionContent=this.$pancaption_default.html(),this.originalDefaultImageCredits=this.$image_credits.html(),this.insertMenu=new Inc.Menus.MainFigureInsertion({hidden:!0}),this.$el.prepend(this.insertMenu.$el),this.listenTo(this.insertMenu,"click:add",this.onAddClick),this.editMenu=null,this.$visibilityInfoOverlay=$('<div class="visibilityInfoOverlay" unselectable="on"><div class="Inner" unselectable="on"><div class="InfoContainer" unselectable="on"><div class="Info" unselectable="on"><div class="Icon fa-eye-slash" unselectable="on"></div><div class="InfoText" unselectable="on">This image is hidden. Click<br/>to adjust visibility.</div></div></div></div></div>'),this.$visibilityInfoOverlay.on("click.inc:content:edit",function(e){this.picture.$el.trigger("click")}.bind(this)),this.$el.prepend(this.$visibilityInfoOverlay),this.$pancaption_default.on("click.inc:content:edit",this.onDefaultCaptionClick.bind(this)),inc.i.article.inc_show_feature_imageflag||this.$el.toggleClass("featureImageHidden",!0);var t=this.model.get("images");t.length>0&&(this.pictureImageID=t[0].id),this.listenTo(this.model,"change:images",this.renderImage),this.listenTo(this.model,"change:inc_image_caption_override",this.renderCaptions),this.$el.on("focusout.inc:content:edit",".pancaption_override",this.renderCaptions.bind(this)),this.listenTo(this.model,"change:inc_show_feature_imageflag",function(e,t,i){t?this.show():this.hide(),this.$el.toggleClass("featureImageHidden",!t)}),("create"==inc.i.mod||this.hidden)&&(inc.isMode("edit")?this.$el.trigger("click"):this.listenToOnce(dispatcher,"inc:mode:edit:on",function(){this.$el.trigger("click")})),this.listenTo(dispatcher,"inc:mode:edit:on",this.onEnterEditMode),this.listenTo(dispatcher,"inc:mode:edit:off",this.onExitEditMode),inc.isMode("edit")&&this.onEnterEditMode()},onEnterEditMode:function(){return this.show(),0==this.picture.$el.find(".picture-inner span").length&&this.insertMenu.show(),this.$el.hasClass("featureImageHidden")&&this.$visibilityInfoOverlay.show(),this},onExitEditMode:function(){return(0==this.picture.$el.find(".picture-inner span").length||this.model&&!this.model.get("inc_show_feature_imageflag")||!this.model&&!inc.i.article.inc_show_feature_imageflag)&&this.hide(),this.insertMenu.hide(),this.editMenu&&this.editMenu.trash()&&(this.editMenu=null),this.renderCaptions(),this.picture.errored?this.hide():this.picture.resize(),this},startPictureEditing:function(){return 0!=this.picture.$el.find(".picture-inner span").length&&this.picture.$el.trigger("click"),this},activationAllowed:function(e){var t=this;if("ArticleModel"==e.model.type){if(!this.editMenu){var i=this.$pancaption_default.html().trim(),n=this.$pancaption_override.html().trim();this.editMenu=new Inc.Menus.MainFigureEdit({model:e.model,hidden:!0}),this.picture.$el.append(this.editMenu.$el),(""!=i.replace(/[\u200B-\u200D\uFEFF]/g,"")||""!=n.replace(/[\u200B-\u200D\uFEFF]/g,""))&&_.findWhere(this.editMenu.items,{name:"AddCaption"}).hide(),this.listenTo(this.editMenu,"crop:image",this.onCropClick),this.listenTo(this.editMenu,"remove:featureimage",this.onRemoveFeatureImage),this.listenTo(this.editMenu,"add:caption",this.onAddCaptionClick),this.$visibilityInfoOverlay.hide()}if("ImageEditor"==e.type&&this.editMenu&&!_.findWhere(this.editMenu._listeningTo,{type:"ImageEditor"})&&this.editMenu.listenTo(e,"change:active",function(e,i){i?this.hide():t.insertMenu.hidden&&this.show()}),this.insertMenu&&this.insertMenu.hidden&&this.editMenu&&this.editMenu.hidden&&(this.picture&&this.picture.cropTool&&this.picture.cropTool.active||this.editMenu.show(),"ImageEditor"==e.type))return!1}return!0},onAddClick:function(e,t){return"image"==t&&this.picture.$el.trigger("click"),this},onRemoveFeatureImage:function(e){return this.editMenu&&this.editMenu.trash()&&(this.editMenu=null),this},onAddCaptionClick:function(e,t){var i=this.$pancaption_default.html().trim(),n=this.$pancaption_override.html().replace("<p></p>","").replace("<p><br></p>","").replace("<br>","").replace("<p>&nbsp;</p>","").trim();return""==i.replace(/[\u200B-\u200D\uFEFF]/g,"")&&""==n.replace(/[\u200B-\u200D\uFEFF]/g,"")&&(this.$(".pancaption").show(),this.$pancaption_override.show().focus().trigger("click"),this.$pancaption_override.trigger("focusCursor"),t.hide()),this},onCropClick:function(e,t){return this.editMenu.hide(),this.picture.crop(inc.collections.image.get(this.model.getFeaturedImageID()),970/450),this.getEditor(this.picture.cropTool.oid)||(this.addEditor(this.picture.cropTool),this.listenTo(this.picture.cropTool,"change:active",function(e,t,i){t||this.onExitCropping()}),this.listenTo(this.picture.cropTool,"accept",function(e,t){this.model.setFeaturedImage(t,e)})),this},onExitCropping:function(){return this.editMenu&&this.editMenu.show(),this.renderImage(),this},enable:function(){return this.disabled&&(this.insertMenu.enable(),this.editMenu&&this.editMenu.enable()),Inc.Areas.Archetype.prototype.enable.apply(this,arguments),this},disable:function(){return this.disabled||(this.insertMenu.disable(),this.editMenu&&this.editMenu.disable()),Inc.Areas.Archetype.prototype.disable.apply(this,arguments),this},onDefaultCaptionClick:function(){return _.findWhere(this.editors,{type:"InlineText"})?(this.$pancaption_default.hide(),this.$pancaption_override.show().focus().trigger("click")):(this.$pancaption_override.data("reshow",!0),this.$pancaption_override.trigger("click")),this},renderImage:function(e,t,i){if(i||(i={}),!this.model.ready)return this;var n=this.model.getFeaturedImageID(),s=null,o=_.isString(n),a=o?970/450:void 0;n&&(s=inc.collections.image.get(n));var r=this.$(".articleheaderimage");this.picture&&this.picture.reset();var l;return s?(l={model:s,template:_.template($("#Article-MainPicture-Template").html()),el:r[0],aspectRatio:a},this.picture?this.picture.reset(l):(this.picture=new Inc.Views.Picture(l),this.listenTo(this.picture,"loaded",this.onPictureLoaded),this.listenTo(this.picture,"croptool:trash",this.onCropToolTrashed)),this.$pancaption_default.html(s.get("img_caption")),_.isString(s.get("img_custom_credit"))&&s.get("img_custom_credit").trim().length>0?this.$image_credits.html("IMAGE: "+s.get("img_custom_credit")):s.get("photographers")&&s.get("photographers").length>0?this.$image_credits.html("IMAGE: "+s.get("photographers").join(", ")):o||s.get("img_gettyflag")?this.$image_credits.html("IMAGE: Getty Images"):this.$image_credits.empty(),this.renderCaptions.apply(this,arguments)):i.origin&&0==i.origin.oid.search("MenuItem")?(r.find(".picture-inner").remove(),l={template:_.template($("#Article-MainPicture-Template").html()),el:r[0],aspectRatio:a},this.picture?this.picture.reset(l):(this.picture=new Inc.Views.Picture(l),this.listenTo(this.picture,"loaded",this.onPictureLoaded),this.listenTo(this.picture,"croptool:trash",this.onCropToolTrashed)),this.$image_credits.empty(),this.renderCaptions.apply(this,arguments),this.$(".pancaption").hide()):(r.prepend(this.originalPictureContent),l={template:_.template($("#Article-MainPicture-Template").html()),el:r[0],aspectRatio:a},this.picture?this.picture.reset(l):(this.picture=new Inc.Views.Picture(l),this.listenTo(this.picture,"loaded",this.onPictureLoaded),this.listenTo(this.picture,"croptool:trash",this.onCropToolTrashed)),this.$pancaption_default.html(this.originalDefaultCaptionContent),this.$image_credits.html(this.originalDefaultImageCredits),this.renderCaptions.apply(this,arguments)),this.picture.loaded&&this.onPictureLoaded(),0==this.picture.$el.find(".picture-inner span").length?(this.picture.hide(),inc.isMode("edit")&&this.insertMenu.show(),this.picture.resize()):(this.insertMenu.hide(),this.picture.show()),this.trigger("rendered:image",this),this},onPictureLoaded:function(){return this.picture.errored&&!inc.isMode("edit")||!this.model.get("inc_show_feature_imageflag")||this.model.hasVideoAtTop()?this.hide():this.show(),this},onCropToolTrashed:function(e,t){return this.editors=_.reject(this.editors,function(e){return e.oid==t}),this},renderCaptions:function(e,t,i){i||(i={}),inc.isMode("edit")||this.$pancaption_override.html(this.model.get("inc_image_caption_override"));var n=this.$pancaption_default.html().trim(),s=this.$pancaption_override.html().replace("<p></p>","").replace("<p><br></p>","").replace("<br>","").replace("<p>&nbsp;</p>","").trim();if(""!=s.replace(/[\u200B-\u200D\uFEFF]/g,"")?(this.$pancaption_default.hide(),this.$pancaption_override.show(),this.$(".pancaption").show()):""!=n.replace(/[\u200B-\u200D\uFEFF]/g,"")?(this.$pancaption_override.hide(),this.$pancaption_default.show(),this.$(".pancaption").show()):(this.$pancaption_default.hide(),this.$pancaption_override.hide(),""==this.$image_credits.html().trim().replace("IMAGE: ","")&&this.$(".pancaption").hide()),this.editMenu){var o=_.findWhere(this.editMenu.items,{name:"AddCaption"});""==n.replace(/[\u200B-\u200D\uFEFF]/g,"")&&""==s.replace(/[\u200B-\u200D\uFEFF]/g,"")?o&&o.show():o&&o.hide()}return this.trigger("rendered:captions",this,n,s),this},trash:function(){return this.insertMenu.trash()&&(this.insertMenu=null),this.editMenu&&this.editMenu.trash()&&(this.editMenu=null),this.$pancaption_default=null,this.$pancaption_override=null,Inc.Areas.Archetype.prototype.trash.apply(this,arguments)}}),Inc.Areas.ArticleVideo=Inc.Areas.Archetype.extend({type:"ArticleVideo",className:"ArticleVideo",tagName:"figure",template:_.template($("#ArticleVideo-Template").html()),videoPlayerClass:Inc.Video.Player,initialize:function(e){e||(e={}),Inc.Areas.Archetype.prototype.initialize.apply(this,arguments),this.video=null,this.videoModel=this.videoModel||inc.collections.video.get(this.model.getFeaturedVideoID()),this.videoInsertMenu=null,this.editMenu=null,this.statusIndicator.editorAdded(this,this),this.listenTo(this.model,"change:videos change:inc_display_video_at_bottomflag",this.onVideosChange),this.listenTo(dispatcher,"inc:mode:edit:on",this.onEnterEditMode),this.listenTo(dispatcher,"inc:mode:edit:off",this.onExitEditMode),this.render()},isVideoSet:function(){return this.model.hasVideoAtTop()&&!this.model.hasVideoAtBottom()&&!this.model.hasInlineVideos()},canAddVideo:function(){return!this.model.hasVideoAtBottom()&&!this.model.hasInlineVideos()},render:function(){return this.$el.append(this.template(this)),this.isVideoSet()?(this.video=new this.videoPlayerClass({model:this.videoModel,parentID:this.model.getID(),adinfo:this.model.adinfo,hidePreroll:this.model.get("inc_hide_video_prerollflag")}),this.$el.prepend(this.video.$el)):inc.isMode("edit")&&!this.videoInsertMenu&&(this.videoInsertMenu=new Inc.Menus.VideoInsertion({model:this.model}),this.$el.prepend(this.videoInsertMenu.$el),this.listenTo(this.videoInsertMenu,"select:video",this.onSelectChangeVideo)),inc.isMode("edit")&&this.onEnterEditMode(),this},onSelectChangeVideo:function(){if(!this.canAddVideo())return inc.admin.notify("You must remove any pre-existing videos attached to this article before adding a video here."),this;var e=new Inc.Editors.VideoSelector({area:this,label:"Video",model:this.model,fieldname:"videos"});return this.addEditor(e),this.model.editable()?this.model.set("inc_display_video_at_bottomflag","ArticleVideoBottom"==this.type):this.listenToOnce(this.model,"update:success update:fail",function(){this.model.editable()&&this.model.set("inc_display_video_at_bottomflag","ArticleVideoBottom"==this.type)}),e.click(),this.$(".VideoInsertion, .VideoPlayer").toggleClass("beingEdited",!0),this.listenTo(e,"change:active",function(e){e?this.$(".VideoInsertion, .VideoPlayer").toggleClass("beingEdited",!0):this.$(".VideoInsertion, .VideoPlayer").toggleClass("beingEdited",!1)}),this},onEnterEditMode:function(){return this.isVideoSet()||this.videoInsertMenu||(this.videoInsertMenu=new Inc.Menus.VideoInsertion({model:this.model}),this.$el.prepend(this.videoInsertMenu.$el),this.listenTo(this.videoInsertMenu,"select:video",this.onSelectChangeVideo)),this},onExitEditMode:function(){return!this.isVideoSet()&&this.videoInsertMenu&&(this.videoInsertMenu.trash(),this.videoInsertMenu=null),this.editMenu&&this.editMenu.trash(),this.editMenu=null,this},onVideosChange:function(){var e=this;return this.isVideoSet()?(this.$el.css("height",this.$el.outerHeight()+"px"),this.videoInsertMenu&&(this.videoInsertMenu.trash(),this.videoInsertMenu=null),this.video&&this.video.trash(),this.videoModel=inc.collections.video.get(this.uniqueVideo?inc.i.baseURL.split("/")[4].split("_")[1]:this.model.getFeaturedVideoID()),this.$(".video-description-container").remove(),this.$el.append(this.template(this)),this.video=new this.videoPlayerClass({model:this.videoModel,parentID:this.model.getID(),adinfo:this.model.adinfo,hidePreroll:this.model.get("inc_hide_video_prerollflag")}),this.editMenu?this.editMenu.$el.after(this.video.$el):this.$el.prepend(this.video.$el),inc.isMode("edit")&&this.onEnterEditMode(),async.nextTick(function(){e.$el.css("height","")})):(inc.isMode("edit")&&!this.videoInsertMenu&&"ArticleVideoBottom"!=this.type&&(this.videoInsertMenu=new Inc.Menus.VideoInsertion({model:this.model}),this.$el.prepend(this.videoInsertMenu.$el),this.listenTo(this.videoInsertMenu,"select:video",this.onSelectChangeVideo)),this.video&&this.video.trash(),this.video=null,this.videoModel=null,this.$(".video-description-container").remove(),inc.isMode("edit")&&this.onEnterEditMode()),this},trash:function(){return this.videoInsertMenu&&this.videoInsertMenu.trash(),this.videoInsertMenu=null,this.video&&this.video.trash(),this.video=null,this.editMenu&&this.editMenu.trash(),this.editMenu=null,Inc.Areas.Archetype.prototype.trash.apply(this,arguments)}}),Inc.Areas.ArticleVideoBottom=Inc.Areas.ArticleVideo.extend({type:"ArticleVideoBottom",className:"ArticleVideo ArticleVideoBottom",template:_.template($("#ArticleVideoBottom-Template").html()),isVideoSet:function(){return this.model.hasVideoAtBottom()&&!this.model.hasVideoAtTop()&&!this.model.hasInlineVideos()},canAddVideo:function(){return!this.model.hasVideoAtTop()&&!this.model.hasInlineVideos()},render:function(){return this.isVideoSet()&&(this.$el.append(this.template(this)),this.video=new this.videoPlayerClass({model:this.videoModel,parentID:this.model.getID(),adinfo:this.model.adinfo,hidePreroll:this.model.get("inc_hide_video_prerollflag")}),this.$el.prepend(this.video.$el)),inc.isMode("edit")&&this.onEnterEditMode(),this},onEnterEditMode:function(){return this.editMenu||(this.editMenu=new Inc.Menus.ArticleVideoBottom({model:this.model}),this.$el.prepend(this.editMenu.$el),this.listenTo(this.editMenu,"add:video change:video",this.onSelectChangeVideo)),this}}),Inc.Areas.VideoWatchVideo=Inc.Areas.ArticleVideo.extend({type:"VideoWatchVideo",className:"ArticleVideo VideoWatchVideo",videoPlayerClass:Inc.Video.VideoWatchSectionPlayer,initialize:function(e){e||(e={}),Inc.Areas.Archetype.prototype.initialize.apply(this,arguments),this.video=null,this.uniqueVideo=inc.i.baseURL.indexOf("/watch/")>-1?!0:!1,this.videoModel=inc.collections.video.get(this.uniqueVideo?inc.i.baseURL.split("/")[4].split("_")[1]:this.model.getFeaturedVideoID()),this.videoInsertMenu=null,this.editMenu=null,this.statusIndicator.editorAdded(this,this),this.listenTo(this.model,"change:videos",this.onVideosChange),this.listenTo(dispatcher,"inc:mode:edit:on",this.onEnterEditMode),this.listenTo(dispatcher,"inc:mode:edit:off",this.onExitEditMode),this.render()},isVideoSet:function(){return this.uniqueVideo||this.model.getFeaturedVideoID()},changeModelTo:function(e){return this.model&&this.stopListening(e),this.model=e,this.model.getFeaturedVideoID()&&inc.collections.video.add(_.findWhere(this.model.get("videos"),{id:this.model.getFeaturedVideoID()})),this.listenTo(this.model,"change:videos",this.onVideosChange),this.onVideosChange(),this}}),Inc.Areas.ArticleMetaData=Inc.Areas.Archetype.extend({type:"ArticleMetaDataArea",className:"ArticleMetaDataArea",template:_.template($("#ArticleMetaData-Area-Template").html()),initialize:function(e){this.active=!1,Inc.Areas.Archetype.prototype.initialize.apply(this,arguments),this.$el.append(this.template(this)),this.$showHideButton=this.$(".ShowHideButton"),this.$inner=this.$(".InnerContainer"),this.$content=this.$(".InnerContentContainer"),this.statusIndicator.$el.detach(),this.$content.prepend(this.statusIndicator.$el),this.$showHideButton.on("click.inc:content:edit",function(e){this.active?this.deactivate():this.activate()}.bind(this));var t;t="create"==inc.i.mod?inc.collections.article.get("NewArticle-"+inc.incid):inc.collections.article.get(inc.incid),this.model=t;var i=new Inc.Editors.TextInput({model:t,label:t.labels().inc_homepage_headline,fieldname:"inc_homepage_headline",dontRequestLockOnInit:!0});this.addEditor(i),this.$content.children(".row1").children(".rowinnerleft").append(i.$el);var n=new Inc.Editors.TextInput({model:t,label:t.labels().inc_homepage_headline_ab_test,fieldname:"inc_homepage_headline_ab_test",dontRequestLockOnInit:!0});this.addEditor(n),this.$content.children(".row1").children(".rowinnerleft").append(n.$el);var s=new Inc.Editors.TextArea({model:t,label:t.labels().inc_twitter_headline,fieldname:"inc_twitter_headline",dontRequestLockOnInit:!0});this.addEditor(s),this.$content.children(".row1").children(".rowinnerleft").append(s.$el);var o=new Inc.Editors.TextInput({model:t,label:t.labels().inc_canonical_url,fieldname:"inc_canonical_url",dontRequestLockOnInit:!0});if(this.addEditor(o),this.$content.children(".row1").children(".rowinnerleft").append(o.$el),inc.user.admin.roleID<=2){var a=new Inc.Editors.TextInput({model:t,label:t.labels().inc_meta_keywords,fieldname:"inc_meta_keywords",dontRequestLockOnInit:!0});this.addEditor(a),this.$content.children(".row1").children(".rowinnerleft").append(a.$el)}var r=new Inc.Editors.TextInput({model:t,label:t.labels().inc_filelocation,fieldname:"inc_filelocation",dontRequestLockOnInit:!0});this.addEditor(r),inc.user.admin.roleID>2&&r.$("input").attr("disabled",!0).css("visibility","hidden"),this.$content.children(".row1").children(".rowinnerleft").append(r.$el),r.originalValue=t.get("inc_filelocation"),r.displayedWarning=!1,r.$input.on("input.inc:content:edit",function(e){!r.displayedWarning&&t.get("inc_activeflag")&&(inc.admin.notify("WARNING<br/><br/>Changing the File Location on a published article will cause links to it to break."),r.displayedWarning=!0)});var l=new Inc.Editors.TextArea({model:t,label:t.labels().inc_homepage_deck,fieldname:"inc_homepage_deck",dontRequestLockOnInit:!0});this.addEditor(l),this.$content.children(".row1").children(".rowinnerright").append(l.$el);var c=new Inc.Editors.Checkbox({model:t,label:t.labels().inc_copyeditedflag,fieldname:"inc_copyeditedflag",dontRequestLockOnInit:!0});if(this.addEditor(c),this.$content.children(".row1").children(".rowinnerright").append(c.$el),inc.user.admin.roleID<=2){var h=new Inc.Editors.Checkbox({model:t,label:t.labels().inc_lock_articleflag,fieldname:"inc_lock_articleflag",dontRequestLockOnInit:!0});this.addEditor(h),this.$content.children(".row1").children(".rowinnerright").append(h.$el);var d=new Inc.Editors.TextInput({model:t,label:t.labels().inc_rubric,fieldname:"inc_rubric",dontRequestLockOnInit:!0});this.addEditor(d),this.$content.children(".row1").children(".rowinnerright").append(d.$el)}var u=inc.collections.articleseries.map(function(e){return{value:e.get("id"),name:e.get("ser_name")}}),p=new Inc.Editors.Select({model:t,options:u,label:t.labels().inc_serid,fieldname:"inc_serid",dontRequestLockOnInit:!0});this.addEditor(p),this.$content.children(".row1").children(".rowinnerright").append(p.$el);var m=inc.collections.partner.map(function(e){return{value:e.get("id"),name:e.get("prt_partner")}}),f=new Inc.Editors.Select({model:t,options:m,label:t.labels().inc_prtid,fieldname:"inc_prtid",dontRequestLockOnInit:!0
});this.addEditor(f),this.$content.children(".row1").children(".rowinnerright").append(f.$el),this.$el.on("click.inc:content:edit",".edit-pubdate",_.bind(this.onEditPubdateClick,this)),"create"==inc.i.mod?(this.deactivate(),this.$showHideButton.html('<span class="ButtonText">SHOW METADATA</span>'),this.$inner.hide()):this.activate(),this.listenToOnce(this.model,"update:success update:fail",this.onModelUpdated),t.editable()&&inc.isMode("edit")&&this.onModelUpdated()},onModelUpdated:function(){return this.model.editable()&&inc.isMode("edit")&&_.each(this.editors,function(e){e.model.editable()&&e.activate()}),this},activate:function(){var e=this;return this.active||(this.$showHideButton.html('X <span class="ButtonText">HIDE METADATA</span>'),this.$inner.show(),setTimeout(function(){Inc.Areas.Archetype.prototype.activate.apply(e,arguments)},1)),this},deactivate:function(){if(this.active){this.$showHideButton.html('<span class="ButtonText">SHOW METADATA</span>');var e=function(){this.$inner.hide()}.bind(this);Modernizr.csstransitions?setTimeout(function(){e()},200):e()}return Inc.Areas.Archetype.prototype.deactivate.apply(this,arguments)},onEditPubdateClick:function(){return this.trigger("click:editpubdate",this),this},trash:function(){return this.$showHideButton.off(),this.$inner=null,this.$content=null,Inc.Areas.Archetype.prototype.trash.apply(this,arguments)}}),Inc.Areas.ArticleListing=Inc.Areas.Archetype.extend({type:"ArticleListingArea",className:"ArticleListing",template:_.template($("#ArticleListing-Template").html()),initialize:function(e){if(e||(e={}),Inc.Areas.Archetype.prototype.initialize.apply(this,arguments),this.$el.append(this.template({})),this.$menubar=this.$(".MenuBar"),this.$searchForm=this.$(".SearchForm"),this.$search=this.$searchForm.children(".Search"),this.$sortbutton=this.$(".SortButton"),this.$clearbutton=this.$(".ClearButton"),this.$filterbar=this.$(".FilterBar"),this.$listContainer=this.$(".ListContainer"),this.$paddingWrapper=this.$(".ListContainerPaddingWrapper"),this.$list=this.$listContainer.children(".List"),this.$sortOrderList=this.$listContainer.children(".SortOrderList"),this.$loadingIndicator=this.$(".AjaxLoaderListItem"),this.$noresults=$('<li class="NoResultsFound">No Results Found</li>'),this.$currentSortOrderLabel=this.$(".CurrentSortOrderLabel"),this.$(".CloseButton").click(function(){this.trigger("click:close",this)}.bind(this)),0==inc.collections.channel.size()&&inc.admin.taskManager.loadChannelData(),0==inc.collections.author.size()&&inc.admin.taskManager.loadAuthorData(),0==inc.collections.editor.size()&&inc.admin.taskManager.loadEditorData(),this.articles=new Inc.Collections.Article,this.subviews=[],this.lastSearchValue="",this.lastSearchInput=moment(),this.searchTimers=[],this.xhr=null,this.noMoreResults=!1,this.connectionError=null,this.sorting={name:"time_updated",direction:"DESC"},this.sortPossibilities=[{name:"time_updated",label:"Last Edited",html:'<div class="SortOrderLabelText">Last Edited</div><div class="SortOrderItemIcon SortOrderItemIconDESC fa-sort-numeric-desc"></div><div class="SortOrderItemIcon SortOrderItemIconASC fa-sort-numeric-asc"></div>'},{name:"inc_pubdate",label:"Pubdate",html:'<div class="SortOrderLabelText">Pubdate</div><div class="SortOrderItemIcon SortOrderItemIconDESC fa-sort-numeric-desc"></div><div class="SortOrderItemIcon SortOrderItemIconASC fa-sort-numeric-asc"></div>'},{name:"inc_promo_date",label:"Promo Date",html:'<div class="SortOrderLabelText">Promo Date</div><div class="SortOrderItemIcon SortOrderItemIconDESC fa-sort-numeric-desc"></div><div class="SortOrderItemIcon SortOrderItemIconASC fa-sort-numeric-asc"></div>'}],this.filters=[],inc.user.admin.author.id){var t=new Inc.Views.ArticleListingFilter({attributeName:"authors",attributeLabel:"Author",attributeValueLabel:inc.user.admin.author.aut_name,attributeValue:inc.user.admin.author.id+""});this.filters.push(t),this.$filterbar.children(".NewFilter").before(t.$el),this.listenToOnce(t,"remove",this.onFilterAskingForRemoval)}_.each(this.sortPossibilities,function(e,t){this.$sortOrderList.append('<li id="ArticleListingSortOrderItem-'+t+'" class="SortOrderListItem">'+e.html+"</li>")},this),this.$searchForm.on("submit",function(e){e.preventDefault()}),Inc.Utilities.iOS||(this.$listContainer.css("overflow-y","hidden").perfectScrollbar({suppressScrollX:!0,useBothWheelAxes:!0,direction:"y"}),this.$listContainer.find(".ps-scrollbar-y").append('<div class="ps-scrollbar-y-custom-inner-middle"></div>')),this.$listContainer.on("scroll.inc:content:edit",this.scrolled.bind(this)),this.$search.on("input.inc:content:edit",this.onSearchInput.bind(this)),this.$clearbutton.on("click.inc:content:edit",this.onClear.bind(this)),this.$sortbutton.on("click.inc:content:edit",this.onSortButtonClick.bind(this)),this.$el.on("click.inc:content:edit",".SortOrderListItem",_.wrap(this.onSortOrderItemClick.bind(this),function(e,t){e(t,$(this))})),this.$filterbar.children(".NewFilter").on("click.inc:content:edit",this.onNewFilterClick.bind(this)),this.listenTo(this.articles,"reset",this.onArticleReset),this.listenTo(this.articles,"reset",this.resetHeights),this.listenTo(this.articles,"add",this.onArticledAdded),this.listenTo(dispatcher,"window:resized window:scrolled",function(){this.$list.height()<this.$listContainer.height()&&!this.xhr&&!this.loading&&this.load(),this.updateScrollbar()}),this.listenTo(dispatcher,"window:resized",this.resetHeights),$("body").on("click.inc:ArticleListing",function(e){var t,i=$(e.target);(i.hasClass("ClickableBox")&&i.parent().hasClass("OptionsMenuItem")||i.parents(".OptionsMenuItem").length>0)&&(t=i.parents(".OptionsMenuItem").attr("id")),_.each(this.subviews,function(e){t&&e.menu.oid==t||e.menu.deactivate()}),i.hasClass("Filter")||0!=i.parents(".Filter").length||this.clearIncompleteFilters()}.bind(this)),this.load()},onNewFilterClick:function(e){this.clearIncompleteFilters();var t=new Inc.Views.ArticleListingFilter({alreadyUsed:_.pluck(this.filters,"attributeName")});return this.filters.push(t),this.$filterbar.children(".NewFilter").before(t.$el),this.listenToOnce(t,"complete",this.onSearchChange),this.listenToOnce(t,"remove",this.onFilterAskingForRemoval),this.resetHeights(),this},onFilterAskingForRemoval:function(e){return e.trash(),this.filters=_.reject(this.filters,function(t){return t.oid==e.oid}),this.onSearchChange(),this},clearIncompleteFilters:function(){var e=[];return _.each(this.filters,function(t){t.complete?e.push(t):t.trash()}),this.filters=e,this},onSortButtonClick:function(){if("none"==this.$sortOrderList.css("display")){this.$list.hide(),this.$sortOrderList.show();var e=this.$listContainer.scrollTop();this.$listContainer.scrollTop(0),this.updateScrollbar();var t=this;setTimeout(function(){t.$el.on("click.inc:articlelisting:sortorder",function(i){t.$sortOrderList.hide(),t.$list.show(),t.$listContainer.scrollTop(e),t.updateScrollbar(),t.$el.off(".inc:articlelisting:sortorder")})},5)}return this},onSortOrderItemClick:function(e,t){var i=$(e.target),n=i;previousDirection=this.sorting.direction,previousSortName=this.sorting.name,this.sorting.direction=i.hasClass("SortOrderItemIconASC")?"ASC":"DESC",i.hasClass("SortOrderListItem")||(n=i.parent(".SortOrderListItem"));var s=this.sortPossibilities[parseInt(_.last(n.attr("id").split("-")))];return this.sorting.name=s.name,this.$currentSortOrderLabel.html("Sorting by "+s.label+" "+this.sorting.direction),(this.sorting.direction!=previousDirection||this.sorting.name!=previousSortName)&&this.onSearchChange(),this},onClear:function(){return(""!=this.$search.val()||this.filters.length>0)&&(this.$search.val(""),_.each(this.filters,function(e){e.trash()}),this.filters=[],this.onSearchChange()),Inc.Utilities.iOS||this.$search.focus(),this},onArticleReset:function(e,t){return _.each(this.subviews,function(e){e.trash()}),this.subviews=[],this.updateScrollbar(),this},onArticledAdded:function(e,t,i){var n=new Inc.Views.ArticleListingItem({model:e});return this.subviews.push(n),this.$loadingIndicator.before(n.$el),this.listenTo(e,"destroy",function(){n.trash(),this.subviews=_.reject(this.subviews,function(e){return n.oid==e.oid}),this.updateScrollbar()}),this.listenTo(n.menu,"change:active",function(e,t){if(!t){var i=this.$listContainer.scrollTop();this.$listContainer.scrollTop(i+1),this.$listContainer.scrollTop(i)}}),this.updateScrollbar(),this},resetHeights:function(){return this.$paddingWrapper.css("padding-top",this.$menubar.outerHeight(!0)+parseInt(this.$(".MenuBarContainer").css("margin-top").replace("px",""))+"px"),this},updateScrollbar:_.throttle(function(){return this.$listContainer.perfectScrollbar("update"),this},100,{leading:!1}),onSearchInput:function(e){var t=this.$search.val(),i=this;if(""!=this.lastSearchValue&&t!=this.lastSearchValue){var n=setTimeout(function(){if(moment().diff(i.lastSearchInput)>=700){for(;i.searchTimers.length>0;){var e=i.searchTimers.shift();clearTimeout(e)}i.onSearchChange()}},1e3);this.searchTimers.push(n)}return this.lastSearchValue=t,this.lastSearchInput=moment(),this},onSearchChange:function(e){return this.xhr&&(this.xhr.abort(),this.xhr=null,this.setLoading(!1)),this.noMoreResults=!1,this.$listContainer.scrollTop(0),this.articles.reset(),this.resetHeights(),this.load(),this},displayConnectionError:function(){this.$listContainer.scrollTop(0),this.articles.reset();var e=$('<li class="ConnectionErrorListItem"></li>');return this.connectionError=new Inc.Accessories.ConnectionErrorIndicator,e.append(this.connectionError.$el),this.$list.append(e),this},scrolled:_.throttle(function(e){var t=this.$listContainer.scrollTop(),i=this.$listContainer.prop("scrollHeight"),n=this.$listContainer.height();return t>=i-n-n/2&&(this.loading||this.load()),this},100),load:function(){if(this.loading||this.xhr||this.noMoreResults)return this;this.connectionError&&(this.connectionError.trash(),this.connectionError=null,this.$list.children(".ConnectionErrorListItem").remove()),this.$noresults.detach(),this.setLoading(!0),this.updateScrollbar();var e={limit:20};e.offset=this.articles.size(),e.sort=this.sorting.name+"|"+this.sorting.direction;var t=this.$search.val().trim();return""!=t&&(e.inc_headline=t),_.each(this.filters,function(t){t.complete&&(e[t.attributeName]?e[t.attributeName]+=","+t.attributeValue:e[t.attributeName]=t.attributeValue+"")}),this.xhr=$.ajax({dataType:"json",url:inc.restURL+"admin/article?"+(new Date).getTime(),data:e,cache:!1}).done(function(t){if(t.data.length>0){if(inc.collections.article.add(t.data),_.each(t.data,function(e){var t=inc.collections.article.get(e.id);t&&this.articles.add(t)},this),this.$list.height()<this.$listContainer.height()+500&&t.data.length==e.limit)return this.xhr=null,this.setLoading(!1),this.load(),void this.resetHeights();this.scrolled()}else 0==this.articles.size()?(this.noMoreResults=!0,this.$noresults.html("No Results Found"),this.$list.prepend(this.$noresults)):(this.noMoreResults=!0,this.$noresults.html("No More Results Found"),this.$list.append(this.$noresults),this.updateScrollbar());this.xhr=null,this.setLoading(!1),this.resetHeights()}.bind(this)).fail(function(e){this.xhr=null,this.setLoading(!1),this.displayConnectionError(),this.resetHeights()}.bind(this)),this},trash:function(){return this.connectionError&&(this.connectionError.trash(),this.connectionError=null),$("body").off(".inc:ArticleListing"),this.articles.reset(),this.$listContainer.off(),this.$search.off(),this.$searchForm.off(),this.$clearbutton.off(),this.$sortbutton.off(),this.$filterbar.children(".NewFilter").off(),Inc.Areas.Archetype.prototype.trash.apply(this,arguments)}}),Inc.Views.ArticleListingItem=Inc.ToggleView.extend({type:"ArticleListingItem",tagName:"li",className:"ArticleListingItem",template:_.template($("#ArticleListing-Item-Template").html()),descriptionsTemplate:_.template($("#ArticleListing-Item-Descriptions-Template").html()),initialize:function(e){Inc.ToggleView.prototype.initialize.apply(this,arguments);var t=this.model.copyAttributes(),i=t.channels.length>0?_.first(t.channels):null;i&&(t.topChannel=i),this.$el.html(this.template(t)),this.$(".Descriptions").html(this.descriptionsTemplate(t)),this.listenTo(this.model,"change:inc_headline",function(){this.$(".ItemHeadline").html(this.model.get("inc_headline"))}),this.listenTo(this.model,"change:inc_deck",function(){this.$(".ItemDeck").html(this.model.get("inc_deck"))}),this.listenTo(this.model,"change:channels",function(){var e=this.model.get("channels");this.$(".Inner").css("border-left-color","#"+("undefined"!=typeof e[0]&&(e[0].cnl_custom_color||e[0].cnl_calculated_color||"FFF")||"FFF"))}),this.listenTo(this.model,"change:channels change:authors change:inc_staid change:inc_pubdate change:inc_promo_date",function(){this.$(".Descriptions").html(this.descriptionsTemplate(this.model.attributes))}),this.$(".ExpansionButton").on("click",this.onExpansionButtonClick.bind(this)),this.menu=new Inc.MenuItems.List({tagName:"div",name:"Options",label:"Options",tooltip:"Options",iconClass:"fa-ellipsis-v",iconOnly:!0,preventClickPropagation:!0}),this.$(".More").before(this.menu.$el);var n=new Inc.MenuItems.Action({name:"Publish",label:"Publish",hidden:!0,iconClass:"fa-paper-plane-o",preventClickPropagation:!1,action:_.debounce(function(){inc.editing.publish(this.model)}.bind(this),1e3,!0)});n.listenTo(this.model,"change change:dirty",function(e){e.publishable()?this.show():this.hide()}),this.menu.add(n);var s=new Inc.MenuItems.Action({name:"Unpublish",label:"Unpublish",hidden:!this.model.get("inc_activeflag"),iconClass:"fi-archive",preventClickPropagation:!1,permissionRequired:2,action:_.debounce(function(){inc.editing.unpublish(this.model)}.bind(this),1e3,!0)});s.listenTo(this.model,"change change:dirty",function(e){e.get("inc_activeflag")&&!e.dirty?this.show():this.hide()}),this.menu.add(s);var o=new Inc.MenuItems.Action({name:"DeleteArticle",label:"Delete",hidden:!this.model.isDeletableByUser(),iconClass:"fa-trash-o",preventClickPropagation:!1,permissionRequired:3,action:_.debounce(function(){inc.editing.deleteArticle(this.model)}.bind(this),1e3,!0)});o.listenTo(this.model,"update:success",function(e){e&&e.isDeletableByUser()?this.show():this.hide()}),this.menu.add(o),this.menu.add(new Inc.MenuItems.Action({name:"Sitemanager",label:"Sitemanager",iconClass:"fi-layout",permissionRequired:2,action:_.partial(inc.admin.openInSitemanager.bind(inc.admin),this.model.get("id"))})),this.model.trigger("change",this.model)},onExpansionButtonClick:function(){return this.$(".ExpansionButton").hide(),this.$(".More").show(),this}}),Inc.Views.ArticleListingFilter=Inc.ToggleView.extend({type:"ArticleListingFilter",tagName:"li",className:"Filter",template:_.template($("#ArticleListing-Filter-Template").html()),initialize:function(e){e||(e={});var t=e.alreadyUsed||[];this.attributeName=e.attributeName||null,this.attributeLabel=e.attributeLabel||null,this.attributeValueLabel=e.attributeValueLabel||null,this.attributeValue=e.attributeValue||null,this.complete=!1,this.skipRemoval=!1,Inc.ToggleView.prototype.initialize.apply(this,arguments),this.$el.toggleClass("displayingOptions",!0),this.$el.html(this.template({})),this.$el.on("click.inc:content:edit",".FilterOption",_.wrap(this.onSelectOption.bind(this),function(e,t){e(t,$(this))})),this.$el.on("click.inc:content:edit",function(e){return this.skipRemoval?(this.skipRemoval=!1,!0):void(this.complete&&this.trigger("remove",this))}.bind(this));var i=this.$(".FilterOptionsList");this.attributeName&&this.attributeLabel&&this.attributeValueLabel&&this.attributeValue?(this.complete=!0,this.$el.toggleClass("displayingOptions",!1),this.$el.append('<div class="FilterName">'+this.attributeLabel+': </div><div class="FilterValueLabel">'+this.attributeValueLabel+'<span class="fa-minus"></span></div>'),i.hide()):(-1==_.indexOf(t,"inc_autid")&&inc.user.admin.roleID<=2&&i.append('<li class="FilterOption inc_autidFilterOption">Editor</li>'),i.append('<li class="FilterOption authorsFilterOption">Author</li>'),i.append('<li class="FilterOption channelsFilterOption">Channel</li>'),-1==_.indexOf(t,"inc_staid")&&i.append('<li class="FilterOption inc_staidFilterOption">Status</li>'))},onSelectOption:function(e,t){for(var i=Inc.Models.Article.filters,n=0;n<i.length;n++){var s=i[n];if(t.hasClass(s.attributeName+"FilterOption")){this.attributeName=s.attributeName,this.attributeLabel=s.label,this.$el.children().hide(),this.$el.append('<div class="FilterName">'+this.attributeLabel+': </div><div class="FilterInputContainer"></div>'),this.$el.toggleClass("displayingOptions",!1),this.displayInput();break}}return this},displayInput:function(){var e=this,t=this.$(".FilterInputContainer");switch(t.children().hide(),this.attributeName){case"inc_autid":t.append(_.template($("#AutocompleteTextInput-Template").html())({placeholder:"Editor Name"})),this.setupAutocompleteInput(t.find(".SearchInput"),inc.editing.editorAutocompleteData,inc.collections.editor);break;case"authors":t.append(_.template($("#AutocompleteTextInput-Template").html())({placeholder:"Author Name"})),this.setupAutocompleteInput(t.find(".SearchInput"),inc.editing.authorAutocompleteData,inc.collections.author);break;case"channels":t.append(_.template($("#AutocompleteTextInput-Template").html())({placeholder:"Channel Name"})),this.setupAutocompleteInput(t.find(".SearchInput"),inc.editing.channelAutocompleteData,inc.collections.channel);break;case"inc_staid":var i=Inc.Models.Article.statuses,n='<select><option value=""></option>';_.each(i,function(e){n+='<option value="'+e.id+'">'+e.name+"</option>"});var s=$(n);$("body").hasClass("ie")&&t.on("click",function(e){e.stopPropagation(),s.trigger("change")}),s.on("change",function(n){if(n.stopPropagation(),""!=$(this).val()){var o=_.findWhere(i,{id:parseInt($(this).val())});e.attributeValueLabel=o.name,e.attributeValue=o.id,e.complete=!0,s.off(),t.hide(),e.$(".FilterName").after('<div class="FilterValueLabel">'+e.attributeValueLabel+'<span class="fa-minus"></span></div>'),e.trigger("complete",e)}}),t.append(s)}return inc.admin.articleListing.resetHeights(),this},setupAutocompleteInput:function(e,t,i){return e.autocompleteDevbridge({lookup:t,lookupLimit:100,appendTo:this.$(".FilterSearchContainer .ACInner"),autoSelectFirst:!0,triggerSelectOnValidInput:!1,onSelect:_.partial(this.onSelectedAutocompleteItem.bind(this),i),beforeRender:function(){if(!Inc.Utilities.iOS){var t=this.$(".FilterSearchContainer .ACInner");0==t.find(".ps-scrollbar-y-custom-inner-middle").length&&(t.css("overflow-y","hidden").perfectScrollbar({suppressScrollX:!0,useBothWheelAxes:!0,direction:"y"}).find(".ps-scrollbar-y").append('<div class="ps-scrollbar-y-custom-inner-middle"></div>'),e.on("input",function(e){setTimeout(function(){t.scrollTop(0),t.perfectScrollbar("update")},100)}))}}.bind(this)}),Inc.Utilities.iOS||e.focus(),this},onSelectedAutocompleteItem:function(e,t){var i=this.$(".FilterInputContainer");return this.attributeValueLabel=t.value,this.attributeValue=e.get(t.data).get("id"),this.complete=!0,this.skipRemoval=!0,i.find(".SearchInput").autocompleteDevbridge("dispose"),i.hide(),this.$(".FilterName").after('<div class="FilterValueLabel">'+this.attributeValueLabel+'<span class="fa-minus"></span></div>'),this.trigger("complete",this),this},trash:function(){var e=this.$(".SearchInput");return e.length>0&&(e.autocompleteDevbridge("dispose"),e.off()),this.$("select").off(),this.$(".FilterInputContainer").off(),Inc.ToggleView.prototype.trash.apply(this,arguments)}}),Inc.Editors.Archetype=Inc.ToggleView.extend({type:"Editor",constructor:function(e){e||(e={}),this.$editable=e.$editable||null,this.model=e.model||null,this.sessionDirty=!1,this.area=e.area||null,Inc.ToggleView.apply(this,arguments)},initialize:function(e){if(!this.$editable&&(this.$editable=this.$el),_.extend(this,this.$editable.data()||{}),this.$editable.toggleClass("inc_editable",!0),this.fieldname=e.fieldname||this.fieldname||null,this.variant=e.variant||this.variant||null,this.label=e.label||this.label||null,!this.model){var t=inc.collections[this.contentType],i=t.get(this.contentId);i?this.model=i:(t.add({id:this.contentId}),this.model=t.get(this.contentId))}this.$editable.on("click.inc:content:edit",this.click.bind(this));var n=this.fieldname?"change:"+this.fieldname:"change";this.listenTo(this.model,n,this.dataChanged),this.listenTo(this.model,"update:fail save:fail",function(e){e.isNew()||this.disable()}),this.model.failedToUpdate&&(this.disabled=!0),this.model.userHasLock()||this.disabled||this.model.isNew()||e.dontRequestLockOnInit||this.trigger("request:lock",this),Inc.ToggleView.prototype.initialize.apply(this,arguments)},render:function(){return this.template&&this.$el.html(this.template(this)),this.className!=this.type&&this.$el.toggleClass(this.type,!0),this},click:function(e){if(!inc.isMode("edit"))return this;var t=null;return this.$editable&&this.$editable.data("parentContentId")&&(t=inc.collections[this.$editable.data("parentContentType")].get(parseInt(this.$editable.data("parentContentId")))),!this.disabled&&this.model&&(!this.model.editable()||t&&!t.editable()?t&&!t.editable()?(this.listenToOnce(t,"update:success update:fail",function(){t.editable()&&inc.isMode("edit")&&(_.findWhere(inc.editing.modelsBeingEdited,{oid:t.oid})||inc.editing.modelsBeingEdited.push(t),this.click())}),t.updating||t.requestLock()):(this.listenToOnce(this.model,"update:success update:fail",function(){this.model.editable()&&inc.isMode("edit")&&this.activate()}),this.model.updating||this.trigger("request:lock",this)):this.activate()),this},activate:function(){return this.active||!this.model||_.findWhere(inc.editing.modelsBeingEdited,{oid:this.model.oid})||inc.editing.modelsBeingEdited.push(this.model),Inc.ToggleView.prototype.activate.apply(this,arguments)},setSessionDirty:function(e){return(!this.sessionDirty&&e||this.sessionDirty&&!e)&&(this.sessionDirty=e,this.trigger("change:session:dirty",this,this.sessionDirty)),this},dataChanged:function(e,t,i){return this},trash:function(){return this.$editable&&this.$editable.data("editorID",null),this.$editable=null,this.model=null,Inc.ToggleView.prototype.trash.apply(this,arguments)}},{ClassName:"Editor"}),Inc.Editors.InlineText=Inc.Editors.Archetype.extend({type:"InlineText",constructor:function(e){this.editorObject=null,Inc.Editors.Archetype.apply(this,arguments)},initialize:function(e){Inc.Editors.Archetype.prototype.initialize.apply(this,arguments),this.subeditors=[],this.model&&(this.listenTo(this.model,"save:success",function(e){this.editorObject&&this.editorObject.resetDirty()}),this.model.get(this.fieldname)&&""!=this.model.get(this.fieldname)||this.$editable.toggleClass("empty",!0))},toolbarDefinitions:{regular:[{name:"document",groups:["mode","document","doctools"],items:["Sourcedialog","-","Templates"]},{name:"basicstyles",groups:["basicstyles","cleanup"],items:["H2","Bold","Italic","Underline","Strike","Subscript","Superscript","-","RemoveFormat"]},{name:"clipboard",groups:["clipboard","undo"],items:["Cut","Copy","Paste","-","Undo","Redo"]},{name:"editing",groups:["find","selection","spellchecker"],items:["Scayt"]},"/",{name:"paragraph",groups:["list","indent","align"],items:["NumberedList","BulletedList","-","Outdent","Indent","-","Blockquote"]},{name:"links",items:["Link","Unlink"]},{name:"insert",items:["Image","Inlineimages","Inlinevideos","SpecialChar"]}],singleline:[{name:"basicstyles",groups:["basicstyles","cleanup"],items:["Bold","Italic","Underline","Strike","Subscript","Superscript","-","RemoveFormat"]},{name:"clipboard",groups:["clipboard","undo"],items:["Cut","Copy","Paste","-","Undo","Redo"]},{name:"editing",groups:["find","selection","spellchecker"],items:["Scayt"]}]},click:function(e){return inc.isMode("edit")?(this.editorObject||Inc.Editors.Archetype.prototype.click.apply(this,arguments),this):this},activate:function(){if(!this.active&&this.model.ready&&(this.model.isNew()||this.model.userHasLock())){if(this.area&&!this.area.activationAllowed(this))return this;if(Inc.Editors.Archetype.prototype.activate.apply(this,arguments),this.$editable.attr("contenteditable",!0),window.getSelection().rangeCount>0){var e=window.getSelection().getRangeAt(0),t=$('<span id="caret-position-placeholder" style="display: none;">placeholder</span>')[0];e.insertNode(t)}"inc_clean_text"==this.fieldname&&this.area.resetInlineVideoPlayers(!0);var i="p[*](*){*}; h1[*](*){*}; h2[*](*){*}; em; b; u; ul[*](*){*}; ol[*](*){*}; li[*](*){*}; img[*](*){*}; iframe[*](*){*}; a[*](*){*}; object[*](*){*}; param[*](*){*}; embed[*](*){*}; video[*](*){*}; i; table[*](*){*}; tr[*](*){*}; td[*](*){*}; script[*](*){*}; h3[*](*){*}; span[*](*){*}; br[*](*){*}; div[*](*){*}; strong; blockquote[*](*){*}",n=[],s=[];"singleline"==this.variant&&(i="p[*](*){*}; span[*](*){*}; em; b; u; i",n=[13,CKEDITOR.SHIFT+13],s=[[13,null],[CKEDITOR.SHIFT+13,null]]);var o="custombuttons";"inc_clean_text"==this.fieldname&&(o+=",inlinevideos",18!=this.model.get("inc_typid")&&(o+=",inlineimages")),this.editorObject=CKEDITOR.inline(this.$editable[0],{forcePasteAsPlainText:!0,title:this.label,customConfig:"",removePlugins:"autocorrect,format,stylescombo",removeButtons:"PasteText,Flash,Anchor,ShowBlocks,About",extraPlugins:o,readOnly:this.disabled,floatSpacePinnedOffsetY:100,floatSpaceDockedOffsetY:25,toolbar:this.toolbarDefinitions[this.variant],allowedContent:i,blockedKeystrokes:n,keystrokes:s,on:{instanceReady:_.bind(function(e){if("inc_clean_text"==this.fieldname){this.area.generateInlineVideoPlayers();var t=this.area;async.nextTick(function(){_.each(t.inlineVideoPlayers,function(e){e.menu&&e.menu.show()})})}if(this.$editable.focus(),this.$editable.on("focusCursor",function(){var e=this.editorObject.createRange();e.moveToElementEditablePosition(this.editorObject.editable(),!0),this.editorObject.getSelection().selectRanges([e])}.bind(this)),this.editorObject.document.$.getElementById("caret-position-placeholder")){var i=new CKEDITOR.dom.element(this.editorObject.document.$.getElementById("caret-position-placeholder")),n=new CKEDITOR.dom.range(this.editorObject.document);n.selectNodeContents(i),this.editorObject.getSelection().selectRanges([n]),$(this.editorObject.document.$.getElementById("caret-position-placeholder")).remove()}this.$editable.hasClass("pancaption_override")&&(this.$editable.data("reshow")&&(this.$editable.data("reshow",!1),$(".pancaption_default").hide(),this.$editable.attr("contenteditable",!0),this.$editable.show().focus().trigger("click"),this.editorObject.setReadOnly(this.disabled)),""==this.$editable.html()&&this.$editable.trigger("focusCursor")),"article"==inc.i.op&&"create"==inc.i.mod&&-1!=_.indexOf(["Headline","Deck","Body"],this.label)&&(this.editorObject.setData(""),this.$editable.trigger("focusCursor"),this.$editable.toggleClass("empty",!0))},this),change:_.bind(this.contentChanged,this)}}),this.editorObject.area=this.area,this.editorObject.modelID=this.model.getID(),this.editorObject.editorOID=this.oid}return this},deactivate:function(){return this.active&&("inc_clean_text"==this.fieldname&&_.each(this.area.inlineVideoPlayers,function(e){e.menu&&e.menu.hide()}),this.editorObject.area=null,this.editorObject&&this.editorObject.destroy(),this.editorObject=null,this.$editable.attr("contenteditable",!1),this.$editable.off("focusCursor"),this.$editable.off("focusout.inc:content:edit")),Inc.Editors.Archetype.prototype.deactivate.apply(this,arguments)},dataChanged:function(e,t,i){return console.log("data changed"),i||(i={}),"inc_clean_text"==this.fieldname&&(t=this.model.formatText(t)),i.origin&&i.origin.oid==this.oid||("inc_clean_text"==this.fieldname&&this.area.$(".inlinevideo").data("possiblyJustMoved",!0),this.editorObject?(this.editorObject.setData(t),this.editorObject.resetDirty()):this.$editable.html(t)),this},contentChanged:function(){console.log("content changed"),"inc_clean_text"==this.fieldname&&this.area.resetInlineVideoPlayers();var e=null;try{e=this.getEditorContent()}catch(t){e="error"}if("error"==e)return this;if("inc_clean_text"==this.fieldname&&18!=this.model.get("inc_typid")){for(var i=$("<div>"+e+"</div>").find(".inlineimage"),n=[],s=(this.model.get("inlineimages")||[]).slice(),o=i.length!=s.length,a=0;a<i.length;a++){var r=$(i[a]),l=r.data("contentId");i.length==s.length&&l!=s[a].id&&(o=!0),n.push({id:l,sortorder:a})}o&&this.model.set("inlineimages",n);for(var c=$("<div>"+e+"</div>").find(".inlinevideo"),h=[],d=(this.model.get("videos")||[]).slice(),o=c.length!=d.length,a=0;a<c.length;a++){var u=$(c[a]),l=u.data("contentId");c.length==d.length&&l!=d[a].id&&(o=!0),h.push({id:l,sortorder:a})}o&&this.model.set("videos",h),e=this.model.unformatText(e)}e&&""!=e.replace(/\s|(?:&nbsp;)/g,"")?this.$editable.toggleClass("empty",!1):this.$editable.toggleClass("empty",!0),this.model.set(this.fieldname,e,{origin:this}),"inc_clean_text"==this.fieldname&&this.area.generateInlineVideoPlayers();var p=this.area;return async.nextTick(function(){_.each(p.inlineVideoPlayers,function(e){e.menu&&e.menu.show()})}),dispatcher.trigger("inc:edit"),this},getEditorContent:function(){var e=null;return this.editorObject&&("singleline"==this.variant?(e=$(this.editorObject.getData()).html(),e&&(e=e.replace(/&nbsp;/g," "))):e=$("<div></div>").html(this.editorObject.getData()).html(),e||(e=null)),e},disable:function(){var e=this.disabled;return Inc.ToggleView.prototype.disable.apply(this,arguments),!e&&this.editorObject&&this.editorObject.setReadOnly(this.disabled),this},enable:function(){var e=this.disabled;return Inc.ToggleView.prototype.enable.apply(this,arguments),e&&this.editorObject&&this.editorObject.setReadOnly(this.disabled),this},trash:function(){return this.editorObject=null,Inc.Editors.Archetype.prototype.trash.apply(this,arguments)}},{ClassName:"InlineText"}),Inc.Views.ListEditorItem=Inc.ToggleView.extend({type:"ListEditorItem",tagName:"li",className:"ListEditorItem",events:function(){return{"click.inc:content:edit .ClickableBox":"click","click.inc:content:edit .LERemoveItemButton":"removeItemClicked"}},render:function(){return this.$el.html(this.template(this.model.attributes)).data("modelid",this.model.get("id")),this},click:function(e){return this.trigger("click",this),this},removeItemClicked:_.debounce(function(e){return this.trigger("removeItemClicked",this),this},100,!0)},{ClassName:"ListEditorItem"}),Inc.Views.ListEditorChannelItem=Inc.Views.ListEditorItem.extend({type:"ListEditorChannelItem",template:_.template($("#ListEditorChannelItemTemplate").html()),render:function(){return Inc.Views.ListEditorItem.prototype.render.apply(this,arguments),this.$el.css("background-color","#"+(this.model.get("cnl_custom_color")||this.model.get("cnl_calculated_color")||"000000")),this}},{ClassName:"ListEditorChannelItem"}),Inc.Views.ListEditorAuthorItem=Inc.Views.ListEditorItem.extend({type:"ListEditorAuthorItem",template:_.template($("#ListEditorAuthorItemTemplate").html())},{ClassName:"ListEditorAuthorItem"}),Inc.Editors.List=Inc.Editors.Archetype.extend({type:"ListEditor",className:"ListEditor",template:_.template($("#ListEditorTemplate").html()),constructor:function(e){e||(e={}),this.items=new Backbone.Collection,this.items.comparator="sortorder",this.originals=null,this.sessionOriginals=null,this.views=[],this.$list=null,this.$listContainer=null,this.$input=null,this.append=_.isBoolean(e.append)?e.append:!0,this.sorting=!1,this.adding=!1,this.canceling=!1,this.modelSource=this.modelSource||e.modelSource||null,this.autocompleteSource=this.autocompleteSource||e.autocompleteSource||null,this.itemView=this.itemView||e.itemView||null,Inc.Editors.Archetype.apply(this,arguments)},initialize:function(e){Inc.Editors.Archetype.prototype.initialize.apply(this,arguments),this.listenTo(this.items,"add",this.itemAdded),this.render(),this.$list=this.$(".List"),this.$listContainer=this.$(".ListContainer"),this.$input=this.$(".LESearchInput"),this.$input.placeholder().autocompleteDevbridge({lookup:this.autocompleteSource,lookupLimit:100,appendTo:this.$(".LESearchContainer .ACInner"),
autoSelectFirst:!0,triggerSelectOnValidInput:!1,onSelect:this.selectedNewItem.bind(this),beforeRender:function(){if(!Inc.Utilities.iOS){var e=this.$(".LESearchContainer .ACInner");0==e.find(".ps-scrollbar-y-custom-inner-middle").length&&(e.css("overflow-y","hidden").perfectScrollbar({suppressScrollX:!0,useBothWheelAxes:!0,direction:"y"}).find(".ps-scrollbar-y").append('<div class="ps-scrollbar-y-custom-inner-middle"></div>'),this.$input.on("keydown keyup",function(t){setTimeout(function(){e.scrollTop(0),e.perfectScrollbar("update")},100)}))}}.bind(this)}),this.$list.sortable({items:"> .ListEditorItem",axis:"y",delay:100,scroll:!1,placeholder:"ListEditorItemPlaceholder",tolerance:"pointer",containment:this.$el}),this.$list.on("sortstart",_.bind(_.throttle(this.startedSorting,100),this)),this.$list.on("sortstop",_.bind(this.stoppedSorting,this)),this.$list.on("sortupdate",_.bind(this.sortorderChanged,this)),Inc.Utilities.iOS||(this.$listContainer.css("overflow-y","hidden").perfectScrollbar({suppressScrollX:!0,useBothWheelAxes:!0,direction:"y"}),this.$listContainer.find(".ps-scrollbar-y").append('<div class="ps-scrollbar-y-custom-inner-middle"></div>')),inc.parameterSet("shortenListEditor")&&this.$listContainer.css("max-height","100px")},events:function(){return{"click.inc:content:edit .LEAddButton":"plusButtonClicked","click.inc:content:edit .CancelButton":"cancel","click.inc:content:edit .ApplyButton":"apply","click.inc:content:edit .LEClearSearch":"clearSearch"}},setup:function(){if(0==this.items.size()){for(var e=this.model.get(this.fieldname).slice(),t=0;t<e.length;t++){var i=new Backbone.Model(e[t]);this.items.add(i,{initial:!0})}this.originals=this.items.clone()}return this.sessionOriginals=this.items.clone(),this},reset:function(){return this.$input.empty(),this.$list.empty(),_.each(this.views,function(e){e.trash()}),this.views=[],this.items.reset(),this.setSessionDirty(!1),this.setup(),this.contentChanged(),this.applyToPage(),this},resetSession:function(){return this.$input.empty(),this.$list.empty(),_.each(this.views,function(e){e.trash()}),this.views=[],this.items.reset(),this.sessionOriginals.each(function(e,t){e.set("sortorder",t),this.items.add(e,{initial:!0})},this),this.setSessionDirty(!1),this.contentChanged(),this},plusButtonClicked:function(e){return this.$input.trigger("focus").autocompleteDevbridge("hide"),this.adding||(this.adding=!0,this.$input.parent().toggleClass("hidden",!1),this.trigger("adding:started",this)),this},cancel:function(e){return this.canceling?this:(this.canceling=!0,this.adding?"none"!=this.$(".autocomplete-suggestions").css("display")?this.$input.autocompleteDevbridge("hide"):(this.$input.val("").parent().toggleClass("hidden",!0),this.adding=!1,this.trigger("adding:finished",this)):this.trigger("click:cancel",this),this.canceling=!1,this)},apply:_.debounce(function(e){return 0==this.items.size()?this:(this.sessionOriginals=this.items.clone(),this.applyToPage(),this.trigger("click:apply",this),this)},500,!0),clearSearch:function(e){return this.$input.val("").focus(),this},applyToPage:function(){var e=[];return this.items.each(function(t){e.push(t.attributes)}),this.model.set(this.fieldname,e),this},startedSorting:function(e,t){return this.sorting=!0,this.$list.find(".ListEditorItemPlaceholder").height(t.item.outerHeight(!0)),this.$listContainer.perfectScrollbar("update"),this},stoppedSorting:function(e,t){return this.$listContainer.perfectScrollbar("update"),this.sorting=!1,this},sortorderChanged:function(e,t){for(var i=[],n=this.$list.children(),s=0;s<n.length;s++){var o=parseInt($(n[s]).data("modelid")),a=_.find(this.views,function(e){return e.model.get("id")==o});this.sessionOriginals.at(s)&&o!=this.sessionOriginals.at(s).get("id")&&this.setSessionDirty(!0),i.push(a)}return this.views=i,this.contentChanged(),this},selectedNewItem:function(e){this.$input.val("");var t=this.modelSource.get(e.data);return this.items.add(t),this.cancel(),this},contentChanged:function(){this.updateSortorder();var e=this.dirty;if(this.items.size()!=this.originals.size())this.dirty=!0;else{for(var t=!1,i=0;i<this.items.models.length;i++)if(this.originals.at(i).get("id")!=this.items.models[i].get("id")){this.dirty=!0,t=!0;break}t||(this.dirty=!1)}return this.dirty!=e&&this.setSessionDirty(!0),this.$listContainer.perfectScrollbar("update"),dispatcher.trigger("inc:edit"),this},updateSortorder:function(){return _.each(this.views,function(e,t){e.model.set("sortorder",t)}),this.items.sort(),this},activate:function(){if(!this.active&&this.model.ready&&(this.model.isNew()||this.model.userHasLock())){if(this.area&&!this.area.activationAllowed(this))return this;this.setup(),Inc.Editors.Archetype.prototype.activate.apply(this,arguments);var e=new Inc.Modals.Editor({className:"ListEditorModal",$content:this.$el,priority:3});e.$parent=this.parentId?$("#"+this.parentId):this.$editable,e.render(),e.listenTo(this,"change:session:dirty",function(e,t){this.closeDisabled=t}),e.listenTo(this,"adding:started",function(e){this.closeDisabled=!0}),e.listenTo(this,"adding:finished",function(e){this.closeDisabled=e.sessionDirty}),e.listenToOnce(this,"click:apply click:cancel",function(e){this.closeDisabled=!1,this.close()}),this.listenToOnce(e,"show:finished",function(e){this.$listContainer.perfectScrollbar("update")}),this.listenToOnce(e,"close:finished",this.deactivate),this.listenTo(e,"close:requested",function(e){this.adding&&this.cancel()}),inc.editing.innerPresenter.addModal(e),(0==this.model.get(this.fieldname).length||"article"==inc.i.op&&"create"==inc.i.mod&&"Author Name"==this.originals.first().get("aut_name"))&&this.plusButtonClicked()}return this},deactivate:function(){return this.resetSession(),Inc.Editors.Archetype.prototype.deactivate.apply(this,arguments)},itemAdded:function(e,t,i){i||(i={});var n=new this.itemView({model:e}).render();return n&&(this.listenTo(n,"click",this.itemClicked),this.listenTo(n,"removeItemClicked",this.removeItemClicked),i.initial?(this.$list.append(n.$el),this.views.push(n)):(this.append?(this.$list.append(n.$el),this.views.push(n)):(this.$list.prepend(n.$el),this.views.unshift(n)),this.setSessionDirty(!0),this.contentChanged())),this},itemClicked:function(e){if(this.adding)return this.cancel(),this;if(!this.sessionDirty)for(var t=0;t<this.views.length;t++)if(0!=t&&this.views[t].oid==e.oid){var i=this.views.splice(t,1)[0];i.$el.detach(),this.views.unshift(i),this.$list.prepend(i.$el),this.sortorderChanged(),this.apply();break}return this},removeItemClicked:function(e){for(var t,i=0;i<this.views.length;i++)if(this.views[i].oid==e.oid){t=i;break}return this.items.remove(e.model),e.trash(),this.views.splice(t,1),this.setSessionDirty(!0),this.contentChanged(),this},dataChanged:function(e,t,i){return this.reset(),this},kill:function(){return this.active?(this.adding&&("none"!=this.$(".autocomplete-suggestions").css("display")&&this.$input.autocompleteDevbridge("hide"),this.$input.val("").parent().toggleClass("hidden",!0),this.adding=!1,this.trigger("adding:finished",this)),this.trigger("click:cancel",this),this.canceling=!1):this.reset(),this},trash:function(){return this.items.reset(),this.items.stopListening(),this.items=null,this.originals.reset(),this.originals.stopListening(),this.originals=null,this.sessionOriginals.reset(),this.sessionOriginals.stopListening(),this.sessionOriginals=null,_.each(this.views,function(e){e.trash()}),this.views=[],this.$list.sortable("destroy"),this.$list.off(),this.$list=null,!Inc.Utilities.iOS&&this.$listContainer&&this.$listContainer.perfectScrollbar("destroy"),this.$listContainer=null,!Inc.Utilities.iOS&&this.$(".LESearchContainer .ACInner").perfectScrollbar("destroy"),this.$input.autocompleteDevbridge("dispose"),this.$input.off(),this.$input=null,this.modelSource=null,this.autocompleteSource=null,this.itemView=null,Inc.Editors.Archetype.prototype.trash.apply(this,arguments)}},{ClassName:"ListEditor"}),Inc.Editors.ChannelList=Inc.Editors.List.extend({type:"ChannelList",constructor:function(e){this.modelSource=inc.collections.channel,this.autocompleteSource=inc.user.admin.roleID<=2?inc.editing.channelAutocompleteData:inc.editing.columnistChannelAutocompleteData,this.itemView=Inc.Views.ListEditorChannelItem,0==inc.collections.channel.size()&&inc.admin.taskManager.loadChannelData(),Inc.Editors.List.apply(this,arguments)}},{ClassName:"ChannelList"}),Inc.Editors.AuthorList=Inc.Editors.List.extend({type:"AuthorList",constructor:function(e){this.modelSource=inc.collections.author,this.autocompleteSource=inc.editing.authorAutocompleteData,this.itemView=Inc.Views.ListEditorAuthorItem,0==inc.collections.author.size()&&inc.admin.taskManager.loadAuthorData(),Inc.Editors.List.apply(this,arguments)}},{ClassName:"AuthorList"}),Inc.Editors.SubEditor=Inc.ToggleView.extend({type:"SubEditor",className:"SubEditor",constructor:function(e){e||(e={}),this.fieldname=this.fieldname||e.fieldname||null,this.label=this.label||e.label||null,Inc.ToggleView.apply(this,arguments)},initialize:function(e){Inc.ToggleView.prototype.initialize.apply(this,arguments),this.render()},render:function(){return this.className!=this.type&&this.$el.toggleClass(this.type,!0),this}},{ClassName:"SubEditor"}),Inc.Editors.SelectSubEditor=Inc.Editors.SubEditor.extend({type:"SelectSubEditor",className:"SelectSubEditor",template:_.template($("#Select-SubEditor-Template").html()),constructor:function(e){Inc.Editors.SubEditor.apply(this,arguments)},initialize:function(e){e||(e={}),this.options=e.options||[],Inc.Editors.SubEditor.prototype.initialize.apply(this,arguments),this.$select=this.$("select"),this.$select.prop("disabled",!this.active),this.model&&this.$select.val(this.model.get(this.fieldname)+""),this.$el.on("change.inc:content:edit","select",this.contentChanged.bind(this)),this.listenTo(this.model,"change:"+this.fieldname,this.dataChanged)},render:function(){return Inc.Editors.SubEditor.prototype.render(this,arguments),this.template&&this.$el.html(this.template(this)),this},activate:function(){var e=this.active;return Inc.Editors.SubEditor.prototype.activate.apply(this,arguments),this.active&&!e&&this.$select.prop("disabled",!this.active),this},deactivate:function(){var e=this.active;return Inc.Editors.SubEditor.prototype.deactivate.apply(this,arguments),!this.active&&e&&this.$select.prop("disabled",!this.active),this},dataChanged:function(e,t,i){return i||(i={}),i.origin&&i.origin.oid==this.oid||this.$select.val(t),this},contentChanged:function(){return this.model.set(this.fieldname,this.getEditorContent(),{origin:this}),this.trigger("edit",this),dispatcher.trigger("inc:edit"),this},getEditorContent:function(){return this.$select.val()}},{ClassName:"SelectSubEditor"}),Inc.Editors.CheckboxSubEditor=Inc.Editors.SubEditor.extend({type:"CheckboxSubEditor",className:"CheckboxSubEditor",template:_.template($("#Checkbox-SubEditor-Template").html()),constructor:function(e){Inc.Editors.SubEditor.apply(this,arguments)},initialize:function(e){e||(e={}),Inc.Editors.SubEditor.prototype.initialize.apply(this,arguments),this.$input=this.$("input"),this.$input.prop("checked",this.model.get(this.fieldname)),this.$input.prop("disabled",!this.active),this.$el.on("change.inc:content:edit","input",this.contentChanged.bind(this)),this.listenTo(this.model,"change:"+this.fieldname,this.dataChanged)},render:function(){return Inc.Editors.SubEditor.prototype.render(this,arguments),this.template&&this.$el.html(this.template(this)),this},activate:function(){var e=this.active;return Inc.Editors.SubEditor.prototype.activate.apply(this,arguments),this.active&&!e&&this.$input.prop("disabled",!this.active),this},deactivate:function(){var e=this.active;return Inc.Editors.SubEditor.prototype.deactivate.apply(this,arguments),!this.active&&e&&this.$input.prop("disabled",!this.active),this},dataChanged:function(e,t,i){return i||(i={}),i.origin&&i.origin.oid==this.oid||this.$input.prop("checked",t),this},contentChanged:function(){return this.model.set(this.fieldname,this.getEditorContent(),{origin:this}),this.trigger("edit",this),dispatcher.trigger("inc:edit"),this},getEditorContent:function(){return this.$input.prop("checked")}},{ClassName:"CheckboxSubEditor"}),Inc.Editors.TextSubEditor=Inc.Editors.SubEditor.extend({type:"TextSubEditor",className:"TextSubEditor",template:_.template($("#Text-SubEditor-Template").html()),constructor:function(e){e||(e={}),this.editorObject=null,this.$text=null,Inc.Editors.SubEditor.apply(this,arguments)},initialize:function(e){Inc.Editors.SubEditor.prototype.initialize.apply(this,arguments),this.$text=this.$(".Text"),this.focus=_.isBoolean(e.focus)?e.focus:!0,this.allowBreaks=_.isBoolean(e.allowBreaks)?e.allowBreaks:!1,this.listenTo(this.model,"change:"+this.fieldname,this.dataChanged),this.listenTo(this.model,"save:success",function(e){this.editorObject&&this.editorObject.resetDirty()})},render:function(){return Inc.Editors.SubEditor.prototype.render(this,arguments),this.template&&this.$el.html(this.template({label:this.label,text:this.model.get(this.fieldname)})),this},activate:function(){if(!this.active&&(Inc.Editors.SubEditor.prototype.activate.apply(this,arguments),!this.editorObject)){this.$text.attr("contenteditable",!0);var e="p[*](*){*}; span[*](*){*}; em; b; u; i; br[*](*){*}",t=this.allowBreaks?[]:[13,CKEDITOR.SHIFT+13],i=this.allowBreaks?[]:[[13,null],[CKEDITOR.SHIFT+13,null]];this.editorObject=CKEDITOR.inline(this.$text[0],{forcePasteAsPlainText:!0,title:this.label,customConfig:"",readOnly:this.disabled,toolbar:[{name:"basicstyles",groups:["basicstyles","cleanup"],items:["Bold","Italic","Underline","Strike","Subscript","Superscript","-","RemoveFormat"]},{name:"clipboard",groups:["clipboard","undo"],items:["Cut","Copy","Paste","-","Undo","Redo"]},{name:"editing",groups:["find","selection","spellchecker"],items:["Scayt"]}],allowedContent:e,enterMode:CKEDITOR.ENTER_BR,blockedKeystrokes:t,keystrokes:i,on:{instanceReady:_.bind(function(e){if(this.allowBreaks||$("#cke_"+this.editorObject.name).toggleClass("hidden",!0),this.focus){var t=this.editorObject.createRange();t.moveToElementEditablePosition(this.editorObject.editable(),!0),this.editorObject.getSelection().selectRanges([t])}},this),change:_.bind(this.contentChanged,this)}})}return!0},deactivate:function(){return this.active&&(this.editorObject&&this.editorObject.destroy(),this.editorObject=null,this.$text.attr("contenteditable",!1)),Inc.Editors.SubEditor.prototype.deactivate.apply(this,arguments)},dataChanged:function(e,t,i){return i||(i={}),i.origin&&i.origin.oid==this.oid||(this.editorObject?(this.editorObject.setData(t),this.editorObject.resetDirty()):this.$text.html(t)),this},contentChanged:function(){return this.model.set(this.fieldname,this.getEditorContent(),{origin:this}),this.trigger("edit",this),dispatcher.trigger("inc:edit"),this},getEditorContent:function(){var e=null;return this.editorObject&&(e=this.editorObject.getData()||null,e&&(e=e.replace(/&nbsp;/g," "))),e||(e=null),e},disable:function(){return Inc.Editors.SubEditor.prototype.disable.apply(this,arguments),this.disabled&&this.editorObject&&this.editorObject.setReadOnly(this.disabled),this},enable:function(){return Inc.Editors.SubEditor.prototype.enable.apply(this,arguments),!this.disabled&&this.editorObject&&this.editorObject.setReadOnly(this.disabled),this},trash:function(){return this.editorObject=null,Inc.Editors.SubEditor.prototype.trash.apply(this,arguments)}},{ClassName:"TextSubEditor"}),Inc.Editors.DateTimeSubEditor=Inc.Editors.SubEditor.extend({type:"DateTimeSubEditor",className:"DateTimeSubEditor",template:_.template($("#DateTime-SubEditor-Template").html()),constructor:function(e){e||(e={}),this.$date=null,this.datePicker=null,this.$time=null,this.timePicker=null,Inc.Editors.SubEditor.apply(this,arguments)},initialize:function(e){this.active=!1,Inc.Editors.SubEditor.prototype.initialize.apply(this,arguments),this.$date=this.$(".Date"),this.$time=this.$(".Time"),this.listenTo(this.model,"change:"+this.fieldname,this.dataChanged)},events:function(){return{"click.inc:content:edit .FieldLabel":"deactivate","click.inc:content:edit .Date":"dateClicked","click.inc:content:edit .Time":"timeClicked","click.inc:content:edit .NowButton":"selectNow"}},render:function(){return Inc.Editors.SubEditor.prototype.render(this,arguments),this.template&&this.$el.html(this.template({label:this.label,date:this.datetimeToDateText(this.model.get(this.fieldname)),time:this.datetimeToTimeText(this.model.get(this.fieldname))})),this},dataChanged:function(e,t,i){return this.$date.html(this.datetimeToDateText(t)),this.datePicker&&this.datePicker.selectDate(moment(t,Inc.Utilities.mysqlTimeFormat)),this.$time.html(this.datetimeToTimeText(t)),this},datetimeToDateText:function(e){return moment(e,Inc.Utilities.mysqlTimeFormat).format("MMM D, YYYY").toUpperCase()},datetimeToTimeText:function(e){return moment(e,Inc.Utilities.mysqlTimeFormat).format("h:mm A").toUpperCase()},dateClicked:function(){return this.datePicker||(this.datePicker=new Inc.Controls.DatePicker({selectedMoment:moment(this.model.get(this.fieldname),Inc.Utilities.mysqlTimeFormat)}),this.listenTo(this.datePicker,"select:date",this.onSelectDate),this.$el.append(this.datePicker.render().$el)),this.active?this.deactivate():this.activate(this.$date),dispatcher.trigger("inc:edit"),this},onSelectDate:function(e){var t=moment(this.model.get(this.fieldname),Inc.Utilities.mysqlTimeFormat);return t.month(e.month()).date(e.date()).year(e.year()),this.model.set(this.fieldname,t.tz("America/New_York").format(Inc.Utilities.mysqlTimeFormat)),this.trigger("edit",this),dispatcher.trigger("inc:edit"),this.deactivate(),this},timeClicked:function(){return this.timePicker||(this.timePicker=new Inc.Controls.TimePicker({model:this.model,fieldname:this.fieldname}),this.listenTo(this.timePicker,"select:time",this.onSelectTime),this.$el.append(this.timePicker.$el)),this.active?this.deactivate():this.activate(this.$time),dispatcher.trigger("inc:edit"),this},onSelectTime:function(){return this.trigger("edit",this),dispatcher.trigger("inc:edit"),this},selectNow:function(){return this.model.set(this.fieldname,moment().second(0).tz("America/New_York").subtract("minutes",3).format(Inc.Utilities.mysqlTimeFormat)),this.trigger("edit",this),dispatcher.trigger("inc:edit"),this.deactivate(),this},activate:function(e){return!this.active&&e&&(e.hasClass("Date")?this.datePicker.show():e.hasClass("Time")&&this.timePicker.show()),Inc.Editors.SubEditor.prototype.activate.apply(this,arguments)},deactivate:function(){return this.active&&(this.datePicker&&this.datePicker.hide(),this.timePicker&&this.timePicker.hide()),Inc.Editors.SubEditor.prototype.deactivate.apply(this,arguments)}},{ClassName:"DateTimeSubEditor"}),Inc.Editors.Accordion=Inc.Editors.Archetype.extend({type:"Accordion",className:"AccordionEditor",template:_.template($("#Accordion-Editor-Template").html()),constructor:function(e){e||(e={}),this.subeditors=this.subeditors||e.subeditors||[],this.$list=null,this.$listContainer=null,this.$cancel=null,this.subEditorTypesToToggle=["DateTimeSubEditor"],Inc.Editors.Archetype.apply(this,arguments)},initialize:function(e){Inc.Editors.Archetype.prototype.initialize.apply(this,arguments),this.render(),this.$list=this.$(".List"),this.$listContainer=this.$(".ListContainer"),this.$cancel=this.$(".UndoButton"),this.$modal=null;var t=[];_.each(this.subeditors,function(e){if(!e.permissionRequired||inc.user.admin.roleID<=e.permissionRequired){var i=new e.type({fieldname:e.fieldname,label:e.label.toUpperCase(),model:this.model,tagName:"li"});this.listenTo(i,"edit",this.edited),-1!=_.indexOf(this.subEditorTypesToToggle,i.type)&&this.listenTo(i,"change:active",this.onSubEditorActiveChange),i.$el.toggleClass("ListEditorItem",!0),this.$list.append(i.$el),t.push(i)}},this),this.subeditors=t,this.listenTo(this.model,"save:success",this.done),Inc.Utilities.iOS||this.$listContainer.css("overflow-y","hidden")},events:function(){return{"click.inc:content:edit .DoneButton":"done","click.inc:content:edit .UndoButton":"cancel"}},edited:function(e){var t=this.model.getState(this.oid+"-Start"),i=!1;return _.each(this.subeditors,function(e){var n=t.attributes[e.fieldname],s=this.model.get(e.fieldname);(_.isObject(n)&&!_.isEqual(n,s)||!_.isObject(n)&&n!=s)&&(i=!0)},this),this.$cancel.parent().toggleClass("showingUndoButton",i),this},done:function(){return this.trigger("click:done",this),this},kill:function(){return this.done()},cancel:function(){return this.model.revert(this.oid+"-Start"),this.trigger("click:cancel",this),this},activate:function(){if(!this.active&&this.model.ready&&(this.model.isNew()||this.model.userHasLock())){if(this.area&&!this.area.activationAllowed(this))return this;Inc.Editors.Archetype.prototype.activate.apply(this,arguments),this.model.store(this.oid+"-Start"),this.$cancel.parent().toggleClass("showingUndoButton",!1);var e=new Inc.Modals.Editor({className:"AccordionModal",$content:this.$el,priority:3});e.$parent=this.parentId?$("#"+this.parentId):this.$editable,this.parentClass&&(e.$parent=$(this.$editable.parents("."+this.parentClass)[0])),e.render(),this.$modal=e.$el,e.listenToOnce(this,"click:done click:cancel",e.close),this.listenToOnce(e,"close:finished",this.deactivate),_.each(this.subeditors,function(t){"TextSubEditor"==t.type&&(t.activate(),t.listenToOnce(e,"close:started",t.deactivate))}),inc.editing.innerPresenter.addModal(e)}return this},deactivate:function(){return this.active&&(_.each(this.subeditors,function(e){e.deactivate()}),this.$cancel.parent().toggleClass("showingUndoButton",!1),this.$modal&&0==this.$modal.parent().length&&(this.$modal=null)),Inc.Editors.Archetype.prototype.deactivate.apply(this,arguments)},onSubEditorActiveChange:function(e,t){return t&&-1!=_.indexOf(this.subEditorTypesToToggle,e.type)&&_.each(this.subeditors,function(t){t.active&&-1!=_.indexOf(this.subEditorTypesToToggle,t.type)&&t.oid!=e.oid&&t.deactivate()},this),this}},{ClassName:"Accordion"}),Inc.Editors.AsideAccordionEditor=Inc.Editors.Archetype.extend({type:"AsideAccordionEditor",className:"AsideAccordionEditor AccordionEditor",template:_.template($("#AsideAccordion-Editor-Template").html()),constructor:function(e){e||(e={}),this.subeditors=this.subeditors||e.subeditors||[],this.$list=null,this.$listContainer=null,this.subEditorTypesToToggle=["DateTimeSubEditor"],Inc.Editors.Archetype.apply(this,arguments)},initialize:function(e){Inc.Editors.Archetype.prototype.initialize.apply(this,arguments),this.render(),this.$list=this.$(".List"),this.$listContainer=this.$(".ListContainer"),this.$cancel=this.$(".UndoButton"),this.$modal=null,this.$el.on("keydown",function(e){32==e.keyCode&&$(e.target).hasClass("cke_editable")&&e.stopPropagation()});var t=[];_.each(this.subeditors,function(e){if(!e.permissionRequired||inc.user.admin.roleID<=e.permissionRequired){var i=new e.type(_.extend(e,{fieldname:e.fieldname,label:e.label.toUpperCase(),model:this.model,tagName:"li"}));this.listenTo(i,"edit",this.edited),-1!=_.indexOf(this.subEditorTypesToToggle,i.type)&&this.listenTo(i,"change:active",this.onSubEditorActiveChange),i.$el.toggleClass("ListEditorItem",!0),this.$list.append(i.$el),t.push(i)}},this),this.subeditors=t,this.listenTo(this.model,"save:success",this.done),Inc.Utilities.iOS||(this.$listContainer.css("overflow-y","hidden").perfectScrollbar({suppressScrollX:!0,useBothWheelAxes:!0,direction:"y"}),this.$listContainer.find(".ps-scrollbar-y").append('<div class="ps-scrollbar-y-custom-inner-middle"></div>')),this.listenTo(inc,"save:started",this.close),this.$el.on("click.inc:content:edit",function(e){this.disabled&&this.trigger("click",e,this.$editable)}.bind(this)),this.updateScrollbar();var i=this;this.updateScrollbarInterval=setInterval(function(){i.updateScrollbar()},200)},activate:function(){if(!this.active&&this.model.ready&&(this.model.isNew()||this.model.userHasLock())){if(this.area&&!this.area.activationAllowed(this))return this;Inc.Editors.Archetype.prototype.activate.apply(this,arguments);var e=new Inc.Modals.Aside({className:"AsideAccordionEditorModal",$content:this.$el,priority:3,editingContainerClass:"asideForAsideAccordionEditor"});$("#contentcontainer > .ModalWrapper").on("click.inc:content:edit:asideAccordionEditor",this.close.bind(this)),e.render(),$(".SectionUpDown").hide(),e.listenToOnce(this,"click:close",e.close),this.listenToOnce(e,"show:finished repositioned",function(e){this.$listContainer.perfectScrollbar("update")}),this.listenToOnce(e,"close:finished",this.deactivate),_.each(this.subeditors,function(t){-1==_.indexOf(this.subEditorTypesToToggle,t.type)&&(t.activate(),t.listenToOnce(e,"close:started",t.deactivate))}),this.$editable.toggleClass("beingEdited",!0),inc.editing.asidePresenter.addModal(e)}return this},close:function(){return this.trigger("click:close",this),this.trash(),this},kill:function(){return this.close()},deactivate:function(){return this.active&&(_.each(this.subeditors,function(e){e.deactivate()}),this.$listContainer.scrollTop(0),this.$listContainer.off("scroll.inc:content:edit"),$("#contentcontainer > .ModalWrapper").off("click.inc:content:edit:asideAccordionEditor"),this.$editable.toggleClass("beingEdited",!1),$(".SectionUpDown").show()),Inc.Editors.Archetype.prototype.deactivate.apply(this,arguments)},onSubEditorActiveChange:function(e,t){return t&&-1!=_.indexOf(this.subEditorTypesToToggle,e.type)&&_.each(this.subeditors,function(t){t.active&&-1!=_.indexOf(this.subEditorTypesToToggle,t.type)&&t.oid!=e.oid&&t.deactivate()},this),this},updateScrollbar:_.throttle(function(){return this.$listContainer&&this.$listContainer.perfectScrollbar("update"),this},100,{leading:!1}),trash:function(){return this.deactivate(),this.$listContainer=null,this.$list=null,_.each(this.subeditors,function(e){e.trash()}),this.subeditors=[],clearInterval(this.updateScrollbarInterval),Inc.Editors.Archetype.prototype.trash.apply(this,arguments)}},{ClassName:"AsideAccordionEditor"}),Inc.Editors.ArticleDates=Inc.Editors.Accordion.extend({type:"ArticleDates",constructor:function(e){e||(e={}),this.subeditors=[{fieldname:"inc_pubdate",label:"Pubdate",type:Inc.Editors.DateTimeSubEditor},{fieldname:"inc_promo_date",label:"Promo Date",type:Inc.Editors.DateTimeSubEditor,permissionRequired:2},{fieldname:"inc_custom_pubdate",label:"Custom Pubdate",type:Inc.Editors.TextSubEditor,permissionRequired:2}],Inc.Editors.Accordion.apply(this,arguments)}},{ClassName:"ArticleDates"}),Inc.Views.ImageEditorItem=Inc.ToggleView.extend({type:"ImageEditorItem",tagName:"li",className:"ListItem",template:_.template($("#Image-Editor-Item-Template").html()),events:function(){return{"click.inc:content:edit figure":"click"}},render:function(){return this.$el.html(this.template({image:this.model})),this.$el.attr("unselectable","on"),this},click:function(){return this.trigger("click",this),this}},{ClassName:"ImageEditorItem"}),Inc.Views.VideoSelectorItem=Inc.ToggleView.extend({type:"VideoSelectorItem",tagName:"li",className:"ListItem",template:_.template($("#VideoSelectorItem-Template").html()),events:function(){return{"click.inc:content:edit":"click"}},render:function(){return this.$el.html(this.template(this)),this},click:function(){return this.trigger("click",this),this}},{ClassName:"VideoSelectorItem"}),Inc.Editors.Image=Inc.Editors.Archetype.extend({type:"ImageEditor",className:"ImageEditor",template:_.template($("#Image-Editor-Template").html()),constructor:function(e){e||(e={}),this.$menubar=null,this.$searchForm=null,this.$search=null,this.$similarTags=null,this.$listContainer=null,this.$list=null,this.$options=null,this.images=new Inc.Collections.Image,this.imagesLeftToDisplay=null,this.items=[],this.connectionError=null,this.xhr=null,this.lastResult={source:"getty:creative",response:null},this.noMoreResults=!1,Inc.Editors.Archetype.apply(this,arguments)},initialize:function(e){this.listenTo(inc.admin,"imagesFailedToLoad",this.displayConnectionError),Inc.Editors.Archetype.prototype.initialize.apply(this,arguments),this.render(),this.$menubar=this.$(".MenuBar"),this.$searchForm=this.$(".SearchForm"),this.$search=this.$searchForm.find(".Search"),this.$similarTags=this.$(".SimilarTags"),this.$listContainer=this.$(".ListContainer"),this.$list=this.$listContainer.children(".List"),this.$options=this.$(".OptionsBar"),this.$noresults=$('<li class="NoResultsFound">No Results Found</li>'),this.$entersearchterm=$('<li class="EnterSearchTerm">Enter a search term and hit enter for results.</li>'),this.$searchForm.on("submit",this.search.bind(this)),this.$searchForm.find(".ImageSource, .SortSelector").on("change",function(e){this.lastResult={source:this.$searchForm.find(".ImageSource").val(),response:null},this.search(e)}.bind(this)),Inc.Utilities.iOS||(this.$listContainer.css("overflow-y","hidden").perfectScrollbar({suppressScrollX:!0,useBothWheelAxes:!0,direction:"y",preventSpaceScrolling:!0}),this.$listContainer.find(".ps-scrollbar-y").append('<div class="ps-scrollbar-y-custom-inner-middle"></div>')),this.listenTo(inc,"save:started",this.close),this.$el.on("click.inc:content:edit",function(e){this.disabled&&this.trigger("click",e,this.$editable)}.bind(this)),this.listenTo(this.images,"add",this.addedImage),this.listenTo(this.images,"reset",this.resetImages),this.$list.append(this.$entersearchterm),this.updateScrollbar();var t=this;this.updateScrollbarInterval=setInterval(function(){t.updateScrollbar()},200)},events:function(){return{"click.inc:content:edit .CloseButton":"close","click.inc:content:edit .ClearSearchButton":"clearSearch","click.inc:content:edit .upload-button":"onUploadClick"}},search:function(e){e&&e.preventDefault(),this.xhr&&(this.xhr.abort(),this.xhr=null,this.setLoading(!1));var t=this.$(".ImageSource").val();return this.lastResult={source:t,response:null},this.noMoreResults=!1,this.$noresults.detach(),this.$listContainer.scrollTop(0),this.images.reset(),(""!=this.$search.val().trim()||"personal"==this.$(".ImageSource").val())&&this.load(),this},close:function(){return this.$search.val(""),this.trigger("click:close",this),this},kill:function(){return this.close()},clearSearch:function(){return this.$search.val(""),Inc.Utilities.iOS||this.$search.focus(),this.search(),this},activate:function(){if(!this.active&&this.model.editable()){if(this.area&&!this.area.activationAllowed(this))return _.findWhere(inc.editing.modelsBeingEdited,{oid:this.model.oid})||inc.editing.modelsBeingEdited.push(this.model),this;Inc.Editors.Archetype.prototype.activate.apply(this,arguments);var e=new Inc.Modals.Aside({className:"ImageEditorModal",$content:this.$el,priority:3,editingContainerClass:"asideForImageEditor"});this.$editable.toggleClass("beingEdited",!0),this.$editable.on("click.inc:content:edit:images",this.clickedFeaturedImage.bind(this)),this.$listContainer.on("scroll.inc:content:edit",this.scrolled.bind(this)),$("#contentcontainer > .ModalWrapper").on("click.inc:content:edit:images",this.close.bind(this)),e.render(),$(".SectionUpDown").hide(),e.listenToOnce(this,"click:close",e.close),this.listenToOnce(e,"show:finished repositioned",function(e){this.$listContainer.perfectScrollbar("update")}),this.listenToOnce(e,"close:finished",this.deactivate),inc.editing.asidePresenter.addModal(e),this.$search.focus(),"personal"==this.$(".ImageSource").val()&&this.search()}return this},deactivate:function(){return this.active&&(this.xhr&&(this.xhr.abort(),this.xhr=null),this.setLoading(!1),this.lastResult={source:this.lastResult.source,response:null},this.noMoreResults=!1,this.$noresults.detach(),this.$listContainer.scrollTop(0),this.images.reset(),this.$editable.toggleClass("beingEdited",!1),this.$editable.off("click.inc:content:edit:images"),this.$listContainer.off("scroll.inc:content:edit"),$("#contentcontainer > .ModalWrapper").off("click.inc:content:edit:images"),$(".SectionUpDown").show()),$(".Section .sidebar_middle").each(function(){"fixed"==$(this).css("position")&&($(this).css("position","relative"),async.nextTick(async.apply(function(e){e.css("position","fixed")},$(this))));
}),Inc.Editors.Archetype.prototype.deactivate.apply(this,arguments)},displayConnectionError:function(){this.$list.empty();var e=$('<li class="ConnectionErrorListItem"></li>');return this.connectionError=new Inc.Accessories.ConnectionErrorIndicator,e.append(this.connectionError.$el),this.$list.append(e),this},addedImage:function(e,t,i){var n=new Inc.Views.ImageEditorItem({model:e,active:this.model.getFeaturedImageID&&e.get("id")==this.model.getFeaturedImageID()}).render();this.listenTo(n,"click",this.clickedItem),this.items.push(n),this.$list.children(".AjaxLoaderListItem").before(n.$el);var s=this;return setTimeout(function(){s.updateScrollbar()},100),this},resetImages:function(e,t){return this.connectionError&&(this.connectionError.trash(),this.connectionError=null,this.$list.children(".ConnectionErrorListItem").remove()),_.each(this.items,function(e){e.trash()}),this.items=[],e.each(function(i){this.addedImage(i,e,t)},this),0==this.items.length&&this.$list&&this.$list.append(this.$entersearchterm),this},updateScrollbar:_.throttle(function(){return this.$listContainer.perfectScrollbar("update"),this},100,{leading:!1}),scrolled:_.throttle(function(e){var t=this.$listContainer.scrollTop(),i=this.$listContainer.prop("scrollHeight"),n=this.$listContainer.height();return t>=i-n-n/2&&(this.loading||this.load()),this},100),load:function(){if(this.loading||this.xhr||this.noMoreResults||""==this.$search.val().trim()&&"personal"!=this.$(".ImageSource").val())return this;this.connectionError&&(this.connectionError.trash(),this.connectionError=null,this.$list.children(".ConnectionErrorListItem").remove()),this.$noresults.detach(),this.$entersearchterm.detach(),this.setLoading(!0);var e,t=this.$(".ImageSource").val(),i=this.$(".SortSelector").val(),n=this.$search.val().trim();if("inc"==t||"personal"==t){this.$(".SortSelector").css("visibility","hidden"),e=inc.restURL+"panoramicimages-all";var s={phrase:n||""};"personal"==t&&(s.img_usrid=inc.user.id)}else{this.$(".SortSelector").css("visibility","visible"),e="http://sitemanager.inc.com/getty/proxy-api.php";var s={proxy_type:"search",image_family:t.replace("getty:",""),page_size:20,sort_order:i||"best",phrase:""};!this.noMoreResults&&this.lastResult.response&&_.isNumber(this.lastResult.response.nextpage)&&(s.page=this.lastResult.response.nextpage),""!=n&&(s.phrase=n),""==s.phrase.trim()&&(s.phrase="lime")}return this.xhr=$.ajax({dataType:"json",url:e,data:s,cache:!1}).done(function(e){if(this.lastResult={source:t,response:e},"inc"==t||"personal"==t)e.error?(this.noMoreResults=!0,this.$noresults.html("No Results Found"),this.$list.prepend(this.$noresults)):(_.each(e.data,function(e){inc.collections.image.add(e),this.images.add(e)},this),this.noMoreResults=!0,this.$noresults.html(0==this.images.length?"No Results Found":"No More Results Found"),this.$list.append(this.$noresults));else if(_.isArray(e.images))if(e.images.length>0){for(var i=0;i<e.images.length;i++)e.images[i].id="g"+e.images[i].id,e.images[i].img_caption=e.images[i].caption,delete e.images[i].caption;inc.collections.image.add(e.images),this.images.add(e.images),e.lastpage==e.currentpage&&(this.noMoreResults=!0,this.$noresults.html("No More Results Found"),this.$list.append(this.$noresults))}else this.noMoreResults=!0,this.$noresults.html("No Results Found"),this.$list.prepend(this.$noresults);else this.displayConnectionError();this.xhr=null,this.setLoading(!1)}.bind(this)).fail(function(e){this.xhr=null,this.setLoading(!1),this.displayConnectionError()}.bind(this)),this},clickedItem:function(e){return this.disabled||e.active?this:(_.each(this.items,function(e){e.deactivate()}),this.model instanceof Inc.Models.Article&&"0"!=e.model.getID()&&0!=e.model.getID()?this.model.setFeaturedImage(e.model,this):this.model instanceof Inc.Models.Slide&&"0"!=e.model.getID()&&0!=e.model.getID()&&this.model.set("sld_imgid",e.model.getID(),{origin:this}),e.activate(),this.trigger("select:image",this),this)},clickedFeaturedImage:function(e){return this.disabled||e&&e.preventDefault(),this},dataChanged:function(e,t,i){return i||(i={}),i.origin&&i.origin.oid==this.oid||this.clearSearch(),this},onUploadClick:function(e){e&&e.preventDefault();var t=new Inc.Modals.UploadDialog({messages:"Upload an Image:"});return this.listenTo(t,"image:uploaded",this.onImageUploaded),dispatcher.trigger("inc:edit"),inc.modalPresenter.addModal(t),"personal"!=this.$(".ImageSource").val()&&(this.$(".ImageSource").val("personal"),this.$search.val(""),this.search()),this},onImageUploaded:function(e){inc.collections.image.add(e);var t=inc.collections.image.get(e.id),i=this.images.models.slice();return i.unshift(t),this.images.reset(i),async.nextTick(_.bind(function(){this.clickedItem(this.items[0])},this)),this},trash:function(){return this.$menubar=null,this.$searchForm.off(),this.$searchForm=null,this.$search=null,this.$similarTags=null,this.$listContainer=null,this.$list=null,this.$options=null,this.$editable.off("click.inc:content:edit:images"),this.connectionError&&(this.connectionError.trash(),this.connectionError=null),this.images.reset(),_.each(this.items,function(e){e.trash()}),this.items=[],clearInterval(this.updateScrollbarInterval),Inc.Editors.Archetype.prototype.trash.apply(this,arguments)}},{ClassName:"ImageEditor"}),Inc.Editors.VideoSelector=Inc.Editors.Archetype.extend({type:"VideoSelector",className:"VideoSelector",template:_.template($("#Video-Editor-Template").html()),constructor:function(e){e||(e={}),this.$menubar=null,this.$searchForm=null,this.$search=null,this.$listContainer=null,this.$list=null,this.videos=new Inc.Collections.Video,this.videosLeftToDisplay=null,this.items=[],this.connectionError=null,this.xhr=null,this.lastResult={response:null},this.noMoreResults=!1,Inc.Editors.Archetype.apply(this,arguments)},initialize:function(e){this.editingInlineVideo=_.isBoolean(e.editingInlineVideo)?e.editingInlineVideo:!1,this.ckeditorInstance=e.ckeditorInstance||null,this.closeWidget=e.closeWidget||null,this.inlinePlayerIdentifier=e.inlinePlayerIdentifier||null,this.listenTo(inc.admin,"videosFailedToLoad",this.displayConnectionError),Inc.Editors.Archetype.prototype.initialize.apply(this,arguments),this.render(),this.$menubar=this.$(".MenuBar"),this.$searchForm=this.$(".SearchForm"),this.$search=this.$searchForm.find(".Search"),this.$listContainer=this.$(".ListContainer"),this.$list=this.$listContainer.children(".List"),this.$noresults=$('<li class="NoResultsFound">No Results Found</li>'),this.$entersearchterm=$('<li class="EnterSearchTerm">Enter a search term and hit enter for results.</li>'),this.$searchForm.on("submit",this.search.bind(this)),Inc.Utilities.iOS||(this.$listContainer.css("overflow-y","hidden").perfectScrollbar({suppressScrollX:!0,useBothWheelAxes:!0,direction:"y",preventSpaceScrolling:!0}),this.$listContainer.find(".ps-scrollbar-y").append('<div class="ps-scrollbar-y-custom-inner-middle"></div>')),this.listenTo(inc,"save:started",this.close),this.$el.on("click.inc:content:edit",function(e){this.disabled&&this.trigger("click",e,this.$editable)}.bind(this)),this.listenTo(this.videos,"add",this.addedVideo),this.listenTo(this.videos,"reset",this.resetVideos),this.$list.append(this.$entersearchterm),this.updateScrollbar();var t=this;this.updateScrollbarInterval=setInterval(function(){t.updateScrollbar()},200)},events:function(){return{"click.inc:content:edit .CloseButton":"close","click.inc:content:edit .ClearSearchButton":"clearSearch"}},search:function(e){return e&&e.preventDefault(),this.xhr&&(this.xhr.abort(),this.xhr=null,this.setLoading(!1)),this.lastResult={response:null},this.noMoreResults=!1,this.$noresults.detach(),this.$listContainer.scrollTop(0),this.videos.reset(),""!=this.$search.val().trim()&&this.load(),this},close:function(){return this.$search.val(""),this.trigger("click:close",this),this},kill:function(){return this.close()},clearSearch:function(){return this.$search.val(""),Inc.Utilities.iOS||this.$search.focus(),this.search(),this},activate:function(){var e=this;if(!this.active&&this.model.editable()){if(this.area&&!this.area.activationAllowed(this))return _.findWhere(inc.editing.modelsBeingEdited,{oid:this.model.oid})||inc.editing.modelsBeingEdited.push(this.model),this;Inc.Editors.Archetype.prototype.activate.apply(this,arguments);var t=new Inc.Modals.Aside({className:"VideoSelectorModal",$content:this.$el,priority:3,editingContainerClass:"asideForVideoSelector"});this.$editable.toggleClass("beingEdited",!0),this.$editable.on("click.inc:content:edit:videos",this.clickedVideoOnPage.bind(this)),this.$listContainer.on("scroll.inc:content:edit",this.scrolled.bind(this)),$("#contentcontainer > .ModalWrapper").on("click.inc:content:edit:videos",this.close.bind(this)),t.render(),$(".SectionUpDown").hide(),t.listenToOnce(this,"click:close",t.close),this.listenToOnce(t,"show:finished repositioned",function(e){this.$listContainer.perfectScrollbar("update")}),this.listenToOnce(t,"close:finished",this.deactivate),inc.editing.asidePresenter.addModal(t),async.nextTick(function(){e.$search.focus()})}return this},deactivate:function(){if(this.active){if(this.xhr&&(this.xhr.abort(),this.xhr=null),this.setLoading(!1),this.lastResult={response:null},this.editingInlineVideo){var e=_.find(this.ckeditorInstance.area.inlineVideoPlayers,function(e){return e.$el.data("inlinePlayerIdentifier")==this.inlinePlayerIdentifier},this);e&&e.$el.toggleClass("beingEdited",!1),e&&!e.model&&this.closeWidget&&this.closeWidget()}this.noMoreResults=!1,this.$noresults.detach(),this.$listContainer.scrollTop(0),this.videos.reset(),this.ckeditorInstance=null,this.$editable.toggleClass("beingEdited",!1),this.$editable.off("click.inc:content:edit:videos"),this.$listContainer.off("scroll.inc:content:edit"),$("#contentcontainer > .ModalWrapper").off("click.inc:content:edit:videos"),$(".SectionUpDown").show()}return $(".Section .sidebar_middle").each(function(){"fixed"==$(this).css("position")&&($(this).css("position","relative"),async.nextTick(async.apply(function(e){e.css("position","fixed")},$(this))))}),Inc.Editors.Archetype.prototype.deactivate.apply(this,arguments)},displayConnectionError:function(){this.$list.empty();var e=$('<li class="ConnectionErrorListItem"></li>');return this.connectionError=new Inc.Accessories.ConnectionErrorIndicator,e.append(this.connectionError.$el),this.$list.append(e),this},addedVideo:function(e,t,i){var n=!1;if(this.editingInlineVideo){var s=_.find(this.ckeditorInstance.area.inlineVideoPlayers,function(e){return e.$el.data("inlinePlayerIdentifier")==this.inlinePlayerIdentifier},this);s.model&&s.model.getID()==e.getID()&&(n=!0)}else n=this.model.getFeaturedVideoID&&e.get("id")==this.model.getFeaturedVideoID();var o=new Inc.Views.VideoSelectorItem({model:e,active:n}).render();this.listenTo(o,"click",this.clickedItem),this.items.push(o),this.$list.children(".AjaxLoaderListItem").before(o.$el);var a=this;return setTimeout(function(){a.updateScrollbar()},100),this},resetVideos:function(e,t){return this.connectionError&&(this.connectionError.trash(),this.connectionError=null,this.$list.children(".ConnectionErrorListItem").remove()),_.each(this.items,function(e){e.trash()}),this.items=[],e.each(function(i){this.addedVideo(i,e,t)},this),0==this.items.length&&this.$list&&this.$list.append(this.$entersearchterm),this},updateScrollbar:_.throttle(function(){return this.$listContainer.perfectScrollbar("update"),this},100,{leading:!1}),scrolled:_.throttle(function(e){var t=this.$listContainer.scrollTop(),i=this.$listContainer.prop("scrollHeight"),n=this.$listContainer.height();return t>=i-n-n/2&&(this.loading||this.load()),this},100),load:function(){if(this.loading||this.xhr||this.noMoreResults||""==this.$search.val().trim())return this;this.connectionError&&(this.connectionError.trash(),this.connectionError=null,this.$list.children(".ConnectionErrorListItem").remove()),this.$noresults.detach(),this.$entersearchterm.detach(),this.setLoading(!0);var e=this.$search.val().trim(),t=inc.restURL+"videosearch",i={phrase:e||""};return this.xhr=$.ajax({dataType:"json",url:t,data:i,cache:!1}).done(function(e){this.lastResult={response:e},e.error?(this.noMoreResults=!0,this.$noresults.html("No Results Found"),this.$list.prepend(this.$noresults)):(_.each(e.data,function(e){inc.collections.video.add(e),this.videos.add(e)},this),this.noMoreResults=!0,this.$noresults.html(0==this.videos.length?"No Results Found":"No More Results Found"),this.$list.append(this.$noresults)),this.xhr=null,this.setLoading(!1)}.bind(this)).fail(function(e){this.xhr=null,this.setLoading(!1),this.displayConnectionError()}.bind(this)),this},clickedItem:function(e){if(this.disabled||e.active)return this;if(_.each(this.items,function(e){e.deactivate()}),this.model instanceof Inc.Models.Article&&"0"!=e.model.getID()&&0!=e.model.getID())if(this.editingInlineVideo){var t=_.find(this.ckeditorInstance.area.inlineVideoPlayers,function(e){return e.$el.data("inlinePlayerIdentifier")==this.inlinePlayerIdentifier},this);if(t){t.$el.data("contentId",e.model.getID()),t.$el.attr("data-content-id",e.model.getID()),t.model=e.model,t.render();var i=_.find(this.ckeditorInstance.area.editors,function(e){return e.oid==this.ckeditorInstance.editorOID},this);i&&i.contentChanged()}}else this.model.setFeaturedVideo(e.model,this);return e.activate(),this.trigger("select:video",this,e.model),this},clickedVideoOnPage:function(e){return this.disabled||e&&e.preventDefault(),this},dataChanged:function(e,t,i){return this},trash:function(){return this.$menubar=null,this.$searchForm.off(),this.$searchForm=null,this.$search=null,this.$listContainer=null,this.$list=null,this.$editable.off("click.inc:content:edit:videos"),this.connectionError&&(this.connectionError.trash(),this.connectionError=null),this.videos.reset(),_.each(this.items,function(e){e.trash()}),this.items=[],this.ckeditorInstance=null,clearInterval(this.updateScrollbarInterval),Inc.Editors.Archetype.prototype.trash.apply(this,arguments)}},{ClassName:"VideoSelector"}),Inc.Editors.TextInput=Inc.Editors.Archetype.extend({type:"TextInputEditor",template:_.template($("#TextInput-Editor-Template").html().trim()),constructor:function(e){this.$input=null,Inc.Editors.Archetype.apply(this,arguments)},initialize:function(e){Inc.Editors.Archetype.prototype.initialize.apply(this,arguments),0==this.$el.parent().length&&this.$el.data("editorID",this.oid),this.render(),this.$input=this.$("input"),this.model&&this.$input.val(this.model.get(this.fieldname)),this.$input.on("input.inc:content:edit",this.contentChanged.bind(this)),this.$input.on("paste.inc:content:edit",function(e){var t=this;setTimeout(function(){var e=t.$input.val();e&&(e=e.replace(/^[\s|(?:&nbsp;)]*|[\s(?:&nbsp;)]*$/g,""),t.$input.val(e))},0)}.bind(this))},activate:function(){if(!this.active&&this.model.ready&&(this.model.isNew()||this.model.userHasLock())){if(this.area&&!this.area.activationAllowed(this))return this;Inc.Editors.Archetype.prototype.activate.apply(this,arguments),this.$input.attr("readonly",!1)}return this},deactivate:function(){return this.active&&this.$input.attr("readonly",!0),Inc.Editors.Archetype.prototype.deactivate.apply(this,arguments)},dataChanged:function(e,t,i){return i||(i={}),i.origin&&i.origin.oid==this.oid||this.$input.val(t),this},contentChanged:function(){return this.model.set(this.fieldname,this.getEditorContent(),{origin:this}),dispatcher.trigger("inc:edit"),this},getEditorContent:function(){var e=this.$input.val();return""==e?null:e},disable:function(){return this.deactivate.apply(this,arguments),this.disabled&&this.deactivate(),this},enable:function(){return this.activate.apply(this,arguments),!this.disabled&&this.activate(),this},trash:function(){return this.$input.off(),this.$input=null,Inc.Editors.Archetype.prototype.trash.apply(this,arguments)}},{ClassName:"TextInputEditor"}),Inc.Editors.TextArea=Inc.Editors.Archetype.extend({type:"TextAreaEditor",template:_.template($("#TextArea-Editor-Template").html().trim()),initialize:function(e){this.$textarea=null,Inc.Editors.Archetype.apply(this,arguments)},initialize:function(e){Inc.Editors.Archetype.prototype.initialize.apply(this,arguments),0==this.$el.parent().length&&this.$el.data("editorID",this.oid),this.render(),this.$textarea=this.$("textarea"),this.model&&this.$textarea.val(this.model.get(this.fieldname)),this.$textarea.on("input.inc:content:edit",this.contentChanged.bind(this)),this.$textarea.on("paste.inc:content:edit",function(e){var t=this;setTimeout(function(){var e=t.$textarea.val();e&&(e=e.replace(/^[\s|(?:&nbsp;)]*|[\s(?:&nbsp;)]*$/g,""),t.$textarea.val(e))},0)}.bind(this))},activate:function(){if(!this.active&&this.model.ready&&(this.model.isNew()||this.model.userHasLock())){if(this.area&&!this.area.activationAllowed(this))return this;Inc.Editors.Archetype.prototype.activate.apply(this,arguments),this.$textarea.attr("readonly",!1)}return this},deactivate:function(){return this.active&&this.$textarea.attr("readonly",!0),Inc.Editors.Archetype.prototype.deactivate.apply(this,arguments)},dataChanged:function(e,t,i){return i||(i={}),i.origin&&i.origin.oid==this.oid||this.$textarea.val(t),this},contentChanged:function(){return this.model.set(this.fieldname,this.getEditorContent(),{origin:this}),dispatcher.trigger("inc:edit"),this},getEditorContent:function(){var e=this.$textarea.val();return""==e?null:e},disable:function(){return this.deactivate.apply(this,arguments),this.disabled&&this.deactivate(),this},enable:function(){return this.activate.apply(this,arguments),!this.disabled&&this.activate(),this},trash:function(){return this.$textarea.off(),this.$textarea=null,Inc.Editors.Archetype.prototype.trash.apply(this,arguments)}},{ClassName:"TextAreaEditor"}),Inc.Editors.Checkbox=Inc.Editors.Archetype.extend({type:"CheckboxEditor",template:_.template($("#Checkbox-Editor-Template").html().trim()),constructor:function(e){this.$checkbox=null,this.$label=null,this.toggleOnActivate=!1,Inc.Editors.Archetype.apply(this,arguments)},initialize:function(e){Inc.Editors.Archetype.prototype.initialize.apply(this,arguments),0==this.$el.parent().length&&this.$el.data("editorID",this.oid),this.render(),this.listenTo(this.model,"update:fail",function(){this.toggleOnActivate=!1}),this.$label=this.$("label"),this.$label.on("click.inc:content:edit",function(e){this.active||(this.toggleOnActivate=!0,e.preventDefault())}.bind(this)),this.$checkbox=this.$("input"),this.model&&this.$checkbox.prop("checked",this.model.get(this.fieldname)),this.$checkbox.on("click.inc:content:edit",function(e){this.active||(this.toggleOnActivate=!0,e.preventDefault())}.bind(this)),this.$checkbox.on("change.inc:content:edit",function(e){return this.active?void this.contentChanged():void e.preventDefault()}.bind(this))},activate:function(){if(!this.active&&this.model.ready&&(this.model.isNew()||this.model.userHasLock())){if(this.area&&!this.area.activationAllowed(this))return this;Inc.Editors.Archetype.prototype.activate.apply(this,arguments),this.toggleOnActivate&&(this.toggleOnActivate=!1,this.$checkbox.prop("checked")?this.$checkbox.prop("checked",!1):this.$checkbox.prop("checked",!0),this.contentChanged(),dispatcher.trigger("inc:model:change:dirty",this.model))}return this},deactivate:function(){return this.toggleOnActivate=!1,Inc.Editors.Archetype.prototype.deactivate.apply(this,arguments)},dataChanged:function(e,t,i){return i||(i={}),i.origin&&i.origin.oid==this.oid||this.$checkbox.prop("checked",t),this},contentChanged:function(){return this.model.set(this.fieldname,this.getEditorContent(),{origin:this}),dispatcher.trigger("inc:edit"),this},getEditorContent:function(){return this.$checkbox.prop("checked")},disable:function(){return this.deactivate.apply(this,arguments)},enable:function(){return this.activate.apply(this,arguments)},trash:function(){return this.$checkbox.off(),this.$checkbox=null,this.$label.off(),this.$label=null,Inc.Editors.Archetype.prototype.trash.apply(this,arguments)}},{ClassName:"CheckboxEditor"}),Inc.Editors.Select=Inc.Editors.Archetype.extend({type:"SelectEditor",template:_.template($("#Select-Editor-Template").html().trim()),constructor:function(e){this.$select=null,this.$label=null,this.$mask=null,this.options=e.options||[],Inc.Editors.Archetype.apply(this,arguments)},initialize:function(e){Inc.Editors.Archetype.prototype.initialize.apply(this,arguments),0==this.$el.parent().length&&this.$el.data("editorID",this.oid),this.render(),this.$mask=this.$(".EditorDisabledMask"),this.$label=this.$("label"),this.$select=this.$("select"),this.model&&this.$select.val(this.model.get(this.fieldname)+""),this.$select.on("change.inc:content:edit",this.contentChanged.bind(this))},activate:function(){if(!this.active&&this.model.ready&&(this.model.isNew()||this.model.userHasLock())){if(this.area&&!this.area.activationAllowed(this))return this;Inc.Editors.Archetype.prototype.activate.apply(this,arguments)}return this},dataChanged:function(e,t,i){return i||(i={}),i.origin&&i.origin.oid==this.oid||this.$select.val(t+""),this},contentChanged:function(){return this.model.set(this.fieldname,this.getEditorContent(),{origin:this}),dispatcher.trigger("inc:edit"),this},getEditorContent:function(){var e=this.$select.val();return e=""==e?null:parseInt(e)},disable:function(){return this.deactivate.apply(this,arguments)},enable:function(){return this.activate.apply(this,arguments)},trash:function(){return this.$select.off(),this.$select=null,this.$label.off(),this.$label=null,this.$mask.off(),this.$mask=null,Inc.Editors.Archetype.prototype.trash.apply(this,arguments)}},{ClassName:"SelectEditor"}),Inc.Editors.InlineImageEditor=Inc.Editors.AsideAccordionEditor.extend({type:"InlineImageEditor",constructor:function(e){e||(e={}),this.subeditors=[{fieldname:"inl_reference_name",label:"Reference Name",type:Inc.Editors.TextSubEditor,permissionRequired:3},{fieldname:"inl_displaytype",label:"Display Type",type:Inc.Editors.SelectSubEditor,permissionRequired:3,options:Inc.Models.InlineImage.displayTypes.slice()},{fieldname:"inl_headline",label:"Headline",type:Inc.Editors.TextSubEditor,permissionRequired:3,focus:!1},{fieldname:"inl_caption",label:"Caption",type:Inc.Editors.TextSubEditor,permissionRequired:3,focus:!1,allowBreaks:!0},{fieldname:"inl_extended_caption",label:"Extended Caption",type:Inc.Editors.TextSubEditor,permissionRequired:3,focus:!1,allowBreaks:!0},{fieldname:"inl_link_text",label:"Link Text",type:Inc.Editors.TextSubEditor,permissionRequired:3,focus:!1},{fieldname:"inl_link_url",label:"Link URL",type:Inc.Editors.TextSubEditor,permissionRequired:3,focus:!1},{fieldname:"inl_custom_credit",label:"Custom Credit",type:Inc.Editors.TextSubEditor,permissionRequired:3,focus:!1},{fieldname:"inl_alt_text",label:"Alt Text",type:Inc.Editors.TextSubEditor,permissionRequired:3,focus:!1}],Inc.Editors.AsideAccordionEditor.apply(this,arguments)},initialize:function(e){Inc.Editors.AsideAccordionEditor.prototype.initialize.apply(this,arguments),this.$el.on("click",".RemoveButton",_.bind(this.removeInlineImage,this)),this.listenTo(this.model,"change:inl_displaytype",this.onDisplayTypeChange),this.listenTo(this.model,"change:inl_caption change:inl_link_url change:inl_link_text change:imageString",this.onAttributeChange),this.model.isNew()&&this.onAttributeChange(this.model)},onDisplayTypeChange:function(e,t,i){return $(".inlineimage-"+e.getID()).toggleClass("inline-"+e.previousAttributes().inl_displaytype,!1).toggleClass("inline-"+t,t.length>0),this.onAttributeChange.apply(this,arguments),this},onAttributeChange:function(e,t,i){var n=e.copyAttributes(),s=inc.collections[this.$editable.data("parentContentType")].get(_.isNaN(parseInt(this.$editable.data("parentContentId")))?this.$editable.data("parentContentId"):parseInt(this.$editable.data("parentContentId")));n.imageURL=e.getImageURL(),n.hasImageString=e.has("imageString")&&e.get("imageString")?!0:!1,n.pdfURL=e.getPDFURL(),n.parentID=s.getID(),n.id=e.getID();var o=_.template($("#InlineImage-Template").html())(n);return $(".inlineimage-"+e.getID()).html($(o).html()),$(".inlineimage-"+e.getID()).toggleClass("hasImageString",n.hasImageString),this},removeInlineImage:function(e){var t=this.model.getID(),i=[],n=inc.collections[this.$editable.data("parentContentType")].get(_.isNaN(parseInt(this.$editable.data("parentContentId")))?this.$editable.data("parentContentId"):parseInt(this.$editable.data("parentContentId"))),s=(n.get("inlineimages")||[]).slice();if(0==$(".inlineimage-"+t).length)return this.close(),this;for(var o=0;o<s.length;o++){var a=s[o];a.id!=t&&(a.sortorder=i.length,i.push(a))}return n.set("inlineimages",i),$(".inlineimage-"+t).remove(),inc.editing.modelsBeingEdited=_.reject(inc.editing.modelsBeingEdited,function(e){return e.getID()==this.model.getID()},this),this.close(),this}},{ClassName:"InlineImageEditor"}),Inc.Editors.Crop=Inc.Editors.Archetype.extend({type:"CropTool",className:"CropTool",template:_.template($("#CropTool-Template").html()),initialize:function(e){e||(e={});this.items=[],this.appliedAspectRatio=e.appliedAspectRatio,this.originalModel=e.originalModel,this.originalTransform=_.clone(this.originalModel.get("transform"));var t=this.originalModel.get("img_pan_crop");if(_.isString(t)&&(t=$.parseJSON(t)),_.isNumber(this.originalModel.getID())&&t){var i,n,s={},o=t.img_w/t.img_h,a=t.w/t.h;this.appliedAspectRatio>=a?(i=t.w,n=i/this.appliedAspectRatio):(n=t.h,i=n*this.appliedAspectRatio),this.appliedAspectRatio>=o?s.zoom=t.img_w/i:s.zoom=t.img_h/n,s.x=(t.img_w/2-(t.w/2+t.x))/t.img_w,s.y=(t.img_h/2-(t.h/2+t.y))/t.img_h,this.originalTransform=s}this.xhr=null,this.picture=e.picture,Inc.Editors.Archetype.prototype.initialize.apply(this,arguments),0==this.$el.parent().length&&this.$el.data("editorID",this.oid),this.$el.attr("unselectable","on"),this.$el.html(this.template(this)),this.$itemContainer=this.$(".CropMenuItemContainer"),this.$loadingGraphic=this.$(".LoadingGraphic");var r=Inc.GestureRecognizers.PressAndHold.spawn({step:50,minStep:10,acceleration:1.05}),l=new Inc.MenuItems.PressAndHold({name:"CropZoomIn",label:"Zoom In",iconClass:"fi-zoom-in",iconOnly:!0,tooltip:"Zoom In",gestureRecognizers:r});this.items.push(l),this.$itemContainer.append(l.$el),this.listenTo(r,"gesture:pressandhold:step",this.zoomIn);var c=Inc.GestureRecognizers.PressAndHold.spawn({step:50,minStep:10,acceleration:1.05}),h=new Inc.MenuItems.PressAndHold({name:"CropZoomOut",label:"Zoom Out",iconClass:"fi-zoom-out",iconOnly:!0,tooltip:"Zoom Out",gestureRecognizers:c});this.items.push(h),this.$itemContainer.append(h.$el),this.listenTo(c,"gesture:pressandhold:step",this.zoomOut);var d=new Inc.MenuItems.Action({name:"CropAccept",label:"Accept",iconClass:"fi-check",iconOnly:!0,tooltip:"Accept",action:this.accept.bind(this)});this.items.push(d),this.$itemContainer.append(d.$el);var u=new Inc.MenuItems.Action({name:"CropCancel",label:"Cancel",iconClass:"fi-x",iconOnly:!0,tooltip:"Cancel",action:this.cancel.bind(this)});this.items.push(u),this.$itemContainer.append(u.$el)},setLoading:function(e){var t=arguments;return this.loading&&!e&&Modernizr.csstransitions?(this.$loadingGraphic.on("transitionend webkitTransitionEnd oTransitionEnd otransitionend MSTransitionEnd",function(e){this.$loadingGraphic.css("opacity",""),this.$loadingGraphic.off("transitionend webkitTransitionEnd oTransitionEnd otransitionend MSTransitionEnd"),Inc.Editors.Archetype.prototype.setLoading.apply(this,t)}.bind(this)),this.$loadingGraphic.css("opacity","0")):Inc.Editors.Archetype.prototype.setLoading.apply(this,arguments),this},activate:function(){if(!this.active&&this.model.ready&&this.model.editable()){if(this.area&&!this.area.activationAllowed(this))return this;Inc.Editors.Archetype.prototype.activate.apply(this,arguments),this.picture&&this.picture.$(".picture-inner img").css("opacity","1"),async.nextTick(this.loadCroppableImage.bind(this))}return this},deactivate:function(){return this.xhr&&this.xhr.abort(),this.xhr=null,this.active&&this.picture&&this.picture.$(".picture-inner img").data("ui-draggable")&&(this.picture.$(".picture-inner img").css("cursor",""),this.picture.$(".picture-inner img").draggable("destroy")),this.picture&&this.picture.$(".picture-inner img").css("opacity",""),this.$loadingGraphic.css("opacity",""),this.$loadingGraphic.off("transitionend webkitTransitionEnd oTransitionEnd otransitionend MSTransitionEnd"),Inc.Editors.Archetype.prototype.setLoading.call(this,!1),Inc.Editors.Archetype.prototype.deactivate.apply(this,arguments),this.picture.resize(),this},loadCroppableImage:function(){if(this.loading)return this;if(this.image)return this.onCroppableImageLoadSuccess(),this;this.setLoading(!0);var e=this.originalModel.get("img_gettyflag")?this.originalModel.get("img_foreignkey"):this.originalModel.getID().replace("g","");return this.xhr=$.ajax({dataType:"json",url:"http://sitemanager.inc.com/getty/proxy-api.php",data:{proxy_type:"get",image_id:e}}).done(function(t){if(t&&200==t.status&&t.filepath){var i=new Image;i.onload=_.bind(_.partial(this.onCroppableImageLoadSuccess,t,i),this),i.onerror=i.onabort=this.onCroppableImageLoadError.bind(this),i.src=inc.uploadedFilesURL+"uploaded_files/image/2000x/getty_"+e+".jpg"}else this.onCroppableImageLoadError()}.bind(this)).fail(this.onCroppableImageLoadError.bind(this)),this},onCroppableImageLoadSuccess:function(e,t){this.image||(this.image=t,e.image.src=t.src,e.image.cropped_image_width=this.image.width,e.image.cropped_image_height=this.image.height,e.image.crop_aspect_ratio=this.appliedAspectRatio,inc.collections.image.get(e.image.id)?this.model=inc.collections.image.get(e.image.id):(this.model.set(e.image),inc.collections.image.add(this.model))),this.model.set("transform",_.clone(this.originalTransform),{zoomOnly:this.picture.zoomOnly});var i=this.model.get("transform");!this.picture.zoomOnly||0==i.x&&0==i.y||this.model.set("transform",{x:0,y:0,zoom:i.zoom},{zoomOnly:this.picture.zoomOnly}),this.picture.reset({model:this.model,aspectRatio:this.appliedAspectRatio});var n=this.picture.$(".picture-inner img");return n.data("ui-draggable")||(n.css("opacity","1"),n.css("cursor","move"),n.draggable({containment:"parent",stop:this.onTransformImageStop.bind(this)}),(this.picture.fitHeight&&this.active&&this.picture.zoomOnly||n.width()<=this.picture.$el.width()&&n.height()<=this.picture.$el.height())&&(n.css("cursor",""),n.draggable("disable"))),this.trigger("load:success",this),async.nextTick(function(){this.setLoading(!1)}.bind(this)),dispatcher.trigger("inc:edit"),this},onCroppableImageLoadError:function(e,t,i){return this.setLoading(!1),this.deactivate(),inc.editing.modelsBeingEdited=_.reject(inc.editing.modelsBeingEdited,function(e){return e.oid==this.model.oid},this),"abort"!=t&&inc.admin.notify("The croppable image failed to load. Please try again."),dispatcher.trigger("inc:edit"),this},onTransformImageStop:function(e,t){var i=this.picture.$(".picture-inner"),n=$(i.children("img")[0]),s=n.height(),o=n.width(),a=this.picture.$el.height(),r=this.picture.$el.width(),l=a-s,c=r-o;return this.model.set("transform",{x:(t.position.left-Math.abs(c/2))/o,y:(t.position.top-Math.abs(l/2))/s,zoom:this.picture.model.get("transform").zoom},{zoomOnly:this.picture.zoomOnly}),dispatcher.trigger("inc:edit"),this},zoomIn:function(){var e=_.clone(this.picture.model.get("transform")),t=.1*e.zoom;return e.zoom+t>2&&(t=2-e.zoom),e.zoom+=t,this.model.set("transform",e,{zoomOnly:this.picture.zoomOnly}),this.picture.resize(),dispatcher.trigger("inc:edit"),this},zoomOut:function(){var e=_.clone(this.picture.model.get("transform")),t=.1*e.zoom;return e.zoom-t<1&&(t=e.zoom-1),e.zoom-=t,this.model.set("transform",e,{zoomOnly:this.picture.zoomOnly}),this.picture.resize(),dispatcher.trigger("inc:edit"),this},accept:function(){return this.loading?this:(this.originalModel=this.model,this.originalTransform=_.clone(this.originalModel.get("transform")),this.trigger("accept",this,this.model),async.nextTick(_.bind(this.deactivate,this)),dispatcher.trigger("inc:edit"),this)},cancel:function(){return this.model.set("transform",_.clone(this.originalTransform),{
zoomOnly:this.picture.zoomOnly}),inc.editing.modelsBeingEdited=_.reject(inc.editing.modelsBeingEdited,function(e){return e.oid==this.model.oid},this),this.deactivate(),dispatcher.trigger("inc:edit"),this},trash:function(){return this.cancel(),_.each(this.items,function(e){e.trash()}),this.items=[],this.picture=null,Inc.Editors.Archetype.prototype.trash.apply(this,arguments),this}}),Inc.Controllers.Admin=_.extend({},Backbone.Events,{type:"Admin",extend:Inc.extend,spawn:Inc.spawn,init:function(e){e||(e={}),this.adminMenu=null,this.editActivatedWithoutAdmin=!1,this.taskManager=Inc.Controllers.AdminTaskManager.spawn(),this.articleListing=null;var t=this;return $(document).ready(function(){$(window).keydown(_.throttle(_.bind(function(e){e.ctrlKey&&65==e.keyCode&&!inc.fallback&&(inc.isMode("admin")?this.adminMenu.active?dispatcher.trigger("inc:AdminMenu:deactivate"):dispatcher.trigger("inc:AdminMenu:activate"):this.activateAdminMode(!0))},t),2e3)),$(window).keydown(_.throttle(_.bind(function(e){e.ctrlKey&&69==e.keyCode&&!inc.fallback&&(inc.isMode("admin")?inc.user.admin.roleID<=3&&(inc.isMode("edit")?inc.editing.deactivate():(this.adminMenu.active||dispatcher.trigger("inc:AdminMenu:activate"),inc.editing.activate())):(this.editActivatedWithoutAdmin=!0,this.activateAdminMode(!0)))},t),2e3));var e=!1;if(Inc.Utilities.getCookie("incid")){var i=Inc.Utilities.getCookie("incid").split(":");"undefined"!=typeof i[7]&&1==parseInt(i[7])&&(e=!0)}(!_.isNull(inc.user.admin)||e)&&t.activateAdminMode()}),this},activateAdminMode:function(e){return inc.fallback?this:("undefined"==typeof e&&(e=!1),inc.isMode("admin")||inc.user.hasPermission(_.bind(function(t){if(t&&!inc.isMode("admin")){if($("#rightMenu").hasClass("rightMenuVisible")&&$("#wrappermask").click(),inc.addMode("admin"),this.adminMenu||($("#sitecontainer").append(_.template($("#AdminImagePreloadTemplate").html())),this.adminMenu=new Inc.Menus.Admin,inc.topNav.addAdminMenu(this.adminMenu),this.getAdminSetting("StartOpen")&&dispatcher.trigger("inc:AdminMenu:activate")),this.editActivatedWithoutAdmin&&inc.user.admin.roleID<=3)return this.editActivatedWithoutAdmin=!1,!this.adminMenu.active&&e&&this.getAdminSetting("StartOpen")&&dispatcher.trigger("inc:AdminMenu:activate"),void this.notify("EDITING NOT AVAILABLE FOR THIS PAGE");if(this.getAdminSetting("StartInEdit")||this.editActivatedWithoutAdmin||inc.parameterSet("edit")){if(this.editActivatedWithoutAdmin&&inc.user.admin.roleID<=3)return void(this.editActivatedWithoutAdmin=!1);this.editActivatedWithoutAdmin=!1,!this.adminMenu.active&&(e&&this.getAdminSetting("StartOpen")||inc.parameterSet("edit"))&&dispatcher.trigger("inc:AdminMenu:activate");inc.isMode("edit")||$(document).ready(function(){inc.editing.activate(e)})}}},this)),this)},deactivateAdminMode:function(){return inc.fallback||!this.taskManager.allResolved()?this:(inc.isMode("edit")&&inc.editing.deactivate(),inc.user.admin=null,inc.removeMode("admin"),this)},openInSitemanager:function(e){if("undefined"!=typeof e)return window.open("http://sitemanager.inc.com/index.php?section=editarticle&incid="+e),this;switch(inc.i.op){case"home":window.open("http://sitemanager.inc.com/index.php?section=homepage");break;case"channel":window.open("http://sitemanager.inc.com/index.php?section=editchannel&cnlid="+inc.i.channelArray.topid);break;case"article":window.open("http://sitemanager.inc.com/index.php?section=editarticle&incid="+inc.incid);break;default:window.open("http://sitemanager.inc.com")}return this},getAdminSetting:function(e){return inc.user.getAdminSetting.apply(inc.user,arguments)},setAdminSetting:function(e,t){return inc.user.setAdminSetting.apply(inc.user,arguments),this},notify:function(e){var t=new Inc.Modals.Archetype({className:"Modal AdminModal",messages:e,priority:3}).render();return inc.modalPresenter.addModal(t),this},openArticleListing:function(){if(this.articleListing)return this;this.articleListing=new Inc.Areas.ArticleListing;var e=new Inc.Modals.Aside({className:"ArticleListingModal",$content:this.articleListing.$el,priority:7});return e.render(),$(".SectionUpDown").hide(),e.listenToOnce(this.articleListing,"click:close",e.close),this.listenToOnce(e,"close:finished",function(){this.articleListing.trash(),this.articleListing=null,this.trigger("articlelisting:close"),$(".SectionUpDown").show()}),inc.editing.asidePresenter.addModal(e),this.trigger("articlelisting:open"),this},closeArticleListing:function(){return this.articleListing&&this.articleListing.trigger("click:close"),this}}),Inc.Controllers.AdminTaskManager=Inc.Controllers.TaskManager.extend({saveEdits:function(e,t){var i;t||(t={});var n,s=Inc.Controllers.TaskRunner.spawn({type:"saveEdits",tasksFinished:function(){var e=this;return setTimeout(function(){if(i.closeDisabled=!1,0==e.erroredTasks.length){t.delet&&t.isThisArticle&&(window.location.href=inc.applicationURL);for(var n=0;n<e.completedTasks.length;n++){var s=e.completedTasks[n];if(s.performer instanceof Inc.Models.Article&&(s.performer.changedAttributes().id||s.performer.changedAttributes().inc_filelocation&&"article"==inc.i.op&&inc.currentController.model.getID()==s.performer.id)){window.location.href=inc.applicationURL+s.performer.get("inc_filelocation");break}}Inc.Controllers.TaskRunner.tasksFinished.call(e),e.resolve()}else Inc.Controllers.TaskRunner.tasksFinished.call(e)},310),this}});return"create"==inc.i.mod?n=_.first(e).performer.get("inc_activeflag")?"PUBLISHING...":"SAVING AS DRAFT...":(n="SAVING...",t.publish&&(n="PUBLISHING..."),t.unpublish&&(n="UNPUBLISHING..."),t.delet&&(n="DELETING...")),i=new Inc.Modals.Save({className:"Modal AdminModal SaveModal",messages:n,priority:5,closeDisabled:!0,runner:s}).render(),s.listenTo(i,"close:started",s.resolve),s.listenTo(i,"click:retry",s.retry),this.listenToOnce(s,"resolved",function(e){inc.editing.saving=!1}),_.each(e,function(e){s.addTask(e)}),inc.modalPresenter.addModal(i),this.addRunner(s),s.run(),this},activateEditMode:function(){return this.hasType("deactivateEditMode")||inc.isMode("edit")||!inc.isMode("admin")?this:(inc.user.hasPermission(3,_.bind(function(e){if(e){var t=Inc.Controllers.TaskRunner.spawn({type:"activateEditMode",tasksFinished:function(){return Inc.Controllers.TaskRunner.tasksFinished.apply(this,arguments),0==this.erroredTasks.length&&inc.editing.completeactivateEditMode(),this.resolve(),this}});this.addRunner(t);var i=Inc.Controllers.Task.spawn({performer:inc.editing,successEventName:"ckeditor:load:success",failEventName:"ckeditor:load:fail",run:_.bind(function(){this.ckeditorLoaded?this.trigger("ckeditor:load:success"):this.loadCKEDITOR()},inc.editing)}),n=Inc.Controllers.Task.spawn({performer:inc.editing,successEventName:"clndr:load:success",failEventName:"clndr:load:fail",run:_.bind(function(){this.clndrLoaded?this.trigger("clndr:load:success"):$.ajax({method:"GET",url:inc.applicationURL+"js/lib/clndr.min.js",type:"script"}).done(function(){this.clndrLoaded=!0,this.trigger("clndr:load:success")}.bind(this)).fail(function(){this.trigger("clndr:load:fail")}.bind(this))},inc.editing)});t.addTask(i).addTask(n).run()}},this)),this)},deactivateEditMode:function(){if(!inc.isMode("edit")||!this.allResolved())return this;var e=Inc.Controllers.Task.spawn({performer:inc.editing,successEventName:"deactivate:success",run:_.bind(function(){_.each(this.modelsBeingEdited,function(e){e.releaseLock()}),this.modelsBeingEdited=[],inc.removeMode("edit"),_.each(this.editors,function(e){e.kill&&e.kill()||e.deactivate()}),dispatcher.trigger("inc:mode:edit:notdirty"),$("body").toggleClass("edit",!1),this.trigger("deactivate:success")},inc.editing)}),t=Inc.Controllers.TaskRunner.spawn({type:"deactivateEditMode"});return this.addRunner(t),t.addTask(e).run(),this},askForConfirmation:function(e,t){"undefined"==typeof t&&(t=e,e={});var i=Inc.Controllers.TaskRunner.spawn({type:"askForConfirmation"});this.addRunner(i);var n=new Inc.Modals.Confirmation(_.extend({className:"Modal AdminModal ConfirmationModal",priority:8,closeDisabled:!0,runner:i},e)).render();return i.listenTo(n,"click:yes",function(e){t(),e.closeDisabled=!1,e.close(),this.resolve()}),i.listenTo(n,"click:no",function(e){e.closeDisabled=!1,e.close(),this.resolve()}),inc.modalPresenter.addModal(n),i.run(),this},askForEditingContinuation:function(){if(this.hasType("askForEditingContinuation"))return this;var e=this,t=Inc.Controllers.TaskRunner.spawn({type:"askForEditingContinuation"});this.addRunner(t);var i=new Inc.Modals.YesNo({className:"Modal AdminModal YesNoModal",messages:"Continue Editing?",priority:8,closeDisabled:!0,runner:t}).render();return t.listenTo(i,"click:yes",function(t){e.renewLocks(),t.closeDisabled=!1,t.close(),this.resolve()}),t.listenTo(i,"click:no expired",function(e){_.each(inc.areas,function(e){e.disable()});var t=new Inc.Modals.Archetype({className:"Modal AdminModal",messages:"Your open Editors have been disabled.",priority:8}).render();inc.modalPresenter.addModal(t),e.closeDisabled=!1,e.close(),this.resolve()}),inc.modalPresenter.addModal(i),t.run(),this},renewLocks:function(){var e=_.reject(inc.editing.modelsBeingEdited,function(e){return e.updating||e.lock||e.isNew()||_.isString(e.getID())?!0:!1});if(0==e.length)return this;console.log("renewLocks");var t=Inc.Controllers.TaskRunner.spawn({type:"renewLocks"});return this.addRunner(t),_.each(e,function(e){var i=Inc.Controllers.Task.spawn({performer:e,successEventName:"lock:success",failEventName:"lock:fail",run:_.bind(e.requestLock,e)});t.addTask(i)}),t.run(),this},loadChannelData:function(){var e=Inc.Controllers.TaskRunner.spawn({type:"loadChannelData",tasksFinished:function(){return Inc.Controllers.TaskRunner.tasksFinished.apply(this,arguments),0==this.erroredTasks.length&&inc.collections.channel.each(function(e){var t=e.get("cnl_name");t&&""!=t&&(inc.editing.channelAutocompleteData.push({value:t,data:e.get("id")}),e.get("cnl_contributor_accessflag")&&inc.editing.columnistChannelAutocompleteData.push({value:t,data:e.get("id")}))}),this.resolve(),this}});return this.addRunner(e),e.addTask(Inc.Controllers.Task.spawn({performer:inc.collections.channel,successEventName:"update:success",failEventName:"update:fail",run:_.bind(inc.collections.channel.fetch,inc.collections.channel)})).run(),this},loadAuthorData:function(){var e=Inc.Controllers.TaskRunner.spawn({type:"loadAuthorData",tasksFinished:function(){return Inc.Controllers.TaskRunner.tasksFinished.apply(this,arguments),0==this.erroredTasks.length&&inc.collections.author.each(function(e){var t=e.get("aut_name");t&&""!=t&&inc.editing.authorAutocompleteData.push({value:t,data:e.get("id")})}),this.resolve(),this}});return this.addRunner(e),e.addTask(Inc.Controllers.Task.spawn({performer:inc.collections.author,successEventName:"update:success",failEventName:"update:fail",run:_.bind(inc.collections.author.fetch,inc.collections.author)})).run(),this},loadEditorData:function(){var e=Inc.Controllers.TaskRunner.spawn({type:"loadEditorData",tasksFinished:function(){return Inc.Controllers.TaskRunner.tasksFinished.apply(this,arguments),0==this.erroredTasks.length&&inc.collections.editor.each(function(e){var t=e.get("aut_name");t&&""!=t&&inc.editing.editorAutocompleteData.push({value:t,data:e.get("id")})}),this.resolve(),this}});return this.addRunner(e),e.addTask(Inc.Controllers.Task.spawn({performer:inc.collections.editor,successEventName:"update:success",failEventName:"update:fail",run:_.bind(inc.collections.editor.fetch,inc.collections.editor)})).run(),this},loadImageData:function(){var e=Inc.Controllers.TaskRunner.spawn({type:"loadImageData",tasksFinished:function(){return Inc.Controllers.TaskRunner.tasksFinished.apply(this,arguments),this.erroredTasks.length>0&&inc.admin.trigger("imagesFailedToLoad"),this.resolve(),this}});return this.addRunner(e),inc.user.admin&&inc.user.admin.roleID<=2?inc.collections.image.url=function(){return inc.restURL+"panoramicimages-all"}:inc.collections.image.url=function(){return inc.restURL+"panoramicimages"},e.addTask(Inc.Controllers.Task.spawn({performer:inc.collections.image,successEventName:"update:success",failEventName:"update:fail",run:_.bind(inc.collections.image.fetch,inc.collections.image)})).run(),this}}),Inc.Controllers.Editing={type:"Editing",extend:Inc.extend,spawn:Inc.spawn,init:function(e){var t=this;return e||(e={}),this.editors=[],this.ckeditorLoaded=!1,this.clndrLoaded=!1,this.userInitiatedEditingMode=!0,this.saving=!1,this.lastActive=null,this.modelsBeingEdited=[],this.innerPresenter=Inc.Controllers.ModalPresenter.spawn(),$(document).ready(function(){t.innerPresenter.$wrapper=$("#contentcontainer").children(".ModalWrapper")}),this.asidePresenter=Inc.Controllers.AsidePresenter.spawn(),$(document).ready(function(){t.asidePresenter.$wrapper=$("#TopNav .AsideWrapper")}),this.channelAutocompleteData=[],this.columnistChannelAutocompleteData=[],this.authorAutocompleteData=[],this.editorAutocompleteData=[],this.listenTo(dispatcher,"inc:model:change:dirty",this.modelDirtyStateChanged),this.listenTo(dispatcher,"inc:editing:model:stale",this.onModelHasBecomeStale),this.listenTo(dispatcher,"inc:edit",function(){this.lastActive=moment()}),this.listenTo(dispatcher,"inc:editing:change:content",function(){this.setupEditModeEventHandling("#contentcontainer")}),this},activate:function(e){return inc.fallback?this:("undefined"==typeof e||e?this.userInitiatedEditingMode=!0:this.userInitiatedEditingMode=!1,inc.admin.taskManager.activateEditMode(),this)},deactivate:function(){return inc.fallback||"create"==inc.i.mod?this:(inc.admin.taskManager.deactivateEditMode(),this)},completeactivateEditMode:function(){return $("body").toggleClass("edit",!0),$("#video_inpage_wrapper, #video_injection").remove(),$('div[id^="tt-wrapper"]').remove(),this.setupEditModeEventHandling("#contentcontainer"),inc.addMode("edit"),dispatcher.trigger("inc:edit"),this.trigger("activate:success"),this},recentlyActive:function(){var e=240;return inc.parameterNotEmpty("timeToInactive")&&(e=inc.urlParameters.timeToInactive),moment().diff(this.lastActive,"seconds")>e?!1:!0},setupEditModeEventHandling:function(e){var t=$(e);1==t.length&&_.isUndefined(t.data("editingModeClicksSetup"))&&(t.on("click.inc:content:edit",".inc_editable_area",_.wrap(function(e,t){inc.editing.onAreaClick.call(inc.editing,$(this),t)},inc.eventHandlerWrapper)),t.data("editingModeClicksSetup",!0));for(var i=$(e+" a").not(".inc_anchor_events_setup"),n=0;n<i.length;n++){var s=$(i[n]);s.parents(".article-body").length>0||(_.isUndefined(s.attr("onclick"))&&s.on("click.inc:content:regular",_.wrap(function(e,t){t.preventDefault(),window.location.href=$(this).attr("href")},inc.eventHandlerWrapper)),s.on("click.inc:content:edit",_.wrap(function(e,t){t.preventDefault()},inc.eventHandlerWrapper)),s.addClass("inc_anchor_events_setup"))}return this},onAreaClick:function(e,t){var i=e.data();if($("#video_inpage_wrapper, #video_injection").remove(),$('div[id^="tt-wrapper"]').remove(),!i.areaID){var n=_.findWhere(Inc.Areas,{ClassName:i.areaClass}),s=new n({app:inc,el:e[0]});e.hasClass("bodycopy")&&console.log(a=s),1==e.find(".inc_editable").length?e.find(".inc_editable").trigger("click"):$(t.target).hasClass("inc_editable")?$(t.target).trigger("click"):$(t.target).parents(".inc_editable").length>0&&$(t.target).parents(".inc_editable").trigger("click")}return this},loadCKEDITOR:function(){return $.ajax({method:"GET",url:inc.applicationURL+"lib/ckeditor/ckeditor.js",type:"script"}).done(_.bind(this.ckeditorSuccessfullyLoaded,this)).fail(_.bind(this.ckeditorFailedToLoad,this)),this},ckeditorSuccessfullyLoaded:function(){return this.ckeditorLoaded=!0,CKEDITOR.disableAutoInline=!0,CKEDITOR.on("instanceReady",function(e){var t={indent:!1,breakBeforeOpen:!1,breakAfterOpen:!1,breakBeforeClose:!1,breakAfterClose:!0};e.editor.dataProcessor.writer.setRules("p",t),e.editor.dataProcessor.writer.setRules("h1",t),e.editor.dataProcessor.writer.setRules("h2",t),e.editor.on("paste",function(e){e.data&&e.data.dataValue&&(e.data.dataValue=e.data.dataValue.replace(/<!--[\s\S]*?-->/g,"").replace(/^[\s|(?:&nbsp;)]*|[\s(?:&nbsp;)]*$/g,"").replace(new RegExp("[\\s|(?:&nbsp;)]*<o:p></o:p></span></p>","g"),"<o:p></o:p></span></p>"))},null,null,1)}),CKEDITOR.plugins.add("custombuttons",{icons:"h2",init:function(e){var t=-10,i=function(i,n,s,o){if(o){var a=new CKEDITOR.style(o),r=function(e){this.style=e,this.allowedContent=e,this.requiredContent=e,this.contextSensitive=!0};r.prototype.exec=function(e){e.focus(),this.state==CKEDITOR.TRISTATE_OFF?e.applyStyle(this.style):this.state==CKEDITOR.TRISTATE_ON&&e.applyStyle(paragraphStyle)},e.attachStyleStateChange(a,function(t){!e.readOnly&&e.getCommand(s).setState(t)}),e.addCommand(s,new CKEDITOR.styleCommand(a)),e.ui.addButton&&e.ui.addButton(i,{label:n,command:s,toolbar:"basicstyles,"+(t+=10),icon:inc.applicationURL+"lib/ckeditor/plugins/custombuttons/images/h2.png"})}};i("H2","H2","h2",{element:"h2"})}}),this.trigger("ckeditor:load:success"),this},ckeditorFailedToLoad:function(){return inc.admin.notify("CKEDITOR FAILED TO LOAD\nPlease check your internet connection."),this.trigger("ckeditor:load:fail"),this},modelDirtyStateChanged:function(){return this.isDirty()?dispatcher.trigger("inc:mode:edit:dirty"):dispatcher.trigger("inc:mode:edit:notdirty"),this},isDirty:function(){for(var e=0;e<this.modelsBeingEdited.length;e++){var t=this.modelsBeingEdited[e];if(!_.isString(t.getID())&&t.dirty)return!0}return!1},save:function(){if(!this.saving){var e=_.filter(this.modelsBeingEdited,function(e){return(e.dirty||e.isNew())&&!(e instanceof Inc.Models.Image)}),t=[];if(_.each(this.modelsBeingEdited,function(e){if(e instanceof Inc.Models.Article){var i=e.get("images")||[];_.each(i,function(e){_.isString(e.id)&&"0"!=e.id&&t.push(inc.collections.image.get(e.id))})}else e instanceof Inc.Models.Slide&&_.isString(e.get("sld_imgid"))&&"0"!=e.get("sld_imgid")&&t.push(inc.collections.image.get(e.get("sld_imgid")))},this),e.length>0||t.length>0){this.saving=!0;var i=[];_.each(e,function(e){var t=Inc.Controllers.Task.spawn({performer:e,successEventName:"save:success",failEventName:"save:fail",run:function(){e.save()}});i.push(t)}),_.each(t,function(e){var t=Inc.Controllers.Task.spawn({performer:e,successEventName:"save:success",failEventName:"save:fail",priority:0,run:function(){var t=[{header:"New Image "+(_.isString(e.id)?e.id.replace("g",""):e.id),message:"...failed to save"}],i={proxy_type:"download",image_id:_.isString(e.id)?e.id.replace("g",""):e.id},n=e.get("img_pan_crop");_.isString(n)&&(n=$.parseJSON(n)),n&&_.extend(i,n),$.ajax({dataType:"json",url:"http://sitemanager.inc.com/getty/proxy-api.php",data:i,cache:!1}).done(function(i){"undefined"!=typeof i.inc_image_id?$.ajax({dataType:"json",url:inc.restURL+"panoramicimages/"+i.inc_image_id,cache:!1}).done(function(i){if(!i.error&&i.data){var n=e.id;i.data.id=parseInt(i.data.id),e.set(i.data),inc.collections.image.add(e),this.modelsBeingEdited=_.reject(this.modelsBeingEdited,function(t){return t.id==e.id}),_.each(this.modelsBeingEdited,function(t){if(t instanceof Inc.Models.Article){var i=t.get("images")||[];_.each(i,function(t){t.id==n&&(t.id=e.id)})}else t instanceof Inc.Models.Slide&&t.get("sld_imgid")==n&&t.set("sld_imgid",e.id,{silent:!0})},this),e.trigger("save:success",e)}else e.errorMessages=t,e.trigger("save:fail",e)}.bind(this)).fail(function(i){e.errorMessages=t,e.trigger("save:fail",e)}.bind(this)):(e.errorMessages=t,e.trigger("save:fail",e))}.bind(this)).fail(function(i){e.errorMessages=t,e.trigger("save:fail",e)}.bind(this))}.bind(this)});i.push(t)},this),_.each(i,function(e){var t=e.performer;t instanceof Inc.Models.Article&&(e.priority=4),t instanceof Inc.Models.Slideshow&&(e.priority=3),t instanceof Inc.Models.Slide&&(e.priority=2),t instanceof Inc.Models.InlineImage&&(e.priority=1)}),inc.trigger("save:started"),inc.admin.taskManager.saveEdits(i)}else inc.admin.notify("NO CHANGES TO SAVE")}return dispatcher.trigger("inc:edit"),this},publish:function(e){if(this.saving||e.get("inc_activeflag"))return this;this.saving=!0;var t=Inc.Controllers.Task.spawn({performer:e,successEventName:"save:success",failEventName:"save:fail",run:function(){e.userHasLock()?e.save({inc_activeflag:!0,inc_staid:7},{wait:!0}):(this.listenToOnce(e,"lock:success lock:fail",function(){e.userHasLock()?e.save({inc_activeflag:!0,inc_staid:7},{wait:!0}):e.trigger("save:fail",e)}),e.requestLock())}});return inc.trigger("save:started"),inc.admin.taskManager.saveEdits([t],{publish:!0}),this},unpublish:function(e){if(this.saving||!e.get("inc_activeflag"))return this;this.saving=!0;var t=Inc.Controllers.Task.spawn({performer:e,successEventName:"save:success",failEventName:"save:fail",run:function(){e.userHasLock()?e.save({inc_activeflag:!1,inc_staid:1},{wait:!0}):(this.listenToOnce(e,"lock:success lock:fail",function(){e.userHasLock()?e.save({inc_activeflag:!1,inc_staid:1},{wait:!0}):e.trigger("save:fail",e)}),e.requestLock())}});return inc.trigger("save:started"),inc.admin.taskManager.saveEdits([t],{unpublish:!0}),this},deleteArticle:function(e){return this.saving||1!=e.get("inc_staid")||e.get("inc_activeflag")?this:(inc.admin.taskManager.askForConfirmation({messages:"Delete this article?",yesText:"DELETE"},function(){this.saving=!0;var t="article"==inc.i.op&&inc.incid&&e.id==inc.incid?!0:!1,i=Inc.Controllers.Task.spawn({performer:e,successEventName:"save:success",failEventName:"save:fail",run:function(){e.userHasLock()?e.destroy({wait:!0,success:function(e,t,i){e.trigger("save:success",e),dispatcher.trigger("inc:edit")},error:e.saveFailed.bind(e)}):(this.listenToOnce(e,"lock:success lock:fail",function(){e.userHasLock()?e.destroy({wait:!0,success:function(e,t,i){e.trigger("save:success",e),dispatcher.trigger("inc:edit")},error:e.saveFailed.bind(e)}):e.trigger("save:fail",e)}),e.requestLock())}});inc.trigger("save:started"),inc.admin.taskManager.saveEdits([i],{delet:!0,isThisArticle:t})}.bind(this)),this)},getEditor:function(e){return _.findWhere(this.editors,{oid:e})},addEditor:function(e){var t=this.getEditor(e.oid);return t||(this.editors.push(e),this.listenToOnce(e,"trash",this.removeEditor)),this},removeEditor:function(e){for(var t,i,n=0;n<this.editors.length;n++)if(this.editors[n].oid==e.oid){t=this.editors[n],i=n;break}return t&&this.editors.splice(i,1),this},onModelHasBecomeStale:function(e){return!e.lock&&inc.isMode("edit")&&(this.recentlyActive()?inc.admin.taskManager.renewLocks():inc.admin.taskManager.askForEditingContinuation()),this}},_.extend(Inc.Controllers.Editing,Backbone.Events),Inc.Controllers.AsidePresenter=Inc.Controllers.ModalPresenter.extend({type:"AsidePresenter",init:function(e){this.aside=!1,Inc.Controllers.ModalPresenter.init.apply(this,arguments)},modalPresentStarting:function(e){var t=$("#wrappercontainer");return e instanceof Inc.Modals.Aside?(e.editingContainerClass&&t.toggleClass(e.editingContainerClass,!0),this.activateAside()):this.deactivateAside(),Inc.Controllers.ModalPresenter.modalPresentStarting.apply(this,arguments),this},modalCloseStarted:function(e){var t=$("#wrappercontainer");return e instanceof Inc.Modals.Aside&&e.editingContainerClass&&t.toggleClass(e.editingContainerClass,!1),1==this.modals.length&&this.deactivateAside(),Inc.Controllers.ModalPresenter.modalCloseStarted.apply(this,arguments),this},activateAside:function(){if(!this.aside){var e=this,t=$("#wrappercontainer"),i=$("#contentcontainer").offset().top,n=$(document).scrollTop();$("#contentcontainer").children(".ModalWrapper").toggleClass("hidden",!1),$("#contentcontainer").children(".ModalWrapper").children(".ModalWrapperBackground").on("click.inc:content:edit:aside",function(e){this.modals.length>0&&this.modals[0].close()}.bind(this)),n>=i&&$(document).scrollTop(i-10+.65*(n-i-inc.topNav.adminMenu.$el.outerHeight(!0))),t.toggleClass("aside",!0),e.aside=!0,e.trigger("aside:change",e.aside)}return this},deactivateAside:function(){if(this.aside){var e=$("#wrappercontainer"),t=$("#contentcontainer").offset().top,i=$(document).scrollTop();i>=t&&$(document).scrollTop(t+51+1/.65*(i-t)),e.toggleClass("aside",!1),$("#contentcontainer").children(".ModalWrapper").children(".ModalWrapperBackground").off("click.inc:content:edit:aside"),$("#contentcontainer").children(".ModalWrapper").toggleClass("hidden",!0),this.aside=!1,this.trigger("aside:change",this.aside)}return this},present:function(){if(!this.$wrapper)return this;if(this.modals.length>0){this.presenting||(this.presenting=!0,this.trigger("presenting:started",this));var e=this.modals[0];if(e.hidden&&!e.disabled){e.$parent?e.$parent.append(e.$el):this.$wrapper.append(e.$el);var t=_.findWhere(this.modals,{hidden:!1});t?(this.modalPresentStarting(e),this.trigger("presenting:modal",this,e),e.show(),t.disable().hide()):(this.modalPresentStarting(e),this.trigger("presenting:modal",this,e),e.show())}else e.hidden&&e.disabled&&(e.enable(),this.modalPresentStarting(e),this.trigger("presenting:modal",this,e),e.show())}return this}}),Inc.Controllers.ScrollMonitor={type:"ScrollMonitor",extend:Inc.extend,spawn:Inc.spawn,init:function(e){e||(e={}),this.scrollPosition=null,this.lastScrollTop=0,this.scrollUnits=[],this.independentAdGroups=[],this.dontRefreshAds=!1,this.waitingOnTileFilling=!1,this.ranOutOfData=!1,this.adhesiveShown=!1,this.idToStopShowingAdhesive=null,this.showBackToTopButton=!1,this.showAdhesiveAdContainer=!1,this.additionalScrollTrigerredFunctions=[],$(window).scroll(_.throttle(_.bind(this.processScroll,this),50)),this.listenTo(dispatcher,"window:resized",this.onWindowResized);var t=this;return $(document).ready(function(){$("#backtotopbutton").on("click",_.throttle(function(e){$("html, body").animate({scrollTop:0},{complete:function(){t.scrollPosition=0,t.lastScrollTop=0}},500)},501))}),this},addScrollUnit:function(e){return this.scrollUnits.push(e),this},addIndependentAdGroup:function(e){return this.independentAdGroups.push(e),this},removeIndependentAdGroup:function(e){return this.independentAdGroups=_.reject(this.independentAdGroups,function(t){return t.adGroup==e}),this},load:function(){return _.isFunction(inc.currentController.load)&&_.isNumber(this.scrollPosition)&&(Inc.Pages.Article.isPrototypeOf(inc.currentController)||inc.currentController.load(this.scrollPosition+1)),this},processScroll:function(){this.updateAdhesiveAdContainer(),!inc.currentController||this.ranOutOfData||inc.currentController.loading||$(window).scrollTop()>this.lastScrollTop&&$(window).scrollTop()>=$(document).height()-$(window).height()-500&&this.load();var e=$("#backtotopcontainer");if(e&&this.showBackToTopButton&&($(window).scrollTop()>950?e.toggleClass("hidden",!1):$(window).scrollTop()<=950&&e.toggleClass("hidden",!0)),this.lastScrollTop<=$(window).scrollTop()){for(var t=0;t<this.independentAdGroups.length;t++)!this.dontRefreshAds&&$(this.independentAdGroups[t].elementID).length>0&&$(window).scrollTop()>$(this.independentAdGroups[t].elementID).offset().top-$(window).height()-$(window).height()/2&&$(window).scrollTop()<=$(this.independentAdGroups[t].elementID).offset().top+$(this.independentAdGroups[t].elementID).height()-100&&(!this.independentAdGroups[t].specialCondition||this.independentAdGroups[t].specialCondition())&&inc.adManager.refreshGroup(this.independentAdGroups[t].adGroup);for(var t=this.scrollPosition||0;t<this.scrollUnits.length;t++)if($(this.scrollUnits[t]).length>0&&!this.dontRefreshAds&&this.scrollPosition!=t&&$(window).scrollTop()>$(this.scrollUnits[t]).offset().top-$(window).height()-$(window).height()/2&&$(window).scrollTop()>$(this.scrollUnits[t]).parent().offset().top-$(window).height()-$(window).height()/2&&$(window).scrollTop()<=$(this.scrollUnits[t]).offset().top+$(this.scrollUnits[t]).height()-100){this.scrollPosition=t,inc.currentController.scrollPositionChanged(this.scrollPosition),inc.adManager.refreshGroup("scroll"+this.scrollPosition),this.trigger("scrollposition:change",this.scrollPosition);break}}else{for(var t=this.independentAdGroups.length-1;t>=0;t--)!this.dontRefreshAds&&$(this.independentAdGroups[t].elementID).length>0&&$(window).scrollTop()<=$(this.independentAdGroups[t].elementID).offset().top+$(this.independentAdGroups[t].elementID).height()-100&&$(window).scrollTop()>$(this.independentAdGroups[t].elementID).offset().top-$(window).height()-$(window).height()/2&&(!this.independentAdGroups[t].specialCondition||this.independentAdGroups[t].specialCondition())&&inc.adManager.refreshGroup(this.independentAdGroups[t].adGroup);for(var t=this.scrollPosition||0;t>=0;t--)if($(this.scrollUnits[t]).length>0&&!this.dontRefreshAds&&this.scrollPosition!=t&&$(window).scrollTop()<=$(this.scrollUnits[t]).offset().top+$(this.scrollUnits[t]).height()-100&&$(window).scrollTop()>$(this.scrollUnits[t]).offset().top-$(window).height()-$(window).height()/2){this.scrollPosition=t,inc.currentController.scrollPositionChanged(this.scrollPosition),inc.adManager.refreshGroup("scroll"+this.scrollPosition),this.trigger("scrollposition:change",this.scrollPosition);break}}for(var t=0;t<this.additionalScrollTrigerredFunctions.length;t++)this.additionalScrollTrigerredFunctions[t]();return this.lastScrollTop=$(window).scrollTop(),dispatcher.trigger("window:scrolled"),this},updateAdhesiveAdContainer:function(){var e=$("#adhesiveadcontainer");return e&&this.showAdhesiveAdContainer?this.idToStopShowingAdhesive&&"small"==inc.mqState&&$(document).scrollTop()+$(window).height()+200>$("#"+this.idToStopShowingAdhesive).offset().top&&$("#"+inc.scrollMonitor.idToStopShowingAdhesive).height()>0?e.css("visibility","hidden"):"article"!=inc.i.op&&"channel"!=inc.i.op&&"home"!=inc.i.op&&"eventindex"!=inc.i.op&&"search"!=inc.i.op||"small"!=inc.mqState||(this.adhesiveShown||(inc.adManager.refreshGroup("mobilefixed"),this.adhesiveShown=!0),e.css("visibility","visible")):e&&e.css("visibility","hidden"),this},onWindowResized:function(){return this.updateAdhesiveAdContainer(),this},reset:function(e){return this.scrollPosition=e,this.scrollUnits=this.scrollUnits.slice(0,e),this.dontRefreshAds=!1,this.waitingOnTileFilling=!1,this.ranOutOfData=!1,this}},_.extend(Inc.Controllers.ScrollMonitor,Backbone.Events),Inc.Controllers.Sidebar={type:"Sidebar",extend:Inc.extend,spawn:Inc.spawn,init:function(e){e||(e={}),this.elementID=e.elementID||null,this.controller=e.controller||null,this.clickTrackingObject=e.clickTrackingObject||{},this.impressionsTrackingObject=e.impressionsTrackingObject||{},this.restURL=e.restURL||null,this.articleFeeds=e.articleFeeds||[],this.pageElements=e.pageElements||[],this.heightChecked=!1,this.initialContentInserted=!1,(inc.i.inc_sidebar_adcodeflag||inc.i.cnl_sidebar_adcodeflag)&&inc.adManager.createAds({groupName:"scroll0",options:{name:"sidebarSpecialFixedRectangle",type:"fixedrectangle",mq:["large"],collapse:!0,pos:"bot"}});var t=Inc.Feeds.Article.spawn({id:"Sidebar",readyCallback:_.bind(this.articleFeedReady,this),restURL:this.restURL});this.articleFeeds.push(t);var i=Inc.Patterns.PatternContainer.spawn({elementID:"SidebarPatternContainer",controller:this});i.clickTrackingObject.position="popularsidebar",i.impressionsTrackingObject.position="popularsidebar",this.pageElements.push(i);var n=inc.tileTypeRegistry,s=Inc.Patterns.Pattern.spawn({name:"SidebarInitial",repeats:!1,structure:[{category:"startSubSubUnit"},n.getTileType("IMU","fixedsmallrectangle",{preDisplay:function(){this.adName="sidebarFixedSmallRectangle",inc.adManager.createAds({groupName:this.adGroup,options:{name:this.adName,type:"fixedsmallrectangle",mq:["large"],collapse:!0,pos:"top",callback:this.adCallback}})},adCallback:_.bind(function(e,t){inc.adManager.checkUnfilled(e,t);var i=$("#"+t.oid).parent().next();return e.isEmpty?($("#"+t.oid).parent().css("display","none"),i.hasClass("StandardTile")&&i.find(".innerpcell").css("padding-top","0")):($("#"+t.oid).parent().css("display","inline-block"),i.hasClass("StandardTile")&&i.find(".innerpcell").css("padding-top","")),this},this)}),n.getTileType("Standard"),n.getTileType("IMU","flexibleportrait",{preDisplay:function(){this.adName="sidebarFlexiblePortrait",inc.adManager.createAds({
groupName:this.adGroup,options:{name:this.adName,type:"flexibleportrait",mq:["large"],collapse:!1,pos:"top",callback:this.adCallback}})},adCallback:_.bind(this.sidebarflexiblehalfpageAdCallback,this)}),n.getTileType("Standard"),n.getTileType("Standard"),n.getTileType("IMU","fixedrectangle",{preDisplay:function(){this.adName="sidebarFixedRectangle",inc.adManager.createAds({groupName:this.adGroup,options:{name:this.adName,type:"fixedrectangle",mq:["large"],collapse:!1,pos:"bot",callback:this.adCallback}})},adCallback:_.bind(this.sidebarSmallAdCallback,this)})]});return i.addPattern(s),this},pageDisplayed:function(){var e=this,t=this.getPageElement("SidebarPatternContainer"),i=t.getNextPatternArticleTotal();return t.printNextPattern("scroll0"),this.getArticleFeed("Sidebar").request(i),this.sidebarMonitor=setInterval(function(){e.checkHeight()},500),this},checkHeight:function(){if("undefined"!=typeof this.controller.inlineVideoAdvertOn&&$("#video_inpage_wrapper").length>0&&(this.controller.inlineVideoAdvertOn=!0,$("#video_inpage_wrapper").height()>70?this.controller.inlineVideoAdvertExpanded=!0:this.controller.inlineVideoAdvertExpanded=!1),"large"!=inc.mqState?$(".maincolumn").css("min-height","0px"):"none"==$(".sidebar").css("display")||$(".sidebar").height()<$(".maincolumn").height()?$(".maincolumn").css("min-height","0px"):$(".maincolumn").css("min-height",$(".sidebar").height()+"px"),this.heightChecked||(this.heightChecked=!0),!this.initialContentInserted){var e=$("#SidebarPatternContainerSubUnit0");e.length>0&&!e.hasClass("contentNotInserted")&&(this.initialContentInserted=!0)}},sidebarSmallAdCallback:function(e,t){return inc.adManager.checkUnfilled(e,t),e.isEmpty?$("#"+t.oid).parent().css("display","none"):$("#"+t.oid).parent().css("display","inline-block"),this},sidebarflexiblehalfpageAdCallback:function(e,t){inc.adManager.checkUnfilled(e,t);var i=e.size[1];return i>350&&650>i?($("#"+t.oid).parent().height(635),$("#"+t.oid).parent().css("display","inline-block")):i>650?($("#"+t.oid).parent().height(1080),$("#"+t.oid).parent().css("display","inline-block")):e.isEmpty&&$("#"+t.oid).parent().css("display","none"),this},getPageElement:function(e){return _.findWhere(this.pageElements,{elementID:e})},getArticleFeed:function(e){return _.findWhere(this.articleFeeds,{id:e})},articleFeedReady:function(e,t){return Inc.Pages.InfinitePattern.articleFeedReady.apply(this,arguments)&&"Sidebar"==e&&this.getPageElement("SidebarPatternContainer").getWaitingPatternArticleTotal()>0&&this.getArticleFeed("Sidebar").request(this.getPageElement("SidebarPatternContainer").getWaitingPatternArticleTotal()),this}},Inc.Widgets.MustReads=Inc.ToggleView.extend({type:"MustReadsWidget",className:"MustReads",itemTemplate:_.template($("#MustRead-Item-Template").html()),initialize:function(e){e||(e={}),Inc.ToggleView.prototype.initialize.apply(this,arguments);var t=this;this.parentArticleID=e.parentArticleID,this.todaysMustReadsTitle=inc.i.todaysMustReadsTitle,this.$el.attr("id",this.oid),this.mustReadArticles=new Inc.Collections.Article,this.horizontal=_.isBoolean(e.horizontal)?e.horizontal:!1,this.$itemContainer=null,this.matchedIndex=null,this.centeredScroll=0,this.rendered=!1,this.numberVerticallyShown=5,_.each(inc.i.todaysMustReadsSparse,function(e){var t=inc.collections.article.get(e.id);t?this.mustReadArticles.add(t):this.mustReadArticles.add(e)},this);for(var i=0;i<this.mustReadArticles.models.length;i++)if(this.mustReadArticles.models[i].getID()==this.parentArticleID){this.matchedIndex=i;break}this.firstShownIndex=this.matchedIndex<2?0:this.matchedIndex-2,this.firstShownIndex+this.numberVerticallyShown-1>=this.mustReadArticles.size()?(this.firstShownIndex=this.mustReadArticles.size()-this.numberVerticallyShown,this.lastShownIndex=this.mustReadArticles.size()-1):this.lastShownIndex=this.firstShownIndex+this.numberVerticallyShown-1,this.$el.on("click",".must a",function(e){t.onItemClick(e,$(this).parent()),ttracker($(this).parent())}),this.listenTo(dispatcher,"window:resized",this.onWindowResized),this.horizontal||this.listenTo(dispatcher,"window:scrolled",this.updateMaxHeight)},events:function(){return{"click .scroll-for-more":"onScrollForMoreClick"}},render:function(){var e=0,t=0,i=0,n=[];this.$el.html(this.template(this));for(var s=this.$("ol, ul"),o=0;o<this.mustReadArticles.models.length;o++){var a=this.mustReadArticles.models[o];if(o<=this.lastShownIndex+1){s.append(this.itemTemplate({model:a,parentArticleID:this.parentArticleID}));var r=$(s.children(".mustread-"+this.mustReadArticles.models[o].getID())[0]),l=r.outerHeight(!0),c=r.outerWidth(!0);this.horizontal&&Inc.Utilities.truncate({$el:r.find(".musttitle"),height:"small"==inc.mqState?64:120}),i+=c,o<this.matchedIndex&&(t+=c),o<this.firstShownIndex&&(e+=l)}$(".mustread-"+this.mustReadArticles.models[o].getID()).attr("slot",o);var h=this.mustReadArticles.models[o].getID();n.push(h)}return inc.tracker.RecordMustReadImpressions(n,this.firstShownIndex,this.lastShownIndex),this.centeredScroll=e,this.$itemContainer=this.$(".ItemContainer"),this.horizontal?(s.width(i),this.centeredScroll=t>=0?t+1:0,this.$itemContainer.scrollLeft(this.centeredScroll)):(this.updateMaxHeight(!0),this.$itemContainer.scrollTop(e)),Inc.Utilities.iOS||(this.horizontal?this.$itemContainer.css("overflow-x","hidden").perfectScrollbar({suppressScrollY:!0,useBothWheelAxes:!1,wheelPropagation:!0,direction:"x"}):this.$itemContainer.css("overflow-y","hidden").perfectScrollbar({suppressScrollX:!0,useBothWheelAxes:!0,wheelPropagation:!0,direction:"y",distanceFromTopAndBottom:3})),async.nextTick(this.updateMaxHeight.bind(this)),this.$itemContainer.on("scroll",_.bind(this.scrolled,this)),this.rendered=!0,this},updateMaxHeight:function(e){if("undefined"==typeof e&&(e=!1),this.horizontal||!this.$itemContainer||!e&&this.$itemContainer.scrollTop()!=this.centeredScroll)return this;for(var t=this.$("ol, ul"),i=0,n=0;n<this.mustReadArticles.models.length;n++){this.mustReadArticles.models[n];if(n<=this.lastShownIndex+1){var s=$(t.children(".mustread-"+this.mustReadArticles.models[n].getID())[0]);n>=this.firstShownIndex&&n<=this.lastShownIndex&&(i+=s.outerHeight(!0))}}return this.$itemContainer.css("max-height",i+"px"),this.$itemContainer.perfectScrollbar("update"),this},onItemClick:function(e,t){for(var i=t.data(),n=this.mustReadArticles.get(i.modelId),s=null,o=0;o<this.mustReadArticles.models.length;o++)if(this.mustReadArticles.models[o].id==i.modelId){s=o;break}return this.trigger("article:click",n,s,this),this},onScrollForMoreClick:function(e){return this.load(!0),this},scrolled:_.throttle(function(e){if(this.horizontal){var t=this.$itemContainer.scrollLeft(),i=this.$itemContainer.prop("scrollWidth"),n=this.$itemContainer.width();t>=i-n-.3*n&&!this.loading&&t>this.centeredScroll&&this.load()}else{var s=this.$itemContainer.scrollTop(),o=this.$itemContainer.prop("scrollHeight"),a=this.$itemContainer.height();s>=o-a-.3*a&&!this.loading&&s>this.centeredScroll&&this.load()}return this},100),load:function(e){"boolean"!=typeof e&&(e=!1);var t=[];if(this.loading)return this;this.loading=!0;var i=$(this.$itemContainer.children("ol, ul")),n=i.children().length,s=n+this.numberVerticallyShown-1>this.mustReadArticles.size()-1?this.mustReadArticles.size()-1:n+this.numberVerticallyShown-1;if(i.children.length==this.mustReadArticles.size())return this.loading=!1,this;for(var o=n;s>=o;o++){this.horizontal&&i.width(i.width()+$(_.last(i.children())).outerWidth(!0)),i.append(this.itemTemplate({model:this.mustReadArticles.models[o],parentArticleID:this.parentArticleID}));var a=$(i.children(".mustread-"+this.mustReadArticles.models[o].getID())[0]);this.horizontal&&Inc.Utilities.truncate({$el:a.find(".musttitle"),height:"small"==inc.mqState?64:120}),t.push(this.mustReadArticles.models[o].getID()),$(".mustread-"+this.mustReadArticles.models[o].getID()).attr("slot",o)}return this.$itemContainer.perfectScrollbar("update"),e&&this.$itemContainer.stop().animate({scrollTop:this.$itemContainer.scrollTop()+this.$itemContainer.height()},500),this.loading=!1,inc.tracker.RecordMustReadImpressions(t),this},onWindowResized:function(){if(!this.horizontal||!this.$itemContainer)return this;var e=$(this.$itemContainer.children("ol, ul")),t=0;return _.each(e.children(),function(e,i){var n=$(e);t+=n.outerWidth(!0);var s=n.find(".musttitle"),o=this.mustReadArticles.models[i];s.html(o.get("inc_homepage_headline")||o.get("inc_headline")||o.get("inc_title")),Inc.Utilities.truncate({$el:n.find(".musttitle"),height:"small"==inc.mqState?64:120})},this),e.width(t),this.$itemContainer.perfectScrollbar("update"),this},trash:function(){return Inc.ToggleView.prototype.trash.apply(this,arguments),this}}),Inc.Widgets.SelectServices=Inc.ToggleView.extend({type:"SelectServicesWidget",className:"SelectServices",initialize:function(e){e||(e={}),Inc.ToggleView.prototype.initialize.apply(this,arguments);this.$el.attr("id",this.oid),this.selectservices=_.isArray(inc.i.selectServices)?inc.i.selectServices:[inc.i.selectServices],console.log(this.selectservices)},render:function(){return this.$el.html(this.template(this)),this.rendered=!0,this}}),Inc.Widgets.NewsletterSignup=Inc.ToggleView.extend({type:"NewsletterSignupWidget",className:"NewsletterSignup",template:_.template($("#NewsletterSignup-Template").html()),initialize:function(e){Inc.ToggleView.prototype.initialize.apply(this,arguments);this.$el.attr("id",this.oid)},events:function(){return{}},render:function(){return this.$el.html(this.template(this)),this},onItemClick:function(e,t){},trash:function(){return Inc.ToggleView.prototype.trash.apply(this,arguments),this}}),Inc.Widgets.SocialFollow=Inc.ToggleView.extend({type:"SocialFollowWidget",className:"SocialFollow",template:_.template($("#SocialFollow-Template").html()),initialize:function(e){e||(e={}),Inc.ToggleView.prototype.initialize.apply(this,arguments)},render:function(){return this.$el.html(this.template(this)),this},trash:function(){return Inc.ToggleView.prototype.trash.apply(this,arguments),this}}),Inc.Widgets.SocialFollowBanner=Inc.ToggleView.extend({type:"SocialFollowBannerWidget",className:".socialFollowBanner",template:_.template($("#SocialFollowBanner-Template").html()),initialize:function(e){e||(e={}),Inc.ToggleView.prototype.initialize.apply(this,arguments);var t="https://twitter.com/inc",i="https://www.facebook.com/Inc",n="";_.random(1,10)>=5?(useName="twitter",n=t):(useName="facebook",n=i),this.followBannerUrl=n,this.followBannerName=useName},render:function(){return this.$el.html(this.template(this)),this},trash:function(){return Inc.ToggleView.prototype.trash.apply(this,arguments),this}}),Inc.Sections.Archetype=Inc.ToggleView.extend({type:"Section",tagName:"section",className:"Section",template:_.template(""),initialize:function(e){e||(e={}),Inc.ToggleView.prototype.initialize.apply(this,arguments),this.clickTrackingObject=e.clickTrackingObject||{},this.impressionsTrackingObject=e.impressionsTrackingObject||{},this.startingScrollPosition=_.isNumber(e.startingScrollPosition)?e.startingScrollPosition:0,this.hasSidebar=_.isBoolean(this.hasSidebar)?this.hasSidebar:!0,this.hideTopOfSectionAd=_.isBoolean(e.hideTopOfSectionAd)?e.hideTopOfSectionAd:!1,this.impressed=_.isBoolean(e.impressed)?e.impressed:!1,this.slideshowPlayers=[],this.shareBoxes=[],this.comments=null,this.$el.attr("id",this.oid),this.model&&this.$el.toggleClass("Section-modelid-"+this.model.getID(),!0),this.listenTo(dispatcher,"window:scrolled",this.onWindowScrolled),this.listenTo(dispatcher,"window:resized",this.onWindowResized),this.listenTo(dispatcher,"inc:mode:edit:on",this.onEnterEditMode),this.listenTo(dispatcher,"inc:mode:edit:off",this.onExitEditMode),inc.isMode("edit")&&this.onEnterEditMode()},onEnterEditMode:function(){return this},onExitEditMode:function(){return this},events:function(){return{}},render:function(){return this},onSlideshowPlayerAdsRefreshed:function(e,t,i){return inc.tracker.recordSlideshowImpression(this,e,t,i),this},onWindowScrolled:function(){return this},onWindowResized:function(){return this},googlePlusButtonClicked:function(){return this},trash:function(){return Inc.ToggleView.prototype.trash.apply(this,arguments),this}}),Inc.Sections.Article=Inc.Sections.Archetype.extend({type:"ArticleSection",className:"Section ArticleSection",template:_.template($("#Article-Section-Template").html()),sidebarTemplate:_.template($("#Article-Section-Sidebar-Template").html()),initialize:function(e){e||(e={}),Inc.Sections.Archetype.prototype.initialize.apply(this,arguments),this.model.isNew()&&this.$el.toggleClass("NewArticleSection",!0),this.articleChannel=null,this.mainFigure=null,this.mainFigureTypeSelector=null,this.articleBylineArea=null,this.pubdate=null,this.metaDataArea=null,this.articleVideoTop=null,this.articleVideoBottom=null,this.articleBody=null,this.mustReadsSidebar=null,this.checker=null,this.numberOfScrollPositions=_.isNumber(this.numberOfScrollPositions)?this.numberOfScrollPositions:2,this.hasSidebar=18!=this.model.get("inc_typid")&&20!=this.model.get("inc_typid")&&!this.model.get("inc_hide_article_sidebarflag"),this.hasSidebar||"undefined"==typeof inc5000landerFlag&&"undefined"==typeof inc5000factsfiguresFlag||(this.numberOfScrollPositions=1),this.hasCustomSidebar=_.isString(this.model.get("inc_custom_sidebar"))&&""!=this.model.get("inc_custom_sidebar").trim(),this.fixedAdLastLoaded=null,this.clickTrackingObject.thistype="article",this.clickTrackingObject.thisincid=this.model.id,this.impressionsTrackingObject.incid=this.model.id,this.setupAds(),this.listenTo(dispatcher,"inc:mode:edit:on",this.onEnterEditMode),this.listenTo(dispatcher,"inc:mode:edit:off",this.onExitEditMode),this.listenTo(dispatcher,"window:resized",this.resizeFeatureImage)},events:function(){return{"click .CommentInfoTop":"clickCommentInfo"}},setupAds:function(){return 0!=this.startingScrollPosition&&inc.adManager.addEmptyAdGroup("scroll"+this.startingScrollPosition,this.model.adinfo),this.hasSidebar&&inc.adManager.addEmptyAdGroup("scroll"+(this.startingScrollPosition+1),this.model.adinfo),0!=this.startingScrollPosition&&(this.hideTopOfSectionAd||inc.adManager.createAds({groupName:"scroll"+this.startingScrollPosition,options:{name:"sectionFlexibleBillboard",type:"flexiblebillboard",mq:["medium","large"],collapse:!1,pos:"top",callback:_.bind(inc.adManager.standardAdCallback,this)}}),inc.adManager.createAds({groupName:"scroll"+this.startingScrollPosition,options:{name:"sectionMobileRectangle",type:"mobilerectangle",mq:["small"],collapse:!1,pos:"top",callback:_.bind(inc.adManager.standardAdCallback,this)}}),inc.adops.wallpaper_loaded&&inc.adManager.refreshGroup("scroll0","interstitial",!0),inc.adops.video_injection_loaded&&inc.adManager.refreshGroup("scroll0","theOOP",!0)),inc.adManager.createAds([{groupName:"scroll"+this.startingScrollPosition,options:{name:"sponsor-logo",type:"flexiblelogo",mq:["medium","large"],collapse:!0,pos:"top",callback:_.bind(this.adjustPaddingForSponsorLogo,this)}},{groupName:"scroll"+this.startingScrollPosition,options:{name:"insideArticleFlexiblePortrait",type:"flexibleportrait",mq:["medium"],collapse:!0,pos:"top",callback:_.bind(inc.adManager.standardAdCallback,this)}},{groupName:"scroll"+this.startingScrollPosition,options:{name:"sectionMobileInsertion",type:"mobileinsertion",mq:["small"],collapse:!0,pos:"top",callback:_.bind(inc.adManager.standardAdCallback,this)}},{groupName:"scroll"+this.startingScrollPosition,options:{name:"nativeTrigger",type:"nativetrigger",mq:["medium","large"],collapse:!0,pos:"bot",callback:_.bind(inc.adManager.standardAdCallback,this)}}]),this.hasSidebar&&inc.adManager.createAds([{groupName:"scroll"+this.startingScrollPosition,options:{name:"sidebarFixedSmallRectangle",type:"fixedsmallrectangle",mq:["large"],collapse:!0,pos:"top",callback:_.bind(inc.adManager.standardAdCallback,this)}},{groupName:"scroll"+this.startingScrollPosition,options:{name:"sidebarFlexiblePortrait",type:"flexibleportrait",mq:["large"],collapse:!0,pos:"top",callback:_.bind(inc.adManager.standardAdCallback,this)}},{groupName:"scroll"+(this.startingScrollPosition+1),options:{name:"sidebarFixedRectangle",type:"fixedrectangle",mq:["large"],collapse:!1,pos:"top",callback:this.fixedSidebarAdCallback.bind(this)}}]),this},render:function(){var e=this,t=!1;if(0==this.$el.children().length&&(t=!0,this.$el.html(this.template(this)),this.$(".SectionHeader").html(_.template($("#Article-SectionHeader-Template").html())(this)),this.$(".SectionBody").html(_.template($("#Article-SectionBody-Template").html())(this)),this.$(".SectionFooter").html(_.template($("#Article-SectionFooter-Template").html())(this))),"small"==inc.mqState&&this.insertInlineAdunit(),_.isNumber(this.model.id)&&-1==_.indexOf(inc.displayedIDs,this.model.id)&&inc.displayedIDs.push(this.model.id),this.setupShareBoxes(),this.setupComments(),this.resizeFeatureImage(),this.setupTwitterPullquoteLinks(),this.articleChannel=new Inc.Areas.ArticleChannel({model:this.model,el:this.$(".channel-article-header")[0]}),t&&this.articleChannel.render(),this.model.hasVideoAtTop()||(this.mainFigure=new Inc.Areas.ArticleMainFigure({model:this.model,el:this.$(".panographic-image-a")[0]}),t&&this.mainFigure.renderImage()),this.articleBylineArea=new Inc.Areas.ArticleAuthors({model:this.model,el:this.$(".article-byline")[0]}),t?this.articleBylineArea.render():this.articleBylineArea.truncateBios(),this.articleBody=new Inc.Areas.ArticleBody({model:this.model,el:this.$(".bodycopy")[0]}),this.pubdate=new Inc.Areas.ArticleDates({model:this.model,el:this.$(".PubdateArea")[0]}),t&&this.pubdate.render(),t&&inc.isMode("edit")&&(this.metaDataArea=new Inc.Areas.ArticleMetaData,this.$(".SectionHeader").before(this.metaDataArea.$el),this.listenTo(this.metaDataArea,"click:editpubdate",this.editPubdate)),this.adjustPaddingForSponsorLogo(),0==this.startingScrollPosition&&this.$(".FemUnitAdContainer").append(_.template($("#FemUnit-IMU-Template").html())(this)),20!=this.model.get("inc_typid")&&"12"!=inc.i.abgrp?_.each(this.$(".EmbeddedSlideshowPlayer"),function(e,t){var i=$(e).data();if(!i.playerSetup&&_.isNumber(i.contentId)&&inc.collections.slideshow.get(i.contentId)){this.$(".RelatedContent-Header, .EmbeddedSlideshowPlayer").css("visibility","visible");var n=new Inc.Slideshow.Player({el:e,embedded:!0,slideshows:{id:i.contentId}});n.resize(),this.slideshowPlayers.push(n),this.listenTo(n,"refreshed",this.onSlideshowPlayerAdsRefreshed),i.playerSetup=!0,this.$(".socialFollowBanner").hide()}else this.$(".RelatedContent-Header, .EmbeddedSlideshowPlayer").remove()},this):(this.$(".RelatedContent-Header").hide(),this.$(".EmbeddedSlideshowPlayer").hide()),("undefined"==typeof inc5000landerFlag&&"undefined"==typeof inc5000factsfiguresFlag||this.startingScrollPosition>0)&&inc.scrollMonitor.addScrollUnit("#"+this.oid+" .SectionHeader"),this.hasSidebar&&(inc.scrollMonitor.addScrollUnit("#"+this.oid+" .FixedSidebarAdContainer"),this.$(".sidebar_inner").prepend(this.sidebarTemplate(this))),this.setupMustReads(),this.setupSelectServices(),this.model.isNew()&&(_.each(this.shareBoxes,function(e){e.disable()}),inc.isMode("admin")?inc.editing.activate(!1):this.listenToOnce(dispatcher,"inc:mode:edit:on",function(){inc.editing.activate(!1)})),this.model.get("videos").length>0&&!this.model.hasInlineVideos()&&(this.model.get("inc_display_video_at_bottomflag")?18!=this.model.get("inc_typid")&&(this.articleVideoBottom=new Inc.Areas.ArticleVideoBottom({model:this.model,el:this.$(".ArticleVideoBottom")[0]})):this.articleVideoTop=new Inc.Areas.ArticleVideo({className:"ArticleVideo ArticleVideoTop",model:this.model,el:this.$(".ArticleVideoTop")[0]})),this.model.get("inc_show_read_moreflag")&&4!=this.model.get("inc_typid")&&this.model.readmorearticles&&this.model.readmorearticles.length>0&&this.startingScrollPosition>0){var i=$(_.template($("#ReadMore-Template").html())(this));this.$(".belowArticleContentUpperContainer").prepend(i)}return this.repositionReadMore(),this.hasSidebar&&(this.check(),_.isNumber(this.checker)||(this.checker=setInterval(function(){e.check()},500))),this.positionSelectServices(),this.socialFollowBanner=new Inc.Widgets.SocialFollowBanner({el:$("#"+e.$el.attr("id")+" .socialFollowBanner")}),this.socialFollowBanner.render(),inc.isMode("edit")&&this.onEnterEditMode(),this},check:function(){if("large"!=inc.mqState||!this.hasSidebar)return this;var e=this.$(".maincolumn").outerHeight(),t=this.$(".sidebar_inner").outerHeight(!0);if("VideoSection"!=inc.currentController.sections[inc.currentController.currentSectionIndex].type){t>e?(this.$(".maincolumn").css("min-height",t+"px"),this.$(".sidebar, .sidebar_inner").css("min-height",t+"px")):(this.$(".sidebar, .sidebar_inner").css("min-height",e+"px"),this.$(".maincolumn").css("min-height",e+"px"));var i=this.$(".maincolumn-inner").outerHeight(!0),n=this.$(".sidebar_inner"),s=n.height(),o=n.children(".sidebar_upper"),a=o.outerHeight(!0),r=n.children(".sidebar_middle"),l=r.outerHeight(!0);if(t>i&&s>a+l){var c;c=t-i>s-(a+l)?s-(a+l):t-i,this.$(".maincolumn").css("min-height",t-c+"px"),this.$(".sidebar, .sidebar_inner").css("min-height",t-c+"px")}}else this.$(".maincolumn").css("min-height",t+"px"),this.$(".sidebar, .sidebar_inner").css("min-height",t+"px");return this.repositionSidebar(),this},setupMustReads:function(){return this.mustReadsSidebar||!this.hasSidebar||this.hasCustomSidebar||(this.mustReadsSidebar=new Inc.Widgets.MustReads({el:this.$(".sidebar_inner .MustReads")[0],className:"MustReads MustReadsSidebar",parentArticleID:this.model.id,template:_.template($("#MustRead-Sidebar-Template").html())}),this.mustReadsSidebar.rendered||"large"!=inc.mqState||this.mustReadsSidebar.render()),this},setupSelectServices:function(){this.selectServices||!this.hasSidebar||this.hasCustomSidebar||(this.selectServices=new Inc.Widgets.SelectServices({el:this.$(".SectionFooter .select_services")[0],template:_.template($("#SelectServices-Template").html())}),this.selectServices.rendered||"large"!=inc.mqState||this.selectServices.render())},adjustPaddingForSponsorLogo:function(e,t){e&&inc.adManager.standardAdCallback.apply(this,arguments);var i=this.model.get("authors"),n=(this.model.get("inc_custom_byline")||"").trim();!(i&&0==i.length||""!=n)||"undefined"!=typeof e&&e.isEmpty?this.$(".SectionHeader").css("padding-right",""):this.$(".SectionHeader").css("padding-right","126px")},onWindowScrolled:function(){return Inc.Sections.Archetype.prototype.onWindowScrolled.apply(this,arguments),this.repositionSidebar(),this.refreshFixedSidebarAd(),this},onWindowResized:function(){return Inc.Sections.Archetype.prototype.onWindowResized.apply(this,arguments),this.repositionSidebar(),this.refreshFixedSidebarAd(),this.mustReadsSidebar&&!this.mustReadsSidebar.rendered&&"large"==inc.mqState&&this.mustReadsSidebar.render(),this.repositionReadMore(),this},refreshFixedSidebarAd:function(){return this.hasSidebar?(!inc.scrollMonitor.dontRefreshAds&&this.fixedAdLastLoaded&&moment().diff(this.fixedAdLastLoaded)>5e3&&this.isFixedAdVisible()&&(this.fixedAdLastLoaded=moment(),inc.adManager.refreshGroup("scroll"+(this.startingScrollPosition+1),"sidebarFixedRectangle",!0)),this):this},repositionSidebar:function(){if(!this.hasSidebar||Inc.Utilities.iOS||!this.model)return this;var e=this.$(".sidebar");if(0==e.length)return this;var t=e.offset().top,i=e.outerHeight(!0),n=$(document).scrollTop(),s=$(window).height();if("large"==inc.mqState&&n>t-s||t+i+s>n){var o=this.$(".sidebar_inner"),a=o.offset().top,r=o.height(),l=o.children(".sidebar_upper"),c=l.offset().top,h=l.outerHeight(!0),d=o.children(".sidebar_middle"),u=(d.offset().top,d.outerHeight(!0)),p=(parseInt(d.css("margin-top").replace("px","")),inc.topNav.getDistanceOfBottomFromTop());if(h+u>=r)return d.css({position:"relative",top:"auto",left:"auto",bottom:"auto"}),this;if(this.hasCustomSidebar){var m=15;c+h-(s-u-p)+m>=n+p?d.css({position:"relative",top:"auto",left:"auto",bottom:"auto"}):n>=a+r-s+m?d.css({position:"absolute",top:"auto",left:"0",bottom:"0"}):d.css({position:"fixed",top:"auto",left:o.offset().left+"px",bottom:m+"px"})}else c+h>=n+p?d.css({position:"relative",top:"auto",left:"auto",bottom:"auto"}):n>=a+r-u-p?d.css({position:"absolute",top:"auto",left:"0",bottom:"0"}):d.css({position:"fixed",top:p+"px",left:o.offset().left+"px",bottom:"auto"})}return this},onEnterEditMode:function(){if(this.metaDataArea||18==this.model.get("inc_typid")||20==this.model.get("inc_typid")||(this.metaDataArea=new Inc.Areas.ArticleMetaData,this.$(".SectionHeader").before(this.metaDataArea.$el),this.listenTo(this.metaDataArea,"click:editpubdate",this.editPubdate)),!this.mainFigureTypeSelector){this.mainFigureTypeSelector=new Inc.Menus.MainFigureTypeSelector({model:this.model});var e=this.$(".narrowArticleHeaderContainer");e.toggleClass("editingImage",this.mainFigureTypeSelector.isImageSelected()).toggleClass("editingVideo",this.mainFigureTypeSelector.isVideoSelected()),e.prepend(this.mainFigureTypeSelector.$el),this.listenTo(this.mainFigureTypeSelector,"select:image",this.onMainFigureSelectImage),this.listenTo(this.mainFigureTypeSelector,"select:video",this.onMainFigureSelectVideo),this.listenTo(this.mainFigureTypeSelector,"change:video",function(){this.onMainFigureSelectVideo(),this.articleVideoTop.onSelectChangeVideo()})}this.articleVideoBottom||18==this.model.get("inc_typid")||(this.articleVideoBottom=new Inc.Areas.ArticleVideoBottom({model:this.model,el:this.$(".ArticleVideoBottom")[0]})),this.articleVideoBottom&&this.articleVideoBottom.show();var t=this.$(".morearticles");return t.detach(),t.toggleClass("inline",!1),this.$(".belowArticleContentUpperContainer").prepend(t),this},onExitEditMode:function(){return this.metaDataArea&&this.metaDataArea.trash(),this.metaDataArea=null,this.mainFigureTypeSelector&&this.mainFigureTypeSelector.trash(),this.mainFigureTypeSelector=null,this.$(".narrowArticleHeaderContainer").toggleClass("editingImage",!1).toggleClass("editingVideo",!1),this.articleVideoTop&&!this.model.hasVideoAtTop()&&this.articleVideoTop.hide(),this.articleVideoBottom&&!this.model.hasVideoAtBottom()&&this.articleVideoBottom.hide(),this.repositionReadMore(),this},onMainFigureSelectImage:function(){var e=this.$(".narrowArticleHeaderContainer");return e.toggleClass("editingImage",!0).toggleClass("editingVideo",!1),this.mainFigure||(this.mainFigure=new Inc.Areas.ArticleMainFigure({model:this.model,el:this.$(".panographic-image-a")[0]}),this.mainFigure.renderImage(),this.resizeFeatureImage(),this.mainFigure.startPictureEditing()),this},onMainFigureSelectVideo:function(){var e=this.$(".narrowArticleHeaderContainer");return e.toggleClass("editingImage",!1).toggleClass("editingVideo",!0),this.articleVideoTop||(this.articleVideoTop=new Inc.Areas.ArticleVideo({className:"ArticleVideo ArticleVideoTop",model:this.model,el:this.$(".ArticleVideoTop")[0]})),this.articleVideoTop.show(),this},repositionReadMore:function(){var e=this.$(".morearticles");if(0==e.length||inc.isMode("edit"))return this;if("small"==inc.mqState||this.model.get("inc_full_width_read_moreflag")||this.model.get("inc_display_video_at_bottomflag")||20==this.model.get("inc_typid"))return e.parent().hasClass("belowArticleContentUpperContainer")||(e.detach(),e.toggleClass("inline",!1),this.$(".belowArticleContentUpperContainer").prepend(e)),this;var t=e.prev();if(e.detach(),e.toggleClass("inline",!0),$articleBodyChildren=[].slice.call(this.$(".article-body").children()),$articleBodyChildren.length<5)return t.after(e),this;for($articleBodyLastChild=$([].pop.call($articleBodyChildren)),$articleBodyLastChild.before(e);$articleBodyChildren.length>0&&e.outerHeight(!0)+e.offset().top>$articleBodyLastChild.outerHeight(!0)+$articleBodyLastChild.offset().top;)e.detach(),$([].pop.call($articleBodyChildren)).before(e);return this},positionSelectServices:function(){return"large"==inc.mqState&&this.hasSidebar?(selectHeight=this.$(".select_services").outerHeight(),void(selectHeight&&(this.$(".select_services").css({"margin-top":~selectHeight+1+"px"}),this.$(".FixedSidebarAdContainer").css({"padding-bottom":selectHeight+20+"px"})))):this},isFixedAdVisible:function(){if(!this.hasSidebar||"large"!=inc.mqState)return!1;var e=this.$(".FixedSidebarAdContainer"),t=e.offset().top,i=$(document).scrollTop(),n=$(window).height();return"none"!=e.children(".sidebarFixedRectangle").css("display")&&t-i>inc.topNav.getDistanceOfBottomFromTop()-110&&n-140>=t-i?!0:!1},fixedSidebarAdCallback:function(e,t){return inc.adManager.standardAdCallback.apply(this,arguments),this.fixedAdLastLoaded||(this.fixedAdLastLoaded=moment()),this},resizeFeatureImage:function(){if(0==this.$(".SectionBody").length)return this;var e=parseInt(this.$(".SectionBody").css("margin-left").replace("px",""));return e||(e=this.$(".SectionBody").offset().left),e>0&&(200>e?margin=e:margin=200,this.$(".panographic-image").css("margin-left",0-margin-6),this.$(".panographic-image figcaption").css("margin-left",margin+6),this.$(".MainFigureOptionsMenu").css("margin-left",margin+6)),this},setupTwitterPullquoteLinks:function(){return this.$(".pullquote").each(function(e,t){$(this).text().length<109&&$(this).addClass("tweetable")}),this.$(".tweetable").hover(function(){$(this).addClass("twitterhover")},function(){$(this).removeClass("twitterhover")}),this},setupShareBoxes:function(){var e=this.model.get("inc_headline")||this.model.get("inc_title"),t=this.model.get("inc_twitter_headline")||e,i=inc.applicationURL+this.model.get("inc_filelocation"),n=this.model.get("inc_sharing_deck")||this.model.get("inc_deck");return _.each(this.$(".ShareContainer"),function(s){var o,a=$(s);o=a.hasClass("ShareContainerLower")&&!this.model.get("inc_hide_commentsflag")?'<div id="<%= ob.elementID %>" class="<%= ob.classes.join(\' \') %>"><div class="DisabledMask"></div><div class="ShareBoxButtons"></div><div class="ShareBoxLabel"></div><div class="ShareBoxExtras"></div><br clear="all"/></div>':'<div id="<%= ob.elementID %>" class="<%= ob.classes.join(\' \') %>"><div class="DisabledMask"></div><div class="ShareBoxButtons"></div><div class="ShareBoxLabel" style="display: inline-block;"></div><br clear="all"/></div>';var r=Inc.Accessories.ShareBox.spawn({classes:"ArticleShareBox",controller:this,template:o,buttons:{facebook:{title:e,url:i,caption:"Inc.com",description:n,actionLinkName:e,actionLinkURL:i,template:'<div id="<%= ob.elementID %>" class="ShareButton FacebookShareButton"><div class="fa-facebook"></div></div>'},twitter:{title:t,url:i,template:'<div id="<%= ob.elementID %>" class="ShareButton TwitterShareButton"><a class="ShareButtonAnchor fa-twitter" href="https://twitter.com/intent/tweet?url=<%= encodeURIComponent(ob.url) %>&via=<%= ob.via %>&text=<%= encodeURIComponent(ob.text) %>&related=<%= ob.related %>"></a></div>'},googleplus:{url:i,clickedCallback:_.bind(this.googlePlusButtonClicked,this)},linkedin:{title:e,url:i,summary:n},reddit:{title:e,url:i},stumbleupon:{url:i},mail:{subject:e,body:e+"\n"+i}}});this.shareBoxes.push(r),r.render(a)},this),this.$(".ArticleShareBox .ShareBoxLabel").sharrre({share:{facebook:!0,twitter:!0,linkedin:!0,googlePlus:!0},url:i,template:"{total} SHARES",urlCurl:inc.applicationURL+"sharrre.php",enableHover:!1}),this},setupComments:function(){return 20==this.model.get("inc_typid")||this.model.get("inc_hide_commentsflag")?this:(this.model.commentcount>0?commentbutton='<div class="articlecommentcount">'+this.model.commentcount+"</div><p>+ SHOW COMMENTS</p>":commentbutton='<div class="articlecommentcount">0</div><p>+ WRITE A COMMENT</p>',this.$(".ShareContainerLower .ShareBoxExtras").append(commentbutton),this.$(".ShareBoxExtras").click(function(){this.comments||(this.$(".Comments").show(),this.comments=new Comments,this.comments.init(this.model.getID(),inc.applicationURL,this.$(".Comments")))}.bind(this)),this)},clickCommentInfo:function(e){return this.comments||(this.$(".Comments").show(),this.comments=new Comments,this.comments.init(this.model.getID(),inc.applicationURL,this.$(".Comments"))),inc.scrollMonitor.dontRefreshAds=!0,
$("html, body").animate({scrollTop:this.comments.$el.offset().top-$(".TopNav").outerHeight(!0)-$(".AdminMenu").outerHeight()-100},{complete:function(){inc.scrollMonitor.dontRefreshAds=!1,inc.scrollMonitor.processScroll()}},500),this},insertInlineAdunit:function(){if(thissection=this.$el.attr("id"),total_paragraphs=$("#"+thissection+" .bodycopy .article-body > p").length,0!==total_paragraphs){paragraph_number=Math.ceil(total_paragraphs/4),paragraph_number=total_paragraphs-paragraph_number,paragraph_selected=$("#"+thissection+" .bodycopy .article-body > p:eq("+paragraph_number+")");for(var e=paragraph_number;e<=total_paragraphs&&(paragraph_selected=$("#"+thissection+" .bodycopy .article-body > p:eq("+e+")"),e!==total_paragraphs);)if(1==paragraph_selected.length){if(0!==paragraph_selected.html().search("<strong>"))break;e++}else e++;return paragraph_selected.append("<div class='mobileInsertionAdContainer'><div id='sectionMobileInsertion"+thissection+"' class='sectionMobileInsertion'><script type='text/javascript'>inc.adManager.displayAdSlot('scroll"+this.startingScrollPosition+"','sectionMobileInsertion','sectionMobileInsertion"+thissection+"');</script></div><div class='padvertlabel'>Advertisement</div></div>"),this}},editPubdate:function(){if(console.log("edit pubdate"),!inc.isMode("edit"))return this;var e=this.pubdate.$el.offset().top-$(".TopNav").outerHeight(!0)-$(".AdminMenu").outerHeight()-100;return"small"==inc.mqState?($("html, body").scrollTop(e),this.pubdate.$el.trigger("click")):$("html, body").animate({scrollTop:e},{complete:_.bind(function(){this.pubdate.$el.trigger("click")},this)},500),this},trash:function(){return Inc.Sections.Archetype.prototype.trash.apply(this,arguments),this}}),Inc.Sections.ArticleInternationalWall=Inc.Sections.Archetype.extend({type:"ArticleInternationalWallSection",className:"Section ArticleSection InternationalWall",template:_.template($("#Article-InternationalWall-Section-Template").html()),initialize:function(e){return e||(e={}),this.numberOfScrollPositions=1,this.hasSidebar=!1,this.hidden=!0,Inc.Sections.Archetype.prototype.initialize.apply(this,arguments),this.imageModel=this.model.getFeaturedImageID()?inc.collections.image.get(this.model.getFeaturedImageID()):void 0,this.setupAds(),this},events:function(){return{"click .login-button":"onClickLogin","click .signup-button":"onClickSignup"}},setupAds:function(){return 0!=this.startingScrollPosition&&inc.adManager.addEmptyAdGroup("scroll"+this.startingScrollPosition,this.model.adinfo),0!=this.startingScrollPosition&&(this.hideTopOfSectionAd||inc.adManager.createAds({groupName:"scroll"+this.startingScrollPosition,options:{name:"sectionFlexibleBillboard",type:"flexiblebillboard",mq:["medium","large"],collapse:!1,pos:"top",callback:_.bind(inc.adManager.standardAdCallback,this)}}),inc.adManager.createAds({groupName:"scroll"+this.startingScrollPosition,options:{name:"sectionMobileRectangle",type:"mobilerectangle",mq:["small"],collapse:!1,pos:"top",callback:_.bind(inc.adManager.standardAdCallback,this)}}),inc.adops.wallpaper_loaded&&inc.adManager.refreshGroup("scroll0","interstitial",!0),inc.adops.video_injection_loaded&&inc.adManager.refreshGroup("scroll0","theOOP",!0)),this},render:function(){var e=!1;return 0==this.$el.children().length&&(e=!0,this.$el.html(this.template(this))),_.isNumber(this.model.id)&&-1==_.indexOf(inc.displayedIDs,this.model.id)&&inc.displayedIDs.push(this.model.id),("undefined"==typeof inc5000landerFlag&&"undefined"==typeof inc5000factsfiguresFlag||this.startingScrollPosition>0)&&inc.scrollMonitor.addScrollUnit("#"+this.oid),this},onClickLogin:function(){return inc.user.promptForLogin(),this},onClickSignup:function(){return inc.user.promptForSignup(),this}}),Inc.Sections.Slideshow=Inc.Sections.Article.extend({type:"SlideshowSection",className:"Section ArticleSection SlideshowSection",initialize:function(e){return e||(e={}),this.hasSidebar=!1,this.numberOfScrollPositions=1,Inc.Sections.Article.prototype.initialize.apply(this,arguments),inc.adManager.createAds([{groupName:"scroll"+this.startingScrollPosition,options:{name:"SlideshowPlayerIMU",type:"ssrectangle",mq:["medium","large"],collapse:!1,pos:"top"}},{groupName:"scroll"+this.startingScrollPosition,options:{name:"SlideshowPlayerLeaderboard",type:"ssleaderboard",mq:["medium","large"],collapse:!1,pos:"top"}},{groupName:"scroll"+this.startingScrollPosition,options:{name:"SlideshowPlayer-Interstitial-IMU",type:"ssinterstitialrectangle",mq:["small"],collapse:!1,pos:"top",onlyRefreshWhenExplicitlyCalled:!0}}]),this.moreSlideshows=null,this.listenTo(dispatcher,"inc:mode:edit:on",this.onEnterEditMode),this.listenTo(dispatcher,"inc:mode:edit:off",this.onExitEditMode),this},render:function(){var e=!1;if(0==this.$el.children().length&&(e=!0,this.$el.html(this.template(this)),this.$(".SectionHeader").html(_.template($("#Article-SectionHeader-Template").html())(this)),this.$(".SectionBody").html(_.template($("#Article-SectionBody-Template").html())(this))),_.isNumber(this.model.id)&&-1==_.indexOf(inc.displayedIDs,this.model.id)&&inc.displayedIDs.push(this.model.id),this.setupShareBoxes(),this.resizeFeatureImage(),this.setupTwitterPullquoteLinks(),this.articleChannel=new Inc.Areas.ArticleChannel({model:this.model,el:this.$(".channel-article-header")[0]}),e&&this.articleChannel.render(),this.articleBylineArea=new Inc.Areas.ArticleAuthors({model:this.model,el:this.$(".article-byline")[0]}),e?this.articleBylineArea.render():this.articleBylineArea.truncateBios(),e&&inc.isMode("edit")&&(this.metaDataArea=new Inc.Areas.ArticleMetaData,this.$(".SectionHeader").before(this.metaDataArea.$el)),this.articleBody=new Inc.Areas.ArticleBody({model:this.model,el:this.$(".bodycopy")[0]}),0==this.startingScrollPosition&&(this.moreSlideshows=new Inc.Slideshow.MoreSlideshows({model:this.model,el:this.$(".MoreSlideshows")[0]})),this.adjustPaddingForSponsorLogo(),("undefined"==typeof inc5000landerFlag&&"undefined"==typeof inc5000factsfiguresFlag||this.startingScrollPosition>0)&&inc.scrollMonitor.addScrollUnit("#"+this.oid+" .SectionHeader"),this.setupMustReads(),this.model.isNew()){this.$(".bodycopy-wrapper").before('<div class="SlideshowPlayer SlideshowPlayerFullWidth"></div><div class="SlideshowPlayerFullWidthBottomPadder"></div>'),_.each(this.shareBoxes,function(e){e.disable()});var t=new Inc.Models.Slide;inc.collections.slide.add(t),inc.editing.modelsBeingEdited.push(t);var i=new Inc.Models.Slideshow([],{slides:[t]});i.set("slides",[{id:t.getID(),sortorder:0}]),i.listenToOnce(t,"save:success",function(e){for(var t=this.get("slides"),i=0;i<t.length;i++)if(t[i].id==e.cid){t[i].id=e.id,this.set("slides",t);break}}),inc.editing.modelsBeingEdited.push(i),this.model.set("slideshows",[{id:i.cid,sortorder:0}]),this.model.listenToOnce(i,"save:success",function(e){for(var t=this.get("slideshows"),i=0;i<t.length;i++)t[i].id==e.cid&&(t[i].id=e.id,this.set("slideshows",t))});var n=new Inc.Slideshow.Player({el:this.$(".SlideshowPlayerFullWidth")[0],slideshows:i});n.resize(),this.slideshowPlayers.push(n),this.listenTo(n,"refreshed",this.onSlideshowPlayerAdsRefreshed),n.$el.data("playerSetup",!0),inc.isMode("admin")?inc.editing.activate(!1):this.listenToOnce(dispatcher,"inc:mode:edit:on",function(){inc.editing.activate(!1)}),this.$(".SlidePicture").data("contentId",t.getID()),n.$(".ThumbnailReorder").trigger("click"),this.listenTo(dispatcher,"inc:mode:edit:on",function(){n.$(".ThumbnailReorder").trigger("click")})}else _.each(this.$(".SlideshowPlayer"),function(e,t){var i=$(e).data();if(!i.playerSetup&&_.isNumber(i.contentId)&&inc.collections.slideshow.get(i.contentId)){var n=new Inc.Slideshow.Player({el:e,slideshows:{id:i.contentId},prerendered:0==this.startingScrollPosition,adGroup:"scroll"+this.startingScrollPosition});n.resize(),this.slideshowPlayers.push(n),this.listenTo(n,"refreshed",this.onSlideshowPlayerAdsRefreshed),i.playerSetup=!0,0==this.startingScrollPosition&&0==t&&(n.prerendered||this.moreSlideshows.onSlideshowChanged(n.slideshows.get(n.currentSlideshowID)),this.moreSlideshows.listenTo(n,"slideshow:changed",this.moreSlideshows.onSlideshowChanged),n.listenTo(this.moreSlideshows,"slideshow:selected",n.onMoreSlideshowSelected))}},this);return $(this.$(".SlideshowPlayer")[0]).find(".CaptionAndIMU-Container .IMU-Container").before('<div class="Pubdate inc_editable" data-editor-class="ArticleDates" data-label="Dates" data-content-type="article" data-content-id="'+this.model.getID()+'"><span class="PubdateContent"></span></div>'),Inc.Areas.ArticleDates.prototype.render.call(this),this.listenTo(this.model,"change:inc_pubdate change:inc_custom_pubdate change:inc_typid",function(){Inc.Areas.ArticleDates.prototype.render.call(this)}),inc.isMode("edit")&&this.onEnterEditMode(),this},onEnterEditMode:function(){return this.$(".article-deck").show(),this},onExitEditMode:function(){return this.$(".article-deck").hide(),this}}),Inc.Sections.PhotoEssay=Inc.Sections.Article.extend({type:"PhotoEssaySection",className:"Section ArticleSection PhotoEssaySection",initialize:function(e){return e||(e={}),this.hasSidebar=!1,this.numberOfScrollPositions=1,Inc.Sections.Article.prototype.initialize.apply(this,arguments),this.slides=[],this.sliderNavigator=Inc.Navigation.PhotoEssayNavigator.spawn({prefix:"PhotoEssay",controller:this}),this.slideSwipeOffset=100,this.$photoEssay=null,this.clickTrackingObject.thistype="photoessay",this.listenTo(inc.scrollMonitor,"scrollposition:change",this.scrollPositionChanged),this.listenTo(dispatcher,"window:scrolled",this.pageScrolled),this},render:function(){var e=0==this.$el.children().length;Inc.Sections.Article.prototype.render.apply(this,arguments),this.$photoEssay=this.$(".PhotoEssayContainer");var t=this.model.get("photoEssaySlides")||[];_.each(t,function(t,i,n){var s=inc.collections.photoEssaySlide.get(t.id),o={model:s,slideNumber:i+1,scrollPosition:this.startingScrollPosition+i+1,totalSlides:n.length};e||(o.el=this.$(".PhotoEssaySlide-"+s.getID())[0]);var a=new Inc.Views.PhotoEssaySlide(o);this.slides.push(a),e&&(this.$photoEssay.append(a.$el),i==n.length-1&&this.$photoEssay.append($('<div class="LastWideAdContainer WideAdContainer"><div class="SmallAdSubContainer"></div></div>'))),a.render()},this),this.numberOfScrollPositions=t.length+1;var i=Inc.GestureRecognizers.Swipe.spawn({direction:["left","right"]});if(this.addGestureRecognizer(i),this.listenTo(i,"gesture:swipe",this.onSwipe),this.sliderNavigator.render(),this.slides.length>=6){var n=[];_.each(this.slides,function(e){n.push(e.model.copyAttributes())}),this.sliderNavigator.appendItems(n)}return this.adjustPaddingForSponsorLogo(),this.setupMustReads(),inc.isMode("edit")&&this.onEnterEditMode(),this},imagesLoaded:function(e){if(e="undefined"!=typeof e&&_.isNumber(e)?e++:this.slides.length,!this.mainFigure.picture||!this.mainFigure.picture.loaded||0==this.slides.length)return!1;for(var t=0;e>t;t++){var i=this.slides[t];if(!i.picture||!i.picture.loaded)return!1}return!0},scrollPositionChanged:function(e){var t=_.findWhere(this.slides,{scrollPosition:e});return t&&!t.impressionTracked&&(t.impressionTracked=!0,this.recordSlideImpression(t)),this},recordSlideImpression:function(e){var t={};return _.extend(t,this.impressionsTrackingObject),t.inlid=e.model.getID(),t.position=e.slideNumber,t.scroll=e.scrollPosition,inc.tracker.recordPhotoEssayImpressions(t),this},googlePlusButtonClicked:function(){return Inc.Sections.Archetype.googlePlusButtonClicked.apply(this,arguments),"large"==inc.mqState&&this.sliderNavigator&&this.sliderNavigator.close(),this},goToSlide:function(e){if(_.isNumber(e)&&(e=this.slides[e]),inc.scrollMonitor.dontRefreshAds=!0,inc.adManager.refreshGroup(e.adGroup),inc.pushState>0&&1==inc.currentController.sections.length&&"fixed"!=inc.topNav.$el.css("position")){var t="large"==inc.mqState?141:0;$(document).scrollTop(e.$el.offset().top-inc.topNav.$el.outerHeight(!0)-inc.topNav.$(".AdminMenu").outerHeight()-t)}else $(document).scrollTop(e.$el.offset().top-inc.topNav.getDistanceOfBottomFromTop());return setTimeout(function(){inc.scrollMonitor.dontRefreshAds=!1},500),this},onSwipe:function(e,t,i){var n=$(window).scrollTop();if("left"==i){for(var s=0;s<this.slides.length-1;s++){var o=this.slides[s];if(n>=o.$el.offset().top-this.slideSwipeOffset&&n<o.$el.offset().top+o.$el.outerHeight(!0)-this.slideSwipeOffset)return this.slides[s+1]&&this.goToSlide(this.slides[s+1]),this}n<this.slides[0].$el.offset().top-this.slideSwipeOffset&&this.goToSlide(this.slides[0])}else if("right"==i){for(var s=this.slides.length-1;s>0;s--){var o=this.slides[s];if(n>=o.$el.offset().top-this.slideSwipeOffset&&n<o.$el.offset().top+o.$el.outerHeight(!0)-this.slideSwipeOffset)return this.slides[s-1]&&this.goToSlide(this.slides[s-1]),this}var a=this.slides[this.slides.length-1];n>a.$el.offset().top+a.$el.outerHeight(!0)-this.slideSwipeOffset&&this.goToSlide(a)}return this},pageScrolled:function(){var e=inc.scrollMonitor.lastScrollTop,t=this.$el.offset().top,i=this.$photoEssay?this.$photoEssay.offset().top+this.$photoEssay.outerHeight(!0):0;if("small"!=inc.mqState&&this.slides.length>=6&&(0==this.startingScrollPosition||e>=t)&&i>e){"fixed"==$("#TopNav").css("position")&&e>0?this.sliderNavigator.shown?this.sliderNavigator.updatePosition():(this.sliderNavigator.show(),this.sliderNavigator.userClosed||0!=this.startingScrollPosition||this.sliderNavigator.open()):this.sliderNavigator.hide();var n=$("#"+this.sliderNavigator.elementID).find(".Slider"),s=n.width(),o=n.children(".PhotoEssayNavigatorList").width(),a=this.$photoEssay.offset().top,r=this.$photoEssay.outerHeight(!0)+a;if(a>e&&0!=n.scrollLeft())n.scrollLeft(0),this.sliderNavigator.updateSlider();else if(e>=r&&n.scrollLeft()!=o-s)n.scrollLeft(o-s),this.sliderNavigator.updateSlider();else{var l=this,c=0;this.$photoEssay.children(".PhotoEssaySlide").each(function(t){if(e>=$(this).offset().top&&e<$(this).offset().top+$(this).outerHeight(!0)){$navItem=$(n.children(".PhotoEssayNavigatorList").children()[t]);var i=(e-$(this).offset().top)/$(this).outerHeight(!0)*$navItem.outerWidth(!0),a=Math.round(c-s/2+i);return 0>=a?(n.scrollLeft(0),l.sliderNavigator.updateSlider()):a>=o-s?(n.scrollLeft(o-s),l.sliderNavigator.updateSlider()):(n.scrollLeft(a),l.sliderNavigator.updateSlider()),!1}c+=$(n.children(".PhotoEssayNavigatorList").children()[t]).outerWidth(!0)})}}else this.sliderNavigator.hide();return this}}),Inc.Sections.Video=Inc.Sections.Article.extend({type:"VideoSection",className:"Section ArticleSection VideoSection",sidebarTemplate:_.template($("#Video-Section-Sidebar-Template").html()),initialize:function(e){return e||(e={}),this.numberOfScrollPositions=1,Inc.Sections.Article.prototype.initialize.apply(this,arguments),this},setupAds:function(){return 0!=this.startingScrollPosition&&inc.adManager.addEmptyAdGroup("scroll"+this.startingScrollPosition,this.model.adinfo),0!=this.startingScrollPosition&&(this.hideTopOfSectionAd||inc.adManager.createAds({groupName:"scroll"+this.startingScrollPosition,options:{name:"sectionFixedLeaderboard",type:"fixedleaderboard",mq:["medium","large"],collapse:!1,pos:"top",callback:_.bind(inc.adManager.standardAdCallback,this)}}),inc.adManager.createAds({groupName:"scroll"+this.startingScrollPosition,options:{name:"sectionMobileRectangle",type:"mobilerectangle",mq:["small"],collapse:!1,pos:"top",callback:_.bind(inc.adManager.standardAdCallback,this)}})),inc.adManager.createAds([{groupName:"scroll"+this.startingScrollPosition,options:{name:"sponsor-logo",type:"flexiblelogo",mq:["medium","large"],collapse:!0,pos:"top",callback:_.bind(this.adjustPaddingForSponsorLogo,this)}},{groupName:"scroll"+this.startingScrollPosition,options:{name:"insideArticleFlexiblePortrait",type:"flexibleportrait",mq:["medium"],collapse:!0,pos:"top",callback:_.bind(inc.adManager.standardAdCallback,this)}}]),inc.adManager.addEmptyAdGroup("theatermode"),inc.adManager.createAds({groupName:"theatermode",options:{name:"theaterMode",type:"fixedrectangle",mq:["large"],collapse:!0}}),this.hasSidebar&&inc.adManager.createAds([{groupName:"scroll"+this.startingScrollPosition,options:{name:"sidebarFixedSmallRectangle",type:"fixedsmallrectangle",mq:["large"],collapse:!0,pos:"top",callback:_.bind(inc.adManager.standardAdCallback,this)}},{groupName:"scroll"+this.startingScrollPosition,options:{name:"sidebarFlexiblePortrait",type:"flexibleportrait",mq:["large"],collapse:!0,pos:"top",callback:_.bind(inc.adManager.standardAdCallback,this)}}]),this},render:function(){var e=this,t=!1;return 0==this.$el.children().length&&(t=!0,this.$el.html(this.template(this)),this.$(".SectionHeader").html(_.template($("#Article-SectionHeader-Template").html())(this)),this.$(".SectionBody").html(_.template($("#Article-VideoSectionBody-Template").html())(this)),this.$(".SectionFooter").html(_.template($("#Article-VideoSectionFooter-Template").html())(this))),_.isNumber(this.model.id)&&-1==_.indexOf(inc.displayedIDs,this.model.id)&&inc.displayedIDs.push(this.model.id),this.setupShareBoxes(),this.setupTwitterPullquoteLinks(),this.articleChannel=new Inc.Areas.ArticleChannel({model:this.model,el:this.$(".channel-article-header")[0]}),t&&this.articleChannel.render(),this.articleBylineArea=new Inc.Areas.ArticleAuthors({model:this.model,el:this.$(".article-byline")[0]}),t?this.articleBylineArea.render():this.articleBylineArea.truncateBios(),this.pubdate=new Inc.Areas.ArticleDates({model:this.model,el:this.$(".PubdateArea")[0]}),t&&this.pubdate.render(),t&&inc.isMode("edit")&&(this.metaDataArea=new Inc.Areas.ArticleMetaData,this.$(".SectionHeader").before(this.metaDataArea.$el)),this.adjustPaddingForSponsorLogo(),0==this.startingScrollPosition&&this.$(".FemUnitAdContainer").append(_.template($("#FemUnit-IMU-Template").html())(this)),this.$(".RelatedContent-Header").hide(),this.$(".EmbeddedSlideshowPlayer").hide(),("undefined"==typeof inc5000landerFlag&&"undefined"==typeof inc5000factsfiguresFlag||this.startingScrollPosition>0)&&inc.scrollMonitor.addScrollUnit("#"+this.oid+" .SectionHeader"),this.hasSidebar&&this.$(".sidebar_inner").prepend(this.sidebarTemplate(this)),this.setupMustReads(),this.model.isNew()?(_.each(this.shareBoxes,function(e){e.disable()}),inc.isMode("admin")?inc.editing.activate(!1):this.listenToOnce(dispatcher,"inc:mode:edit:on",function(){inc.editing.activate(!1)})):this.articleVideoTop=new Inc.Areas.ArticleVideo({model:this.model,className:"ArticleVideo VideoSectionVideo",el:this.$(".VideoSectionVideo")[0],videoPlayerClass:Inc.Video.VideoSectionPlayer}),this.hasSidebar&&(this.check(),_.isNumber(this.checker)||(this.checker=setInterval(function(){e.check()},500))),inc.isMode("edit")&&this.onEnterEditMode(),this},repositionSidebar:function(){return this}}),Inc.Sections.VideoWatch=Inc.Sections.Article.extend({type:"VideoWatchSection",className:"Section ArticleSection VideoWatchSection",template:_.template($("#VideoWatch-Section-Template").html()),sidebarTemplate:_.template($("#VideoWatch-Section-Sidebar-Template").html()),initialize:function(e){return e||(e={}),this.numberOfScrollPositions=1,Inc.Sections.Article.prototype.initialize.apply(this,arguments),this.hasSidebar=!0,this.playlistOffset=20,this.shareBoxes=[],this},setupAds:function(){return 0!=this.startingScrollPosition&&inc.adManager.addEmptyAdGroup("scroll"+this.startingScrollPosition,this.model.adinfo),0!=this.startingScrollPosition&&(this.hideTopOfSectionAd||inc.adManager.createAds({groupName:"scroll"+this.startingScrollPosition,options:{name:"sectionFixedLeaderboard",type:"fixedleaderboard",mq:["medium","large"],collapse:!1,pos:"top",callback:_.bind(inc.adManager.standardAdCallback,this)}}),inc.adManager.createAds({groupName:"scroll"+this.startingScrollPosition,options:{name:"sectionMobileRectangle",type:"mobilerectangle",mq:["small"],collapse:!1,pos:"top",callback:_.bind(inc.adManager.standardAdCallback,this)}})),inc.adManager.createAds([{groupName:"scroll"+this.startingScrollPosition,options:{name:"sponsor-logo",type:"flexiblelogo",mq:["medium","large"],collapse:!0,pos:"top",callback:_.bind(this.adjustPaddingForSponsorLogo,this)}},{groupName:"scroll"+this.startingScrollPosition,options:{name:"insideArticleFlexiblePortrait",type:"flexibleportrait",mq:["medium"],collapse:!0,pos:"top",callback:_.bind(inc.adManager.standardAdCallback,this)}},{groupName:"scroll"+this.startingScrollPosition,options:{name:"sectionFixedLeaderboard",type:"fixedleaderboard",mq:["medium","large"],collapse:!1,pos:"bot",callback:_.bind(inc.adManager.standardAdCallback,this)}}]),this.hasSidebar&&inc.adManager.createAds([{groupName:"scroll"+this.startingScrollPosition,options:{name:"sidebarFixedSmallRectangle",type:"fixedsmallrectangle",mq:["large"],collapse:!0,pos:"top",callback:_.bind(inc.adManager.standardAdCallback,this)}},{groupName:"scroll"+this.startingScrollPosition,options:{name:"sidebarFixedRectangle",type:"fixedrectangle",mq:["large"],collapse:!0,pos:"top",callback:_.bind(inc.adManager.standardAdCallback,this)}}]),this},render:function(){var e=this;_.isNumber(this.model.id)&&-1==_.indexOf(inc.displayedIDs,this.model.id)&&inc.displayedIDs.push(this.model.id),("undefined"==typeof inc5000landerFlag&&"undefined"==typeof inc5000factsfiguresFlag||this.startingScrollPosition>0)&&inc.scrollMonitor.addScrollUnit("#"+this.oid),this.articleVideoTop=new Inc.Areas.VideoWatchVideo({model:this.model,el:this.$(".VideoWatchVideo")[0]});var t=window.location.href.split("/");$.inArray("watch",t)>-1&&this.updateWatchMeta(),this.setupShareBoxes(),this.$(".sidebar_inner").append(this.sidebarTemplate(this)),this.hasSidebar&&(this.check(),_.isNumber(this.checker)||(this.checker=setInterval(function(){e.check()},500))),this.articleChannel=new Inc.Areas.ArticleChannel({model:this.model,el:this.$(".channel-article-header")[0]}),this.model.isNew()&&(_.each(this.shareBoxes,function(e){e.disable()}),inc.isMode("admin")?inc.editing.activate(!1):this.listenToOnce(dispatcher,"inc:mode:edit:on",function(){inc.editing.activate(!1)}));var i,n="scroll0";i="PhotoEssayMobileRectangle",inc.adManager.createAds({groupName:n,options:{name:i,type:"mobilerectangle",mq:["small"],collapse:!1,pos:"top"}}),this.$el.parent().children(".LastWideAdContainer").children(".SmallAdSubContainer").append(_.template('<div id="<%= adName %><%= slideNumber %>-<%= slideID %>"><script type="text/javascript">inc.adManager.displayAdSlot("<%= adGroup %>","<%= adName %>","<%= adName %><%= slideNumber %>-<%= slideID %>");</script></div>')({adName:i,adGroup:n,slideNumber:this.slideNumber,slideID:this.model.getID()}));var s=this.model.getID();$(".ReccomendedVideoContainer.forArticle-"+s).on("click",".NavigateRight",function(t){var i={el:t.delegateTarget};e.nextSlide(i)}),$(".ReccomendedVideoContainer.forArticle-"+s).on("click",".NavigateLeft",function(t){var i={el:t.delegateTarget};e.prevSlide(i)}),$(".VideoWatchSection .PlaylistVideoContainer").on("click",".NavigateRight",function(){e.infinitePlaylistAppend()}),$(".ReccomendedVideoContainer.forArticle-"+s).on("click",".reccomendedVideoBox",function(t){if(inc.isMode("edit"))return this;var i=t.currentTarget;return $(".ReccomendedVideoContainer .nowPlayingBtn").hide(),$(".ReccomendedVideoContainer .playBtn").show(),$(i).find(".playBtn").toggle(),$(i).find(".nowPlayingBtn").toggle(),$(".reccomendedVideoBox").removeClass("startPlaying"),$(i).addClass("startPlaying"),_.each(e.shareBoxes,function(e,t){e.trash()}),$.ajax({dataType:"json",url:inc.restURL+"articlebundle/"+t.currentTarget.dataset.incid}).done(function(t){console.log(t),t.article&&t.videos&&t.videos.length>0&&(inc.collections.article.add(t.article),inc.collections.video.add(t.videos),e.model=inc.collections.article.get(t.article.id),e.articleVideoTop.changeModelTo(e.model),e.articleChannel.changeModelTo(e.model),e.updateWatchMeta(),e.setupShareBoxes(),$("body").animate({scrollTop:0},"fast"))}.bind(this)).fail(function(e){}.bind(this)),!1}),this.mustWatch=new Inc.ToggleView({el:$(".ReccomendedVideoContainer.forArticle-"+s)[0]});var o=Inc.GestureRecognizers.Swipe.spawn({direction:["left","right"]});return this.listenTo(o,"gesture:swipe",this.onSlideshowSwipe),this.mustWatch.addGestureRecognizer(o),kWidget.addReadyCallback(function(t){var i=document.getElementById(t);i.addJsListener("playerPlayEnd",function(){if(inc.isMode("edit"))return this;var t=$(".ReccomendedVideoContainer .ReccomendedVideoTiles .startPlaying").next();$(".reccomendedVideoBox").removeClass("startPlaying"),$(t).addClass("startPlaying");var i=($(t).attr("data-entryid"),$(t).attr("data-incid"));_.each(e.shareBoxes,function(e,t){e.trash()}),$.ajax({dataType:"json",url:inc.restURL+"articlebundle/"+i}).done(function(i){i.article&&i.videos&&i.videos.length>0&&(inc.collections.article.add(i.article),inc.collections.video.add(i.videos),e.model=inc.collections.article.get(i.article.id),e.articleVideoTop.changeModelTo(e.model),e.articleChannel.changeModelTo(e.model),e.updateWatchMeta(),e.setupShareBoxes(),$(".ReccomendedVideoContainer .nowPlayingBtn").hide(),$(".ReccomendedVideoContainer .playBtn").show(),$(t).find(".playBtn").toggle(),$(t).find(".nowPlayingBtn").toggle())}.bind(this)).fail(function(e){}.bind(this))})}),inc.isMode("edit")&&this.onEnterEditMode(),this},repositionSidebar:function(){return this},nextSlide:function(e){var t=4;"small"==inc.mqState&&(t=1);var i=e.el,n=$(i).find(".ReccomendedVideoTiles div.reccomendedVideoBox").outerWidth(),s=parseInt($(i).find(".ReccomendedVideoTiles").css("left"))-n*t;return-4165>s&&(s=-4165),$(i).find(".NavigateLeft").show(),$(i).find(".ReccomendedVideoTiles").animate({left:s},{queue:!1,duration:500,complete:function(){-4165==s&&$(".NavigateRight").hide()}}),this},prevSlide:function(e){var t=4;"small"==inc.mqState&&(t=1);var i=e.el,n=$(i).find(".ReccomendedVideoTiles div.reccomendedVideoBox").outerWidth(),s=parseInt($(i).find(".ReccomendedVideoTiles").css("left"))+n*t;return s>0&&(s=0),$(i).find(".NavigateRight").show(),$(i).find(".ReccomendedVideoTiles").animate({left:s},{queue:!1,duration:500,complete:function(){0==s&&$(".NavigateLeft").hide()}}),this},infinitePlaylistAppend:function(){var e=($(".ReccomendedVideoTiles").children().length,{});e.limit=20,e.offset=this.playlistOffset,e.seriesid=inc.currentController.sections[inc.currentController.currentSectionIndex].model.attributes.inc_serid,console.log(e.offset),$.ajax({type:"POST",dataType:"json",url:inc.restURL+"videowatchplaylist",data:e,cache:!1}).done(function(t){_.each(t.videos,function(e){$(".ReccomendedVideoTiles").append('					<div class="reccomendedVideoBox vidboxInfinite " data-entryid="'+e.vid_kaltura_id+'" data-title="'+e.inc_headline+'" data-deck="'+e.inc_deck+'" data-location="'+e.inc_filelocation+'" data-incid="'+e.id+'">						<div class="reccomendedVideoThumbnail">							<a href="'+application_url.concat(e.inc_filelocation)+'">								<div class="playBtn fa-play-circle-o"></div>								<div class="nowPlayingBtn"></div>								<img class="videoCover" src="'+e.small_featured_img+'">							</a>						</div>						<div class="reccomendedVideoTitle">							<a href="'+application_url.concat(e.inc_filelocation)+'">'+e.inc_headline+"</a>						</div>					</div>")}),this.playlistOffset=this.playlistOffset+e.limit}.bind(this)).fail(function(e){console.log("Failed to load more infinite videos...")}.bind(this))},updateWatchMeta:function(){window.history.replaceState({},this.model.get("inc_headline"),inc.applicationURL+this.model.get("inc_filelocation"));var e=this.$(".article-page-headline.inc_editable");e.html(this.model.get("inc_headline")),e.toggleClass("hidden",!this.model.get("inc_headline")).data("contentId",this.model.getID());var t=this.$(".article-page-deck.inc_editable");return t.html(this.model.get("inc_deck")),t.toggleClass("hidden",!this.model.get("inc_deck")).data("contentId",this.model.getID()),this}}),Inc.Pages.Archetype={type:"Page",extend:Inc.extend,spawn:Inc.spawn,init:function(e){function t(e){windowOptions="scrollbars=yes,resizable=yes,toolbar=no,location=yes",width=550,height=420,winHeight=screen.height,winWidth=screen.width,left=Math.round(winWidth/2-width/2),wintop=0,winHeight>height&&(wintop=Math.round(winHeight/2-height/2)),e.length>108&&(lastIndex=e.substring(0,105).lastIndexOf(" "),e=e.substring(0,105).substring(0,lastIndex)+"..."),url=window.location.href.split("?")[0],href="https://twitter.com/intent/tweet?url="+encodeURIComponent(url)+"&via=Inc&text="+encodeURIComponent(e)+"&related=Inc",window.open(href,"tweet",windowOptions+",width="+width+",height="+height+",left="+left+",top="+wintop)}return e||(e={}),this.restURL=e.restURL||"",this.articleFeeds=e.articleFeeds||[],this.pageElements=e.pageElements||[],this.outbrainFeed=e.outbrainFeed||null,this.partnerFeed=e.partnerFeed||null,this.showLatestPopularToggle=e.showLatestPopularToggle||!0,this.mainFeedType=e.mainFeedType||"latest",this.incPinboardSorting=Modernizr.localstorage?$.parseJSON(localStorage.getItem("incPinboardSorting")):{home:"notset",channel:"notset"},this.clickTrackingObject=e.clickTrackingObject||{},this.impressionsTrackingObject=e.impressionsTrackingObject||{},this.pageShareBoxes=[],this.displayCompleted=!1,this.hasSidebar=_.isUndefined(e.hasSidebar)?!1:e.hasSidebar,this.sidebar=e.sidebar||null,this.slideshowPlayers=[],this.sections=[],$(document).on("click",".tweetable",function(){t($(this).text())}),this},registerTopOfPageAds:function(e){e||(e=null),e?inc.adManager.addEmptyAdGroup("mobilefixed",e):inc.adManager.addEmptyAdGroup("mobilefixed"),inc.adManager.createAds({groupName:"mobilefixed",options:{name:"theMobileFixed",type:"smallbanner",mq:["small"],collapse:!0}});var t="scroll0";e?inc.adManager.addEmptyAdGroup(t,e):inc.adManager.addEmptyAdGroup(t);var i=["large"],n=["medium"];if(inc.alwaysMobileNavigation&&(i=["dontrefresh"],n=["large","medium"]),inc.adManager.createAds([{groupName:t,options:{name:"aboveNavFlexiblePushdown",type:"flexiblepushdown",mq:i,collapse:!0,pos:"top"}},{groupName:t,options:{name:"belowNavFixedLeaderboard",type:"flexiblebillboard",mq:n,collapse:!0,pos:"top"}}]),inc.i.showlogo&&!e){var s={name:"sponsor-logo",type:"flexiblelogo",mq:["medium","large"],collapse:!0,pos:"top"};"channel"==inc.i.op&&352==inc.i.cnlid&&(s.callback=_.bind(this.adjustPaddingForSponsorLogo,this)),inc.adManager.createAds({groupName:t,options:s})}return inc.adManager.createAds({groupName:t,options:{name:"theOOP",type:"oop",mq:["small","medium","large"],collapse:!0}}),inc.adManager.createAds({groupName:t,options:{name:"interstitial",type:"interstitial",mq:["small","medium","large"],collapse:!0}}),$(document).ready(function(){$("#interstitial_oop0").html("<script type='text/javascript'>inc.adManager.displayAdSlot('"+t+"','theOOP','interstitial_oop0');</script>")}),this.hackInAds(),this},hackInAds:function(){return"undefined"!=typeof disneyinstituteFlag&&inc.adManager.createAds({groupName:"scroll0",options:{name:"disneyFixedRectangle",type:"fixedrectangle",mq:["small","medium","large"],collapse:!1,pos:"bot"}}),"undefined"!=typeof promasterbusinessmovesFlag&&(inc.adManager.createAds({groupName:"scroll0",options:{name:"businessmovesFixedRectangle",type:"fixedrectangle",mq:["small","medium","large"],collapse:!1,pos:"bot"}}),inc.adManager.createAds({groupName:"scroll0",options:{name:"businessmovesFixedLeaderboard",type:"fixedleaderboard",mq:["small","medium","large"],collapse:!1,pos:"bot"}})),"undefined"!=typeof productivityatworkFlag&&(inc.adManager.createAds({groupName:"scroll0",options:{name:"comcastFixedRectangle",type:"fixedrectangle",mq:["small","medium","large"],collapse:!1,pos:"bot"}}),inc.adManager.createAds({groupName:"scroll0",options:{name:"comcastFixedLeaderboard",type:"fixedleaderboard",mq:["small","medium","large"],collapse:!1,pos:"bot"}})),"undefined"!=typeof allSystemsGrowFlag&&(inc.adManager.createAds({groupName:"scroll0",options:{name:"allSystemsGrowFixedRectangle",type:"fixedrectangle",mq:["small","medium","large"],collapse:!1,pos:"bot"}}),inc.adManager.createAds({groupName:"scroll0",options:{name:"allSystemsGrowFixedLeaderboard",type:"fixedleaderboard",
mq:["small","medium","large"],collapse:!1,pos:"bot"}})),"undefined"!=typeof makeMoreHappenFlag&&(inc.adManager.createAds({groupName:"scroll0",options:{name:"makeMoreHappenFixedRectangle",type:"fixedrectangle",mq:["small","medium","large"],collapse:!1,pos:"bot"}}),inc.adManager.createAds({groupName:"scroll0",options:{name:"makeMoreHappenFixedLeaderboard",type:"fixedleaderboard",mq:["small","medium","large"],collapse:!1,pos:"bot"}})),"undefined"!=typeof growthReportFlag&&(inc.adManager.createAds({groupName:"scroll0",options:{name:"growthReportFixedRectangle",type:"fixedrectangle",mq:["small","medium","large"],collapse:!1,pos:"bot"}}),inc.adManager.createAds({groupName:"scroll0",options:{name:"growthReportFixedLeaderboard",type:"fixedleaderboard",mq:["small","medium","large"],collapse:!1,pos:"bot"}}),inc.adManager.createAds({groupName:"scroll0",options:{name:"growthReportFixedRectangle",type:"fixedrectangle",mq:["small","medium","large"],collapse:!1,pos:"bot"}})),"undefined"!=typeof visaBusinessFocusFlag&&(inc.adManager.createAds({groupName:"scroll0",options:{name:"visaFixedRectangle",type:"fixedrectangle",mq:["small","medium","large"],collapse:!1,pos:"bot"}}),inc.adManager.createAds({groupName:"scroll0",options:{name:"visaFixedLeaderboard",type:"fixedleaderboard",mq:["small","medium","large"],collapse:!1,pos:"bot"}})),"undefined"!=typeof growcoLivestreamFlag&&inc.adManager.createAds({groupName:"scroll0",options:{name:"growcoLivestreamFixedRectangle",type:"fixedrectangle",mq:["small","medium","large"],collapse:!1,pos:"top"}}),"undefined"!=typeof inc5000LivestreamFlag&&inc.adManager.createAds({groupName:"scroll0",options:{name:"inc5000LivestreamFixedLeaderboard",type:"fixedleaderboard",mq:["small","medium","large"],collapse:!1,pos:"bot"}}),"undefined"!=typeof michiganMeansGrowthFlag&&inc.adManager.createAds({groupName:"scroll0",options:{name:"michiganMeansGrowthFixedLeaderboard",type:"fixedleaderboard",mq:["small","medium","large"],collapse:!1,pos:"bot"}}),"undefined"!=typeof magazinetoc&&inc.adManager.createAds({groupName:"scroll0",options:{name:"magazineFixedRectangle",type:"fixedrectangle",mq:["small","medium","large"],collapse:!1,pos:"bot"}}),"undefined"!=typeof isChannelPanel&&inc.adManager.createAds({groupName:"scroll0",options:{name:"channelpanelFixedRectangle",type:"fixedrectangle",mq:["small","medium","large"],collapse:!1,pos:"bot"}}),"undefined"!=typeof upsbigtalknewFlag&&inc.adManager.createAds({groupName:"scroll0",options:{name:"upsbigtalkFixedLeaderboard",type:"fixedleaderboard",mq:["small","medium","large"],collapse:!1,pos:"bot"}}),"undefined"!=typeof livebigtalkFlag&&inc.adManager.createAds({groupName:"scroll0",options:{name:"upsbigtalkCustomMini",type:"custommini",mq:["medium","large"],collapse:!1,pos:"top"}}),"undefined"!=typeof inc5000livestreamFlag&&inc.adManager.createAds({groupName:"scroll0",options:{name:"inc5000livestreamFixedLeaderboard",type:"fixedleaderboard",mq:["small","medium","large"],collapse:!1,pos:"bot"}}),"undefined"!=typeof oneAndOneFlag&&(inc.adManager.createAds({groupName:"scroll0",options:{name:"oneAndOneFixedRectangle",type:"fixedrectangle",mq:["small","medium","large"],collapse:!1,pos:"bot"}}),inc.adManager.createAds({groupName:"scroll0",options:{name:"oneAndOneFixedLeaderboard",type:"fixedleaderboard",mq:["small","medium","large"],collapse:!1,pos:"bot"}})),"undefined"!=typeof startupbootcampFlag&&(inc.adManager.createAds({groupName:"scroll0",options:{name:"startupbootcampFixedLeaderboard",type:"fixedleaderboard",mq:["medium","large"],collapse:!0,pos:"bot"}}),inc.adManager.createAds({groupName:"scroll0",options:{name:"startupbootcampMobileRectangle",type:"mobilerectangle",mq:["small"],collapse:!0,pos:"bot"}})),this},display:function(){return this},getPageElement:function(e){return _.findWhere(this.pageElements,{elementID:e})},getArticleFeed:function(e){return _.findWhere(this.articleFeeds,{id:e})},drawOutbrainTile:function(e){return this.outbrainFeed.getNextOutbrainAd({elementID:e,callback:_.bind(this.outbrainCallback,this)}),this},outbrainCallback:function(e,t){return console.log("obdata"),console.log(t),t.url1=t[0].url,t.content1=t[0].content,t.source_name1=t[0].source_name,t.url2=t[1].url,t.content2=t[1].content,t.source_name2=t[1].source_name,t.url3=t[2].url,t.content3=t[2].content,t.source_name3=t[2].source_name,t.url4=t[3].url,t.content4=t[3].content,t.source_name4=t[3].source_name,t.elementID=e,$("#"+e).html(_.template(inc.tileTypeRegistry.getTileType("Outbrain").templates[0])(t)),this},drawPartnerTile:function(e){return this.partnerFeed.getNextPartnerArticle({elementID:e,callback:_.bind(this.partnerCallback,this)}),this},partnerCallback:function(e,t){return t.elementID=e,$("#"+e).html(_.template(inc.tileTypeRegistry.getTileType("Partner").templates[0])(t)),this},articleFeedReady:function(e,t){for(var i=[],n=[],s=0;s<t.length;s++)-1==_.indexOf(inc.displayedIDs,t[s].id)&&-1==_.indexOf(n,t[s].id)&&(n.push(t[s].id),i.push(t[s]));var o=this.getPageElement(e+"PatternContainer"),a=o.getWaitingPatternArticleTotal();if(a<=i.length){var r=o.dataAvailable(i);this.getArticleFeed(e).feed=r.concat(this.getArticleFeed(e).feed)}else{if(t.length>=a)return this.getArticleFeed(e).feed=i.concat(this.getArticleFeed(e).feed),this.getArticleFeed(e).request(a),!1;"Main"==e&&(this.noMoreMainContent=!0),o.dataAvailable(i)}return this.loading=!1,!0},setupLatestPopularToggle:function(){var e=this;return"latest"==this.mainFeedType?$("#pinboardSortLatest").css("z-index",5):"popular"==this.mainFeedType&&$("#pinboardSortPopular").css("z-index",5),this.showLatestPopularToggle&&$("#pinboardSortHeader").css("visibility","visible"),$("#pinboardSortLatestClicker").click(function(t){if(Modernizr.localstorage)var i=$.parseJSON(localStorage.getItem("incPinboardSorting"));else var i={home:"notset",channel:"notset"};parseInt($("#pinboardSortLatest").css("z-index"))<5&&($("#pinboardSortLatest").css("z-index",5),$("#pinboardSortPopular").css("z-index",3),"home"==op?i.home="latest":"channel"==op&&(i.channel="latest"),Modernizr.localstorage&&localStorage.setItem("incPinboardSorting",JSON.stringify(i)),_.isUndefined(e.resetPinboard)||(e.mainFeedType="latest",e.resetPinboard()))}),$("#pinboardSortPopularClicker").click(function(t){if(Modernizr.localstorage)var i=$.parseJSON(localStorage.getItem("incPinboardSorting"));else var i={home:"notset",channel:"notset"};parseInt($("#pinboardSortPopular").css("z-index"))<5&&($("#pinboardSortPopular").css("z-index",5),$("#pinboardSortLatest").css("z-index",3),"home"==op?i.home="popular":"channel"==op&&(i.channel="popular"),Modernizr.localstorage&&localStorage.setItem("incPinboardSorting",JSON.stringify(i)),_.isUndefined(e.resetPinboard)||(e.mainFeedType="popular",e.resetPinboard()))}),this},setWrapperContainerMinHeight:function(e){return $(document).ready(function(){e=e||$(window).height(),$("#wrappercontainer").css("min-height",e+"px")}),this},scrollPositionChanged:function(e){return this},googlePlusButtonClicked:function(){return this},setupPageShareBoxes:function(e){_.isArray(e)||(e=[e]);for(var t=0;t<e.length;t++){var i='<div id="<%= ob.elementID %>" class="<%= ob.classes.join(\' \') %>"><div class="DisabledMask"></div><div class="ShareBoxButtons"></div><div class="ShareBoxLabel"></div></div>',n=Inc.Accessories.ShareBox.spawn({classes:"PageShareBox",controller:this,parentElementID:e[t],template:i,buttons:{facebook:{title:inc.i.shareTitle,url:inc.i.shareURL,caption:"Inc.com",description:inc.i.shareDeck,media:{url:inc.i.shareImage},actionLinkName:inc.i.shareTitle,actionLinkURL:inc.i.shareURL},twitter:{title:inc.i.twitterTitle,url:inc.i.shareURL},googleplus:{url:inc.i.shareURL,clickedCallback:_.bind(this.googlePlusButtonClicked,this)},linkedin:{title:inc.i.shareTitle,url:inc.i.shareURL,summary:inc.i.shareDeck},reddit:{title:inc.i.shareTitle,url:inc.i.shareURL},stumbleupon:{url:inc.i.shareURL},mail:{subject:inc.i.shareTitle,body:inc.i.shareTitle+"\n<a href='"+inc.i.shareURL+"?cid=email'>"+inc.i.shareURL+"</a>"}}});this.pageShareBoxes.push(n),n.render()}return $(".PageShareBox .ShareBoxLabel").sharrre({share:{facebook:!0,twitter:!0,linkedin:!0,googlePlus:!0},url:inc.i.shareURL,template:"{total} SHARES",urlCurl:inc.applicationURL+"sharrre.php",enableHover:!1}),this},setupSidebar:function(){return this.sidebar=Inc.Controllers.Sidebar.spawn({elementID:"sidebar",controller:this,restURL:inc.restURL+"articlesidebar/"+inc.incid}),this}},_.extend(Inc.Pages.Archetype,Backbone.Events),Inc.Pages.InfinitePattern=Inc.Pages.Archetype.extend({type:"InfinitePatternPage",init:function(e){e||(e={}),Inc.Pages.Archetype.init.apply(this,arguments),this.registerTopOfPageAds(),this.loading=!1,this.scrollPositionsLoaded=[],this.noMoreMainContent=!1,inc.scrollMonitor.showBackToTopButton=!0,this.showPinboardHeader="undefined"==typeof this.showPinboardHeader?!0:this.showPinboardHeader,this.tileswaiting=0,this.tilesfinished=0;var t=Inc.Feeds.Article.spawn({id:"Main",readyCallback:_.bind(this.articleFeedReady,this),restURL:this.restURL});this.articleFeeds.push(t),this.outbrainFeed=Inc.Feeds.Outbrain.spawn({id:"primary"});var i=Inc.Patterns.PatternContainer.spawn({elementID:"MainPatternContainer",controller:this});this.pageElements.push(i);var n=inc.tileTypeRegistry,s=Inc.Patterns.Pattern.spawn({name:"MainInitial",repeats:!1});if(this.showPinboardHeader){var o=Inc.Patterns.Pattern.spawn({name:"PreMainInitial",repeats:!1});o.structure=[{category:"startSubSubUnit"},n.getTileType("Standard","MainFeature"),{category:"startSubSubUnit"},n.getTileType("Standard","SubFeature"),n.getTileType("Standard","SubFeature"),n.getTileType("Standard","SubFeature"),{category:"startSubSubUnit",additionalClasses:["fullWidth"]},n.getTileType("LoadMore")],i.addPattern(o)}s.structure=s.structure.concat([{category:"startSubSubUnit",additionalClasses:["fullWidth","firstWideAdContainer"]},n.getTileType("WideAd","fixedleaderboard",{preDisplay:function(){this.adName="mainFixedLeaderboard",inc.adManager.createAds({groupName:this.adGroup,options:{name:this.adName,type:"fixedleaderboard",mq:["medium","large"],collapse:!0,pos:"top"}})}})]),"channel"==inc.i.op&&352==inc.i.cnlid?s.structure=s.structure.concat([{category:"startSubSubUnit"},n.getTileType("Inc5000LanderHeader","Default",{additionalClasses:"inc5000lander-pinboard-header"})]):s.structure=s.structure.concat([n.getTileType("IMU","mobilerectangle",{additionalClasses:["mainMobileRectangle"],preDisplay:function(){this.adName="mainMobileRectangle",inc.adManager.createAds({groupName:this.adGroup,options:{name:this.adName,type:"mobilerectangle",mq:["small"],collapse:!0,pos:"top"}})}}),{category:"startSubSubUnit"}]),s.structure=s.structure.concat([n.getTileType("LatestPopularToggle"),n.getTileType("Standard"),n.getTileType("Standard"),n.getTileType("Standard"),n.getTileType("Standard"),n.getTileType("IMU","mobilerectangle",{additionalClasses:["mainMobileRectangle"],preDisplay:function(){this.adName="mainMobileRectangle",inc.adManager.createAds({groupName:this.adGroup,options:{name:this.adName,type:"mobilerectangle",mq:["small"],collapse:!0,pos:"top"}})},postDisplay:function(){inc.scrollMonitor.idToStopShowingAdhesive=this.elementID}}),n.getTileType("Sponsored","Default",{preDisplay:function(){this.adName="pinboardNativeTrigger",inc.adManager.createAds({groupName:this.adGroup,options:{name:this.adName,type:"nativetrigger",mq:["small","medium","large"],collapse:!0,pos:"bot",callback:this.adCallback}})}}),n.getTileType("IMU","flexiblehalfpage",{preDisplay:function(){this.adName="mainFlexibleHalfpage",inc.adManager.createAds({groupName:this.adGroup,options:{name:this.adName,type:"flexiblehalfpage",mq:["medium","large"],collapse:!0,pos:"bot",callback:this.adCallback}})},adCallback:_.bind(this.flexiblehalfpageAdCallback,this)}),n.getTileType("Standard","TextOnly",{additionalClasses:["ieFloatRight","ie8FloatRightFirst"]}),n.getTileType("Standard","Default",{additionalClasses:["ieFloatRight","ie8FloatRightSecond"]}),n.getTileType("Follow","Default",{additionalClasses:["filler","collapsedMedium","collapsedLarge"]}),n.getTileType("Standard","WideRow",{postInsertContent:function(){containerHeight=this.$el.find(".picontainer").height(),headlineHeight=this.$el.find(".pheadline").height(),Inc.Utilities.truncate({$el:this.$el.find(".pdeck"),height:containerHeight-headlineHeight-70,more:"&hellip;"})}}),n.getTileType("Standard","Portrait",{additionalClasses:"partiallyCollapsed"}),n.getTileType("IMU","fixedrectangle",{preDisplay:function(){this.adName="mainFixedRectangle",inc.adManager.createAds({groupName:this.adGroup,options:{name:this.adName,type:"fixedrectangle",mq:["medium","large"],collapse:!0,pos:"bot"}})}}),n.getTileType("IMU","mobilerectangle",{additionalClasses:["mainMobileRectangle2"],preDisplay:function(){this.adName="mainMobileRectangle2",inc.adManager.createAds({groupName:this.adGroup,options:{name:this.adName,type:"mobilerectangle",mq:["small"],collapse:!0,pos:"top"}})}}),n.getTileType("Standard","TextOnly"),n.getTileType("Sponsored","Default",{preDisplay:function(){this.adName="pinboardNativeTrigger",inc.adManager.createAds({groupName:this.adGroup,options:{name:this.adName,type:"nativetrigger",mq:["small","medium","large"],collapse:!0,pos:"bot",callback:this.adCallback}})}}),n.getTileType("Standard"),n.getTileType("Standard"),n.getTileType("IMU","mobilerectangle",{additionalClasses:["mainMobileRectangle3"],preDisplay:function(){this.adName="mainMobileRectangle3",inc.adManager.createAds({groupName:this.adGroup,options:{name:this.adName,type:"mobilerectangle",mq:["small"],collapse:!0,pos:"top"}})}}),n.getTileType("Standard","WideRow",{postInsertContent:function(){containerHeight=this.$el.find(".picontainer").height(),headlineHeight=this.$el.find(".pheadline").height(),Inc.Utilities.truncate({$el:this.$el.find(".pdeck"),height:containerHeight-headlineHeight-70,more:"&hellip;"})}}),{category:"startSubSubUnit",additionalClasses:["fullWidth"]},n.getTileType("LoadMore")]),i.addPattern(s);var a=Inc.Patterns.Pattern.spawn({name:"MainRepeating",repeats:!0,structure:[{category:"startSubSubUnit",additionalClasses:["fullWidth"]},n.getTileType("WideAd","flexiblebillboard",{preDisplay:function(){this.adName="mainFlexibleBillboard",inc.adManager.createAds({groupName:this.adGroup,options:{name:this.adName,type:"flexiblebillboard",mq:["large","medium"],collapse:!0,pos:"top"}})}}),{category:"startSubSubUnit"},n.getTileType("Standard","WideRow",{postInsertContent:function(){containerHeight=this.$el.find(".picontainer").height(),headlineHeight=this.$el.find(".pheadline").height(),Inc.Utilities.truncate({$el:this.$el.find(".pdeck"),height:containerHeight-headlineHeight-70,more:"&hellip;"})}}),n.getTileType("Standard","Portrait",{additionalClasses:"partiallyCollapsed"}),n.getTileType("IMU","mobilerectangle",{preDisplay:function(){this.adName="repeatMobileRectangle1",inc.adManager.createAds({groupName:this.adGroup,options:{name:this.adName,type:"mobilerectangle",mq:["small"],collapse:!0,pos:"top"}})}}),n.getTileType("Sponsored","Default",{preDisplay:function(){this.adName="pinboardNativeTrigger",inc.adManager.createAds({groupName:this.adGroup,options:{name:this.adName,type:"nativetrigger",mq:["small","medium","large"],collapse:!0,pos:"bot",callback:this.adCallback}})}}),n.getTileType("IMU","flexiblehalfpage",{preDisplay:function(){this.adName="mainFlexibleHalfpage",inc.adManager.createAds({groupName:this.adGroup,options:{name:this.adName,type:"flexiblehalfpage",mq:["medium","large"],collapse:!0,pos:"bot",callback:this.adCallback}})},adCallback:_.bind(this.flexiblehalfpageAdCallback,this)}),n.getTileType("Standard","Default",{additionalClasses:["ieFloatRight","ie8FloatRightFirst"]}),n.getTileType("Standard","Default",{additionalClasses:["ieFloatRight","ie8FloatRightSecond"]}),n.getTileType("Outbrain","Default",{additionalClasses:"filler",postDisplay:_.partial(function(e){e.drawOutbrainTile(this.oid,e.getPageElement("MainPatternContainer"))},this)}),n.getTileType("IMU","mobilerectangle",{additionalClasses:["repeatMobileRectangle1"],preDisplay:function(){this.adName="repeatMobileRectangle1",inc.adManager.createAds({groupName:this.adGroup,options:{name:this.adName,type:"mobilerectangle",mq:["small"],collapse:!0,pos:"top"}})}}),n.getTileType("Standard","WideRow",{postInsertContent:function(){containerHeight=this.$el.find(".picontainer").height(),headlineHeight=this.$el.find(".pheadline").height(),Inc.Utilities.truncate({$el:this.$el.find(".pdeck"),height:containerHeight-headlineHeight-70,more:"&hellip;"})}}),n.getTileType("Standard"),n.getTileType("IMU","fixedrectangle",{preDisplay:function(){this.adName="mainFixedRectangle",inc.adManager.createAds({groupName:this.adGroup,options:{name:this.adName,type:"fixedrectangle",mq:["medium","large"],collapse:!0,pos:"bot"}})}}),n.getTileType("Standard","TextOnly"),n.getTileType("Sponsored","Default",{preDisplay:function(){this.adName="pinboardNativeTrigger",inc.adManager.createAds({groupName:this.adGroup,options:{name:this.adName,type:"nativetrigger",mq:["small","medium","large"],collapse:!0,pos:"bot",callback:this.adCallback}})}}),n.getTileType("IMU","mobilerectangle",{additionalClasses:["repeatMobileRectangle2"],preDisplay:function(){this.adName="repeatMobileRectangle2",inc.adManager.createAds({groupName:this.adGroup,options:{name:this.adName,type:"mobilerectangle",mq:["small"],collapse:!0,pos:"top"}})}}),n.getTileType("Standard"),n.getTileType("Standard"),n.getTileType("Standard","WideRow",{postInsertContent:function(){containerHeight=this.$el.find(".picontainer").height(),headlineHeight=this.$el.find(".pheadline").height(),Inc.Utilities.truncate({$el:this.$el.find(".pdeck"),height:containerHeight-headlineHeight-70,more:"&hellip;"})}}),{category:"startSubSubUnit",additionalClasses:["fullWidth"]},n.getTileType("LoadMore")]});return i.addPattern(a),this},display:function(){Inc.Pages.Archetype.display.apply(this,arguments);var e=this.getPageElement("MainPatternContainer"),t=e.getNextPatternArticleTotal();return e.printNextPattern("scroll0"),inc.scrollMonitor.processScroll(),this.loading=!0,this.getArticleFeed("Main").request(t),this},load:function(e){if(this.loading||this.noMoreMainContent||-1!=_.indexOf(this.scrollPositionsLoaded,e))return this;if(this.getArticleFeed("Main").loading){var t=this;return setTimeout(function(){t.load(e)},100),this}this.loading=!0,this.scrollPositionsLoaded.push(e);var i=this.getPageElement("MainPatternContainer"),n=i.getNextPatternArticleTotal();return inc.adManager.addEmptyAdGroup("scroll"+e),i.printNextPattern("scroll"+e),this.getArticleFeed("Main").request(n),this},scrollPositionChanged:function(e){return this},resetPinboard:function(e){this.noMoreMainContent=!1,this.getArticleFeed("Main").reset(),"channel"==inc.i.op?this.getPageElement("MainPatternContainer").reset("channel"):this.getPageElement("MainPatternContainer").reset(),inc.adManager.reset(e),inc.scrollMonitor.reset(e),this.loading=!0,$("#pinboardSortLatestClicker, #pinboardSortPopularClicker").off();for(var t=0;t<inc.displayedIDs.length;t++)if(inc.displayedIDs[t]==inc.firstMainDisplayedID){inc.displayedIDs=inc.displayedIDs.slice(0,t),inc.firstMainDisplayedID=null;break}return this.scrollPositionsLoaded=_.filter(this.scrollPositionsLoaded,function(t){return _.isString(t)&&0==t.search("scroll")&&parseInt(t.replace("scroll",""))>=e?!0:!1}),this.loading=!1,this.load(e),this},flexiblehalfpageAdCallback:function(e,t){var i=$("#"+t.oid).parent(),n=i.parent().find(".filler"),s=n.hasClass("collapsedLarge"),o=e.size[1];return o>=600?(i.addClass("tallVersion"),s?i.parent().find(".partiallyCollapsed").length>0&&n.removeClass("collapsedMedium"):(n.addClass("collapsedLarge"),$("body").hasClass("ie8")&&i.parent().find(".IMUlargeConfiguration").css("top","0").css("height","321px"))):s?(n.removeClass("collapsedLarge"),0==i.parent().find(".partiallyCollapsed").length&&n.removeClass("collapsedMedium")):(0==i.parent().find(".partiallyCollapsed").length&&n.addClass("collapsedLarge"),i.parent().find(".partiallyCollapsed").length>0&&n.addClass("collapsedMedium")),this},nativeTile:function(e){return this.tileswaiting++,$.doWhen({when:function(){return this.tilesfinished==this.tileswaiting-1}.bind(this)}).done(function(){this.getDataRenderTile(e.slot_id,e.clickthrough_url,e.campaign,e.article_ids)}.bind(this)),this},getDataRenderTile:function(e,t,i,n){return $.get("/rest/nativetile",{clickthrough:t,campaign:i,articleIds:n,excludeIds:inc.displayedIDs}).done(function(t){var i=t.data.shift();mainPatternContainer=inc.currentController.getPageElement("MainPatternContainer");var n=inc.tileTypeRegistry;mytile=n.getTileType("Standard"),mytile=new Inc.Patterns.Tile(mytile),$("#"+e).append(mytile.renderSkeleton().$el.html()),$("#"+e).attr("native",i.id),mainPatternContainer.clickTrackingObject.position="nativetile",i.tile=mytile,i.elementID=e,i.onclick=inc.buildOnClick.call(mainPatternContainer,mainPatternContainer.clickTrackingObject,i),$("#"+e+" .innerpcell").prepend(_.template(mytile.templates[0])(i)),$("#"+e+" .innerpcell").append(_.template(mytile.templates[1])(i)),inc.displayedIDs.push(i.id),inc.recordImpressions.call(inc.currentController,mainPatternContainer.impressionsTrackingObject,[i.id]),this.tilesfinished++,$(".SponsoredTile").trigger("renderedNativeTile",e)}.bind(this)),this}}),Inc.Pages.Home=Inc.Pages.InfinitePattern.extend({type:"HomePage",init:function(e){this.showPinboardHeader=!1,Inc.Pages.InfinitePattern.init.apply(this,arguments),inc.scrollMonitor.showAdhesiveAdContainer=!0,$(".maincolumn").append('<div id="HomeFeaturedContainer" class=""><div id="HomeFeaturedPatternsContainer" class=""><div id="FeaturedPatternContainer" class="PatternContainer"></div><div id="FeaturedRailPatternContainer" class="PatternContainer"></div></div></div>'),$(".maincolumn").append('<div id="MainPatternContainer" class="PatternContainer"></div>'),"notset"!=this.incPinboardSorting.home?this.mainFeedType=this.incPinboardSorting.home:"undefined"==typeof inc.i.abgrp||1!=parseInt(inc.i.abgrp)&&2!=parseInt(inc.i.abgrp)&&3!=parseInt(inc.i.abgrp)&&7!=parseInt(inc.i.abgrp)&&8!=parseInt(inc.i.abgrp)&&9!=parseInt(inc.i.abgrp)||(this.mainFeedType="popular"),this.getArticleFeed("Main").restURL+="/"+this.mainFeedType,this.clickTrackingObject.thistype="homepage",this.getPageElement("MainPatternContainer").clickTrackingObject.position=this.mainFeedType+"pinboard",this.getPageElement("MainPatternContainer").impressionsTrackingObject.position=this.mainFeedType;var t=Inc.Feeds.Article.spawn({id:"Featured",readyCallback:_.bind(this.articleFeedReady,this),restURL:inc.applicationURL+"rest/homefeatured"});this.articleFeeds.push(t);var i=Inc.Feeds.Article.spawn({id:"FeaturedRail",readyCallback:_.bind(this.articleFeedReady,this),restURL:inc.applicationURL+"rest/homefeaturedrail"});this.articleFeeds.push(i);var n=Inc.Patterns.PatternContainer.spawn({elementID:"FeaturedPatternContainer",controller:this});n.clickTrackingObject.position="homefeatured",n.impressionsTrackingObject.position="homefeatured",this.pageElements.push(n);var s=Inc.Patterns.PatternContainer.spawn({elementID:"FeaturedRailPatternContainer",controller:this});s.clickTrackingObject.position="homefeaturedrail",s.impressionsTrackingObject.position="homefeaturedrail",this.pageElements.push(s);var o=inc.tileTypeRegistry,a=Inc.Patterns.Pattern.spawn({name:"featured",repeats:!1,structure:[{category:"startSubSubUnit"},o.getTileType("Standard","HomeFeatured"),o.getTileType("Standard","SmallText"),o.getTileType("Standard","SmallText"),o.getTileType("Standard","SmallText")]}),r=Inc.Patterns.Pattern.spawn({name:"featuredRail",repeats:!1,structure:[{category:"startSubSubUnit"},o.getTileType("IMU","fixedsmallrectangle",{preDisplay:function(){this.adName="sidebarFixedSmallRectangle",inc.adManager.createAds({groupName:this.adGroup,options:{name:this.adName,type:"fixedsmallrectangle",mq:["large"],collapse:!0,pos:"top",callback:this.adCallback}})},adCallback:_.bind(this.homepageSmallAdCallback,this)}),o.getTileType("Standard","SmallMainFeature",{postInsertContent:function(){var e=this.data.videooverride;this.$el.on("click",".victure, .playButton",function(){return $(this).hide(),$(".playButton").hide(),$(".picture.victure").hide(),$("#SmallMainFeatureVideo").show(),kWidget.embed({targetId:"SmallMainFeatureVideo",wid:"_1034971",uiconf_id:30174211,flashvars:{IframeCustomPluginCss1:"http://images.inc.com/kaltura/smallFeaturedVideo.css?2jc2zg",streamerType:"auto",autoPlay:!0},cache_st:1408116528,entry_id:e}),!1})}}),o.getTileType("Standard","SmallText"),o.getTileType("Standard","SmallText"),o.getTileType("Standard","SmallText"),o.getTileType("Standard","SmallText"),o.getTileType("Standard","SmallText")]});return n.addPattern(a),s.addPattern(r),this.setWrapperContainerMinHeight(),this},display:function(){var e=this;Inc.Pages.Archetype.display.apply(this,arguments);var t=this.getPageElement("FeaturedPatternContainer"),i=t.getNextPatternArticleTotal(),n=this.getPageElement("FeaturedRailPatternContainer"),s=n.getNextPatternArticleTotal();return t.printNextPattern("scroll0",!1,!0),n.printNextPattern("scroll0"),this.getArticleFeed("Featured").request(i),this.getArticleFeed("FeaturedRail").request(s),inc.scrollMonitor.processScroll(),this.loading=!0,this.loadPinboardInterval=setInterval(function(){e.homepagePinboardCheckState()},200),this},homepagePinboardCheckState:function(){if(!$("#FeaturedRailPatternContainer div:first-child").hasClass("contentNotInserted")&&!$("#FeaturedPatternContainer div:first-child").hasClass("contentNotInserted")){inc.adManager.addEmptyAdGroup("scroll1");var e=this.getPageElement("MainPatternContainer"),t=e.getNextPatternArticleTotal();e.printNextPattern("scroll1",!1),this.getArticleFeed("Main").request(t),clearInterval(this.loadPinboardInterval),delete this.loadPinboardInterval,inc.scrollMonitor.processScroll()}return this},resetPinboard:function(){return"popular"==this.mainFeedType?this.getArticleFeed("Main").restURL=this.getArticleFeed("Main").restURL.replace("latest","popular"):this.getArticleFeed("Main").restURL=this.getArticleFeed("Main").restURL.replace("popular","latest"),this.getPageElement("MainPatternContainer").clickTrackingObject.position=this.mainFeedType+"pinboard",this.getPageElement("MainPatternContainer").impressionsTrackingObject.position=this.mainFeedType,Inc.Pages.InfinitePattern.resetPinboard.apply(this,[1]),this},homepageSmallAdCallback:function(e,t){var i=e.size[1];return 0==i?$("#"+t.oid).parent().css("display","none"):$("#"+t.oid).parent().css("display","inline-block"),this}}),Inc.Pages.Channel=Inc.Pages.InfinitePattern.extend({type:"ChannelPage",init:function(e){return e||(e={}),Inc.Pages.InfinitePattern.init.apply(this,arguments),isChannelPanel||($(".maincolumn").append('<div id="MainPatternContainer" class="PatternContainer"></div>'),(374!=parseInt(inc.i.channelArray.topid)||352==inc.i.cnlid)&&(this.mainFeedType="latest"),"notset"!=this.incPinboardSorting.channel&&(this.mainFeedType=this.incPinboardSorting.channel),this.getArticleFeed("Main").restURL+="/"+this.mainFeedType,(374==parseInt(inc.i.channelArray.topid)||352==inc.i.cnlid)&&(this.showLatestPopularToggle=!1),this.clickTrackingObject.thistype="channel",this.clickTrackingObject.thiscnlid=inc.i.channelArray.topid,this.getPageElement("MainPatternContainer").clickTrackingObject.position=this.mainFeedType+"pinboard",this.impressionsTrackingObject.cnlid=inc.i.channelArray.topid,this.getPageElement("MainPatternContainer").impressionsTrackingObject.position=this.mainFeedType,this.setWrapperContainerMinHeight(),inc.scrollMonitor.showAdhesiveAdContainer=!0),this},display:function(){return Inc.Pages.InfinitePattern.display.apply(this,arguments),this.setupPageShareBoxes("ShareContainer"),this},resetPinboard:function(){return isChannelPanel||("popular"==this.mainFeedType?this.getArticleFeed("Main").restURL=this.getArticleFeed("Main").restURL.replace("latest","popular"):this.getArticleFeed("Main").restURL=this.getArticleFeed("Main").restURL.replace("popular","latest"),this.getPageElement("MainPatternContainer").clickTrackingObject.position=this.mainFeedType+"pinboard",this.getPageElement("MainPatternContainer").impressionsTrackingObject.position=this.mainFeedType,Inc.Pages.InfinitePattern.resetPinboard.apply(this,[1])),this}}),Inc.Pages.ChannelPanel=Inc.Pages.Archetype.extend({type:"ChannelPanelPage",html5shiv:function(){!function(e,t){function i(e,t){var i=e.createElement("p"),n=e.getElementsByTagName("head")[0]||e.documentElement;return i.innerHTML="x<style>"+t+"</style>",n.insertBefore(i.lastChild,n.firstChild)}function n(){var e=y.elements;return"string"==typeof e?e.split(" "):e}function s(e,t){var i=y.elements;"string"!=typeof i&&(i=i.join(" ")),"string"!=typeof e&&(e=e.join(" ")),y.elements=i+" "+e,c(t)}function o(e){var t=b[e[g]];return t||(t={},v++,e[g]=v,b[v]=t),t}function a(e,i,n){if(i||(i=t),d)return i.createElement(e);n||(n=o(i));var s;return s=n.cache[e]?n.cache[e].cloneNode():f.test(e)?(n.cache[e]=n.createElem(e)).cloneNode():n.createElem(e),!s.canHaveChildren||m.test(e)||s.tagUrn?s:n.frag.appendChild(s)}function r(e,i){if(e||(e=t),d)return e.createDocumentFragment();i=i||o(e);for(var s=i.frag.cloneNode(),a=0,r=n(),l=r.length;l>a;a++)s.createElement(r[a]);return s}function l(e,t){t.cache||(t.cache={},t.createElem=e.createElement,t.createFrag=e.createDocumentFragment,t.frag=t.createFrag()),e.createElement=function(i){return y.shivMethods?a(i,e,t):t.createElem(i)},e.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+n().join().replace(/[\w\-:]+/g,function(e){return t.createElem(e),t.frag.createElement(e),'c("'+e+'")'})+");return n}")(y,t.frag)}function c(e){e||(e=t);var n=o(e);return!y.shivCSS||h||n.hasCSS||(n.hasCSS=!!i(e,"article,aside,dialog,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}mark{background:#FF0;color:#000}template{display:none}")),d||l(e,n),e}var h,d,u="3.7.3-pre",p=e.html5||{},m=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,f=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,g="_html5shiv",v=0,b={};!function(){try{var e=t.createElement("a");e.innerHTML="<xyz></xyz>",h="hidden"in e,d=1==e.childNodes.length||function(){t.createElement("a");var e=t.createDocumentFragment();return"undefined"==typeof e.cloneNode||"undefined"==typeof e.createDocumentFragment||"undefined"==typeof e.createElement}()}catch(i){h=!0,d=!0}}();var y={elements:p.elements||"abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output picture progress section summary template time video",version:u,shivCSS:p.shivCSS!==!1,supportsUnknownElements:d,shivMethods:p.shivMethods!==!1,type:"default",shivDocument:c,createElement:a,createDocumentFragment:r,addElements:s};e.html5=y,c(t),"object"==typeof module&&module.exports&&(module.exports=y)}("undefined"!=typeof window?window:this,document)},init:function(e){return e||(e={}),Inc.Pages.Archetype.init.apply(this,arguments),inc.scrollMonitor.showAdhesiveAdContainer=!0,this.registerTopOfPageAds(),this.setWrapperContainerMinHeight(),this},carouselize:function(){function e(e,t,i,n,s,o,a){this.name=e,this.offsetAdjustment=t,this.animateDirection=i,this.hideButtonOn=n,this.buttonToHide=s,this.showButtonOn=o,this.buttonToShow=a}function t(e){$carousel=$(this),$carousel[0].offset+=e.offsetAdjustment,$fixedWidth=$carousel.find(".fixed-width"),$shifter=$carousel.find(".shifter"),e.hideButtonOn.bind(null,$carousel)()===$carousel[0].offset&&$carousel.find(e.buttonToHide).css("visibility","hidden"),e.showButtonOn.bind(null,$carousel)()===$carousel[0].offset&&$carousel.find(e.buttonToShow).css("visibility","");var t="+="+100*(this.calculateArticleWidth()+this.calculateMarginWidth())/this.getDisplayedViewportWidth()*e.animateDirection+"%";$shifter.animate({left:t},{complete:function(){}})}function i(){$(this).find(".shifter").css("width",this.shifterWidthPercentage()),
$(this).find("article").css("width",this.articleWidthPercentage()).filter(function(){return!$(this).is($(this).parent().children().last())}).css("margin-right",this.marginWidthPercentage()),window.innerWidth<=480?($(".table-cell-1,.table-cell-3").css("display","none"),$(this).find("article").css("margin-right","15px")):$(".table-cell-1,.table-cell-3").css("display",""),window.innerWidth<=480&&$(this).find(".shifter").css("width",1.3*parseInt($(this).find(".shifter")[0].style.width)+"%")}window.directions=[new e("left",-1,1,function(){return 0},".table-cell-1 img",function(e){return e.find("article").length-4},".table-cell-3 img"),new e("right",1,-1,function(e){return e.find("article").length-3},".table-cell-3 img",function(){return 1},".table-cell-1 img")],directions.getByName=function(e){return this.filter(function(t){return t.name===e})[0]},this.articleWidthPercentageOfViewportWidth=.30303030303,this.marginWidthPercentageOfViewportWidth=.04545454545,this.offset=0,$(this).find(".table-cell-1 img").css("visibility","hidden").on("click",t.bind(this,directions.getByName("left"))),$(this).find(".table-cell-3 img").on("click",t.bind(this,directions.getByName("right"))),$(this).find("article").length<=3&&$(this).find(".table-cell-3 img").css("visibility","hidden"),$(this).find(".viewport").css("width","100%"),this.getDisplayedViewportWidth=function(){return $(this).find(".viewport").width()},this.calculateArticleWidth=function(){return this.getDisplayedViewportWidth()*this.articleWidthPercentageOfViewportWidth},this.calculateMarginWidth=function(){return window.innerWidth<=480?0:this.getDisplayedViewportWidth()*this.marginWidthPercentageOfViewportWidth},this.shifterWidthPercentage=function(){var e=($(this).find("article").length*this.calculateArticleWidth()+($(this).find("article").length-1)*this.calculateMarginWidth())/this.getDisplayedViewportWidth()*100;return e+"%"},this.articleWidthPercentage=function(){return 100*this.calculateArticleWidth()/$(this).find(".shifter").width()+"%"},this.marginWidthPercentage=function(){return 100*this.calculateMarginWidth()/$(this).find(".shifter").width()+"%"},i.call(this),$(this).find("article").last().addClass("last")},display:function(){function e(e,t){return Math.floor(Math.random()*(t+1-e))+e}Array.prototype.last=function(){return this[this.length-1]},$(".ie8 .dot.full").each(function(){this.outerHTML='<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAAcUlEQVQYV3WPawqDQAyEvwR6RLcWwx5OLL5uqGAkli2LtPMrj8nMRKjw7tcm2i43axlLFMOwPDmYHN8EeVxL5WWW5g+hXw7gqmtYTiIh6/h8J4SaovaXAISdFQu/ywNuOWkdcgR2IEIKSvsNWa5/vXkCdaYvl0o1kOYAAAAASUVORK5CYII=">'}),$(".ie8 .dot").filter(function(){return!$(this).is(".full")}).each(function(){this.outerHTML='<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAAb0lEQVQYV4WPSw6AIAxEp5xPXVk2NhyO4AZcqecDA4IhxsSu+nmdaQldrDZwLhfDobUpJ86FATEdANpghqJJhM8bsD6K0apXc9YnMZooyyYkFqP1C/AECv9AtShyL4Vi2x+5A9gqxFA0Pke2za83L2JxOpej6z+FAAAAAElFTkSuQmCC">'}),this.html5shiv(),String.prototype.endsWith||(String.prototype.endsWith=function(e,t){var i=this.toString();(void 0===t||t>i.length)&&(t=i.length),t-=e.length;var n=i.indexOf(e,t);return-1!==n&&n===t}),Array.prototype.filter||(Array.prototype.filter=function(e){"use strict";if(void 0===this||null===this)throw new TypeError;var t=Object(this),i=t.length>>>0;if("function"!=typeof e)throw new TypeError;for(var n=[],s=arguments.length>=2?arguments[1]:void 0,o=0;i>o;o++)if(o in t){var a=t[o];e.call(s,a,o,t)&&n.push(a)}return n}),ieouterhtml=function(){return document.getElementsByTagName("main")[0].outerHTML=document.getElementsByTagName("main")[0].outerHTML.replace(/<:/g,"<").replace(/<\/:/g,"</").replace(/<[A-Z]/g,"")},Array.prototype.reduce||(Array.prototype.reduce=function(e){"use strict";if(null==this)throw new TypeError("Array.prototype.reduce called on null or undefined");if("function"!=typeof e)throw new TypeError(e+" is not a function");var t,i=Object(this),n=i.length>>>0,s=0;if(2==arguments.length)t=arguments[1];else{for(;n>s&&!(s in i);)s++;if(s>=n)throw new TypeError("Reduce of empty array with no initial value");t=i[s++]}for(;n>s;s++)s in i&&(t=e(t,i[s],s,i));return t}),Array.prototype.map||(Array.prototype.map=function(e,t){var i,n,s;if(null==this)throw new TypeError(" this is null or not defined");var o=Object(this),a=o.length>>>0;if("function"!=typeof e)throw new TypeError(e+" is not a function");for(arguments.length>1&&(i=t),n=new Array(a),s=0;a>s;){var r,l;s in o&&(r=o[s],l=e.call(i,r,s,o),n[s]=l),s++}return n}),Array.prototype.forEach||(Array.prototype.forEach=function(e,t){var i,n;if(null==this)throw new TypeError(" this is null or not defined");var s=Object(this),o=s.length>>>0;if("function"!=typeof e)throw new TypeError(e+" is not a function");for(arguments.length>1&&(i=t),n=0;o>n;){var a;n in s&&(a=s[n],e.call(i,a,n,s)),n++}}),"document"in self&&("classList"in document.createElement("_")?!function(){"use strict";var e=document.createElement("_");if(e.classList.add("c1","c2"),!e.classList.contains("c2")){var t=function(e){var t=DOMTokenList.prototype[e];DOMTokenList.prototype[e]=function(e){var i,n=arguments.length;for(i=0;n>i;i++)e=arguments[i],t.call(this,e)}};t("add"),t("remove")}if(e.classList.toggle("c3",!1),e.classList.contains("c3")){var i=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(e,t){return 1 in arguments&&!this.contains(e)==!t?t:i.call(this,e)}}e=null}():!function(e){"use strict";if("Element"in e){var t="classList",i="prototype",n=e.Element[i],s=Object,o=String[i].trim||function(){return this.replace(/^\s+|\s+$/g,"")},a=Array[i].indexOf||function(e){for(var t=0,i=this.length;i>t;t++)if(t in this&&this[t]===e)return t;return-1},r=function(e,t){this.name=e,this.code=DOMException[e],this.message=t},l=function(e,t){if(""===t)throw new r("SYNTAX_ERR","An invalid or illegal string was specified");if(/\s/.test(t))throw new r("INVALID_CHARACTER_ERR","String contains an invalid character");return a.call(e,t)},c=function(e){for(var t=o.call(e.getAttribute("class")||""),i=t?t.split(/\s+/):[],n=0,s=i.length;s>n;n++)this.push(i[n]);this._updateClassName=function(){e.setAttribute("class",this.toString())}},h=c[i]=[],d=function(){return new c(this)};if(r[i]=Error[i],h.item=function(e){return this[e]||null},h.contains=function(e){return e+="",-1!==l(this,e)},h.add=function(){var e,t=arguments,i=0,n=t.length,s=!1;do e=t[i]+"",-1===l(this,e)&&(this.push(e),s=!0);while(++i<n);s&&this._updateClassName()},h.remove=function(){var e,t,i=arguments,n=0,s=i.length,o=!1;do for(e=i[n]+"",t=l(this,e);-1!==t;)this.splice(t,1),o=!0,t=l(this,e);while(++n<s);o&&this._updateClassName()},h.toggle=function(e,t){e+="";var i=this.contains(e),n=i?t!==!0&&"remove":t!==!1&&"add";return n&&this[n](e),t===!0||t===!1?t:!i},h.toString=function(){return this.join(" ")},s.defineProperty){var u={get:d,enumerable:!0,configurable:!0};try{s.defineProperty(n,t,u)}catch(p){-2146823252===p.number&&(u.enumerable=!1,s.defineProperty(n,t,u))}}else s[i].__defineGetter__&&n.__defineGetter__(t,d)}}(self)),Number.prototype.roundTo=function(e){var t=this%e;return e/2>=t?this-t:this+e-t},Array.prototype.rand=function(){return this[e(0,this.length-1)]},Function.prototype.body=function(){var e=this.toString();return e.slice(e.indexOf("{")+1,e.lastIndexOf("}"))},String.prototype.capitalizeFirstLetter=function(){return this.charAt(0).toUpperCase()+this.slice(1)},$("button.view-more").click(function(e){this.parentNode.classList.contains("show-less")?(this.parentNode.classList.remove("show-less"),this.innerHTML="View Less <i class='fa fa-minus-circle'></i>"):(this.parentNode.classList.add("show-less"),this.innerHTML="View More <i class='fa fa-plus-circle'></i>")}),this.setupPageShareBoxes("ShareContainer");var t=this;return $(".carousel").each(function(){t.carouselize.call(this)}),inc.scrollMonitor.addScrollUnit("#contentcontainer .Section"),inc.scrollMonitor.processScroll(),this}}),Inc.Pages.Article=Inc.Pages.Archetype.extend({type:"ArticlePage",init:function(e){return e||(e={}),this.model||(this.model=inc.collections.article.get(inc.incid)),Inc.Pages.Archetype.init.apply(this,arguments),this.registerTopOfPageAds(this.model.adinfo),inc.scrollMonitor.showAdhesiveAdContainer=!0,this.clickTrackingObject.thistype="article",this.clickTrackingObject.thisincid=inc.incid,this.impressionsTrackingObject.incid=inc.incid,inc.displayedIDs.push(inc.incid),this.inlineVideoAdvertOn=!1,this.inlineVideoAdvertExpanded=!1,this.tileswaiting=0,this.tilesfinished=0,this.loadDisabled=!1,(3==this.model.get("inc_typid")||6==this.model.get("inc_typid"))&&(this.loadDisabled=!0),this.currentSectionIndex=0,this.loadingArticleSectionData=!1,this.sectionModels=new Inc.Collections.Article,inc.scrollMonitor.showBackToTopButton=!1,this.listenTo(dispatcher,"window:scrolled",this.onWindowScroll),this.initializeFirstSection(),this.setWrapperContainerMinHeight(),inc.i.internationalWallWasServed&&!inc.i.internationalWallCookieWasTrue&&inc.tracker.trackFalseWall(this.model.getID()),this},initializeFirstSection:function(){var e=$(".ArticleSection"),t=0==e.length?void 0:e[0];if(inc.i.internationalWallActive){var i=new Inc.Sections.ArticleInternationalWall({el:t,model:this.model,index:0,impressed:!0});return this.sections.push(i),this}e.hasClass("InternationalWall")&&(e.replaceWith('<div id="international-wall-placeholder"></div>'),t=void 0);var n=_.findWhere(inc.i.todaysMustReadsSparse,{id:this.model.getID()}),s=0;if(n){var o=_.reject(inc.i.todaysMustReadsSparse,function(e){return e.id==this.model.getID()},this);o.unshift(n),inc.i.todaysMustReadsSparse=o,s=1}this.sectionModels.add(this.model),this.listenTo(dispatcher,"inc:mode:edit:off",_.partial(this.onSectionEnterOrExitEditMode,0));var a;if(20==this.model.get("inc_typid")?a=new Inc.Sections.Slideshow({el:t,model:this.model,index:0,impressed:!0}):18==this.model.get("inc_typid")?(inc.scrollMonitor.dontRefreshAds=!0,a=new Inc.Sections.PhotoEssay({el:t,model:this.model,index:0,impressed:!0})):a=new Inc.Sections.Article({el:t,model:this.model,index:0,impressed:!0}),this.sections.push(a),this.listenTo(dispatcher,"inc:mode:edit:on",_.partial(this.onSectionEnterOrExitEditMode,0)),"undefined"!=typeof inc5000factsfiguresFlag&&(a.numberOfScrollPositions=5,inc.scrollMonitor.addScrollUnit("#"+a.oid+" .SectionHeader"),inc.adManager.addEmptyAdGroup("scroll1"),inc.scrollMonitor.addScrollUnit("#inc5000ffadvert1"),inc.adManager.addEmptyAdGroup("scroll2"),inc.scrollMonitor.addScrollUnit("#inc5000ffadvert2"),inc.adManager.addEmptyAdGroup("scroll3"),inc.scrollMonitor.addScrollUnit("#inc5000ffadvert3"),inc.adManager.addEmptyAdGroup("scroll4"),inc.scrollMonitor.addScrollUnit("#inc5000ffadvert4"),inc.adManager.createAds([{groupName:"scroll1",options:{name:"inc5000FixedRectangle",type:"fixedrectangle",mq:["small","medium","large"],collapse:!0,pos:"top"}},{groupName:"scroll2",options:{name:"inc5000FlexibleBillboard",type:"flexiblebillboard",mq:["medium","large"],collapse:!0,pos:"top"}},{groupName:"scroll2",options:{name:"inc5000MobileRectangle",type:"mobilerectangle",mq:["small"],collapse:!0,pos:"top"}},{groupName:"scroll3",options:{name:"inc5000FixedRectangle",type:"fixedrectangle",mq:["small","medium","large"],collapse:!0,pos:"top"}},{groupName:"scroll4",options:{name:"inc5000FlexibleBillboard",type:"flexiblebillboard",mq:["medium","large"],collapse:!0,pos:"top"}},{groupName:"scroll4",options:{name:"inc5000MobileRectangle",type:"mobilerectangle",mq:["small"],collapse:!0,pos:"top"}}])),!this.sections[0].model.isNew()){var r=inc.i.todaysMustReadsSparse[s];r&&(nextSectionModel=inc.collections.article.get(r.id)||new Inc.Models.Article(r),this.sectionUpDown=new Inc.Accessories.SectionUpDown({el:$(".SectionUpDown")[0],controller:this,nextSectionModel:nextSectionModel}),this.listenTo(this.sectionUpDown,"goto:section:previous",function(e){this.currentSectionIndex>0&&this.scrollToSection(this.sections[this.currentSectionIndex-1])}),this.listenTo(this.sectionUpDown,"goto:section:next",function(e){this.currentSectionIndex>=this.sections.length-1&&this.load(!0);var t=this.sections[this.currentSectionIndex+1];t&&this.scrollToSection(t)}))}return this},display:function(){if(inc.i.internationalWallActive)return this.displayInternationalWall(),this.displayCompleted=!0,this;var e=this;$(".sidebar_inner").empty(),0==$(".ArticleSection").length&&$("#international-wall-placeholder").replaceWith(this.sections[0].$el),this.sections[0].render(),this.sections[0].hasSidebar&&this.sections[0].model&&!this.sections[0].model.get("inc_hide_article_sidebarflag")&&(this.sections[0].mustReadsSidebar&&this.listenTo(this.sections[0].mustReadsSidebar,"article:click",this.onMustReadItemClick),$(".maincolumn").toggleClass("withsidebar",!0)),4==this.sections[0].model.get("inc_typid"),18==this.sections[0].model.get("inc_typid")&&(inc.pushState>0&&inc.pushState<=this.sections[0].slides.length?async.retry(20,function(e){this.sections[0].imagesLoaded(inc.pushState)?e(null):setTimeout(async.apply(e,!0),200)}.bind(this),function(e){console.log(e,inc.pushState),!e||this.sections[0].imagesLoaded(inc.pushState)?(this.sections[0].goToSlide(inc.pushState-1),inc.pushState=0,Modernizr.history&&history.replaceState(null,"",inc.applicationURL+this.sections[0].model.get("inc_filelocation"))):(inc.scrollMonitor.dontRefreshAds=!1,inc.scrollMonitor.processScroll())}.bind(this)):inc.scrollMonitor.dontRefreshAds=!1),inc.scrollMonitor.processScroll();var t=this.sections[0].model.get("id");$(".ReccomendedVideoContainer.forArticle-"+t).on("click",".NavigateRight",function(t){var i={el:t.delegateTarget};e.nextSlide(i)}),$(".ReccomendedVideoContainer.forArticle-"+t).on("click",".NavigateLeft",function(t){var i={el:t.delegateTarget};e.prevSlide(i)}),this.mustWatch=new Inc.ToggleView({el:$(".ReccomendedVideoContainer.forArticle-"+t)[0]});var i=Inc.GestureRecognizers.Swipe.spawn({direction:["left","right"]});return this.listenTo(i,"gesture:swipe",this.onSlideshowSwipe),this.mustWatch.addGestureRecognizer(i),this.checkGeo(),inc.user.isAuthorizedToViewContent()||inc.user.incrementUnauthorizedViews(),this.displayCompleted=!0,this},displayInternationalWall:function(){return 0==$(".ArticleSection").length&&$("#international-wall-placeholder").replaceWith(this.sections[0].$el),this.sections[0].show(),this.sections[0].render(),inc.scrollMonitor.processScroll(),this},removeInternationalWall:function(){if(!(_.last(this.sections)instanceof Inc.Sections.ArticleInternationalWall))return this;var e=this.sections.pop(),t=e.startingScrollPosition;return inc.adManager.reset(t>0?t-1:1),e.$el.replaceWith('<div id="international-wall-placeholder"></div>'),e.trash(),0==t?(this.initializeFirstSection(),this.display()):this.printNextSection(this.sectionModels.at(this.sections.length)),this},nextSlide:function(e){var t=4;"small"==inc.mqState&&(t=1);var n=e.el,s=$(n).find(".ReccomendedVideoTiles div.reccomendedVideoBox").outerWidth(),o=parseInt($(n).find(".ReccomendedVideoTiles").css("left"))-s*t;return $(n).find(".NavigateLeft").show(),$(n).find(".ReccomendedVideoTiles").animate({left:o},{queue:!1,duration:500,complete:function(){for($(n).find(".ReccomendedVideoTiles .reccomendedVideoBox").css("visibility","visible"),i=0;i<t;i++)$(n).find(".ReccomendedVideoTiles div.reccomendedVideoBox:last").after($(n).find(".ReccomendedVideoTiles div.reccomendedVideoBox:first")),$(n).find(".ReccomendedVideoTiles").css({left:"-1470px"})}}),this},prevSlide:function(e){var t=4;"small"==inc.mqState&&(t=1);var n=e.el,s=$(n).find(".ReccomendedVideoTiles div.reccomendedVideoBox").outerWidth(),o=parseInt($(n).find(".ReccomendedVideoTiles").css("left"))+s*t;return $(n).find(".ReccomendedVideoTiles").animate({left:o},{queue:!1,duration:500,complete:function(){for(i=0;i<t;i++)$(n).find(".ReccomendedVideoTiles div.reccomendedVideoBox:first").before($(n).find(".ReccomendedVideoTiles div.reccomendedVideoBox:last")),$(n).find(".ReccomendedVideoTiles").css({left:"-1470px"})}}),this},load:function(e){return this.loading||this.loadDisabled||inc.i.internationalWallDisplayed?this:("undefined"==typeof e&&(e=!1),(this.currentSectionIndex==this.sections.length-1||e)&&this.sectionModels.size()>this.sections.length&&(this.loading=!0,this.printNextSection(this.sectionModels.at(this.sections.length))),this)},printNextSection:function(e){var t=this;inc.i.internationalWallActive||this.listenTo(dispatcher,"inc:mode:edit:off",_.partial(this.onSectionEnterOrExitEditMode,this.sections.length));var i=this.sections[this.sections.length-1].startingScrollPosition+this.sections[this.sections.length-1].numberOfScrollPositions;if(inc.i.internationalWallActive)var n=new Inc.Sections.ArticleInternationalWall({model:e,hidden:!1,index:this.sections.length,startingScrollPosition:i});else if(20==e.get("inc_typid"))var n=new Inc.Sections.Slideshow({model:e,index:this.sections.length,startingScrollPosition:i});else if(18==e.get("inc_typid"))var n=new Inc.Sections.PhotoEssay({model:e,index:this.sections.length,startingScrollPosition:i});else if(4==e.get("inc_typid"))var n=new Inc.Sections.Video({model:e,index:this.sections.length,startingScrollPosition:i});else var n=new Inc.Sections.Article({model:e,index:this.sections.length,startingScrollPosition:i});if(this.sections[this.sections.length-1].$el.after(n.$el),inc.i.internationalWallActive||this.listenTo(dispatcher,"inc:mode:edit:on",_.partial(this.onSectionEnterOrExitEditMode,this.sections.length)),this.sections.push(n),n.render(),!inc.i.internationalWallActive){var s=n.model.getID();$(".ReccomendedVideoContainer.forArticle-"+s).on("click",".NavigateRight",function(e){var i={el:e.delegateTarget};t.nextSlide(i)}),$(".ReccomendedVideoContainer.forArticle-"+s).on("click",".NavigateLeft",function(e){var i={el:e.delegateTarget};t.prevSlide(i)}),this.mustWatch=new Inc.ToggleView({el:$(".ReccomendedVideoContainer.forArticle-"+s)[0]});var o=Inc.GestureRecognizers.Swipe.spawn({direction:["left","right"]});this.listenTo(o,"gesture:swipe",this.onSlideshowSwipe),this.mustWatch.addGestureRecognizer(o)}return n.hasSidebar&&!n.hasCustomSidebar&&n.mustReadsSidebar&&this.listenTo(n.mustReadsSidebar,"article:click",this.onMustReadItemClick),inc.scrollMonitor.processScroll(),inc.i.internationalWallActive&&(inc.i.internationalWallDisplayed=!0),inc.user.isAuthorizedToViewContent()||inc.user.incrementUnauthorizedViews(),setTimeout(function(){t.loading=!1},1e3),this},onSlideshowSwipe:function(e,t,i){return"left"==i?this.nextSlide(e):"right"==i&&this.prevSlide(e),this},loadNextSectionModel:function(){if(this.loadingArticleSectionData)return this;this.loadingArticleSectionData=!0;for(var e=null;!e&&inc.i.todaysMustReadsSparse.length>this.sectionModels.size();){var t=this.model.getID()==inc.i.todaysMustReadsSparse[0].id?0:-1,i=inc.i.todaysMustReadsSparse[this.sectionModels.size()+t].id;-1==_.indexOf(inc.displayedIDs,i)?e=i:inc.i.todaysMustReadsSparse=_.reject(inc.i.todaysMustReadsSparse,function(e){return e.id==i})}if(!e)return this.loadingArticleSectionData=!1,this;var n=inc.collections.article.get(e);return n?(this.sectionModels.add(n),this.loadingArticleSectionData=!1,this):($.ajax({dataType:"json",url:inc.restURL+"articlebundle/"+e}).done(function(t){t.article&&t.article.id==e&&t.slideshows&&t.slides?(inc.collections.article.add(t.article),inc.collections.article.get(t.article.id).readmorearticles=t.readmorearticles,_.each(t.slides,function(e){inc.collections.slide.add(e)}),_.each(t.slideshows,function(e){var t=[];_.each(e.slides,function(e){t.push(inc.collections.slide.get(e.id))}),inc.collections.slideshow.add(new Inc.Models.Slideshow(e,{slides:t}))}),_.each(t.videos,function(e){inc.collections.video.add(e)}),this.sectionModels.add(inc.collections.article.get(t.article.id)),this.loadingArticleSectionData=!1,inc.tracker.RecordRecommendImpressions(incid)):(inc.i.todaysMustReadsSparse=_.reject(inc.i.todaysMustReadsSparse,function(t){return t.id==e}),this.loadingArticleSectionData=!1,this.loadNextSectionModel())}.bind(this)).fail(function(){this.loadingArticleSectionData=!1}.bind(this)),this)},onWindowScroll:function(){var e=$(window).height(),t=$(document).scrollTop();sections=this.sections.slice();for(var i=0;i<sections.length;i++){var n=sections[i],s=null,o=null;if(this.currentSectionIndex!=i&&(0!=i||1!=sections.length)&&t>n.$el.offset().top-e/2&&t<n.$el.offset().top+n.$el.outerHeight(!0)-e/2){var a=(this.currentSectionIndex,inc.applicationURL+n.model.get("inc_filelocation"));if(0!=window.location.href.search(a)&&(0==(""+n.model.get("inc_filelocation")).search("http://")?0==n.model.get("inc_filelocation").search(inc.applicationURL)&&Modernizr.history&&history.replaceState(null,"",n.model.get("inc_filelocation")):Modernizr.history&&history.replaceState(null,"",a),n.impressed||(n.impressed=!0,inc.i.internationalWallActive||inc.tracker.recordSectionArticleImpression(n.model,i)),kWidget.addReadyCallback(function(e){var t=document.getElementById(e);t.sendNotification("doPause")})),this.currentSectionIndex=i,this.currentSectionIndex>0&&(s=this.sections[this.currentSectionIndex-1].model),o=this.sectionModels.at(this.currentSectionIndex+1)||null,!o){var r=inc.i.todaysMustReadsSparse[0].id==this.model.getID(),l=inc.i.todaysMustReadsSparse[r?this.currentSectionIndex+2:this.currentSectionIndex+1];l&&(o=new Inc.Models.Article(l))}document.title=Inc.Utilities.stripTags(n.model.get("inc_title")||n.model.get("inc_headline")||"").replace(/"/g,""),"small"==inc.mqState&&inc.adManager.refreshGroup("mobilefixed",!0),this.trigger("change:section",this,s,o);break}}return this.loadingArticleSectionData||this.sections.length!=this.sectionModels.size()||this.loadNextSectionModel(),t+e+500>$(document).height()&&this.load(),this},scrollToSection:function(e){inc.scrollMonitor.dontRefreshAds=!0;var t=$("#"+e.oid).offset().top-$("#TopNav").outerHeight(!0);$(".AdminMenu").length>0&&(t-=$(".AdminMenu").height()),e.model.getID()==this.sections[0].model.getID()&&(t=0),$("html, body").stop().animate({scrollTop:t},{complete:function(){inc.scrollMonitor.dontRefreshAds=!1,inc.scrollMonitor.processScroll()}},500)},onMustReadItemClick:function(e,t,i){if(trackEvent("mustread",t),0==(e.get("inc_override_url")+"").search("http://"))return window.open(e.get("inc_override_url"),"_blank"),this;if(0==(e.get("inc_filelocation")+"").search("http://"))return window.open(e.get("inc_filelocation"),"_blank"),this;if(_.findWhere(inc.i.todaysMustReadsSparse,{id:this.model.getID()})||t++,this.sections.length==t){this.load(!0);var n=this.sections[t];n&&this.scrollToSection(n)}else if(this.sections.length>t){var n=this.sections[t];n&&this.scrollToSection(n)}else{var s=e.get("inc_filelocation")||"";window.location.href=0==s.search("http")?s:inc.applicationURL+s}return this},scrollPositionChanged:function(e){return this},onSectionEnterOrExitEditMode:function(e){if(inc.isMode("edit")&&e!=this.currentSectionIndex||!inc.isMode("edit")&&0!=e)return this;for(var t=0,i=0;i<=this.currentSectionIndex;i++){var n=this.sections[i];n.metaDataArea&&(inc.isMode("edit")?t+=n.metaDataArea.$el.outerHeight(!0):t-=n.metaDataArea.$el.outerHeight(!0))}return $(document).scrollTop($(document).scrollTop()+t),this},sponsoredCallback:function(e,t,i){return i?(i.imuoverrideimage&&""!=i.imuoverrideimage?(i.tile=inc.tileTypeRegistry.getTileType("Sponsored","IMUStyle"),$("#"+t).addClass("IMUStyleDefaultConfiguration").removeClass("SponsoredDefaultConfiguration")):i.tile=inc.tileTypeRegistry.getTileType("Sponsored"),i.elementID=t,i.onclick=inc.buildOnClick.call(this,e.clickTrackingObject,i),$("#"+t+" .innerpcell").prepend(_.template(i.tile.templates[0])(i)),$("#"+t+" .innerpcell").append(_.template(i.tile.templates[1])(i)),inc.displayedIDs.push(i.id),inc.recordImpressions.call(this,e.impressionsTrackingObject,[i.id])):$("#"+e.elementID).hide(),this},outbrainTile:function(e){return slot_id=e.slot_id,$("#"+slot_id).append('<div class="OUTBRAIN" data-src="'+inc.applicationURL+this.model.get("inc_filelocation")+'" data-widget-id="SB_3" data-ob-template="inc" ></div>'),$("#"+slot_id).next(".padvertlabel").hide(),$.ajax({url:"http://widgets.outbrain.com/outbrain.js",dataType:"script",cache:!0}).done(function(){OBR.extern.researchWidget()}),this},checkGeo:function(){var e=this;return void 0==inc.i.geo?setTimeout(function(){e.checkGeo()},1e3):"United States"!=inc.i.geo&&inc.i.geo>"",this},outbrainFooter:function(){return articleUrl=inc.applicationURL+this.model.get("inc_filelocation"),$(".middlepromo").each(function(){$(this).is(":empty")&&$(this).append('<div class="OUTBRAIN" data-src="'+articleUrl+'" data-widget-id="MB_2" data-ob-template="inc" ></div>')}).bind(articleUrl),$.ajax({url:"http://widgets.outbrain.com/outbrain.js",dataType:"script",cache:!0}).done(function(){OBR.extern.researchWidget()}),this},nativeTile:function(e){return $.get("/rest/nativetile",{clickthrough:e.clickthrough,campaign:e.campaign,articleIds:e.article_ids,excludeIds:inc.displayedIDs}).done(function(t){var i=t.data.shift();tile='<div recid="'+i.id+'" vslot="native" class="reccomendedVideoBox"><div class="reccomendedVideoThumbnail"><a href="',e.clickthrough&&(tile+=i.clickthrough),tile+=i.baseurl+i.inc_filelocation+'"><img class="videoCover" src="'+i.recommendedfeatureimage+'">',(4==i.inc_typid||11==i.inc_typid)&&(tile+='<div class="playBtn fa-play-circle-o"></div>'),tile+="</a></div>","partnerinsight"==i.partnertype?tile+='<div class="sponsorbar">INC. PARTNER INSIGHTS</div><div class="sponsorname">'+i.partner+"</div>":"custom"==i.partnertype?tile+='<div class="sponsorbar">CUSTOM CONTENT</div><div class="sponsorname">'+i.partner+"</div>":"sponsor"==i.partnertype&&(tile+='<div class="sponsorbar">SPONSORED</div><div class="sponsorname">'+i.partner+"</div>"),tile+='<div class="reccomendedVideoTitle"><a href="',e.clickthrough&&(tile+=i.clickthrough),tile+=i.baseurl+i.inc_filelocation+'">'+i.inc_headline+"</a></div></div>",ArticleSectionId=e.slot_id;var n=7+Math.floor(2*Math.random());$("#"+ArticleSectionId+" .ReccomendedVideoTiles div.reccomendedVideoBox:nth-child("+n+")").after(tile)}.bind(this)),this},dumptext:function(e,t){var i="";t||(t=0);for(var n="",s=0;t+1>s;s++)n+="    ";if("object"==typeof e)for(var o in e){var a=e[o];"object"==typeof a?(i+=n+"'"+o+"' ...\n",i+=this.dumptext(a,t+1)):i+=n+"'"+o+"' => \""+a+'"\n'}else i="===>"+e+"<===("+typeof e+")";return i}}),Inc.Views.SearchResult=Inc.ToggleView.extend({type:"SearchResult",className:"SearchResult",initialize:function(e){e||(e={}),Inc.ToggleView.prototype.initialize.apply(this,arguments),this.$el.data("modelId",this.model.get("id")),this.$(".picture span").length>0?(this.picture=new Inc.Views.Picture({el:this.$(".picture")[0]}),this.$el.css("min-height","82px")):(this.picture=null,this.$(".picture").hide())},trash:function(){return this.picture&&this.picture.trash(),this.picture=null,Inc.ToggleView.prototype.trash.apply(this,arguments),this}}),Inc.Pages.Search=Inc.Pages.Archetype.extend({type:"SearchPage",articleTemplate:_.template($("#SearchResult-Article-Template").html()),authorTemplate:_.template($("#SearchResult-Author-Template").html()),channelTemplate:_.template($("#SearchResult-Channel-Template").html()),inc5000companyTemplate:_.template($("#SearchResult-Inc5000Company-Template").html()),init:function(e){e||(e={}),Inc.Pages.Archetype.init.apply(this,arguments),inc.scrollMonitor.showAdhesiveAdContainer=!0,inc.scrollMonitor.showBackToTopButton=!0,this.$section=$(".SearchSection"),this.$searchform=this.$section.find(".searchform"),this.resultViews=[],this.normalSize=20,this.ajaxData={from:0,size:_.isUndefined(inc.urlParameters.l)||_.isNaN(Number(inc.urlParameters.l))?this.normalSize:Number(inc.urlParameters.l)},this.autosuggest=new Inc.Controls.AutoSuggest({el:this.$searchform.find(".autosuggest")[0],text:_.isUndefined(inc.urlParameters.q)?"":inc.urlParameters.q,disableRedraw:!0,focus:!0}),this.listenTo(this.autosuggest,"change:text",this.search),this.$searchText=this.$section.find(".search-results-text"),this.$searchresults=this.$section.find(".searchresults"),this.$loadMore=this.$section.find(".load-more"),this.$loadingIndicator=this.$section.find(".loading-indicator"),this.$loadingIndicator.append($("#LoadingIndicator-Template").html()),this.$honeypot=this.$searchform.find(".mmmhmm"),this.lastValue=null,this.xhr=null,this.totalResults=0,this.results=new Backbone.Collection,this.listenTo(this.results,"add",this.onResultAdded),this.listenTo(this.results,"reset",this.onResultsReset),this.setLoading(!_.isUndefined(inc.urlParameters.q)),this.registerTopOfPageAds(),this.setWrapperContainerMinHeight();var t=this;return this.$searchform.on("submit",function(e){e&&e.preventDefault(),t.search()}),this.$loadMore.on("click","button",_.bind(this.loadMoreResults,this)),this.$searchresults.on("click",".result",_.bind(this.onResultClickHandler,this)),this.loading&&async.nextTick(_.bind(this.search,this)),this},display:function(){return inc.scrollMonitor.addScrollUnit("#contentcontainer .SearchSection"),inc.scrollMonitor.processScroll(),this},setLoading:function(e){return this.loading!=e&&(this.loading=e,this.$section.toggleClass("loading",this.loading)),this},search:function(){var e=this.autosuggest.text||"",t=this.$honeypot.val();return""!=t||e==this.lastValue?this:(this.xhr&&(this.xhr.abort(),this.xhr=null),this.$searchText.html(""),this.$loadMore.hide(),this.lastValue=e,e.trim().length<3?(this.results.reset(),this.totalResults=0,this.autosuggest.options=[],this.autosuggest.redraw(),this.$searchText.empty(),Modernizr.history&&-1!=location.href.search(/\?q=/)&&history.replaceState(null,"",location.origin+location.pathname),this):(this.setLoading(!0),this.ajaxData.from=0,this.xhr=$.ajax({dataType:"json",url:inc.applicationURL+"rest/search/"+e,data:this.ajaxData}).done(_.bind(this.onSearchResultsLoaded,this)).fail(_.bind(this.onSearchResultsFailedToLoad,this)),this))},onSearchResultsLoaded:function(e,t,i){if(this.xhr=null,"abort"==t)return this;this.results.reset(),this.totalResults=e.hits.total,!this.ajaxData.time&&e.time&&(this.ajaxData.time=e.time),e.hits.total>0?(_.each(e.hits.hits,function(e){var t=this.convertHitToResultModel(e);this.results.add(t)},this),this.$searchText.html("Search Results for <em>'"+(this.autosuggest.text||"").trim()+"'</em>")):this.$searchText.html("No Results for <em>'"+(this.autosuggest.text||"").trim()+"'</em>"),this.ajaxData.from=this.results.size();for(var n=e.suggest.suggestions[0].options,s=[],o=this.autosuggest.text.trim();n.length>0&&s.length<4;){var a=n.shift();a.text!=o&&s.push(a.text)}if(this.autosuggest.options=s,this.autosuggest.redraw(),this.autosuggest.disableRedraw=!1,this.ajaxData.size>this.normalSize&&(this.ajaxData.size=this.normalSize,inc.urlParameters.id)){var r=$("#result-"+inc.urlParameters.id);r.length>0&&$("html, body").animate({scrollTop:r.offset().top-200},400)}return this.autosuggest.text.trim().length>=3&&Modernizr.history&&history.replaceState(null,"",location.origin+location.pathname+"?q="+encodeURIComponent(this.autosuggest.text.trim())),this.setLoading(!1),this.totalResults>this.results.size()&&this.$loadMore.show(),this},onSearchResultsFailedToLoad:function(e,t,i){return this.xhr=null,"abort"==t?this:(this.results.reset(),this.setLoading(!1),this)},loadMoreResults:function(){var e=this.autosuggest.text||"";return this.loading||this.xhr||e.trim().length<3?this:(this.$loadMore.hide(),this.setLoading(!0),this.xhr=$.ajax({dataType:"json",url:inc.applicationURL+"rest/search/"+e,data:this.ajaxData}).done(_.bind(this.onMoreResultsLoaded,this)).fail(_.bind(this.onMoreResultsFailedToLoad,this)),this)},onMoreResultsLoaded:function(e,t,i){return this.xhr=null,"abort"==t?this:(e.hits.total>0&&_.each(e.hits.hits,function(e){var t=this.convertHitToResultModel(e);this.results.add(t)},this),this.ajaxData.from=this.results.size(),this.setLoading(!1),this.totalResults>this.results.size()&&this.results.size()<500&&this.$loadMore.show(),this)},convertHitToResultModel:function(e){var t=e._source;t.id=e._type+"-"+parseInt(e._id),
t._type=e._type;var i=["inc_headline","inc_deck","aut_name","aut_blurb","cnl_name","cnl_meta_description","ifc_company","ifc_business_model"],n=["inc_deck","aut_blurb","cnl_meta_description","ifc_business_model"];if(t.inc_pubdate_moment=t.inc_pubdate?moment(t.inc_pubdate+"+00:00","YYYY-MM-DD HH:mm:ssZ"):void 0,t.authorNames="",t.authors)for(var s=0;s<t.authors.length;s++){var o=t.authors[s];t.authorNames+=o.aut_name,s<t.authors.length-2?t.authorNames+=", ":s==t.authors.length-2&&(t.authorNames+=" and ")}t.authorNames=Inc.Utilities.stripTags(t.authorNames).toUpperCase();var a=t.inc_images&&t.inc_images.length>0?t.inc_images[0]:null;if(a=t.aut_image&&t.aut_image.length>0?t.aut_image[0]:a){var r=(a.img_panoramicref||a.img_bucketref||"").trim();if(""!=r){var l=r.split("."),c=l.pop();t.displayImageURL=l.join(".")+"_"+a.id+"."+c}}for(var h in t)if(_.isString(t[h])&&(-1!=_.indexOf(i,h)&&(t[h]=Inc.Utilities.stripTags(t[h])),-1!=_.indexOf(n,h))){var d=t[h].split(" ");if(d.length>25){var u=d.slice(0,25).join(" ")+"&hellip;";t[h]=u}}return new Backbone.Model(t)},onMoreResultsFailedToLoad:function(e,t,i){return this.xhr=null,"abort"==t?this:(this.setLoading(!1),this)},onResultAdded:function(e,t,i){this.$searchresults.append(this[e.get("_type")+"Template"]({model:e}));var n=$("#result-"+e.get("id"));return this.resultViews.push(new Inc.Views.SearchResult({el:n,model:e})),this},onResultsReset:function(e,t){return _.each(this.resultViews,function(e){e.trash()}),this.resultViews=[],this},onResultClickHandler:function(e){var t=this.results.size()<=this.normalSize?this.normalSize:this.results.size();return this.autosuggest.text.trim().length>=3&&Modernizr.history&&history.replaceState(null,"",location.origin+location.pathname+"?q="+encodeURIComponent(this.autosuggest.text.trim())+"&l="+t+"&id="+encodeURIComponent($(e.currentTarget).data("modelId"))),this}}),Inc.Pages.Author=Inc.Pages.Archetype.extend({type:"AuthorPage",init:function(e){return e||(e={}),Inc.Pages.Archetype.init.apply(this,arguments),this.registerTopOfPageAds(),this.setupSidebar(),this.sidebar.getPageElement("SidebarPatternContainer").getPattern("SidebarInitial").insertAtBeginning([{category:"startSubSubUnit"},inc.tileTypeRegistry.getTileType("TwitterFeed")]),this},display:function(){return this.sidebar.pageDisplayed(),inc.adManager.refreshGroup("scroll0"),this}}),Inc.Pages.Partner=Inc.Pages.Archetype.extend({type:"PartnerPage",init:function(e){return e||(e={}),Inc.Pages.Archetype.init.apply(this,arguments),this.registerTopOfPageAds(),this.setupSidebar(),this},display:function(){return this.sidebar.pageDisplayed(),inc.adManager.refreshGroup("scroll0"),this}}),Inc.Pages.Optin=Inc.Pages.Archetype.extend({type:"OptinPage",init:function(e){return e||(e={}),Inc.Pages.Archetype.init.apply(this,arguments),this.registerTopOfPageAds(),this.setupSidebar(),this},display:function(){return this.sidebar.pageDisplayed(),inc.adManager.refreshGroup("scroll0"),this}}),Inc.Pages.Events=Inc.Pages.Archetype.extend({type:"EventsPage",init:function(e){return e||(e={}),Inc.Pages.Archetype.init.apply(this,arguments),inc.scrollMonitor.showAdhesiveAdContainer=!0,this.registerTopOfPageAds(),_.isNumber(inc.i.evtid)&&(inc.adManager.createAds([{groupName:"scroll0",options:{name:"sidebarFlexiblePortrait",type:"flexibleportrait",mq:["large"],collapse:!0,pos:"top",callback:_.bind(inc.adManager.standardAdCallback,this)}}]),this.setupPageShareBoxes(["ShareContainerUpper","ShareContainerLower"])),this.setWrapperContainerMinHeight(),this},display:function(){return inc.scrollMonitor.addScrollUnit("#contentcontainer .Section"),inc.scrollMonitor.processScroll(),this}}),Inc.Pages.NewArticle=Inc.Pages.Article.extend({type:"NewArticlePage",init:function(e){return e||(e={}),this.model=inc.collections.article.get("NewArticle-"+inc.incid),inc.editing.modelsBeingEdited.push(this.model),Inc.Pages.Article.init.apply(this,arguments),this},display:function(){return $(".sidebar_inner").empty(),$(".EmbeddedSlideshowPlayer").remove(),this.sections[0].render(),this.sections[0].hasSidebar&&this.sections[0].model&&!this.sections[0].model.get("inc_hide_article_sidebarflag")&&$(".maincolumn").toggleClass("withsidebar",!0),inc.adManager.refreshGroup("scroll0"),this.displayCompleted=!0,this},load:function(e){return this}}),Inc.Pages.Login=Inc.Pages.Archetype.extend({type:"LoginPage",init:function(e){return e||(e={}),Inc.Pages.Archetype.init.apply(this,arguments),this.registerTopOfPageAds(),this},display:function(){return inc.adManager.refreshGroup("scroll0"),this}}),Inc.Pages.Newsletters=Inc.Pages.Archetype.extend({type:"NewslettersPage",init:function(e){return e||(e={}),Inc.Pages.Archetype.init.apply(this,arguments),this.registerTopOfPageAds(),this},display:function(){return inc.adManager.refreshGroup("scroll0"),this}}),Inc.Navigation.PhotoEssayNavigator=Inc.Navigation.LiquidNavigator.extend({type:"PhotoEssayNavigator",init:function(e){return e||(e={}),Inc.Navigation.LiquidNavigator.init.apply(this,arguments),this.parentElementID="TopNav",this.templateID="HorizontalNavigatorTemplate",this.ItemClassName=Inc.Navigation.PhotoEssayNavigatorItem,this.slider={suppressScrollY:!0,useBothWheelAxes:!0,direction:"x"},this.closed=_.isBoolean(e.closed)?e.closed:!0,this.userClosed=!1,this},render:function(){return inc.topNav.addPhotoEssayNavigator(this,_.template($("#"+this.templateID).html())({ob:this})),$("#"+this.elementID).toggleClass("closed",this.closed),this.slider&&$("#"+this.elementID).find(".Slider").perfectScrollbar(this.slider),this.rendered=!0,$("#"+this.elementID).find(".PhotoEssayNavigatorCloseButton").on("click",_.bind(function(){this.userClosed=!0,this.close()},this)),$("#"+this.elementID).find(".PhotoEssayNavigatorOpenButton").on("click",_.bind(function(){this.userClosed=!1,this.open()},this)),this},updatePosition:function(){return Inc.Navigation.LiquidNavigator.updatePosition.apply(this,arguments),this},clickCallback:function(e){Inc.Navigation.LiquidNavigator.clickCallback.apply(this,arguments),this.controller.goToSlide(e.index)},open:function(e){return this.closed&&($("#"+this.elementID).removeClass("closed"),this.updateSlider(),this.closed=!1,this.trigger("opened",this)),this},close:function(e){return this.closed||($("#"+this.elementID).hasClass("closed")||$("#"+this.elementID).addClass("closed"),this.closed=!0,this.trigger("closed",this)),this}}),Inc.Navigation.PhotoEssayNavigatorItem=Inc.Navigation.LiquidNavigatorItem.extend({type:"PhotoEssayNavigatorItem",init:function(e){return e||(e={}),Inc.Navigation.LiquidNavigatorItem.init.apply(this,arguments),this.inlid=e.id||null,this.images=e.images||{},this.rubric=e.inl_rubric||null,this.active=!0,this}}),Inc.Models.PhotoEssaySlide=Inc.Models.Archetype.extend({type:"PhotoEssaySlideModel",untrackedKeys:["relatedArticles"],constructor:function(e,t){this.endpoints=[{name:"default",url:inc.restURL+"photoessayslide"},{name:"live",url:inc.restURL+"admin/photoessayslide"}],Inc.Models.Archetype.apply(this,arguments)},defaults:function(){return{inl_headline:"Headline",inl_extended_caption:null,inl_caption:null,inl_rubric:null,inl_displaytype:"fullwidth",inl_hide_sharebuttonsflag:!1,images:[]}},labels:function(){return{inl_headline:"Headline",inl_extended_caption:"Description",inl_caption:"Caption",inl_rubric:"Rubric",inl_displaytype:"Display Type",inl_hide_sharebuttonsflag:"Hide Share Buttons?",images:"Images"}}}),Inc.Collections.PhotoEssaySlide=Inc.Collections.Archetype.extend({type:"PhotoEssaySlideCollection",model:Inc.Models.PhotoEssaySlide,url:function(){var e=inc.restURL;return this.admin&&(e+="admin/"),e+"photoessayslide"}}),Inc.Views.PhotoEssaySlide=Inc.ToggleView.extend({type:"PhotoEssaySlide",className:"PhotoEssaySlide",template:_.template($("#PhotoEssay-Slide-Template").html()),initialize:function(e){if(e||(e={}),Inc.ToggleView.prototype.initialize.apply(this,arguments),this.slideNumber=e.slideNumber,this.totalSlides=e.totalSlides,this.impressionTracked=!1,this.imageDisplayed=!1,this.scrollPosition=e.scrollPosition,this.shareURL=inc.i.shareURL+"/"+this.slideNumber,this.picture=null,this.shareBox=null,this.adGroup="scroll"+this.scrollPosition,!e.el){switch(this.$el.attr("id",this.oid),this.$el.toggleClass("PhotoEssaySlide-"+this.model.getID(),!0),this.model.get("inl_displaytype")){case"halfwidth":this.$el.toggleClass("TextLeft",!0);break;case"left":this.$el.toggleClass("TypeImageLeft",!0);break;default:this.$el.toggleClass("TextBelow",!0)}"halfwidth"==this.model.get("inl_displaytype")?this.$el.toggleClass("TextLeft",!0):this.$el.toggleClass("TextBelow",!0)}inc.adManager.getAdGroup(this.adGroup)||(inc.adManager.addEmptyAdGroup(this.adGroup),inc.scrollMonitor.addScrollUnit("#"+this.$el.attr("id")))},render:function(){if(0==this.$el.children().length&&this.$el.html(this.template(this)),this.picture=new Inc.Views.Picture({el:this.$(".SlidePhoto")[0]}),"fullwidth"==this.model.get("inl_displaytype")){var e;(this.slideNumber+1)%2==0?(e="PhotoEssayFlexibleBillboard",inc.adManager.createAds({groupName:this.adGroup,options:{name:e,type:"flexiblebillboard",mq:["medium","large"],collapse:!1,pos:"top"}})):(e="PhotoEssayFixedRectangle",inc.adManager.createAds({groupName:this.adGroup,options:{name:e,type:"fixedrectangle",mq:["medium","large"],collapse:!1,pos:"top"}})),this.$(".WideAdSubContainer").append(_.template('<div id="<%= adName %><%= slideNumber %>-<%= slideID %>"><script type="text/javascript">inc.adManager.displayAdSlot("<%= adGroup %>","<%= adName %>","<%= adName %><%= slideNumber %>-<%= slideID %>");</script></div>')({adName:e,adGroup:this.adGroup,slideNumber:this.slideNumber,slideID:this.model.getID()}));var t=!1;1==this.slideNumber?(t=!0,e="PhotoEssayMobileRectangle",inc.adManager.createAds({groupName:this.adGroup,options:{name:e,type:"mobilerectangle",mq:["small"],collapse:!1,pos:"top"}})):(this.slideNumber-1)%2==0?(t=!0,e="PhotoEssaySmallBanner",inc.adManager.createAds({groupName:this.adGroup,options:{name:e,type:"smallbanner",mq:["small"],collapse:!1,pos:"top"}})):this.$(".WideAdContainer").addClass("SmallCollapsed"),t&&this.$(".SmallAdSubContainer").append(_.template('<div id="<%= adName %><%= slideNumber %>-<%= slideID %>"><script type="text/javascript">inc.adManager.displayAdSlot("<%= adGroup %>","<%= adName %>","<%= adName %><%= slideNumber %>-<%= slideID %>");</script></div>')({adName:e,adGroup:this.adGroup,slideNumber:this.slideNumber,slideID:this.model.getID()}))}else this.$(".WideAdContainer").hide();return this.slideNumber==this.totalSlides&&(e="PhotoEssayMobileRectangle",inc.adManager.createAds({groupName:this.adGroup,options:{name:e,type:"mobilerectangle",mq:["small"],collapse:!1,pos:"top"}}),this.$el.parent().children(".LastWideAdContainer").children(".SmallAdSubContainer").append(_.template('<div id="<%= adName %><%= slideNumber %>-<%= slideID %>"><script type="text/javascript">inc.adManager.displayAdSlot("<%= adGroup %>","<%= adName %>","<%= adName %><%= slideNumber %>-<%= slideID %>");</script></div>')({adName:e,adGroup:this.adGroup,slideNumber:this.slideNumber,slideID:this.model.getID()}))),"small"==inc.mqState&&1==this.slideNumber&&0==inc.pushState&&inc.adManager.refreshGroup(this.adGroup),this.setupImageShareBox(),this},setupImageShareBox:function(){if(this.model.get("inl_hide_sharebuttonsflag"))return this;var e=this.$(".ImageShareContainer");return this.shareBox=Inc.Accessories.ShareBox.spawn({label:"SHARE IMAGE:",classes:"ImageShareBox",controller:this,buttons:{facebook:{title:this.model.get("inl_headline"),url:this.shareURL,caption:"Inc.com",description:this.model.get("inl_extended_caption"),media:{url:this.model.get("images").large.x2},actionLinkName:this.model.get("inl_headline"),actionLinkURL:this.shareURL},twitter:{title:this.model.get("inl_headline"),url:this.shareURL},reddit:{title:this.model.get("inl_headline"),url:this.shareURL},mail:{subject:this.model.get("inl_headline"),body:this.model.get("inl_headline")+"\n"+this.shareURL}}}),this.shareBox.render(e),this},trash:function(){return Inc.ToggleView.prototype.trash.apply(this,arguments),this}}),Inc.Pages.Inc5000Application=Inc.Pages.Archetype.extend({type:"Inc5000ApplicationPage",init:function(e){function t(e){var t=new RegExp(/^(("[\w-\s]+")|([\w-]+(?:\.[\w-]+)*)|("[\w-\s]+")([\w-]+(?:\.[\w-]+)*))(@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$)|(@\[?((25[0-5]\.|2[0-4][0-9]\.|1[0-9]{2}\.|[0-9]{1,2}\.))((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\.){2}(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\]?$)/i);return t.test(e)}e||(e={}),Inc.Pages.Archetype.init.apply(this,arguments),this.registerTopOfPageAds(),_.extend(Number.prototype,{withCommas:function(){return this.valueOf().toString().replace(/\B(?=(\d{3})+(?!\d))/g," ")},toEuros:function(){var e=document.getElementsByName("app_ifuid")[0];e.selectedOption=function(){return this.options[this.selectedIndex]};var t=e.selectedOption().getAttribute("data-rate"+year),i=Math.round(this*t);return""+i.withCommas()},roundNearestHundreth:function(){return Math.round(100*this)/100}});for(var i=["first_name","last_name","email","phone","extension","assistant_email"],n=0;n<i.length;n++)i[n]=document.getElementsByName("app_ceo_"+i[n])[0],i[n]&&(i[n].edited=!1,i[n].addEventListener("keydown",function(){this.edited=!0}));return this.populateWithCeoData=function(){document.getElementsByName("app_ceo_speaking_bio")[0].setAttribute("placeholder","Tell us about yourself (100 words maximum)");for(var e=0;e<i.length;e++)!i[e].edited&&i[e].getAttribute("data-primaryContact")&&(i[e].value=i[e].getAttribute("data-primaryContact"))},this.unpopulateWithCeoData=function(){document.getElementsByName("app_ceo_speaking_bio")[0].setAttribute("placeholder","Tell us about the CEO (100 words maximum)");for(var e=0;e<i.length;e++)i[e].edited||(i[e].value="")},this.onkeyup=function(){var e=new Number(this.value);isNaN(e.valueOf())||(document.getElementById(this.getAttribute("name")+"_euros").innerHTML=e.toEuros(2010))},this.onChangeCountrySelect=function(e){for(var t=e.options[e.selectedIndex].getAttribute("data-currency-id"),i=document.getElementsByName("app_ifuid")[0].options,n=0;n<i.length;n++)i[n].getAttribute("value")==t&&(i[n].selected="selected",inc.currentController.onChangeCurrencySelect.call(i[n]))},this.onChangeCurrencySelect=function(){var e=new Number(document.getElementsByName("app_revenues_fouryearsago")[0].value),t=new Number(document.getElementsByName("app_revenues_lastyear")[0].value);isNaN(e.valueOf())||(document.getElementById("app_revenues_fouryearsago_euros").innerHTML=e.toEuros(2010)),isNaN(t.valueOf())||(document.getElementById("app_revenues_lastyear_euros").innerHTML=t.toEuros(2013))},$(document).ready(function(){$("#fee_info").click(function(){$("#appfeehelp").fadeIn().ScrollTo()}),$("input:radio[name=app_representativeflag]").load(function(){"TRUE"==$(this).val()&&$(this).is(":checked")&&$(".dis_representative").fadeIn()}),$("input:radio[name=app_ceo_speakingflag]").load(function(){"TRUE"==$(this).val()&&$(this).is(":checked")&&$(".dis_ceo_speakingflag").fadeIn()}),$("input:radio[name=app_is_ceoflag]").load(function(){if("TRUE"==$(this).val()&&$(this).is(":checked")){var e=$("input[name=app_primary_contact_first_name]").val(),t=$("input[name=app_primary_contact_last_name]").val(),i=$("input[name=app_primary_contact_email]").val(),n=$("input[name=app_primary_contact_phone]").val();$("input[name=app_ceo_first_name]").val(e),$("input[name=app_ceo_first_name]").val(t),$("input[name=app_ceo_first_name]").val(i),$("input[name=app_ceo_first_name]").val(n)}}),$("select[name=app_chief_ethnicity]").load(function(){"5"==$(this).val()&&$(".dis_ethnicity").show()}),$("input:radio[name=app_representativeflag]").change(function(){"TRUE"==$(this).val()&&$(this).is(":checked")&&$(".dis_representative").fadeIn()}),$("input:radio[name=app_representativeflag]").change(function(){"FALSE"==$(this).val()&&$(this).is(":checked")&&$(".dis_representative").fadeOut()}),$("input:radio[name=app_is_ceoflag]").change(function(){if("TRUE"==$(this).val()&&$(this).is(":checked")){var e=$("input[name=app_primary_contact_first_name]").val(),t=$("input[name=app_primary_contact_last_name]").val(),i=$("input[name=app_primary_contact_email]").val(),n=$("input[name=app_primary_contact_phone]").val();$("input[name=app_ceo_first_name]").val(e),$("input[name=app_ceo_first_name]").val(t),$("input[name=app_ceo_first_name]").val(i),$("input[name=app_ceo_first_name]").val(n)}}),$("input:radio[name=app_ceo_speakingflag]").change(function(){"TRUE"==$(this).val()&&$(this).is(":checked")&&$(".dis_ceo_speakingflag").fadeIn()}),$("input:radio[name=app_ceo_speakingflag]").change(function(){"FALSE"==$(this).val()&&$(this).is(":checked")&&$(".dis_ceo_speakingflag").fadeOut()}),$("select[name=app_chief_ethnicity]").change(function(){"5"==$(this).val()?($(".dis_ethnicity").show(),$("#app_chief_ethnicity_other").show()):$(".dis_ethnicity").hide()}),$("select[name=app_hear_list]").change(function(){"Other Member Organization"==$(this).val()&&"Other"!=$(this).val()&&($(".dis_otherHeardOf").fadeIn(),$("#app_hear_list_other").show())}),$("select[name=app_hear_list]").change(function(){"Other Member Organization"!=$(this).val()&&"Other"!=$(this).val()&&$(".dis_otherHeardOf").fadeOut()}),$("select[name=app_hear_list]").change(function(){"Other"==$(this).val()&&"Other Member Organization"!=$(this).val()&&($(".dis_otherHeardOf").fadeIn(),$("#app_hear_list_other").show())}),$("select[name=app_hear_list]").change(function(){"Other"!=$(this).val()&&"Other Member Organization"!=$(this).val()&&$(".dis_otherHeardOf").fadeOut()}),$("select[name=app_org_refer]").change(function(){"Other"==$(this).val()?($(".dis_otherReferral").fadeIn(),$("#app_org_refer_other").show(),("Other"!=$("select[name=app_hear_list]").val()||"Other Member Organization"!=$("select[name=app_hear_list]").val())&&$(".dis_otherReferral").css("float","right")):$(".dis_otherReferral").fadeOut()}),$("button,input[type=image]").click(function(){var e="",i=$("input[name=app_primary_contact_email]").val(),n=$("input[name=app_ceo_email]").val();if("1"==$("#app_current_step").val()){var s=$("input[name=app_primary_contact_phone]").val();s=s.replace(/\+|[.-]+/g,""),"Company Name *"==$("input[name=app_company_name]").val()||""==$("input[name=app_company_name]").val()?e="Please enter your company name":"Primary Contact First Name *"==$("input[name=app_primary_contact_first_name]").val()||""==$("input[name=app_primary_contact_first_name]").val()?e="Please enter the primary contact's first name":"Primary Contact Last Name *"==$("input[name=app_primary_contact_last_name]").val()||""==$("input[name=app_primary_contact_last_name]").val()?e="Please enter the primary contact's last name":"Primary Contact Job Title *"==$("input[name=app_primary_contact_job_title]").val()||""==$("input[name=app_primary_contact_job_title]").val()?e="Please enter the primary contact's job title":"0"==$("select[name=app_primary_contact_department]").val()?e="Please select the primary contact's department":t(i)?"Verify Email Address *"==$("input[name=app_verify_email]").val()||""==$("input[name=app_verify_email]").val()?e="Please verify the email address you entered":$("input[name=app_primary_contact_email]").val()!=$("input[name=app_verifyemail]").val()?e="email addresses do not match. please verify they are the same.":"Primary Contact Phone *"==$("input[name=app_primary_contact_phone]").val()||""==$("input[name=app_primary_contact_phone]").val()?e="Please enter the primary contact's phone number":s.length<10||s.length>12?e="Please enter a valid primary contact's phone number that should be atleast 10 digits":isNaN(s)?e="Please enter a valid primary contact's phone number(no dashes and letters)":$("input[name=app_representativeflag]").is(":checked")?$(".dis_representative").is(":visible")&&("Name of Representing Firm **"==$("input[name=app_representative_name]").val()||""==$("input[name=app_representative_name]").val()?e="Please enter the name of the representing firm":"0"==$("select[name=app_representative_type]").val()&&(e="Please select the type of firm representing the company")):e="Please answer: Are you a firm representing a private company?":e="Primary Contact Email Address *"==$("input[name=app_primary_contact_email]").val()||""==$("input[name=app_primary_contact_email]").val()?"Please enter the primary contact's email address":"Please enter a valid email address",$("input[name=app_primary_contact_phone]").val(s)}else if(2==$("#app_current_step").val())$("#app_eligibility_fouryearsagoflag_true").is(":checked")||$("#app_eligibility_fouryearsagoflag_false").is(":checked")?$("#app_eligibility_lastyearflag_true").is(":checked")||$("#app_eligibility_lastyearflag_false").is(":checked")?$("#app_eligibility_bydateflag_true").is(":checked")||$("#app_eligibility_bydateflag_false").is(":checked")?$("#app_eligibility_privateflag_true").is(":checked")||$("#app_eligibility_privateflag_false").is(":checked")?$("#app_eligibility_fouryearsagoflag_false").is(":checked")?e="We're sorry, but your company does not qualify for the inc 5000.<br /> please <a href='http://www.inc.com/inc5000eu/faqs.html' style='color:#FFFFFF;' target='_blank'>click here</a> for more information.":$("#app_eligibility_lastyearflag_false").is(":checked")?e="We're sorry, but your company does not qualify for the inc 5000.<br /> please <a href='http://www.inc.com/inc5000eu/faqs.html' style='color:#FFFFFF;' target='_blank'>click here</a> for more information.":$("#app_eligibility_bydateflag_false").is(":checked")?e="We're sorry, but your company does not qualify for the inc 5000.<br /> please <a href='http://www.inc.com/inc5000eu/faqs.html' style='color:#FFFFFF;' target='_blank'>click here</a> for more information.":$("#app_eligibility_privateflag_false").is(":checked")&&(e="We're sorry, but your company does not qualify for the inc 5000.<br /> please <a href='http://www.inc.com/inc5000eu/faqs.html' style='color:#FFFFFF;' target='_blank'>click here</a> for more information."):e="Please answer: Is the company privately held, US-based, operating for profit, and independent (i.e. not a subsidiary)?":e="Please answer: Was the company generating revenue by March 31, 2011?":e="Please answer: Did the company generate a minimum of $2 million in revenue in 2014?":e="Please answer: Did the company generate a minimum of $200,000 in revenue in 2011?";else if(3==$("#app_current_step").val()){var o=$("input[name=app_ceo_phone]").val();o=o.replace(/\+|[.-]+/g,""),"CEO First Name *"==$("input[name=app_ceo_first_name]").val()||""==$("input[name=app_ceo_first_name]").val()?e="Please enter the first name of the CEO":"CEO Last Name *"==$("input[name=app_ceo_last_name]").val()||""==$("input[name=app_ceo_last_name]").val()?e="Please enter the last name of the CEO":t(n)?"CEO Phone Number *"==$("input[name=app_ceo_phone]").val()||""==$("input[name=app_ceo_phone]").val()?e="Please enter the phone number of the CEO":o.length<10||o.length>12?e="Please enter a valid phone number of the CEO should be atleast 10 digits":isNaN(o)?e="Please enter a valid phone number of the CEO (no dashes and letters)":$("input[name=app_ceo_founderflag]").is(":checked")?$("input[name=app_ceo_cofounderflag]").is(":checked")?$("input[name=app_ceo_speakingflag]").is(":checked")||(e="Please answer: Is the CEO interested in Inc. speaking engagements?"):e="Please answer: Has the CEO Founded or co-Founded other businesses?":e="Please answer: Is the CEO the Founder or one of the Founders?":e="CEO Email *"==$("input[name=app_ceo_email]").val()||""==$("input[name=app_ceo_email]").val()?"Please enter the email address of the CEO":"Please enter a valid email address",$("input[name=app_ceo_phone]").val(o)}else if(4==$("#app_current_step").val()){var a=$("input[name=app_company_main_phone]").val();a=a.replace(/\+|[.-]+/g,"");var r=$("input[name=app_revenues_fouryearsago]").val();r=r.replace(/\$|,/g,"");var l=$("input[name=app_revenues_lastyear]").val();l=l.replace(/\$|,/g,""),"Company Address Line 1 *"==$("input[name=app_company_address1]").val()||""==$("input[name=app_company_address1]").val()?e="Please enter the company's street address":"City *"==$("input[name=app_company_city]").val()||""==$("input[name=app_company_city]").val()?e="Please enter the city the company is headquartered in":"0"==$("select[name=app_representative_ifxid]").val()?e="Please select the country the company is headquartered in":"0"==$("select[name=app_company_state_steid]").val()?e="Please select the state the company is headquartered in":"Zip Code *"==$("input[name=app_company_zip]").val()||""==$("input[name=app_company_zip]").val()?e="Please enter the company's zip code":"Main Phone *"==$("input[name=app_company_main_phone]").val()||""==$("input[name=app_company_main_phone]").val()?e="Please enter the company's main telephone number":a.length<10&&a.length>12?e="Please enter a valid company's main telephone number should be atleast 10 digits":isNaN(a)?e="Please enter a valid company's main telephone number(no dashes and letters)":"Company Website *"==$("input[name=app_company_website]").val()||""==$("input[name=app_company_website]").val()?e="Please enter the company website address":"0"==$("select[name=app_ifiid]").val()?e="Please select the industry the company does business in":"0"==$("select[name=app_year_founded]").val()?e="Please select when the company was founded":"Approximately 100 words, please make sure to include information about your business model."==$("textarea[name=app_company_description]").val()||""==$("textarea[name=app_company_description]").val()?e="Please enter a description of the company":"Calendar 2010 Revenues *"==$("input[name=app_revenues_fouryearsago]").val()||""==$("input[name=app_revenues_fouryearsago]").val()?e="Please enter the company's revenues from 2011":isNaN(r)?e="Please enter a valid number for 2011 revenue":parseInt(r)<1e5?e="2011 revenue must be at least $100,000":"Calendar 2013 Revenues *"==$("input[name=app_revenues_lastyear]").val()||""==$("input[name=app_revenues_lastyear]").val()?e="Please enter the company's revenues from 2014":isNaN(l)?e="Please enter a valid number for 2014 revenue":parseInt(l)<2e6?e="2014 revenue must be at least $2,000,000":parseInt(r)>parseInt(l)?e="Note: the numbers you entered show declining revenue. Please make sure each entry matches the corresponding year.":"99"==$("select[name=app_chief_ethnicity]").val()?e="Please select the CEO's ethnicity":"Total employees 2010 *"==$("input[name=app_employ_fouryearsago]").val()||""==$("input[name=app_employ_fouryearsago]").val()?e="Please enter the total number of employess in 2011":isNaN($("input[name=app_employ_fouryearsago]").val())?e="Please enter a valid number for 2011 employment rate":"Total employees 2013 *"==$("input[name=app_employ_lastyear]").val()||""==$("input[name=app_employ_lastyear]").val()?e="Please enter the total number of employess in 2014":isNaN($("input[name=app_employ_lastyear]").val())?e="Please enter a valid number for 2014 employment rate":"% full time, US-based employees 2012 *"==$("input[name=app_fulltime_percent]").val()||""==$("input[name=app_fulltime_percent]").val()?e="Please enter the percentage of full time, US-based employees in 2012":"0"==$("select[name=app_hear_list]").val()?e="Please answer: How did you hear about the Inc. 5000?":"0"==$("select[name=app_org_refer]").val()?e="Please answer: Did a membership organization refer you?":$(".dis_otherHeardOf").is(":visible")?"Please specify"==$("select[name=app_hear_list_other]").val()&&(e="Please enter details on how you heard about the Inc. 5000"):$(".dis_otherReferral").is(":visible")&&"Please specify"==$("select[name=app_org_refer_other]").val()&&(e="Please enter details on how who referred you to the Inc. 5000"),$("input[name=app_company_main_phone]").val(a),$("input[name=app_revenues_fouryearsago]").val(r),$("input[name=app_revenues_lastyear]").val(l)}else 5==$("#app_current_step").val()&&($("input[name=app_privacyflag]").is(":checked")?$("input[name=app_rulesflag]").is(":checked")?$("input[name=app_authorizedflag]").is(":checked")||(e="Please indicate you have the authority to apply to the Inc. 5000 on behalf of this company"):e="You must agree to the official rules to submit your application":e="You must agree to the privacy policy to submit your application");return""!=e?($("#errors").fadeIn().html(e),$("body").ScrollTo(),!1):void(""==e&&$("#errors").fadeOut())})}),function(e,t,i){"undefined"!=typeof module&&module.exports?module.exports=i():"function"==typeof define&&define.amd?define(i):t[e]=i()}("jquery-scrollto",this,function(){var e,t,i;return e=t=window.jQuery||require("jquery"),t.propHooks.scrollTop=t.propHooks.scrollLeft={get:function(e,t){var i=null;return("HTML"===e.tagName||"BODY"===e.tagName)&&("scrollLeft"===t?i=window.scrollX:"scrollTop"===t&&(i=window.scrollY)),null==i&&(i=e[t]),i}},t.Tween.propHooks.scrollTop=t.Tween.propHooks.scrollLeft={get:function(e){return t.propHooks.scrollTop.get(e.elem,e.prop)},set:function(e){"HTML"===e.elem.tagName||"BODY"===e.elem.tagName?(e.options.bodyScrollLeft=e.options.bodyScrollLeft||window.scrollX,e.options.bodyScrollTop=e.options.bodyScrollTop||window.scrollY,"scrollLeft"===e.prop?e.options.bodyScrollLeft=Math.round(e.now):"scrollTop"===e.prop&&(e.options.bodyScrollTop=Math.round(e.now)),window.scrollTo(e.options.bodyScrollLeft,e.options.bodyScrollTop)):e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},i={config:{duration:400,easing:"swing",callback:void 0,durationMode:"each",offsetTop:0,offsetLeft:0},configure:function(e){return t.extend(i.config,e||{}),this},scroll:function(e,n){var s,o,a,r,l,c,h,d,u,p,m,f,g,v,b,y,w,_;return s=e.pop(),o=s.$container,a=s.$target,c=o.prop("tagName"),r=t("<span/>").css({position:"absolute",top:"0px",left:"0px"}),l=o.css("position"),o.css({position:"relative"}),r.appendTo(o),m=r.offset().top,f=a.offset().top,g=f-m-parseInt(n.offsetTop,10),v=r.offset().left,b=a.offset().left,y=b-v-parseInt(n.offsetLeft,10),h=o.prop("scrollTop"),d=o.prop("scrollLeft"),r.remove(),o.css({position:l}),w={},_=function(t){return 0===e.length?"function"==typeof n.callback&&n.callback():i.scroll(e,n),!0},n.onlyIfOutside&&(u=h+o.height(),p=d+o.width(),g>h&&u>g&&(g=h),y>d&&p>y&&(y=d)),g!==h&&(w.scrollTop=g),y!==d&&(w.scrollLeft=y),o.prop("scrollHeight")===o.width()&&delete w.scrollTop,o.prop("scrollWidth")===o.width()&&delete w.scrollLeft,null!=w.scrollTop||null!=w.scrollLeft?o.animate(w,{duration:n.duration,easing:n.easing,complete:_}):_(),!0},fn:function(e){var n,s,o,a;n=[];var r=t(this);if(0===r.length)return this;for(s=t.extend({},i.config,e),o=r.parent(),a=o.get(0);1===o.length&&a!==document.body&&a!==document;){var l,c;l="visible"!==o.css("overflow-y")&&a.scrollHeight!==a.clientHeight,c="visible"!==o.css("overflow-x")&&a.scrollWidth!==a.clientWidth,(l||c)&&(n.push({$container:o,$target:r}),r=o),o=o.parent(),a=o.get(0)}return n.push({$container:t("html"),$target:r}),"all"===s.durationMode&&(s.duration/=n.length),i.scroll(n,s),this}},t.ScrollTo=t.ScrollTo||i,t.fn.ScrollTo=t.fn.ScrollTo||i.fn,i}),this},display:function(){return inc.adManager.refreshGroup("scroll0"),$("input:radio[name=app_ceo_speakingflag]").each(function(){"TRUE"!=$(this).val()||$(this).is(":checked")||$(".dis_ceo_speakingflag").hide()}),this}}),Inc.Pages.Inc5000List=Inc.Pages.Archetype.extend({type:"Inc5000ListPage",init:function(e){return e||(e={}),Inc.Pages.Archetype.init.apply(this,arguments),this.registerTopOfPageAds(),this.inc5000listapp=inc.inc5000listapp,inc.inc5000listapp=null,delete inc.inc5000listapp,$(function(){$("#inc5000header .subnav-to-full").toggleClass("active",!0)}),this},display:function(){inc.adManager.refreshGroup("scroll0");var e={shareTitle:inc.i.listShareTitle,twitterTitle:inc.i.listTwitterTitle,shareDeck:"An in-depth view into Inc. Magazine's annual ranking of the hottest private U.S. companies.",shareURL:inc.i.listShareURL,shareImage:"http://images.inc.com/inc5000/2014/inc50002014.png"};this.setupPageShareBox(_.extend({
elementID:"ShareContainerUpper"},e)),this.setupPageShareBox(_.extend({elementID:"ShareContainerLower"},e))},setupPageShareBox:function(e){var t='<div id="<%= ob.elementID %>" class="<%= ob.classes.join(\' \') %>"><div class="DisabledMask"></div><div class="ShareBoxButtons"></div><div class="ShareBoxLabel"></div></div>',i=Inc.Accessories.ShareBox.spawn({classes:"PageShareBox",controller:this,parentElementID:e.elementID,template:t,buttons:{facebook:{title:e.shareTitle,url:e.shareURL,caption:"Inc.com",media:{url:e.shareImage},description:e.shareDeck,actionLinkName:e.shareTitle,actionLinkURL:e.shareURL},twitter:{title:e.twitterTitle,url:e.shareURL,via:"Inc",related:"Inc5000"},googleplus:{url:e.shareURL,clickedCallback:_.bind(this.googlePlusButtonClicked,this)},linkedin:{title:e.shareTitle,url:e.shareURL,summary:e.shareDeck},reddit:{title:inc.i.shareTitle,url:inc.i.shareURL},stumbleupon:{url:e.shareURL},mail:{subject:e.shareTitle,body:e.shareTitle+"\n"+e.shareURL}}});return this.pageShareBoxes.push(i),i.render(),$("#"+e.elementID+" .ShareBoxLabel").sharrre({share:{facebook:!0,twitter:!0,linkedin:!0,googlePlus:!0},url:e.shareURL,template:"{total} SHARES",urlCurl:inc.applicationURL+"sharrre.php",enableHover:!1}),this}}),Inc.Pages.Inc5000Profile=Inc.Pages.Archetype.extend({type:"Inc5000ProfilePage",init:function(e){e||(e={}),Inc.Pages.Archetype.init.apply(this,arguments),this.profileIds=[],this.profiles=[],this.currentProfileIndex=0,this.registerTopOfPageAds(),this.loading=!1,this.noMoreMainContent=!1,inc.scrollMonitor.showBackToTopButton=!1;var t=this;Modernizr.history&&this.listenTo(dispatcher,"window:scrolled",function(){for(var e=$(window).scrollTop(),t=$(window).height(),i=this.currentProfileIndex>9?this.currentProfileIndex-10:0,n=this.currentProfileIndex<this.profiles.length-11?this.currentProfileIndex+10:this.profiles.length-1,s=i;n>=s;s++)if(s!=this.currentProfileIndex){var o=this.profiles[s],a=$("#company"+o.id);if(0!=a.length){var r=$("#"+this.getPageElement("MainPatternContainer").subUnits[s].elementID).offset().top;if(e>r-t/2&&e<=r+a.outerHeight(!0)-t/2){var l=null;this.profiles[s-1]&&(l={id:this.profiles[s-1].id,badgeURL:"http://images.inc.com/img_gen/inc5000_"+this.profiles[s-1].years[0].ify_year+"/inc5000_num_"+this.profiles[s-1].rank+".png",previewText:this.profiles[s-1].ifc_company});var c=null;o.next_id&&(c={id:o.next_id,badgeURL:o.next_badge_url,previewText:o.next_preview_text}),this.currentProfileIndex=s;var h=inc.applicationURL+"profile/"+o.ifc_filelocation;this.trigger("change:section",this,l,c),inc.parameterSet("sort")&&(h+="?sort="+inc.urlParameters.sort),history.replaceState(o,o.ifc_company+" - "+o.ifc_city+", "+o.ifc_state,h);break}}}});var i=inc.tileTypeRegistry,n=Inc.Patterns.PatternContainer.spawn({elementID:"MainPatternContainer",controller:this});this.pageElements.push(n);var s=Inc.Patterns.Pattern.spawn({name:"MainInitial",repeats:!1,structure:[{category:"startSubSubUnit"},i.getTileType("Inc5000Profile","Default",{preDisplay:function(){inc.adManager.createAds([{groupName:this.adGroup,options:{name:"sidebarFlexibleHalfpage",type:"flexiblehalfpage",mq:["large","medium"],collapse:!0,pos:"top",callback:_.bind(t.profileSidebarAdCallback,t)}},{groupName:this.adGroup,options:{name:"sidebarFixedRectangle",type:"fixedrectangle",mq:["large","medium"],collapse:!0,pos:"bot",callback:_.bind(t.profileSidebarAdCallback,t)}}])}}),{category:"startSubSubUnit",additionalClasses:["fullWidth"]},i.getTileType("LoadMore")]});n.addPattern(s);var o=Inc.Patterns.Pattern.spawn({name:"Main",repeats:!0,structure:[{category:"startSubSubUnit",additionalClasses:["fullWidth"]},i.getTileType("WideAd","flexiblebillboard",{preDisplay:function(){this.adName="mainFlexibleBillboard",inc.adManager.createAds({groupName:this.adGroup,options:{name:this.adName,type:"flexiblebillboard",mq:["large","medium"],collapse:!0,pos:"top"}})}}),i.getTileType("IMU","mobilerectangle",{preDisplay:function(){this.adName="mainMobileRectangle",inc.adManager.createAds({groupName:this.adGroup,options:{name:this.adName,type:"mobilerectangle",mq:["small"],collapse:!0,pos:"top"}})}}),{category:"startSubSubUnit"},i.getTileType("Inc5000Profile","Default",{preDisplay:function(){inc.adManager.createAds([{groupName:this.adGroup,options:{name:"sidebarFlexibleHalfpage",type:"flexiblehalfpage",mq:["large","medium"],collapse:!0,pos:"top",callback:_.bind(t.profileSidebarAdCallback,t)}},{groupName:this.adGroup,options:{name:"sidebarFixedRectangle",type:"fixedrectangle",mq:["large","medium"],collapse:!0,pos:"bot",callback:_.bind(t.profileSidebarAdCallback,t)}}])}}),{category:"startSubSubUnit",additionalClasses:["fullWidth"]},i.getTileType("LoadMore")]});return n.addPattern(o),this.adjustTileHeightsInterval=setInterval(_.bind(this.adjustTileHeights,this),500),this.afterInit(),this},afterInit:function(){Array.prototype.map||(Array.prototype.map=function(e,t){var i,n,s;if(null==this)throw new TypeError(" this is null or not defined");var o=Object(this),a=o.length>>>0;if("function"!=typeof e)throw new TypeError(e+" is not a function");for(arguments.length>1&&(i=t),n=new Array(a),s=0;a>s;){var r,l;s in o&&(r=o[s],l=e.call(i,r,s,o),n[s]=l),s++}return n}),Array.prototype.filter||(Array.prototype.filter=function(e){"use strict";if(void 0===this||null===this)throw new TypeError;var t=Object(this),i=t.length>>>0;if("function"!=typeof e)throw new TypeError;for(var n=[],s=arguments.length>=2?arguments[1]:void 0,o=0;i>o;o++)if(o in t){var a=t[o];e.call(s,a,o,t)&&n.push(a)}return n}),Array.prototype.last=function(){return this[this.length-1]}},profileSidebarAdCallback:function(e,t){e&&inc.adManager.standardAdCallback.apply(this,arguments);var i=$($("#"+t.oid).parents(".profile")[0]);return this.adjustProfileHeight(i),this},adjustProfileHeight:function(e){var t=$(e.children(".sidebar")),i=t.outerHeight(!0);return i>e.height()&&e.css("min-height",i+"px"),this},adjustTileHeights:function(){for(var e=$(".Inc5000ProfileTile .profile"),t=0;t<e.length;t++){var i=$(e[t]);this.adjustProfileHeight(i)}return this},load:function(e){if(this.loading)return this;var t=inc.currentController.getPageElement("MainPatternContainer");return inc.adManager.addEmptyAdGroup("scroll"+e),t.printNextPattern("scroll"+e),this.companies.getNextFromServer(),this},queryString:function(){for(var e={},t=window.location.search.substring(1),i=t.split("&"),n=0;n<i.length;n++){var s=i[n].split("=");if("undefined"==typeof e[s[0]])e[s[0]]=s[1];else if("string"==typeof e[s[0]]){var o=[e[s[0]],s[1]];e[s[0]]=o}else e[s[0]].push(s[1])}return e},display:function(){function e(e){return e.split(" ").map(function(e){return e.charAt(0).toUpperCase()+e.slice(1)}).join(" ")}function t(e,t,i,n){this.rank=e,this.category=t,this.class_name=i,"undefined"!=typeof n?this.url=n:n="#"}function i(e,t){this.arr=e,this.company=t}function n(e,t){this.year=e,this.rank=t}function s(e,t){this.value=e,this.company=t}function o(e,t){s.apply(this,arguments)}function a(e,t){s.apply(this,arguments)}function r(e,t){s.apply(this,arguments)}function l(e,t){s.apply(this,arguments)}function c(e,t){s.apply(this,arguments)}function h(e,t){s.apply(this,arguments)}function d(e,t){s.apply(this,arguments)}function u(e,t){s.apply(this,arguments)}function p(e,t){s.apply(this,arguments)}function m(e,t){s.apply(this,arguments)}function f(e,t){s.apply(this,arguments)}function g(e,t){s.apply(this,arguments)}function v(e,t){s.apply(this,arguments)}function b(e,t){s.apply(this,arguments)}function y(e,t){s.apply(this,arguments)}function w(e,t){s.apply(this,arguments)}function k(e,t){s.apply(this,arguments)}function I(e,t){s.apply(this,arguments)}function C(e,t){s.apply(this,arguments)}function x(e,t){s.apply(this,arguments)}function S(e,t){s.apply(this,arguments)}function T(e,t){s.apply(this,arguments)}function A(e,t){s.apply(this,arguments)}function M(e,t){s.apply(this,arguments)}function P(e,t){s.apply(this,arguments)}function E(e,t){s.apply(this,arguments),this.value&&(this.value="@"+this.value)}function N(e,t){s.apply(this,arguments)}function D(e,t){s.apply(this,arguments)}function R(e,t){s.apply(this,arguments)}function O(t,n,s,_,$,D,O,L,B,z,H,j,V,W,q,G,Y,K,X,Q,J,Z,ee,te,ie,ne,se,oe,ae,re,le,ce,he){this.name=new o(t,this),this.businessModel=new a(n,this),this.rank=new r(s,this),this._2013revenue=new l(new Number(_),this),this._2010revenue=new c(new Number($),this),this.industry=new h(D,this),this.city=new d(O,this),this.state_abbr=new u(L,this),this.city_display_name=new p(B,this),this.founded=new m(z,this),this.employees=new f(H,this),this.jobsadded=new g(j,this),this.website=new v(new String(V),this),this.id=new b(W,this),this.nextId=new y(q,this),this.next_badge_url={value:G},this.next_preview_text={value:Y},this.filelocation=new w(K,this),this.stateRank=new k(parseInt(X),this),this.metroRank=new I(parseInt(Q),this),this.industryRank=new C(parseInt(J),this),this.industryId=new x(Z,this),this.metroId=new S(ee,this),this.prevRankingsList=new i(te,this),this.country=new T(ie?ie:"United States",this),this.address=new A(ne,this),this.facebook=new M(se,this),this.linkedin=new P(oe,this),this.twitter=new E(ae,this),this.description=new N(re,this),this.ceo=new R(ce,this),this.years=he;"by_state"==U.sort?this.sort="Top "+e(F[this.state_abbr.value].toLowerCase())+" Companies":"by_industry"==U.sort?this.sort="Top "+this.industry.value+" Companies":"by_metro"==U.sort&&(this.sort="Top "+this.city_display_name.value+" Companies")}function L(e,t){this.description=e,this.link=t}function B(e){this.arr=e}var F={AL:"ALABAMA",AK:"ALASKA",AS:"AMERICAN SAMOA",AZ:"ARIZONA",AR:"ARKANSAS",CA:"CALIFORNIA",CO:"COLORADO",CT:"CONNECTICUT",DE:"DELAWARE",DC:"DISTRICT OF COLUMBIA",FM:"FEDERATED STATES OF MICRONESIA",FL:"FLORIDA",GA:"GEORGIA",GU:"GUAM",HI:"HAWAII",ID:"IDAHO",IL:"ILLINOIS",IN:"INDIANA",IA:"IOWA",KS:"KANSAS",KY:"KENTUCKY",LA:"LOUISIANA",ME:"MAINE",MH:"MARSHALL ISLANDS",MD:"MARYLAND",MA:"MASSACHUSETTS",MI:"MICHIGAN",MN:"MINNESOTA",MS:"MISSISSIPPI",MO:"MISSOURI",MT:"MONTANA",NE:"NEBRASKA",NV:"NEVADA",NH:"NEW HAMPSHIRE",NJ:"NEW JERSEY",NM:"NEW MEXICO",NY:"NEW YORK",NC:"NORTH CAROLINA",ND:"NORTH DAKOTA",MP:"NORTHERN MARIANA ISLANDS",OH:"OHIO",OK:"OKLAHOMA",OR:"OREGON",PW:"PALAU",PA:"PENNSYLVANIA",PR:"PUERTO RICO",RI:"RHODE ISLAND",SC:"SOUTH CAROLINA",SD:"SOUTH DAKOTA",TN:"TENNESSEE",TX:"TEXAS",UT:"UTAH",VT:"VERMONT",VI:"VIRGIN ISLANDS",VA:"VIRGINIA",WA:"WASHINGTON",WV:"WEST VIRGINIA",WI:"WISCONSIN",WY:"WYOMING"};t.prototype.getHrefAttr=function(){return"undefined"!=typeof this.url?"href='this.url+'".replace("this.url",this.url):""},t.prototype.view=function(){return'<li class="'+this.class_name+'">	              <a class="rank" '+this.getHrefAttr()+'>	                <div class="text">	                  <span class="numberSymbol">#</span>'+this.rank+'	                </div>	             </a>	              <div class="descriptionWrapper">	                <div class="description"><a'+this.getHrefAttr()+">this.category</a></div>	          </div>	            </li>".replace("this.className",this.class_name).replace("this.rank",this.rank).replace("this.category",this.category)},i.prototype.view=function(){return this.arr.length?'<section class="panel panel-prevrankings">      					<h2>Previous Inc. 5000 Rankings</h2>      						<dl>        						{{Company Previous Rankings}}      						</dl>    				</section>'.replace(/{{Company Previous Rankings}}/g,this.arr.map(function(e){return e.view()}).join("")):""},i.prototype.length=function(){return this.arr.length},n.prototype.view=function(){return'<dt class="year">{{year}}</dt><dd class="rank">#{{rank}}</dd>'.replace(/{{year}}/g,this.year).replace(/{{rank}}/g,this.rank)},s.prototype.view=function(e){e||(e=function(){return this.value});var t=e.call(this),i="function"==typeof this.propertyName?this.propertyName():this.propertyName;return t&&t.length?"<dt class='"+i.toLowerCase()+"'>"+i+"</dt><dd class='"+i.toLowerCase()+"'>"+t+"</dd>":""},o.prototype=Object.create(s.prototype),o.prototype.constructor=o,a.prototype=Object.create(s.prototype),a.prototype.constructor=a,r.prototype=Object.create(s.prototype),r.prototype.constructor=r,r.prototype.propertyName=function(){return this.company.years[0].ify_year+" Inc. 5000 Rank"},l.prototype=Object.create(s.prototype),l.prototype.constructor=l,l.prototype.propertyName=function(){return this.company.years[0].ify_year-1+" Revenue"},l.prototype.millionOrThousandDollars=function(e){return"undefined"==typeof e&&(e=!1),e?currencySign="":currencySign="$",this.numberOfDigits()>6?currencySign+this.millions(1):currencySign+this.value.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},l.prototype.numberOfDigits=function(){return this.value.toString().length},l.prototype.millions=function(e){var t=1e6,i=(Math.round(this.value/(t/Math.pow(10,e)))/Math.pow(10,e)).toString();return i+" M"},c.prototype=Object.create(s.prototype),c.prototype.constructor=c,h.prototype=Object.create(s.prototype),h.prototype.constructor=h,h.prototype.propertyName="Industry",d.prototype=Object.create(s.prototype),d.prototype.constructor=d,d.prototype.propertyName="Location",u.prototype=Object.create(s.prototype),u.prototype.constructor=u,p.prototype=Object.create(s.prototype),p.prototype.constructor=p,m.prototype=Object.create(s.prototype),m.prototype.constructor=m,m.prototype.propertyName="Founded",f.prototype=Object.create(s.prototype),f.prototype.constructor=f,f.prototype.propertyName="Employees",g.prototype=Object.create(s.prototype),g.prototype.constructor=g,g.prototype.propertyName="Jobs Added",v.prototype=Object.create(s.prototype),v.prototype.constructor=v,v.prototype.propertyName="Web site",b.prototype=Object.create(s.prototype),b.prototype.constructor=b,y.prototype=Object.create(s.prototype),y.prototype.constructor=y,w.prototype=Object.create(s.prototype),w.prototype.constructor=w,k.prototype=Object.create(s.prototype),k.prototype.constructor=k,I.prototype=Object.create(s.prototype),I.prototype.constructor=I,C.prototype=Object.create(s.prototype),C.prototype.constructor=C,x.prototype=Object.create(s.prototype),x.prototype.constructor=x,S.prototype=Object.create(s.prototype),S.prototype.constructor=S,T.prototype=Object.create(s.prototype),T.prototype.constructor=T,T.prototype.propertyName="Country",A.prototype=Object.create(s.prototype),A.prototype.constructor=A,A.prototype.propertyName="Address",A.prototype.view=function(){return this.company.country.value?"<dt class='"+this.propertyName.toLowerCase()+"'>"+this.propertyName+"</dt><dd class='"+this.propertyName.toLowerCase()+"'>"+this.value+"</dd>":""},M.prototype=Object.create(s.prototype),M.prototype.constructor=M,M.prototype.propertyName="Facebook",P.prototype=Object.create(s.prototype),P.prototype.constructor=P,P.prototype.propertyName="LinkedIn",E.prototype=Object.create(s.prototype),E.prototype.constructor=E,E.prototype.propertyName="Twitter",N.prototype=Object.create(s.prototype),N.prototype.constructor=N,N.prototype.view=function(){return this.value?'<section class="panel panel-inyourownwords"><h2>Business Description <span>(provided by company)</span></h2><img class="logo" alt="logo" src="http://www.placehold.it/180x130">'+this.value+"</section>":""},D.prototype=Object.create(s.prototype),D.prototype.constructor=D,R.prototype=Object.create(s.prototype),R.prototype.constructor=R,O.prototype={_3yeargrowth:function(){return new Number(Math.round((this._2013revenue.value-this._2010revenue.value)/this._2010revenue.value*1e3/10))},location:function(){return"United States"===this.country.value?this.city.value+", "+this.state_abbr.value:this.city.value},badgeURL:function(){return"United States"!=this.country.value?"http://images.inc.com/img_gen/inc5000_"+this.years[0].ify_year+"_europe/inc5000_num_"+this.rank.value+".png":"http://images.inc.com/img_gen/inc5000_"+this.years[0].ify_year+"/inc5000_num_"+this.rank.value+".png"},getRenderedTemplate:function(){return this.logoURL="http://www.placehold.it/180x130",document.getElementById("profileTemplate").innerHTML.replace(/{{Company ID}}/g,this.id.value).replace(/{{Company Name}}/g,this.name.value).replace(/{{Company Logo URL}}/g,this.logoURL.value?'<img class="logo" alt="logo" src="'+this.logoURL.value+'">':"").replace(/{{Company Badge URL}}/g,this.badgeURL()).replace(/{{Company Year}}/g,this.years[0].ify_years).replace(/{{Company Business Model}}/g,this.businessModel.value).replace(/{{Company Revenue}}/g,this._2013revenue.view(function(){return this.millionOrThousandDollars()})).replace(/{{Company Rank}}/g,this.rank.view(function(){return"#"+this.value})).replace(/{{Company ThreeYearGrowth}}/g,this._3yeargrowth()+"%").replace(/{{Company Jobs Added}}/g,this.jobsadded.value).replace(/{{Company Country}}/g,this.country.view()).replace(/{{Company Location}}/g,this.city.view(function(){return this.company.location()})).replace(/{{Company Year Founded}}/g,this.founded.value).replace(/{{Company Industry}}/g,this.industry.value).replace(/{{Company CEO}}/g,this.ceo.value).replace(/{{Company Employee Count}}/g,this.employees.value).replace(/{{Company Website URL}}/g,this.website.value).replace(/{{Company Facebook URL}}/g,this.facebook.view(function(){return this.value?"<a href='http://www.facebook.com/"+this.value+"'>"+this.value+"</a>":""})).replace(/{{Company LinkedIn URL}}/g,this.linkedin.view(function(){return this.value?"<a href='http://www.linkedin.com/"+this.value+"'>"+this.value+"</a>":""})).replace(/{{Company Twitter Handle}}/g,this.twitter.view(function(){return this.value?"<a href='http://www.twitter.com/"+this.value+"'>"+this.value+"</a>":""})).replace(/{{Company Public URL}}/g,"inc.com/profile/"+this.filelocation.value).replace(/{{Company Honors}}/g,this.honors().length?"<section class=\"panel panel-honors\">						      <h2>2015 Inc. 5000 Honors</h2>						      <ul class='honors'>						        {{Company Honors}}						      </ul>						      </section>".replace(/{{Company Honors}}/g,this.honors().map(function(e){return e.view()}).join("")):"").replace(/{{Related Lists}}/g,this.relatedLists().map(function(e){return e.view()}).join("")).replace(/{{Company Previous Rankings}}/g,this.prevRankingsList.view()).replace(/{{Company Description}}/g,this.description.view()).replace(/{{Company Custom Video}}/g,_.template(document.getElementById("customVideo").innerHTML)({ifcid:this.id.value}))},setupMustReads:function(e){return this.mustReadsSidebar=new Inc.Widgets.MustReads({el:e,className:"MustReads MustReadsSidebar",template:_.template($("#MustRead-Sidebar-Template").html())}),this.mustReadsSidebar.render(),this},onMustReadItemClick:function(e,t,i){if(trackEvent("mustread",t),0==(e.get("inc_override_url")+"").search("http://"))return window.open(e.get("inc_override_url"),"_blank"),this;if(0==(e.get("inc_filelocation")+"").search("http://"))return window.open(e.get("inc_filelocation"),"_blank"),this;t++;var n=e.get("inc_filelocation")||"";return window.location.href=0==n.search("http")?n:inc.applicationURL+n,this},setupProfileUpDown:function(){var e=inc.currentController;return e.profileUpDown?this:(e.profileUpDown=new Inc.Accessories.ProfileUpDown({el:$(".SectionUpDown")[0],controller:e,nextSectionModel:{id:this.nextId.value,badgeURL:this.next_badge_url.value,previewText:this.next_preview_text.value}}),e.listenTo(e.profileUpDown,"goto:section:previous",function(t){e.currentProfileIndex>0&&e.scrollToProfile(e.getPageElement("MainPatternContainer").subUnits[e.currentProfileIndex-1])}),e.listenTo(e.profileUpDown,"goto:section:next",function(t){e.currentProfileIndex>=e.profiles.length-1&&e.load(e.currentProfileIndex+1);var i=e.getPageElement("MainPatternContainer").subUnits[e.currentProfileIndex+1];i&&e.scrollToProfile(i)}),this)},view:function(){var e=inc.currentController.profiles.last();inc.adManager.createAds({groupName:this.list.getAdGroupName(),options:{name:"sponsor-logo",type:"flexiblelogo",mq:["medium","large"],collapse:!0,pos:"top"}});var t=({relatedLists:this.relatedLists()},this.id.value),i=inc.currentController.getPageElement("MainPatternContainer");i.dataAvailable([{responsive:this.getRenderedTemplate(),profileId:t}]),$("#company"+t).find(".ShareContainer").each(function(){inc.currentController.setupPageShareBox(_.extend({elementID:"share"+t},e.shareInfo))}),this.setupProfileUpDown(),this.setupMustReads($("#company"+t).find(".MustReads")[0]),this.listenTo(this.mustReadsSidebar,"article:click",this.onMustReadItemClick),inc.adManager.refreshGroup("scroll"+(inc.currentController.profiles.length-1)),$(".ie8 .Inc5000ProfileTile .profile .responsive .RankTable .tablerow:last-child .dtddwrapper:last-child dt").css({width:"170px","white-space":"normal",position:"relative",right:"33px"}),$(".ie8 .Inc5000ProfileTile .profile .responsive .RankTable .tablerow:last-child .dtddwrapper:last-child dd").css({width:"170px","white-space":"normal",position:"relative",right:"33px"})},generateIndustryLink:function(){var e=this.industry.value.toLowerCase().replace(/ & /g,"-").replace(/ /g,"-");return"United States"==this.country.value?inc.applicationURL+"inc5000/list/"+this.years[0].ify_year+"/industry/"+e:inc.applicationURL+"inc5000eu/list/"+this.years[0].ify_year+"/industry/"+e},generateStateLink:function(){return inc.applicationURL+"inc5000/list/"+this.years[0].ify_year+"/state/"+this.state_abbr.value.toLowerCase()},generateMetroLink:function(){if(this.city_display_name.value){var e=this.city_display_name.value.toLowerCase().replace(/ & /g,"-").replace(/ /g,"-");return e.indexOf(",")>-1&&(e=e.substring(0,e.indexOf(","))),inc.applicationURL+"inc5000/list/"+this.years[0].ify_year+"/metro/"+e}},relatedLists:function(){var t=new Array;return null!==this.industry.value&&t.push(new L("More Companies in "+this.industry.value,this.generateIndustryLink())),null!==this.state_abbr.value&&t.push(new L("More Companies in "+e(F[this.state_abbr.value].toLowerCase()),this.generateStateLink())),null!==this.city_display_name.value&&t.push(new L("More Companies in "+this.city_display_name.value,this.generateMetroLink())),t},honors:function(){function i(e){this.arr=e}if("2015"!==this.years[0].ify_year)return[];i.prototype.view=function(){};var n=new Array;return("undefined"!=typeof this.industryRank.value||null!=this.industryRank.value)&&this.industryRank.value<=20&&n.push(new t(this.industryRank.value,"Top "+this.industry.value+" companies","industry_badge",this.generateIndustryLink())),("undefined"!=typeof this.industryRank.value||null!=this.industryRank.value)&&this.stateRank.value<=20&&n.push(new t(this.stateRank.value,"Top "+e(F[this.state_abbr.value].toLowerCase())+" companies","state_badge",this.generateStateLink())),0!==this.metroRank.value&&this.metroRank.value<=20&&n.push(new t(this.metroRank.value,this.city_display_name.value+" Metro Area","metro_badge",this.generateMetroLink())),this.prevRankingsList.length()>=4&&n.push(new t(0,"Five-Time Inc. 5000 Honoree","honoree_badge")),n}},_.extend(O.prototype,Backbone.Events),L.prototype.view=function(){return"<li><a href='"+this.link+"'>"+this.description+"</a>"};var U=this.queryString();B.prototype.length=function(){return this.arr.length},B.prototype.pushCompany=function(e,t,i,n,s,o,a,r,l,c,h,d,u,p,m,f,g,v,b,y,w,_,k,I,C,$,x,S,T,A,M,P,E){return this.arr.push(new O(e,t,i,n,s,o,a,r,l,c,h,d,u,p,m,f,g,v,b,y,w,_,k,I,C,$,x,S,T,A,M,P,E)),this.arr.last().list=this,this},B.prototype.last=function(){return this.arr[this.arr.length-1]},B.prototype.getAdGroupName=function(){return"scroll"+(this.length()-1)},B.prototype.getFromServer=function(e){inc.currentController.loading=!0,window.sort=function(){return"undefined"==typeof U.sort?"full_list":U.sort}(),$.ajax({url:inc.restURL+"inc5000company/"+e+"/"+sort,success:function(e){window.response=e;var t,i,s;e.data.ifc_twitter_handle&&""!=e.data.ifc_twitter_handle.trim()?(t=".@"+e.data.ifc_twitter_handle+" makes the Inc. 5000 2014!",i="Inc5000",s="Inc"):(t=e.data.ifc_company+" makes the @Inc5000 "+_.first(e.data.years).ify_year+"!",i="Inc",s="Inc5000"),e.data.shareInfo={shareTitle:e.data.ifc_company,twitterTitle:t,shareURL:inc.applicationURL+"profile/"+e.data.ifc_filelocation,shareDeck:"The Inc. 5000 celebrates America's fastest-growing private companies.",shareImage:"http://images.inc.com/img_gen/inc5000_"+_.first(e.data.years).ify_year+"/inc5000_num_"+_.first(e.data.years).ify_rank+".png",via:i,related:s},(0==inc.currentController.profileIds.length||-1==inc.currentController.profileIds.indexOf(e.data.id))&&(inc.currentController.profileIds.push(e.data.id),inc.currentController.profiles.push(e.data),this.pushCompany(e.data.ifc_company,e.data.ifc_business_model,e.data.current_industry_rank,e.data.app_revenues_lastyear,e.data.app_revenues_fouryearsago,e.data.ifi_industry,e.data.ifc_city,e.data.ifc_state,e.data.city_display_name,e.data.ifc_founded.substring(0,4),e.data.app_employ_lastyear,e.data.app_employ_lastyear-e.data.app_employ_fouryearsago,e.data.ifc_url,e.data.id,e.data.next_id,e.data.next_badge_url,e.data.next_preview_text,e.data.ifc_filelocation,e.data.state_rank,e.data.metro_rank,e.data.industry_rank,e.data.industry_id,e.data.metro_id,e.data.years.map(function(e){return new n(e.ify_year,e.ify_rank)}).filter(function(e){return"2015"!==e.year}),e.data.country,e.data.address,e.data.facebook,e.data.linkedin,e.data.twitter,e.data.description,e.data.revenueRange,e.data.ceo,e.data.years),this.last().view(),inc.currentController.loading=!1,"2014"!=_.first(e.data.years).ify_year&&(inc.currentController.noMoreMainContent=!0,$("#MainPatternContainer .loadMoreBackground").hide()),$(".ie8").find(".RankTable .dtdd").css({width:"126px"}),$(".ie8").find(".relatedListItem").each(function(){$(this).find(".column").eq(0).css({width:"23px"}),$(this).find(".column").eq(1).css({width:"262px"})}),$(".ie8").find(".MoreFromTheInc5000 .columns").each(function(){$(this).find(".column").eq(0).css({width:"55px"}),$(this).find(".column").eq(1).css({width:"237px"})}),$(".ie8 dd:nth-child(2),.ie8 dd:nth-child(4),.ie8 dd:nth-child(6),.ie8 dd:nth-child(8)").addClass("ie8-panel-address-nth-2-nth-4-nth-6-nth-8"),$(".ie8 dt:not(:nth-last-child(2)),.ie8 dd:not(:last-child)").addClass("ie8-panel-address-not-nth-last-2-not-last")),inc.currentController.loading=!1}.bind(this)})},B.prototype.getNextFromServer=function(){this.getFromServer(this.last().nextId.value)},this.companies=new B([]);var z=inc.currentController.getPageElement("MainPatternContainer");return z.printNextPattern("scroll0"),inc.scrollMonitor.processScroll(),this.loading=!0,this.companies.getFromServer(inc.i.profileID),window.companies=this.companies,$(".ie8 dd:nth-child(2),dd:nth-child(4),dd:nth-child(6),dd:nth-child(8)").addClass("ie8-panel-address-nth-2-nth-4-nth-6-nth-8"),this},scrollToProfile:function(e){inc.scrollMonitor.dontRefreshAds=!0;for(var t=this.getPageElement("MainPatternContainer").subUnits,i=null,n=0;n<t.length;n++)if(t[n].elementID==e.elementID){i=n;break}if(_.isNull(i))return this;var s=$("#"+e.elementID);if(0==s.length)return this;var o=s.offset().top-inc.topNav.getDistanceOfBottomFromTop();return 0==i&&(o=0),$("html, body").stop().animate({scrollTop:o},{complete:function(){inc.scrollMonitor.dontRefreshAds=!1,inc.scrollMonitor.processScroll()}},500),this},setupPageShareBox:function(e){var t='<div id="<%= ob.elementID %>" class="<%= ob.classes.join(\' \') %>"><div class="DisabledMask"></div><div class="ShareBoxButtons"></div><div class="ShareBoxLabel"></div></div>',i=Inc.Accessories.ShareBox.spawn({classes:"PageShareBox",controller:this,parentElementID:e.elementID,template:t,buttons:{facebook:{title:e.shareTitle,url:e.shareURL,caption:"Inc.com",description:e.shareDeck,media:{url:e.shareImage},actionLinkName:e.shareTitle,actionLinkURL:e.shareURL},twitter:{title:e.twitterTitle,url:e.shareURL,via:e.via,related:e.related},googleplus:{url:e.shareURL,clickedCallback:_.bind(this.googlePlusButtonClicked,this)},linkedin:{title:e.shareTitle,url:e.shareURL,summary:e.shareDeck},reddit:{title:inc.i.shareTitle,url:inc.i.shareURL},stumbleupon:{url:e.shareURL},mail:{subject:e.shareTitle,body:e.shareTitle+"\n"+e.shareURL}}});return this.pageShareBoxes.push(i),window.shareBox=i,i.render(),$("#"+e.elementID+" .ShareBoxLabel").sharrre({share:{facebook:!0,twitter:!0,linkedin:!0,googlePlus:!0,pinterest:!0},url:e.shareURL,template:"{total} SHARES",urlCurl:inc.applicationURL+"sharrre.php",enableHover:!1}),this},recordCompanyProfileImpression:function(e,t){var i=s_gi(s_account);return i.pageName=inc.applicationURL+(e.get("inc_filelocation")||""),i.server="loadunder",i.prop3=e.get("inc_headline")||e.get("inc_title")||"",i.prop4=i.pageName,0!=usrid&&""!=usrid?i.prop21="member":i.prop21="guest",i.prop22=i.prop21+"+"+i.pageName,0!=usrid&&(i.prop27=usrid),i.prop28="article",i.eVar49=Inc.Utilities.getCookie("abgrp"),i.events="event9",i.t(),setTimeout(function(){COMSCORE.beacon({c1:2,c2:6916907})},100),this}}),Inc.Widgets.Inc5000TopThreeLists=Inc.ToggleView.extend({type:"TopThreeListsWidget",tagName:"section",className:"top-three-lists-widget",initialize:function(e){e||(e={}),Inc.ToggleView.prototype.initialize.apply(this,arguments),this.$el.attr("id",this.oid)},events:function(){return{"click .industries-head":"onIndustriesClick","click .top-three-button-industries":"onIndustriesClick","click .states-head":"onStatesClick","click .top-three-button-states":"onStatesClick","click .metro-areas-head":"onMetroAreasClick","click .top-three-button-metro-areas":"onMetroAreasClick"}},deactivate:function(){return this.active&&(this.$el.toggleClass("industries-active",!1),this.$el.toggleClass("states-active",!1),this.$el.toggleClass("metro-areas-active",!1)),Inc.ToggleView.prototype.deactivate.apply(this,arguments),this},onIndustriesClick:function(e){return"small"==inc.mqState&&$(e.currentTarget).hasClass("industries-head")?this:(this.active&&this.$el.hasClass("industries-active")?this.deactivate():(this.activate(),this.$el.toggleClass("industries-active",!0),this.$el.toggleClass("states-active",!1),this.$el.toggleClass("metro-areas-active",!1)),this)},onStatesClick:function(e){return"small"==inc.mqState&&$(e.currentTarget).hasClass("states-head")?this:(this.active&&this.$el.hasClass("states-active")?this.deactivate():(this.activate(),this.$el.toggleClass("industries-active",!1),this.$el.toggleClass("states-active",!0),this.$el.toggleClass("metro-areas-active",!1)),this)},onMetroAreasClick:function(e){return"small"==inc.mqState&&$(e.currentTarget).hasClass("metro-areas-head")?this:(this.active&&this.$el.hasClass("metro-areas-active")?this.deactivate():(this.activate(),this.$el.toggleClass("industries-active",!1),this.$el.toggleClass("states-active",!1),this.$el.toggleClass("metro-areas-active",!0)),this)}}),Inc.Pages.Inc5000Channel=Inc.Pages.Channel.extend({type:"Inc5000ChannelPage",init:function(e){return e||(e={}),this.showPinboardHeader=!1,inc.displayedIDs=inc.displayedIDs.concat(inc.i.initiallyDisplayedArticleIDs),Inc.Pages.Channel.init.apply(this,arguments),inc.scrollMonitor.addScrollUnit(".ChannelSection .SectionHeader"),inc.adManager.addEmptyAdGroup("scroll1"),inc.scrollMonitor.addScrollUnit("#inc5000landeradvert1"),inc.adManager.createAds([{groupName:"scroll1",options:{name:"inc5000FlexibleBillboard",type:"flexiblebillboard",mq:["medium","large"],collapse:!0,pos:"top"}},{groupName:"scroll1",options:{name:"inc5000MobileRectangle",type:"mobilerectangle",mq:["small"],collapse:!0,pos:"top"}}]),this.featurePicture=new Inc.Views.Picture({el:$("#inc5000feature .picture")}),this.listenTo(this.featurePicture,"loaded",function(){this.featurePicture.errored&&$("#inc5000feature .panographic-image").hide()}),this.topThreeLists=new Inc.Widgets.Inc5000TopThreeLists({el:$(".top-three-lists-widget")[0]}),this.listenTo(dispatcher,"window:resized",this.onWindowResized),this},display:function(){return Inc.Pages.Archetype.display.apply(this,arguments),this.setupPageShareBoxes("ShareContainerUpper"),inc.scrollMonitor.processScroll(),this},onWindowResized:function(){var e=$("#col-l"),t=$("#col-r");return"absolute"==e.css("position")?t.css("min-height",e.outerHeight()+"px"):t.css("min-height",""),
this},adjustPaddingForSponsorLogo:function(e,t){e&&inc.adManager.standardAdCallback.apply(this,arguments),e.isEmpty?$(".SectionHeader > .section-header-inner").css("padding-right",""):$(".SectionHeader > .section-header-inner").css("padding-right","126px")}}),Inc.Pages.ResetPassword=Inc.Pages.Archetype.extend({type:"ResetPasswordPage",init:function(e){return e||(e={}),Inc.Pages.Archetype.init.apply(this,arguments),this.registerTopOfPageAds(),this.setWrapperContainerMinHeight(),"reset"==inc.i.op&&$(".ResetPasswordSection form").on("submit",function(e){var t=$(this).find(".reset-text-input-one").val(),i=$(this).find(".reset-text-input-two").val();""==t||""==i?(e&&e.preventDefault(),$(this).find(".reset-password-error-message").show().html("Please enter both passwords.")):t!=i&&(e&&e.preventDefault(),$(this).find(".reset-password-error-message").show().html("The passwords must match."))}),this},display:function(){return inc.adManager.refreshGroup("scroll0"),this}}),Inc.Pages.Staff=Inc.Pages.Archetype.extend({type:"ResetPasswordPage",init:function(e){return e||(e={}),Inc.Pages.Archetype.init.apply(this,arguments),this.registerTopOfPageAds(),this},display:function(){return inc.adManager.refreshGroup("scroll0"),this}}),Inc.Pages.Columnists=Inc.Pages.Archetype.extend({type:"ResetPasswordPage",init:function(e){return e||(e={}),Inc.Pages.Archetype.init.apply(this,arguments),this.registerTopOfPageAds(),this},display:function(){return inc.adManager.refreshGroup("scroll0"),this}}),Inc.Pages.VideoSeries=Inc.Pages.Archetype.extend({type:"VideoSeriesPage",init:function(e){return e||(e={}),Inc.Pages.Archetype.init.apply(this,arguments),this.newsletterSignup=null,this.socialFollow=null,this.registerTopOfPageAds(),inc.adManager.createAds([{groupName:"scroll0",options:{name:"videosidebarFixedRectangle",type:"flexiblehalfpage",mq:["medium","large"],collapse:!0,pos:"bot"}},{groupName:"scroll0",options:{name:"videosidebarFixedRectangle",type:"fixedrectangle",mq:["medium","large"],collapse:!0,pos:"bot"}}]),setInterval(function(){"large"!=inc.mqState?$(".maincolumn").css("min-height","0px"):"none"==$(".sidebar").css("display")||$(".sidebar").height()<$(".maincolumn").height()?$(".maincolumn").css("min-height","0px"):$(".maincolumn").css("min-height",$(".sidebar").height()+"px")},1e3),this},display:function(){return inc.adManager.refreshGroup("scroll0"),this.setupPageShareBoxes("ShareContainerUpper"),this.newsletterSignup=new Inc.Widgets.NewsletterSignup({el:$(".sidebar_inner .NewsletterSignup")[0]}),this.newsletterSignup.render(),this.socialFollow=new Inc.Widgets.SocialFollow({el:$(".sidebar_inner .SocialFollow")[0]}),this.socialFollow.render(),this},setupPageShareBoxes:function(e){_.isArray(e)||(e=[e]);for(var t=0;t<e.length;t++){var i='<div id="<%= ob.elementID %>" class="<%= ob.classes.join(\' \') %>"><div class="DisabledMask"></div><div class="ShareBoxButtons"></div><div class="ShareBoxLabel"></div></div>',n=Inc.Accessories.ShareBox.spawn({classes:"PageShareBox",controller:this,parentElementID:e[t],template:i,buttons:{facebook:{title:inc.i.shareTitle,url:inc.i.shareURL,caption:"Inc.com",description:inc.i.shareDeck,actionLinkName:inc.i.shareTitle,actionLinkURL:inc.i.shareURL},twitter:{title:inc.i.shareTitle,url:inc.i.shareURL},googleplus:{url:inc.i.shareURL,clickedCallback:_.bind(this.googlePlusButtonClicked,this)},linkedin:{title:inc.i.shareTitle,url:inc.i.shareURL,summary:inc.i.shareDeck},reddit:{title:inc.i.shareTitle,url:inc.i.shareURL},stumbleupon:{url:inc.i.shareURL},mail:{subject:inc.i.shareTitle,body:inc.i.shareTitle+"\n"+inc.i.shareURL}}});this.pageShareBoxes.push(n),n.render()}return $(".PageShareBox .ShareBoxLabel").sharrre({share:{facebook:!0,twitter:!0,linkedin:!0,googlePlus:!0},url:inc.i.shareURL,template:"{total} SHARES",urlCurl:inc.applicationURL+"sharrre.php",enableHover:!1}),this}}),Inc.Slideshow.Player=Inc.Areas.Archetype.extend({type:"SlideshowPlayer",className:"SlideshowPlayer",template:_.template($("#SlideshowPlayer-Template").html()),initialize:function(e){e||(e={}),Inc.Areas.Archetype.prototype.initialize.apply(this,arguments),this.slideshows=new Inc.Collections.Slideshow,this.slides=[],this.captions=[],this.currentSlideshowID=null,this.currentFrame=0,this.adGroup=e.adGroup||null,this.loadingAnotherSlideshow=!1,this.animating=!1,this.showingTransitionOverlay=!1,this.prerendered=_.isBoolean(e.prerendered)?e.prerendered:!1,this.lastManuallyRefreshed=null,this.oldScrollTop=0,this.embedded=_.isBoolean(e.embedded)?e.embedded:!1,this.hoverStateSetup=!1,this.interstitialCounter=0,this.slidesBetweenInterstitials=3,this.shareBox=null,this.transitionOverlayCounter=0,this.prerendered?(this.adGroup=this.$el.attr("id"),this.embedded||(this.adGroup="scroll0")):(this.$el.attr("id",this.oid),"create"==inc.i.mod?this.adGroup="scroll0":(this.adGroup||(this.adGroup=this.oid,inc.adManager.addEmptyAdGroup(this.adGroup)),inc.adManager.createAds([{groupName:this.adGroup,options:{name:"SlideshowPlayerIMU",type:this.embedded?"morerectangle":"ssrectangle",mq:["medium","large"],collapse:!1,pos:"top"}},{groupName:this.adGroup,options:{name:"SlideshowPlayerLeaderboard",type:this.embedded?"moreleaderboard":"ssleaderboard",mq:["medium","large"],collapse:!1,pos:"top"}},{groupName:this.adGroup,options:{name:"SlideshowPlayer-Interstitial-IMU",type:this.embedded?"moreinterstitialrectangle":"ssinterstitialrectangle",mq:["small"],collapse:!1,pos:"top",onlyRefreshWhenExplicitlyCalled:!0}}])),this.$el.append(this.template(this))),this.embedded&&inc.scrollMonitor.addIndependentAdGroup({elementID:"#"+this.$el.attr("id"),adGroup:this.adGroup,specialCondition:function(){return"large"!=inc.mqState||this.$el.hasClass("expanded")}.bind(this)});var t=inc.adManager.getAdGroup(this.adGroup);t&&this.listenTo(t,"refreshed",function(e,t){this.trigger("refreshed",this,e,t)}),this.$slideshow=this.$(".Slideshow"),this.$interstitial=this.$slideshow.children(".InterstitialIMU-Slide"),this.fullscreen=!1,screenfull.enabled&&(this.listenTo(dispatcher,"fullscreen:enter",this.onEnterFullscreen),this.listenTo(dispatcher,"fullscreen:exit",this.onExitHTML5Fullscreen)),this.leftArrow=new Inc.ToggleView({el:this.$(".NavigateLeft")[0]}),this.rightArrow=new Inc.ToggleView({el:this.$(".NavigateRight")[0]}),this.centralOverlay=new Inc.ToggleView({el:this.$(".CentralOverlay")[0]}),this.addSlideButton=new Inc.ToggleView({el:this.$(".AddSlideButton")[0]}),this.deleteSlideButton=new Inc.ToggleView({el:this.$(".DeleteSlideButton")[0]}),this.exitFullscreenButton=new Inc.ToggleView({el:this.$(".ExitFullscreenButton")[0]}),this.galleryButton=new Inc.ToggleView({el:this.$(".GalleryButton")[0]});var i=Inc.GestureRecognizers.Swipe.spawn({direction:["left","right"]});this.listenTo(i,"gesture:swipe",this.onSlideshowSwipe),this.leftArrow.addGestureRecognizer(i);var n=Inc.GestureRecognizers.Swipe.spawn({direction:["left","right"]});this.listenTo(n,"gesture:swipe",this.onSlideshowSwipe),this.rightArrow.addGestureRecognizer(n);var s=Inc.GestureRecognizers.Swipe.spawn({direction:["left","right"]});this.listenTo(s,"gesture:swipe",this.onSlideshowSwipe),this.exitFullscreenButton.addGestureRecognizer(s);var o=Inc.GestureRecognizers.Swipe.spawn({direction:["left","right"]});this.listenTo(o,"gesture:swipe",this.onSlideshowSwipe),this.exitFullscreenButton.addGestureRecognizer(o),this.listenTo(this,"fullscreen:enter",function(){console.log("fullscreen:enter")}),this.listenTo(this,"fullscreen:exit",function(){console.log("fullscreen:exit")}),this.listenTo(dispatcher,"window:resized",this.resize),this.thumbnailNav=new Inc.Slideshow.ThumbnailNav({el:this.$(".ThumbnailNav"),prerendered:this.prerendered}),this.thumbnailNav.listenTo(this,"slideshow:navigate",this.thumbnailNav.onSlideshowNavigate),this.embedded&&"large"==inc.mqState&&this.setupHoverState(),Modernizr.csstransitions&&this.$el.on("transitionend webkitTransitionEnd oTransitionEnd otransitionend MSTransitionEnd",function(e){e.originalEvent&&"opacity"==e.originalEvent.propertyName?0==parseInt(this.$(".LoadingGraphicContainer").css("opacity"))&&this.$(".LoadingGraphicContainer").css("z-index","10"):this.resize(!0,!0)}.bind(this)),e.slideshows&&(!_.isArray(e.slideshows)&&(e.slideshows=[e.slideshows]),_.each(e.slideshows,function(e,t){if(inc.collections.slideshow.get(e.id||e.getID())){var i=inc.collections.slideshow.get(e.id||e.getID());this.slideshows.add(i)}else{inc.collections.slideshow.add(e);var i=inc.collections.slideshow.get(e.id||e.getID());this.slideshows.add(i),0!=t||i.isNew()||i.fetch()}},this),this.loadSlideshow(this.slideshows.first())),this.prerendered||this.$el.data("playerSetup",!0);var a=new Image;a.src="http://images.inc.com/slideshow/titlecard-bg-tile-retina.png",this.listenTo(dispatcher,"inc:mode:edit:on",this.onEnterEditMode),this.listenTo(dispatcher,"inc:mode:edit:off",this.onExitEditMode),inc.isMode("edit")&&this.onEnterEditMode()},events:function(){return{"click.inc:content:edit":"click","click .CentralOverlay":"onCentralOverlayClick","click .ExitFullscreenButton":"exitFullscreen","click .NavigateLeft":"previousSlide","click .NavigateRight":"nextSlide","click .ClosePlayerButton":"contract","click .AddSlideButton":"addSlide","click .DeleteSlideButton":"deleteSlide"}},loadSlideshow:function(e,t){t||(t={});var i=this;if(this.slideshows.add(e),e.ready)if(e.slidesLoaded){_.isBoolean(t.animate)||(t.animate=!0),this.animating=!0,_.isBoolean(t.refreshAds)&&t.refreshAds&&this.refreshAds();var n=!1,s=!1,o=null;t.animate&&this.slideshows.size()>1&&this.slideshows.indexOf(this.slideshows.get(this.currentSlideshowID))==this.slideshows.indexOf(e)-1?(n=!0,o=this.slideshows.get(this.currentSlideshowID)):t.animate&&this.slideshows.size()>1&&this.slideshows.indexOf(this.slideshows.get(this.currentSlideshowID))==this.slideshows.indexOf(e)+1&&(s=!0,o=this.slideshows.get(this.currentSlideshowID)),this.currentSlideshowID=e.getID();var a=null;_.each(this.slides,function(e,t,i){s&&0==t||n&&t==i.length-1?a=e:e.trash()}),this.slides=[],_.each(this.captions,function(e,t,i){e.trash()}),this.captions=[],this.currentFrame=_.isNumber(t.frame)?t.frame:0,s&&(this.currentFrame=e.slides.size()-1),e.slides.each(function(t,i){var s=this;if(this.prerendered){var o=new Inc.Slideshow.Slide({model:t,el:this.$slideshow.children()[i],prerendered:!0});o.hide(),this.slides.push(o);var a=new Inc.Slideshow.SlideCaption({model:t,el:this.$(".SlideCaption-"+t.getID())[0],prerendered:!0});a.hide(),this.captions.push(a)}else{var o=new Inc.Slideshow.Slide({model:t});o.hide(),this.slides.push(o),this.$slideshow.append(o.$el);var a=new Inc.Slideshow.SlideCaption({model:t});a.hide(),this.captions.push(a),this.$(".IMU-Container").before(a.$el)}if(o.index=i,n&&0==i){this.showingTransitionOverlay=!0,o.$el.append(_.template($("#Slideshow-TransitionOverlay-Template").html())({model:e})),this.transitionOverlayCounter++;var r=this.transitionOverlayCounter;setTimeout(function(){s.hideTransitionOverlay(r)},4e3)}this.listenTo(o,"loaded",function(){setTimeout(function(){s.resize()},20)}),this.listenTo(o,"change:picture",this.resize),this.listenTo(o,"crop:image:requested remove:image add:image image:togglefixedheight",function(e){this.requestingLocks||(this.hasUneditableModels()?this.lockRequested(null,e):e())}),this.listenTo(o,"crop:image:start",function(e){this.getEditor(e.picture.cropTool.oid)||this.addEditor(e.picture.cropTool),this.$el.toggleClass("disableNonSlideComponents",!0)}),this.listenTo(o,"crop:image:stop",function(e){this.$el.toggleClass("disableNonSlideComponents",!1)}),this.listenTo(a,"showMore",this.onCaptionExpansion),this.listenTo(a,"showLess",function(e){this.$(".Outer").css("height","")})},this),this.listenTo(e,"change:sls_name",function(e,t,i){i.origin&&i.origin instanceof Inc.Editors.Archetype||this.$(".SlideshowName").html(t)}),this.prerendered||this.$(".SlideshowName").html(e.get("sls_name")),this.listenTo(e,"change:slides",this.onSlidesChange),this.resize(),n?(a.$el.toggleClass("animate",!0),this.slides[this.currentFrame].$el.toggleClass("inNextPosition",!0).toggleClass("animate",!0)):s&&(a.$el.toggleClass("animate",!0),this.slides[this.currentFrame].$el.toggleClass("inPreviousPosition",!0).toggleClass("animate",!0)),this.slides[this.currentFrame].show(),this.slides.length>3&&this.slides[this.currentFrame].$el.toggleClass("animate",!0);var r=_.find(this.captions,function(t){return t.model.getID()==e.slides.at(this.currentFrame).getID()},this);r&&r.show();var l=this.currentFrame-1>=0?this.currentFrame-1:this.slides.length-1;this.slides[l].show(),this.slides.length>3?this.slides[l].$el.toggleClass("inPreviousPosition",!0).toggleClass("animate",!0):l!=this.currentFrame&&this.slides[l].hide();var c=this.currentFrame+1<this.slides.length-1?this.currentFrame+1:0;this.slides[c].show(),this.slides.length>3?this.slides[c].$el.toggleClass("inNextPosition",!0).toggleClass("animate",!0):c!=this.currentFrame&&this.slides[c].hide(),this.thumbnailNav.displayThumbnails(e.slides),_.each(this.thumbnailNav.thumbnails,function(e){this.listenTo(e,"click",this.onItemClick)},this),s&&this.thumbnailNav.$listContainer.scrollLeft(this.thumbnailNav.$list.width()-this.thumbnailNav.$listContainer.width());var h=new Inc.Editors.InlineText({el:this.$(".SlideshowName")[0],model:e,label:e.labels().sls_name,fieldname:"sls_name",variant:"singleline",dontRequestLockOnInit:!0});h.$editable.data("editorID",h.oid),this.addEditor(h);var d=new Inc.Slideshow.ThumbnailSorter({el:this.$(".ThumbnailNav-List")[0],model:e,label:e.labels().slides,fieldname:"slides",dontRequestLockOnInit:!0});d.$editable.data("editorID",d.oid),this.thumbnailNav.setThumbnailSorter(d),this.addEditor(d),_.each(this.captions,function(e){var t=new Inc.Editors.InlineText({el:e.$(".CaptionTitle")[0],model:e.model,label:e.model.labels().sld_name,fieldname:"sld_name",variant:"singleline",dontRequestLockOnInit:!0});t.$editable.data("editorID",t.oid),this.addEditor(t);var i=new Inc.Editors.InlineText({el:e.$(".Caption")[0],model:e.model,label:e.model.labels().sld_caption,fieldname:"sld_caption",dontRequestLockOnInit:!0});i.$editable.data("editorID",i.oid),this.addEditor(i)},this),this.embedded&&this.setupShareButtons(),this.prerendered=!1,e.displayed=!0,s||n?(setTimeout(function(){n?(a.$el.toggleClass("inPreviousPosition",!0),i.slides[i.currentFrame].$el.toggleClass("inNextPosition",!1)):s&&(a.$el.toggleClass("inNextPosition",!0),i.slides[i.currentFrame].$el.toggleClass("inPreviousPosition",!1))},10),setTimeout(function(){a&&a.trash(),i.animating=!1,i.trigger("slideshow:changed",e)},350)):(this.animating=!1,this.trigger("slideshow:changed",e))}else this.listenToOnce(e,"slidesLoaded",this.loadSlideshow);else this.listenToOnce(e,"ready",this.loadSlideshow),e.updating||e.fetch();return this},refreshAds:function(){return(_.isNull(this.lastManuallyRefreshed)||moment().diff(this.lastManuallyRefreshed)>5e3)&&(this.lastManuallyRefreshed=moment(),"small"==inc.mqState?inc.adManager.refreshGroup("mobilefixed",!0):this.embedded?inc.adManager.refreshGroup(this.adGroup,!0):inc.adManager.refreshGroup(this.adGroup,["SlideshowPlayerIMU","SlideshowPlayerLeaderboard"],!0)),this},onCaptionExpansion:function(e,t){if("large"==inc.mqState){this.$(".IMU-Container").css({position:"relative",bottom:"0"});var i=t+this.$(".Pubdate").outerHeight(!0)+this.$(".IMU-Container").outerHeight(!0)+20,n=parseInt(this.$el.css("padding-top").replace("px",""))+this.$(".Name-Container").outerHeight(!0)+this.$(".Outer > .Inner").outerHeight(!0)+this.thumbnailNav.$el.outerHeight(!0);this.$(".Outer").height(i>n?i:n)}else"medium"==inc.mqState?this.$(".Outer").height(this.$(".Name-Container").height()+this.$(".SlideshowContainer").height()+t+this.$(".ThumbnailNav-Container").outerHeight(!0)):"small"==inc.mqState&&this.$(".Outer").css("height","");return this},onItemClick:function(e){return this.goToSlide(e.index),this},onSlideshowSwipe:function(e,t,i){return this.isCropping()?this:("left"==i?this.nextSlide():"right"==i&&this.previousSlide(),this)},enterFullscreen:function(){return this.fullscreen||"small"!=inc.mqState||$(window).width()>$(window).height()||this.isCropping()?this:(this.fullscreen=!0,this.$el.toggleClass("fullscreen",!0),$("body").toggleClass("fullscreen",!0),this.resize(),screenfull.enabled?screenfull.request(this.$el.children(".Outer")[0]):(this.oldScrollTop=$(document).scrollTop(),$("html, body").css({overflow:"hidden",height:$(window).height()+"px"}),this.$el.toggleClass("fakeFullscreen",!0),this.onEnterFullscreen()),this)},onEnterFullscreen:function(){return this.fullscreen&&(this.resize(),this.trigger("fullscreen:enter",this)),this},exitFullscreen:function(){return this.fullscreen?(screenfull.enabled?screenfull.exit():(this.fullscreen=!1,$("html, body").css({overflow:"",height:""}),$(document).scrollTop(this.oldScrollTop),this.$el.toggleClass("fullscreen",!1),$("body").toggleClass("fullscreen",!1),this.$el.toggleClass("fakeFullscreen",!1),this.resize(),this.trigger("fullscreen:exit",this)),this):this},onExitHTML5Fullscreen:function(){return this.fullscreen?(this.fullscreen=!1,this.$el.toggleClass("fullscreen",!1),$("body").toggleClass("fullscreen",!1),this.resize(),this.trigger("fullscreen:exit",this),this):this},onCentralOverlayClick:function(e){return this.isCropping()?this:(this.fullscreen||this.enterFullscreen(),this)},loadNext:function(e){if(this.loading||this.loadingAnotherSlideshow)return this;"undefined"==typeof e&&(e=null),_.isNumber(e)&&this.setLoading(!0);var t={},i=[];return inc.currentController.slideshowPlayers&&_.each(inc.currentController.slideshowPlayers,function(e){e.slideshows.each(function(e){var t=inc.collections.article.getParentArticleOfSlideshow(e);e.displayed&&t&&_.isNumber(t.id)&&i.push(t.id)})}),inc.currentController.sections&&_.each(inc.currentController.sections,function(e){_.each(e.slideshowPlayers,function(e){e.slideshows.each(function(e){var t=inc.collections.article.getParentArticleOfSlideshow(e);e.displayed&&t&&_.isNumber(t.id)&&i.push(t.id)})})}),i=_.uniq(i),i.length>0&&(t.excludeids=i.join(",")),e&&(t.id=e),$.ajax({dataType:"json",url:inc.restURL+"nextslideshow",data:t,cache:!1}).done(function(t){if(t.article&&t.slideshows&&t.slides){inc.collections.article.add(t.article),_.each(t.slides,function(e){inc.collections.slide.add(e)}),_.each(t.slideshows,function(e){var t=[];_.each(e.slides,function(e){t.push(inc.collections.slide.get(e.id))}),inc.collections.slideshow.add(new Inc.Models.Slideshow(e,{slides:t}))});var i=inc.collections.article.get(t.article.id);if(i&&i.get("slideshows")&&i.get("slideshows").length>0){var n=inc.collections.slideshow.get(i.get("slideshows")[0].id);n&&this.slideshows.add(n),n.slides.each(function(e){e.preloadImage()})}e&&this.loadSlideshow(n,{animate:!1})}this.loadingAnotherSlideshow=!1,e&&this.setLoading(!1),this.trigger("slideshow:loaded",this,n)}.bind(this)).fail(function(e){this.loadingAnotherSlideshow=!1,this.setLoading(!1)}.bind(this)),this},nextSlide:function(e){if(e&&e.stopPropagation(),this.animating)return this;if(this.$(".Outer").css("height",""),this.$(".IMU-Container").css({position:"",bottom:""}),"small"==inc.mqState&&!inc.isMode("edit")&&(this.interstitialCounter++,this.slides.length>3&&(this.interstitialCounter+this.slidesBetweenInterstitials+2)%(this.slidesBetweenInterstitials+1)==0))return this.showInterstitialAdFromRight(),this;if("none"!=this.$interstitial.css("display")&&(this.$interstitial.toggleClass("inPreviousPosition",!0),this.resizeArrowsForInterstitialAd()),this.animating=!0,this.showingTransitionOverlay)return this.hideTransitionOverlay(this.transitionOverlayCounter),this;var t=this,i=this.currentFrame>0?this.slides[this.currentFrame-1]:this.slides[this.slides.length-1],n=this.slides[this.currentFrame],s=this.currentFrame<this.slides.length-1?this.slides[this.currentFrame+1]:this.slides[0],o=this.currentFrame+2<=this.slides.length-1?this.slides[this.currentFrame+2]:this.slides[this.currentFrame+2-this.slides.length],a=this.slideshows.get(this.currentSlideshowID),r=this.slideshows.indexOf(a);if(1==this.slideshows.size()&&0==r&&0==this.currentFrame&&_.each(this.slides,function(e){e.model.preloadImage()}),this.loadingAnotherSlideshow||inc.isMode("edit")||r!=this.slideshows.size()-1||this.loadNext(),this.currentFrame!=this.slides.length-1){this.slides.length>3?(i&&i.$el.toggleClass("animate",!1).toggleClass("inPreviousPosition",!1).toggleClass("inNextPosition",!1),i&&i.hide(),n&&n.$el.toggleClass("inPreviousPosition",!0),s&&s.$el.toggleClass("inNextPosition",!1),o&&o.show().$el.toggleClass("inNextPosition",!0).toggleClass("animate",!0)):_.each(this.slides,function(e){e.hide().$el.toggleClass("animate",!1).toggleClass("inPreviousPosition",!1).toggleClass("inNextPosition",!1)}),_.each(this.captions,function(e){e.hide()}),this.currentFrame=this.currentFrame<this.slides.length-1?this.currentFrame+1:0,this.slides[this.currentFrame].show(),this.slides[this.currentFrame].picture&&this.slides[this.currentFrame].picture.resize();var l=_.find(this.captions,function(e){return e.model.getID()==this.slides[this.currentFrame].model.getID()},this);l&&l.show().resize(),this.trigger("slideshow:navigate",this,a,n.model,s.model)}else!inc.isMode("edit")&&r<this.slideshows.size()-1&&this.loadSlideshow(this.slideshows.at(r+1));return(!this.embedded||"large"!=inc.mqState||this.$el.hasClass("expanded"))&&this.refreshAds(),setTimeout(function(){t.$interstitial.hide(),t.animating=!1},350),this},previousSlide:function(e){if(e&&e.stopPropagation(),this.animating)return this;if(this.$(".Outer").css("height",""),this.$(".IMU-Container").css({position:"",bottom:""}),"small"==inc.mqState&&!inc.isMode("edit")&&(this.interstitialCounter++,this.slides.length>3&&(this.interstitialCounter+this.slidesBetweenInterstitials+2)%(this.slidesBetweenInterstitials+1)==0))return this.showInterstitialAdFromLeft(),this;"none"!=this.$interstitial.css("display")&&(this.$interstitial.toggleClass("inNextPosition",!0),this.resizeArrowsForInterstitialAd()),this.animating=!0;var t=this,i=this.currentFrame-2>=0?this.slides[this.currentFrame-2]:this.slides[this.slides.length-Math.abs(this.currentFrame-2)],n=this.currentFrame>0?this.slides[this.currentFrame-1]:this.slides[this.slides.length-1],s=this.slides[this.currentFrame],o=this.currentFrame<this.slides.length-1?this.slides[this.currentFrame+1]:this.slides[0],a=this.slideshows.get(this.currentSlideshowID),r=this.slideshows.indexOf(a);if(0!=this.currentFrame||0!=r)if(_.each(this.captions,function(e){e.hide()}),0==this.currentFrame&&r>0)inc.isMode("edit")||this.loadSlideshow(this.slideshows.at(r-1));else{this.slides.length>3?(i&&i.show().$el.toggleClass("inPreviousPosition",!0).toggleClass("animate",!0),n&&n.$el.toggleClass("inPreviousPosition",!1),s&&s.$el.toggleClass("inNextPosition",!0),o&&o.$el.toggleClass("animate",!1).toggleClass("inNextPosition",!1).toggleClass("inPreviousPosition",!1),o&&o.hide()):_.each(this.slides,function(e){e.hide().$el.toggleClass("animate",!1).toggleClass("inPreviousPosition",!1).toggleClass("inNextPosition",!1)}),this.currentFrame=this.currentFrame>0?this.currentFrame-1:this.slides.length-1,this.slides[this.currentFrame].show(),this.slides[this.currentFrame].picture&&this.slides[this.currentFrame].picture.resize();var l=_.find(this.captions,function(e){return e.model.getID()==this.slides[this.currentFrame].model.getID()},this);l&&l.show().resize(),this.trigger("slideshow:navigate",this,a,s.model,n.model)}return(!this.embedded||"large"!=inc.mqState||this.$el.hasClass("expanded"))&&this.refreshAds(),setTimeout(function(){if(t.showingTransitionOverlay){var e=t.$slideshow.find(".Slideshow-TransitionOverlay");e.remove(),t.showingTransitionOverlay=!1}t.$interstitial.hide(),t.animating=!1},350),this},hideTransitionOverlay:function(e){if(!this.showingTransitionOverlay||e!=this.transitionOverlayCounter)return this;var t=this.$slideshow.find(".Slideshow-TransitionOverlay");return t.fadeOut(200,function(){this.showingTransitionOverlay=!1,this.animating=!1,t.remove()}.bind(this)),this},showInterstitialAdFromLeft:function(){var e=this;if(this.animating=!0,this.$interstitial.hide().toggleClass("animate",!1).toggleClass("inPreviousPosition",!0).toggleClass("inNextPosition",!1).css("display","block"),this.fullscreen&&!screenfull.enabled&&"small"==inc.mqState){var t=_.find(this.captions,function(e){return e.model.getID()==this.slides[this.currentFrame].model.getID()},this);t&&t.hide()}return inc.adManager.refreshGroup(this.adGroup,["SlideshowPlayer-Interstitial-IMU"],!0),this.resizeArrowsForInterstitialAd(),setTimeout(function(){e.$interstitial.toggleClass("animate",!0).toggleClass("inPreviousPosition",!1)},20),setTimeout(function(){e.animating=!1},320),this},showInterstitialAdFromRight:function(){var e=this;if(this.animating=!0,this.$interstitial.hide().toggleClass("animate",!1).toggleClass("inPreviousPosition",!1).toggleClass("inNextPosition",!0).css("display","block"),this.fullscreen&&!screenfull.enabled&&"small"==inc.mqState){var t=_.find(this.captions,function(e){return e.model.getID()==this.slides[this.currentFrame].model.getID()},this);t&&t.hide()}return inc.adManager.refreshGroup(this.adGroup,["SlideshowPlayer-Interstitial-IMU"],!0),this.resizeArrowsForInterstitialAd(),setTimeout(function(){e.$interstitial.toggleClass("animate",!0).toggleClass("inNextPosition",!1)},20),setTimeout(function(){e.animating=!1},320),this},goToSlide:function(e){var t=this.slideshows.get(this.currentSlideshowID),i=this.slideshows.indexOf(t);if(this.loadingAnotherSlideshow||inc.isMode("edit")||i!=this.slideshows.size()-1||this.loadNext(),this.currentFrame==e)return this;this.$(".Outer").css("height",""),this.$(".IMU-Container").css({position:"",bottom:""});var n=this.slides[this.currentFrame],s=this;this.currentFrame=e;for(var o=0;o<this.slides.length;o++){var a=this.slides[o];a.hide().$el.toggleClass("animate",!1).toggleClass("inPreviousPosition",!1).toggleClass("inNextPosition",!1)}_.each(this.captions,function(e){e.hide()}),this.slides[this.currentFrame].show(),this.slides[this.currentFrame].picture&&this.slides[this.currentFrame].picture.resize();var r=_.find(this.captions,function(e){return e.model.getID()==this.slides[this.currentFrame].model.getID()},this);if(r&&r.show().resize(),this.slides.length>3){var l=this.currentFrame-1>=0?this.currentFrame-1:this.slides.length-1;this.slides[l]&&this.slides[l].show().$el.toggleClass("inPreviousPosition",!0);var c=this.currentFrame+1<this.slides.length-1?this.currentFrame+1:0;this.slides[c]&&this.slides[c].show().$el.toggleClass("inNextPosition",!0)}return(!this.embedded||"large"!=inc.mqState||this.$el.hasClass("expanded"))&&this.refreshAds(),this.slides.length>3?setTimeout(function(){s.slides[s.currentFrame]&&s.slides[s.currentFrame].$el.toggleClass("animate",!0),s.slides[l]&&s.slides[l].$el.toggleClass("animate",!0),s.slides[c]&&s.slides[c].$el.toggleClass("animate",!0),s.slides.length>1&&s.trigger("slideshow:navigate",s,t,n.model,s.slides[s.currentFrame].model)},20):(_.each(this.slides,function(e){e.hide()}),this.slides[this.currentFrame].show(),this.slides[this.currentFrame].picture&&this.slides[this.currentFrame].picture.resize(),this.slides.length>1&&this.trigger("slideshow:navigate",this,t,n.model,this.slides[this.currentFrame].model)),this},onSlidesChange:function(e,t,i){var n=this,s=[];for(e.slides.each(function(e,i){var n=_.findWhere(t,{id:e.getID()});n||s.push(e)});s.length>0;)e.slides.remove(s.pop());if(_.each(t,function(t){var i=e.slides.get(t.id),n=inc.collections.slide.get(t.id);!i&&n&&e.slides.add(n)}),e.slides.size()<this.slides.length){var o=[];_.each(this.slides,function(t){if(e.slides.get(t.model))o.push(t);else{this.thumbnailNav.removeThumbnail(t.model);var i=null;_.each(this.editors,function(e){e.model.getID()==t.model.getID()&&(i=e)}),this.editors=_.reject(this.editors,function(e){return e.model.getID()==t.model.getID()}),i&&i.trash();var n=null;_.each(this.captions,function(e){e.model.getID()==t.model.getID()&&(n=e)}),this.captions=_.reject(this.captions,function(e){return e.model.getID()==t.model.getID()}),n&&n.trash(),t.trash()}},this),this.slides=o}else e.slides.size()>this.slides.length&&e.slides.each(function(e,t){var i=_.find(this.slides,function(t){return t.model.getID()==e.getID()});if(!i){var i=new Inc.Slideshow.Slide({model:e});i.hide(),this.slides.push(i),this.$slideshow.append(i.$el);var s=new Inc.Slideshow.SlideCaption({model:e});s.hide(),this.captions.push(s),this.$(".IMU-Container").before(s.$el),i.index=t,this.listenTo(i,"loaded",function(){setTimeout(function(){n.resize()},20)}),this.listenTo(i,"change:picture",this.resize),this.listenTo(i,"crop:image:requested remove:image add:image image:togglefixedheight",function(e){this.requestingLocks||(this.hasUneditableModels()?this.lockRequested(null,e):e())}),this.listenTo(i,"crop:image:start",function(e){this.getEditor(e.picture.cropTool.oid)||this.addEditor(e.picture.cropTool),this.$el.toggleClass("disableNonSlideComponents",!0)}),this.listenTo(i,"crop:image:stop",function(e){this.$el.toggleClass("disableNonSlideComponents",!1)}),this.listenTo(s,"showMore",this.onCaptionExpansion),this.listenTo(s,"showLess",function(e){this.$(".Outer").css("height","")});var o=new Inc.Editors.InlineText({el:s.$(".CaptionTitle")[0],model:s.model,label:s.model.labels().sld_name,fieldname:"sld_name",variant:"singleline",dontRequestLockOnInit:!0});o.$editable.data("editorID",o.oid),this.addEditor(o);var a=new Inc.Editors.InlineText({el:s.$(".Caption")[0],model:s.model,label:s.model.labels().sld_caption,fieldname:"sld_caption",dontRequestLockOnInit:!0});a.$editable.data("editorID",a.oid),this.addEditor(a),this.thumbnailNav.addThumbnail(e,t),this.listenTo(this.thumbnailNav.thumbnails[t],"click",this.onItemClick)}},this);if(e.slides.each(function(e,i){for(var n=0;n<t.length;n++)if(t[n].id==e.getID()){e.index=this.slides[i].index=t[n].sortorder;break}},this),e.slides.models=_.sortBy(e.slides.models,function(e){return e.index}),this.slides=_.sortBy(this.slides,function(e){return e.index}),_.each(this.captions,function(e){e.hide()}),0==this.slides.length)return this;this.slides[this.currentFrame]||(this.currentFrame=this.slides.length-1);var a=this.slides[this.currentFrame].model.getID();this.currentFrame=e.slides.get(a).index;for(var r=0;r<this.slides.length;r++){var l=this.slides[r];r!=this.currentFrame&&l.hide(),l.$el.toggleClass("animate",!1).toggleClass("inPreviousPosition",!1).toggleClass("inNextPosition",!1)}if(this.slides.length>1){var c=this.currentFrame-1>=0?this.currentFrame-1:this.slides.length-1;(1!=c||2!=this.slides.length)&&this.slides[c]&&this.slides[c].show().$el.toggleClass("inPreviousPosition",!0);var h=this.currentFrame+1<this.slides.length-1?this.currentFrame+1:0;(0!=h||2!=this.slides.length)&&this.slides[h]&&this.slides[h].show().$el.toggleClass("inNextPosition",!0)}this.slides[this.currentFrame].show(),this.slides[this.currentFrame].picture&&this.slides[this.currentFrame].picture.resize();var d=_.find(this.captions,function(e){return e.model.getID()==this.slides[this.currentFrame].model.getID()},this);return d&&d.show().resize(),this.thumbnailNav.reorder(),this.slides.length>3&&setTimeout(function(){n.slides[n.currentFrame]&&n.slides[n.currentFrame].$el.toggleClass("animate",!0),n.slides[c]&&n.slides[c].$el.toggleClass("animate",!0),n.slides[h]&&n.slides[h].$el.toggleClass("animate",!0)},20),this},onMoreSlideshowSelected:function(e){var t=this;if(this.animating)return setTimeout(function(){t.onMoreSlideshowSelected(e)},500),this;if(!this.isCropping()){var i=e.model&&e.model.get("slides")&&e.model.get("slides").length>0?inc.collections.slideshow.get(e.model.get("slides")[0].id):null;if(i&&this.slideshows.get(this.currentSlideshowID).getID()==i.getID())return this;if(i)this.loadSlideshow(i);else{var n=e.$el.data("contentId");this.loadNext(n)}}var s=this.$el.offset().top-$("#TopNav").outerHeight(!0);return $(".AdminMenu").length>0&&(s-=$(".AdminMenu").height()),$("html, body").animate({scrollTop:s},400),this},resize:function(e,t){if(("undefined"==typeof e||!_.isBoolean(e))&&(e=!0),
("undefined"==typeof t||!_.isBoolean(t))&&(t=!1),!this.hoverStateSetup&&this.embedded&&"large"==inc.mqState&&this.setupHoverState(),this.embedded&&"large"!=inc.mqState&&this.$el.hasClass("expanded")&&!this.$el.hasClass("permanentlyExpanded"))return this.contract(),this;this.$el.hasClass("expanded")&&!this.$el.hasClass("permanentlyExpanded")&&this.$el.css("width",$(".maincolumn").outerWidth()-2*parseInt($(".maincolumn").css("padding-left").replace("px",""))+"px"),this.$(".Outer").css("height",""),this.$(".IMU-Container").css({position:"",bottom:""});var i=this.$(".Outer > .Inner"),n=this.fullscreen&&!screenfull.enabled&&"small"==inc.mqState?!0:!1;if(this.fullscreen&&("small"!=inc.mqState||$(window).width()>$(window).height()))return this.exitFullscreen(),this;n?i.css("height",$(window).height()-50+"px"):i.css("height","");var s=(i.width(),i.height());if(screenfull.enabled&&"undefined"!=typeof screen){var o=screen.height;screen.width}else{var o=$(window).height();$(window).width()}n&&(o-=50),this.fullscreen?(this.leftArrow.$(".NavigateLeftArrowBackground").css("top",(o-this.leftArrow.$el.children(".NavigateLeftArrowBackground").height())/2+"px"),this.leftArrow.$(".NavigateLeftArrow").css("top",(o-this.leftArrow.$el.children(".NavigateLeftArrow").height())/2+"px"),this.rightArrow.$(".NavigateRightArrowBackground").css("top",(o-this.rightArrow.$el.children(".NavigateRightArrowBackground").height())/2+"px"),this.rightArrow.$(".NavigateRightArrow").css("top",(o-this.rightArrow.$el.children(".NavigateRightArrow").height())/2+"px")):(this.leftArrow.$(".NavigateLeftArrowBackground").css("top",(s-this.leftArrow.$el.children(".NavigateLeftArrowBackground").height())/2+"px"),this.leftArrow.$(".NavigateLeftArrow").css("top",(s-this.leftArrow.$el.children(".NavigateLeftArrow").height())/2+"px"),this.rightArrow.$(".NavigateRightArrowBackground").css("top",(s-this.rightArrow.$el.children(".NavigateRightArrowBackground").height())/2+"px"),this.rightArrow.$(".NavigateRightArrow").css("top",(s-this.rightArrow.$el.children(".NavigateRightArrow").height())/2+"px")),this.resizeArrowsForInterstitialAd(),t||_.each(this.slides,function(t,i){!e&&t.picture&&t.picture.resize()},this);var a=_.find(this.captions,function(e){return e.model.getID()==this.slides[this.currentFrame].model.getID()},this);return a&&e&&a.resize(),this},resizeArrowsForInterstitialAd:function(){var e=this.$(".Outer > .Inner"),t=e.width(),i="none"!=this.$interstitial.css("display");if(i){var n=this.leftArrow.$(".NavigateLeftArrowBackground").width(),s=(t-320)/2>n?(t-320)/2:n;this.leftArrow.$el.css("width",s+"px"),this.rightArrow.$el.css("width",s+"px"),this.centralOverlay.hide()}else this.leftArrow.$el.css("width",""),this.rightArrow.$el.css("width",""),this.centralOverlay.show();return this},setupHoverState:function(){return this.hoverStateSetup?this:(this.hoverStateSetup=!0,this.$el.on("mouseenter",function(e){this.$el.outerWidth(!0)<970&&this.expand()}.bind(this)),this)},expand:function(){return this.$el.hasClass("expanded")||"large"!=inc.mqState||(this.$el.toggleClass("expanded",!0),this.resize(!0,!0),this.refreshAds()),this},contract:function(){var e=this;return"large"==inc.mqState&&this.$el.hasClass("expanded")&&!this.$el.hasClass("permanentlyExpanded")&&(this.$(".SlideshowContainer, .ThumbnailNav-Container").css("width",this.$(".SlideshowContainer").width()+5+"px"),setTimeout(function(){e.$(".SlideshowContainer, .ThumbnailNav-Container").css("width","")},320)),this.$el.toggleClass("expanded",!1),this.$el.css("width",""),this.resize(!0,!0),this},addSlide:function(e){if(this.hasUneditableModels())return this.requestingLocks||this.lockRequested(null,this.addSlide.bind(this)),this;var t=this.slideshows.get(this.currentSlideshowID),i=new Inc.Models.Slide;inc.collections.slide.add(i),inc.editing.modelsBeingEdited.push(i),t.slides.add(i),t.listenToOnce(i,"save:success",function(e){for(var t=this.get("slides"),i=0;i<t.length;i++)if(t[i].id==e.cid){t[i].id=e.id,this.set("slides",t);break}});var n=t.copyAttributes().slides;n.splice(this.currentFrame+1,0,{id:i.getID(),sortorder:this.currentFrame+1});for(var s=0;s<n.length;s++)n[s].sortorder=s;return n.length>1&&this.currentFrame++,t.set("slides",n),inc.editing.isDirty()&&setTimeout(function(){inc.editing.save()},500),this},deleteSlide:function(e){if(0==this.slides.length)return this;if(this.hasUneditableModels())return this.requestingLocks||this.lockRequested(null,this.deleteSlide.bind(this)),this;var t=this.slideshows.get(this.currentSlideshowID),i=this.slides[this.currentFrame];t.slides.remove(i.model),inc.collections.slide.remove(i.model),inc.editing.modelsBeingEdited=_.reject(inc.editing.modelsBeingEdited,function(e){return e.getID()==i.model.getID()});var n=t.copyAttributes().slides;n=_.reject(n,function(e){return e.id==i.model.getID()});for(var s=0;s<n.length;s++)n[s].sortorder=s;return this.currentFrame==t.slides.size()&&this.currentFrame>0&&this.currentFrame--,t.set("slides",n),this},setupShareButtons:function(){this.shareBox&&this.shareBox.trash();var e=null;try{e=inc.collections.article.getParentArticleOfSlideshow(this.slideshows.get(this.currentSlideshowID))}catch(t){}return e?(this.shareBox=Inc.Accessories.ShareBox.spawn({classes:"SlideshowPlayerShareBox",controller:this,template:'<div id="<%= ob.elementID %>" class="<%= ob.classes.join(\' \') %>"><div class="DisabledMask"></div><div class="ShareBoxButtons"></div></div>',buttons:{facebook:{title:e.get("inc_headline")||e.get("inc_title"),url:inc.applicationURL+e.get("inc_filelocation"),caption:"Inc.com",description:e.get("inc_sharing_deck")||e.get("inc_deck"),actionLinkName:e.get("inc_headline")||e.get("inc_title"),actionLinkURL:inc.applicationURL+e.get("inc_filelocation"),template:'<div id="<%= ob.elementID %>" class="ShareButton FacebookShareButton"><div class="fa-facebook"></div></div>'},twitter:{title:e.get("inc_twitter_headline")||e.get("inc_headline")||e.get("inc_title"),url:inc.applicationURL+e.get("inc_filelocation"),template:'<div id="<%= ob.elementID %>" class="ShareButton TwitterShareButton"><a class="ShareButtonAnchor fa-twitter" href="https://twitter.com/intent/tweet?url=<%= encodeURIComponent(ob.url) %>&via=<%= ob.via %>&text=<%= encodeURIComponent(ob.text) %>&related=<%= ob.related %>"></a></div>'}}}),this.shareBox.render(this.$(".SlideshowPlayerShareContainer")),$("#"+this.shareBox.elementID).toggleClass(".Sharebox",!1),this):this},onEnterEditMode:function(){return this.$interstitial.hide(),this.resizeArrowsForInterstitialAd(),_.each(this.captions,function(e){e.$(".ShowMore, .ShowLess").length>0&&e.showMore()}),this.addSlideButton.show(),this.deleteSlideButton.show(),this.showingTransitionOverlay&&this.hideTransitionOverlay(this.transitionOverlayCounter),this.thumbnailNav.$(".ThumbnailReorder").show(),this},onExitEditMode:function(){return _.each(this.captions,function(e){e.resize()}),this.addSlideButton.hide(),this.deleteSlideButton.hide(),this.thumbnailNav.$(".ThumbnailReorder").hide(),this.$(".Outer").css("height",""),this},activationAllowed:function(e){return"ImageEditor"==e.type&&this.isCropping()?!1:!0},isCropping:function(){for(var e=0;e<this.slides.length;e++){var t=this.slides[e];if(t.picture&&t.picture.cropTool&&t.picture.cropTool.active)return!0}return!1},onCropToolTrashed:function(e,t){return this.editors=_.reject(this.editors,function(e){return e.oid==t}),this}}),Inc.Slideshow.Slide=Inc.ToggleView.extend({type:"Slide",tagName:"li",className:"Slide",template:_.template($("#Slideshow-Slide-Template").html()),initialize:function(e){e||(e={}),Inc.ToggleView.prototype.initialize.apply(this,arguments),e.prerendered||this.$el.html(this.template(this)),this.$buttonContainer=this.$(".SlideButton-Container"),this.listenTo(this.model,"change:sld_imgid change:sld_fixedheight_imageflag",this.renderImage),this.listenTo(dispatcher,"inc:mode:edit:on",this.onEnterEditMode),this.listenTo(dispatcher,"inc:mode:edit:off",this.onExitEditMode),inc.isMode("edit")&&this.onEnterEditMode()},show:function(){return!this.picture&&this.renderImage(),Inc.ToggleView.prototype.show.apply(this,arguments),this},renderImage:function(e,t,i){if(this.model.get("sld_imgid")){this.model.image=inc.collections.image.get(this.model.get("sld_imgid"));var n={model:this.model.image,template:this.model.get("sld_fixedheight_imageflag")?_.template($("#Slideshow-Slide-Picture-FixedHeight-Template").html()):_.template($("#Slideshow-Slide-Picture-Template").html()),el:this.$(".SlidePicture")[0],aspectRatio:635/367,alwaysResize:!0,fitHeight:this.model.get("sld_fixedheight_imageflag"),zoomOnly:this.model.get("sld_fixedheight_imageflag")};if(this.model.image&&this.model.image.get&&this.model.image.get("transform")){var s=this.model.image.get("transform");!n.zoomOnly||0==s.x&&0==s.y||this.model.image.set("transform",{x:0,y:0,zoom:s.zoom},{zoomOnly:n.zoomOnly})}this.picture?this.picture.reset(n):(this.picture=new Inc.Views.Picture(n),this.listenTo(this.picture,"loaded",function(){this.trigger("loaded",this)}),this.listenTo(this.picture,"croptool:trash",function(e,t){this.trigger("croptool:trash",e,t)})),this.insertFigureMenu&&this.insertFigureMenu.hide(),inc.isMode("edit")&&this.$buttonContainer.show()}else this.picture?this.picture.reset():(this.picture=new Inc.Views.Picture({el:this.$(".SlidePicture")[0],aspectRatio:635/367}),this.listenTo(this.picture,"loaded",function(){this.trigger("loaded",this)}),this.listenTo(this.picture,"croptool:trash",function(e,t){this.trigger("croptool:trash",e,t)}));return this.trigger("change:picture",this),this},onEnterEditMode:function(){var e=this;if(!this.cropImageButton){var t=function(e,t,i){var n=inc.collections.image.get(e.get("sld_imgid"));n&&n.croppable()?this.show():this.hide()};this.cropImageButton=new Inc.MenuItems.Action({name:"CropImage",label:"Crop",model:this.model,iconClass:"fa-crop",iconOnly:!0,tooltip:"Crop",action:function(){this.trigger("crop:image:requested",this.cropImage.bind(this))}.bind(this)}),this.cropImageButton.listenTo(this.model,"change:sld_imgid",t),t.call(this.cropImageButton,this.model),this.$buttonContainer.append(this.cropImageButton.$el)}return this.toggleFixedHeight||(this.toggleFixedHeight=new Inc.MenuItems.Toggle({name:"ToggleFixedHeight",label:"Toggle Fixed Height",hidden:!this.model.get("sld_imgid"),active:this.model.get("sld_fixedheight_imageflag"),model:this.model,iconClass:["fa-arrows-alt","fa-arrows-v"],iconOnly:!0,tooltip:"Toggle Fixed Height",onaction:function(){e.trigger("image:togglefixedheight",function(){this.model.set("sld_fixedheight_imageflag",!0,{origin:this})}.bind(this))},offaction:function(){e.trigger("image:togglefixedheight",function(){this.model.set("sld_fixedheight_imageflag",!1,{origin:this})}.bind(this))},click:function(e){return!this.disabled&&e&&this.preventClickPropagation&&e.stopPropagation(),this.disabled?this:(this.active?this.offaction():this.onaction(),this)}}),this.$buttonContainer.append(this.toggleFixedHeight.$el),this.toggleFixedHeight.listenTo(this.model,"change:sld_fixedheight_imageflag",function(e,t,i){t?this.activate():this.deactivate()}),this.toggleFixedHeight.listenTo(this.model,"change:sld_imgid",function(e,t,i){var n=inc.collections.image.get(e.get("sld_imgid"));n?this.show():this.hide()})),this.removeImage||(this.removeImage=new Inc.MenuItems.Action({name:"RemoveSlideImage",label:"Remove",hidden:!this.model.get("sld_imgid"),model:this.model,iconClass:"fa-trash-o",iconOnly:!0,tooltip:"Remove",action:function(){this.trigger("remove:image",function(){inc.admin.taskManager.askForConfirmation({messages:"Remove the Slide's Image?",yesText:"REMOVE"},function(){this.model.set("sld_imgid",null),this.model.image=null,this.model.unset("image"),this.picture.reset(),this.$buttonContainer.hide(),this.insertFigureMenu.show()}.bind(this))}.bind(this))}.bind(this)}),this.$buttonContainer.append(this.removeImage.$el),this.removeImage.listenTo(this.model,"change:sld_imgid",function(e,t,i){var n=inc.collections.image.get(e.get("sld_imgid"));n?this.show():this.hide()})),this.insertFigureMenu||(this.insertFigureMenu=new Inc.Menus.MainFigureInsertion({hidden:!0}),this.$el.append(this.insertFigureMenu.$el),this.listenTo(this.insertFigureMenu,"click:add",function(){this.trigger("add:image",function(){this.picture&&this.picture.$el.trigger("click")}.bind(this))})),!this.model.get("sld_imgid")&&this.insertFigureMenu&&this.insertFigureMenu.show(),this.model.get("sld_imgid")&&this.$buttonContainer.show(),this},onExitEditMode:function(){return this.$buttonContainer.hide(),this.insertFigureMenu&&this.insertFigureMenu.hide(),this},cropImage:function(){this.$buttonContainer.hide();var e=this.cropToolOID;this.picture.crop(inc.collections.image.get(this.model.get("sld_imgid")),635/367),this.cropToolOID=this.picture.cropTool.oid,e&&e==this.cropToolOID||(this.listenTo(this.picture.cropTool,"change:active",function(e,t,i){t?this.$buttonContainer.hide():(this.$buttonContainer.show(),this.renderImage(),this.trigger("crop:image:stop",this))}),this.listenTo(this.picture.cropTool,"accept",function(e,t){this.model.set("sld_imgid",t.getID(),{origin:e})})),this.trigger("crop:image:start",this)}}),Inc.Slideshow.SlideCaption=Inc.ToggleView.extend({type:"SlideCaption",className:"SlideCaption",template:_.template($("#Slideshow-Slide-Caption-Template").html()),initialize:function(e){e||(e={}),Inc.ToggleView.prototype.initialize.apply(this,arguments),e.prerendered||this.$el.html(this.template(this)),this.listenTo(this.model,"change:sld_caption",function(e,t,i){inc.isMode("edit")&&this.resize()})},events:function(){return{"click .ShowMore":"showMore","click .ShowLess":"showLess"}},resize:function(){var e=null;if("large"==inc.mqState?e=170:"medium"==inc.mqState?e=150:"small"==inc.mqState&&(e=null),this.$el.css("height",""),inc.isMode("edit"))return this.$el.outerHeight()<e&&this.$el.css("height",e+"px"),this.trigger("showMore",this,this.$el.outerHeight(!0)),this;var t=this.$el.children(".Caption");t.html(this.model.get("sld_caption"));var i=this.$el.children(".CaptionTitle");return t.css("display","inline-block"),e&&this.$el.outerHeight()>e&&Inc.Utilities.truncate({$el:t,height:e-i.outerHeight(!0),more:'&hellip; <span class="ShowMore">more</span>'}),t.css("display",""),this},showMore:function(){var e=this.$el.children(".Caption");if(e.html(this.model.get("sld_caption")),!inc.isMode("edit")){var t=e.html().split("</p>");"undefined"!=typeof t[t.length-2]?(t[t.length-2]+=' <span class="ShowLess">less</span>',e.html(t.join("</p>"))):e.html(e.html()+' <span class="ShowLess">less</span>')}return this.$el.css("height",""),this.trigger("showMore",this,this.$el.outerHeight(!0)),this},showLess:function(){return this.trigger("showLess",this),this.resize(),this}}),Inc.Models.Slideshow=Inc.Models.Archetype.extend({type:"SlideshowModel",constructor:function(e,t){this.endpoints=[{name:"default",url:inc.restURL+"slideshow"},{name:"live",url:inc.restURL+"admin/slideshow"}],this.displayed=!1,this.slidesLoaded=!1,this.slides=new Inc.Collections.Slide,Inc.Models.Archetype.apply(this,arguments)},initialize:function(e,t){t||(t={}),Inc.Models.Archetype.prototype.initialize.apply(this,arguments),t.slides&&(_.each(t.slides,function(e){this.slides.add(e)},this),this.slidesLoaded=!0)},defaults:function(){return{sls_name:"Slideshow Name",slides:[]}},labels:function(){return{sls_name:"Name",slides:"Slides"}}}),Inc.Models.Slide=Inc.Models.Archetype.extend({type:"SlideshowModel",untrackedKeys:["image"],constructor:function(e,t){this.endpoints=[{name:"default",url:inc.restURL+"slide"},{name:"live",url:inc.restURL+"admin/slide"}],this.image=null,this.imagePreloaded=!1,Inc.Models.Archetype.apply(this,arguments),this.image&&(inc.collections.image.add(this.image),this.image=inc.collections.image.get(this.image.id)),this.listenTo(this,"change:sld_imgid",function(e,t,i){inc.collections.image.get(t)?this.image=inc.collections.image.get(t):_.isString(t)&&0==t.search("g")&&(this.image=_.findWhere(inc.editing.modelsBeingEdited,{id:t}))})},defaults:function(){return{sld_name:"Slide Name",sld_sharing_name:null,sld_caption:"Ribeye pork sirloin jerky porchetta bresaola shank. Tail jerky venison, bacon porchetta shoulder beef ribs brisket. Spare ribs hamburger biltong jowl chicken prosciutto rump sirloin tongue shank corned beef venison tail short ribs.",sld_sharing_caption:null,sld_tweet_text:null,sld_imgid:null,sld_fixedheight_imageflag:!1}},labels:function(){return{sld_name:"Name",sld_sharing_name:"Sharing Name",sld_caption:"Caption",sld_sharing_caption:"Sharing Caption",sld_tweet_text:"Tweet Text",sld_imgid:"Image",sld_fixedheight_imageflag:"Fixed Height Image"}},preloadImage:function(){if(!this.image||!this.image.getSize||this.imagePreloaded)return this;var e,t;inc.mq.retina?(e=this.image.getURL("1270x734"),t=this.image.getURL("336x336")):(e=this.image.getURL("635x367"),t=this.image.getURL("100x100"));var i=new Image;i.src=e;var n=new Image;return n.src=t,this.imagePreloaded=!0,this}}),Inc.Collections.Slideshow=Inc.Collections.Archetype.extend({type:"SlideshowCollection",model:Inc.Models.Slideshow,url:function(){var e=inc.restURL;return this.admin&&(e+="admin/"),e+"slideshow"}}),Inc.Collections.Slide=Inc.Collections.Archetype.extend({type:"SlideCollection",model:Inc.Models.Slide,url:function(){var e=inc.restURL;return this.admin&&(e+="admin/"),e+"slide"}}),Inc.Slideshow.ThumbnailNav=Inc.ToggleView.extend({type:"ThumbnailNav",className:"ThumbnailNav",template:_.template($("#ThumbnailNav-Template").html()),initialize:function(e){e||(e={}),Inc.ToggleView.prototype.initialize.apply(this,arguments),e.prerendered||this.$el.html(this.template(this)),this.slides=null,this.thumbnails=[],this.$listContainer=this.$(".ThumbnailNav-ListContainer"),this.$list=this.$(".ThumbnailNav-List"),this.animating=!1,this.thumbnailSorter=e.thumbnailSorter||null,Inc.Utilities.iOS&&this.$listContainer.css("overflow-x","scroll"),this.leftArrow=new Inc.ToggleView({el:this.$(".ThumbnailNavigateLeft")[0]}),this.rightArrow=new Inc.ToggleView({el:this.$(".ThumbnailNavigateRight")[0]})},events:function(){return{"click .ThumbnailNavigateLeft":"onNavigateLeft","click .ThumbnailNavigateRight":"onNavigateRight","click .ThumbnailReorder":"onReorderClick"}},displayThumbnails:function(e){_.each(this.thumbnails,function(e){e.trash()}),this.thumbnails=[],this.$listContainer.scrollLeft(0);var t=this.$list.children().length>0,i=0;return this.slides=e,this.slides.each(function(e,n){if(t){var s=new Inc.Slideshow.ThumbnailNavItem({model:e,el:this.$list.children()[n],prerendered:!0});this.thumbnails.push(s)}else{var s=new Inc.Slideshow.ThumbnailNavItem({model:e});this.thumbnails.push(s),this.$list.append(s.$el)}s.index=n,i+=s.$el.outerWidth(!0)},this),this.$list.width(108*this.slides.size()-24),this},onNavigateLeft:function(e){if(e&&e.stopPropagation(),this.animating)return this;var t=(this.$list.width(),this.$listContainer.width()),i=this.$listContainer.scrollLeft();if(t>=i){if(0!=i){this.animating=!0;var n=Math.floor(600*(i/t));this.$listContainer.animate({scrollLeft:0},300>n?300:n,function(){this.animating=!1}.bind(this))}}else i>t&&(this.animating=!0,this.$listContainer.animate({scrollLeft:i-t},600,function(){this.animating=!1}.bind(this)));return this},onNavigateRight:function(e){if(e&&e.stopPropagation(),this.animating)return this;var t=this.$list.width(),i=this.$listContainer.width(),n=this.$listContainer.scrollLeft();if(t-i>n)if(this.animating=!0,n>t-2*i){var s=Math.floor(600*((t-i-n)/i));this.$listContainer.animate({scrollLeft:t-i},300>s?300:s,function(){this.animating=!1}.bind(this))}else this.$listContainer.animate({scrollLeft:n+i},600,function(){this.animating=!1}.bind(this));return this},onSlideshowNavigate:function(e,t,i,n){if(i.getID()==n.getID())return this;var s,o,a,r,l=this.$list.width(),c=this.$listContainer.width(),h=this.$listContainer.scrollLeft();_.each(this.thumbnails,function(e){e.model.getID()==i.getID()&&(s=e),e.model.getID()==n.getID()&&(a=e)}),o=s.$el.position().left,r=a.$el.position().left-c/2+a.$el.width()/2,0>r&&(r=0),this.animating=!0;var d=c>l-r?l-c:r;c>=l&&(d=0);var u=Math.floor(600*(Math.abs(d-h)/c));return this.$listContainer.animate({scrollLeft:d},260>u?260:u,function(){this.animating=!1}.bind(this)),this},setThumbnailSorter:function(e){return this.thumbnailSorter=e,this.listenTo(e,"change:active",function(e,t){t?(this.$(".ThumbnailReorder").hide(),this.$(".CurrentlySortingIndicator").show()):(this.$(".CurrentlySortingIndicator").hide(),inc.isMode("edit")&&this.$(".ThumbnailReorder").show())}),this.listenToOnce(e,"trash",function(e){this.thumbnailSorter=null}),this},onReorderClick:function(e){return this.$(".ThumbnailNav-List").trigger("click"),this},reorder:function(){return _.each(this.thumbnails,function(e){e.$el.detach()}),this.slides.each(function(e){var t=_.find(this.thumbnails,function(t){return t.model.oid==e.oid});t&&(t.index=e.index)},this),this.thumbnails=_.sortBy(this.thumbnails,function(e){return e.index}),_.each(this.thumbnails,function(e){this.$list.append(e.$el)},this),this},addThumbnail:function(e,t){this.slides.add(e,{at:t});var i=new Inc.Slideshow.ThumbnailNavItem({model:e});this.thumbnails.splice(t,0,i),t>0?this.thumbnails[t-1].$el.after(i.$el):this.$list.append(i.$el);for(var n=0;n<this.thumbnails.length;n++)this.thumbnails[n].index=n;return this.$list.width(108*this.slides.size()-24),this},removeThumbnail:function(e){this.slides.remove(e),this.slides.each(function(e){var t=_.find(this.thumbnails,function(t){return t.model.oid==e.oid});t&&(t.index=e.index)},this);for(var t=[],i=0;i<this.thumbnails.length;i++)this.thumbnails[i].model.oid==e.oid?this.thumbnails[i].trash():t.push(this.thumbnails[i]);return this.thumbnails=t,this.$list.width(108*this.slides.size()-24),this}}),Inc.Slideshow.ThumbnailNavItem=Inc.ToggleView.extend({type:"ThumbnailNav-Item",tagName:"li",className:"ThumbnailNav-Item",template:_.template($("#ThumbnailNav-Item-Template").html()),initialize:function(e){e||(e={}),Inc.ToggleView.prototype.initialize.apply(this,arguments),e.prerendered||this.$el.html(this.template(this)),this.$el.data("modelid",this.model.getID()),this.listenTo(this.model,"change:id",function(){this.$el.data("modelid",this.model.getID())}),this.renderImage(),this.listenTo(this.model,"change:sld_imgid",this.renderImage)},events:function(){return{"click .Thumbnail":"click"}},click:function(e){this.trigger("click",this)},renderImage:function(e,t,i){if(this.model.get("sld_imgid")){var n={model:this.model.image,template:_.template($("#ThumbnailNav-Item-Picture-Template").html()),el:this.$(".ThumbnailPicture")[0],aspectRatio:1};this.picture?this.picture.reset(n):this.picture=new Inc.Views.Picture(n)}else this.picture&&this.picture.reset();return this}}),Inc.Slideshow.ThumbnailSorter=Inc.Editors.Archetype.extend({type:"ThumbnailSorter",className:"ThumbnailSorter",initialize:function(e){Inc.Editors.Archetype.prototype.initialize.apply(this,arguments),this.$el.on("sortupdate",_.bind(this.sortorderChanged,this))},activate:function(){if(!this.active&&this.model.ready&&(this.model.isNew()||this.model.userHasLock())){if(this.area&&!this.area.activationAllowed(this))return this;Inc.Editors.Archetype.prototype.activate.apply(this,arguments),this.$el.sortable({items:"> .ThumbnailNav-Item",axis:"x",delay:100,scroll:!0,placeholder:"ThumbnailNav-Item-Placeholder",tolerance:"pointer",containment:this.$el})}return this},sortorderChanged:function(e,t){for(var i=this.$el.children(".ThumbnailNav-Item"),n=this.model.copyAttributes().slides,s=0;s<i.length;s++){var o=$(i[s]),a=o.data("modelid"),r=_.findWhere(n,{id:a});r&&(r.sortorder=s)}return n=_.sortBy(n,function(e){return e.sortorder}),this.model.set("slides",n,{origin:this}),this},deactivate:function(){return this.active&&this.$el.sortable("destroy"),Inc.Editors.Archetype.prototype.deactivate.apply(this,arguments)},trash:function(){return this.active&&this.$el.sortable("destroy"),Inc.Editors.Archetype.prototype.trash.apply(this,arguments)}}),Inc.Slideshow.MoreSlideshows=Inc.ToggleView.extend({type:"MoreSlideshows",className:"MoreSlideshows",initialize:function(e){e||(e={}),Inc.ToggleView.prototype.initialize.apply(this,arguments),this.slideshowViews=[];var t=this.$(".MSlideshow");_.each(t,function(e){var t=new Inc.ToggleView({el:e});t.featured=t.$el.hasClass("FeaturedMSlideshow"),t.originalHeadline=t.$(".MSlideshowHeadline").html(),t.featured&&(t.originalDeck=t.$(".MSlideshowDeck").html()),t.picture=new Inc.Views.Picture({el:t.$(".picture")[0],alwaysResize:!0,expandToFit:!0}),t.$el.on("click",".MSlideshowInner",function(e){e&&e.preventDefault(),this.trigger("select",this)}.bind(t));var i=t.$el.data("contentId"),n=inc.collections.article.get(i);n&&(t.model=n),this.slideshowViews.push(t),this.listenTo(t,"select",this.onSlideshowSelect)},this),this.listenTo(dispatcher,"window:resized",this.truncateHeadlinesAndDecks),this.truncateHeadlinesAndDecks()},onSlideshowSelect:function(e){return this.trigger("slideshow:selected",e),this},onSlideshowChanged:function(e){var t=inc.collections.article.getParentArticleOfSlideshow(e);return t&&_.each(this.slideshowViews,function(e){e.$el.data("contentId")==t.getID()?e.activate().picture.resize():e.deactivate().picture.resize()}),this},truncateHeadlinesAndDecks:function(){_.each(this.slideshowViews,function(e){var t=$(e.$el.find(".MSlideshowHeadline")[0]);e.model?t.html(e.model.get("inc_homepage_headline")||e.model.get("inc_headline")||e.model.get("inc_title")||""):t.html(e.originalHeadline),t.css("height","");var i=parseInt(t.css("height").replace("px",""));if(t.css("height","auto"),Inc.Utilities.truncate({$el:t,height:i}),t.css("height",i+"px"),e.featured){var n=$(e.$el.find(".MSlideshowDeck")[0]);e.model?n.html(e.model.get("inc_homepage_deck")||e.model.get("inc_deck")||""):n.html(e.originalDeck),Inc.Utilities.truncate({$el:n,height:parseInt(n.css("max-height").replace("px",""))})}})}}),$(function(){function e(){function e(){if(/state\/.+$/i.test(location.href)){switch(X[X.length-1]){case"al":j=["Alabama"];break;case"ak":j=["Alaska"];break;case"az":j=["Arizona"];break;case"ar":j=["Arkansas"];break;case"ca":j=["California"];break;case"co":j=["Colorado"];break;case"ct":j=["Connecticut"];break;case"de":j=["Delaware"];break;case"dc":j=["District of Columbia"];break;case"fl":j=["Florida"];break;case"ga":j=["Georgia"];break;case"hi":j=["Hawaii"];break;case"id":j=["Idaho"];break;case"il":j=["Illinois"];break;case"in":j=["Indiana"];break;case"ia":j=["Iowa"];break;case"ks":j=["Kansas"];break;case"ky":j=["Kentucky"];break;case"la":j=["Louisiana"];break;case"me":j=["Maine"];break;case"md":j=["Maryland"];break;case"ma":j=["Massachusetts"];break;case"mi":j=["Michigan"];break;case"mn":j=["Minnesota"];break;case"ms":j=["Mississippi"];break;case"mo":j=["Missouri"];break;case"mt":j=["Montana"];break;case"ne":j=["Nebraska"];break;case"nv":j=["Nevada"];break;case"nh":j=["New Hampshire"];break;case"nj":j=["New Jersey"];break;case"nm":j=["New Mexico"];break;case"ny":j=["New York"];break;case"nc":j=["North Carolina"];break;case"nd":j=["North Dakota"];break;case"oh":j=["Ohio"];break;case"ok":j=["Oklahoma"];break;case"or":j=["Oregon"];break;case"pa":j=["Pennsylvania"];break;case"pr":j=["Puerto Rico"];break;case"ri":j=["Rhode Island"];break;case"sc":j=["South Carolina"];break;case"sd":j=["South Dakota"];break;case"tn":j=["Tennessee"];break;case"tx":j=["Texas"];break;case"ut":j=["Utah"];break;case"vt":j=["Vermont"];break;case"va":j=["Virginia"];break;case"wa":j=["Washington"];break;case"wv":j=["West Virginia"];break;case"wi":j=["Wisconsin"];break;case"wy":j=["Wyoming"];break;default:j=[]}n()}else if(/metro\/.+$/i.test(location.href)){switch(X[X.length-1]){case"adrian-mi":H=["Adrian, MI"];break;case"akron-oh":H=["Akron, OH"];break;case"albany-schenectady-troy-ny":H=["Albany-Schenectady-Troy, NY"];break;case"albertville-al":H=["Albertville, AL"];break;case"albuquerque-nm":H=["Albuquerque, NM"];break;case"allegan-mi":H=["Allegan, MI"];break;case"allentown-bethlehem-easton-pa-nj":H=["Allentown-Bethlehem-Easton, PA-NJ"];break;case"altoona-pa":H=["Altoona, PA"];break;case"amarillo-tx":H=["Amarillo, TX"];break;case"ames-ia":H=["Ames, IA"];break;case"anchorage-ak":H=["Anchorage, AK"];break;case"anderson-in":H=["Anderson, IN"];break;case"ann-arbor-mi":H=["Ann Arbor, MI"];break;case"appleton-wi":H=["Appleton, WI"];break;case"asheville-nc":H=["Asheville, NC"];break;case"athens-clarke-ga":H=["Athens-Clarke, GA"];break;case"atlanta":H=["Atlanta"];break;case"atlantic-city-nj":H=["Atlantic City, NJ"];break;case"auburn-opelika-al":H=["Auburn-Opelika, AL"];break;case"augusta-richmond-ga-sc":H=["Augusta-Richmond, GA-SC"];break;case"austin":H=["Austin"];break;case"bainbridge-ga":H=["Bainbridge, GA"];break;case"bakersfield-ca":H=["Bakersfield, CA"];break;case"baltimore":H=["Baltimore"];break;case"barnstable-town-ma":H=["Barnstable Town, MA"];break;case"batavia-ny":H=["Batavia, NY"];break;case"baton-rouge-la":H=["Baton Rouge, LA"];break;case"bay-city-mi":H=["Bay City, MI"];break;case"beaumont-port-arthur-tx":H=["Beaumont-Port Arthur, TX"];break;case"beaver-dam-wi":H=["Beaver Dam, WI"];break;case"bellingham-wa":H=["Bellingham, WA"];break;case"bemidji-mn":H=["Bemidji, MN"];break;case"birmingham-hoover-al":H=["Birmingham-Hoover, AL"];break;case"blacksburg-christiansburg-radford-va":H=["Blacksburg-Christiansburg-Radford, VA"];break;case"bloomington-in":H=["Bloomington, IN"];break;case"bloomington-normal-il":H=["Bloomington-Normal, IL"];break;case"boise-city-nampa-id":H=["Boise City-Nampa, ID"];break;case"boston":H=["Boston"];break;case"boulder-co":H=["Boulder, CO"];break;case"bowling-green-ky":H=["Bowling Green, KY"];break;case"bozeman-mt":H=["Bozeman, MT"];break;case"brainerd-mn":H=["Brainerd, MN"];break;case"bridgeport-stamford-norwalk-ct":H=["Bridgeport-Stamford-Norwalk, CT"];break;case"brownsville-harlingen-tx":H=["Brownsville-Harlingen, TX"];break;case"buffalo-niagara-falls-ny":H=["Buffalo-Niagara Falls, NY"];break;case"burlington-nc":H=["Burlington, NC"];break;case"burlington-south-burlington-vt":H=["Burlington-South Burlington, VT"];break;case"canton-massillon-oh":H=["Canton-Massillon, OH"];break;case"cape-coral-fort-myers-fl":H=["Cape Coral-Fort Myers, FL"];break;case"cedar-rapids-ia":H=["Cedar Rapids, IA"];break;case"chambersburg-pa":H=["Chambersburg, PA"];break;case"champaign-urbana-il":H=["Champaign-Urbana, IL"];break;case"charleston-mattoon-il":H=["Charleston-Mattoon, IL"];break;case"charleston-north-charleston-sc":H=["Charleston-North Charleston, SC"];break;case"charlotte":H=["Charlotte"];break;case"charlottesville-va":H=["Charlottesville, VA"];break;case"chattanooga-tn-ga":H=["Chattanooga, TN-GA"];break;case"chicago":H=["Chicago"];break;case"cincinnati":H=["Cincinnati"];break;case"cleveland":H=["Cleveland"];break;case"coeur-dalene-id":H=["Coeur d'Alene, ID"];break;case"college-station-bryan-tx":H=["College Station-Bryan, TX"];break;case"colorado-springs-co":H=["Colorado Springs, CO"];break;case"columbia-mo":H=["Columbia, MO"];break;case"columbia-sc":H=["Columbia, SC"];break;case"columbia-tn":H=["Columbia, TN"];break;case"columbus-in":H=["Columbus, IN"];break;case"columbus-ms":H=["Columbus, MS"];break;case"columbus-oh":H=["Columbus, OH"];break;case"concord-nh":H=["Concord, NH"];break;case"cornelia-ga":H=["Cornelia, GA"];break;case"coshocton-oh":H=["Coshocton, OH"];break;case"cullman-al":H=["Cullman, AL"];break;case"culpeper-va":H=["Culpeper, VA"];break;case"dallas":H=["Dallas"];break;case"danville-ky":H=["Danville, KY"];break;case"daphne-fairhope-foley-al":H=["Daphne-Fairhope-Foley, AL"];break;case"davenport-moline-rock-island-ia-il":H=["Davenport-Moline-Rock Island, IA-IL"];break;case"dayton-oh":H=["Dayton, OH"];break;case"denver":H=["Denver"];break;case"des-moines-west-des-moines-ia":H=["Des Moines-West Des Moines, IA"];break;case"detroit":H=["Detroit"];break;case"dover-de":H=["Dover, DE"];break;case"duluth-mn-wi":H=["Duluth, MN-WI"];break;case"durham-nc":H=["Durham, NC"];break;case"east-stroudsburg-pa":H=["East Stroudsburg, PA"];
break;case"el-centro-ca":H=["El Centro, CA"];break;case"el-paso-tx":H=["El Paso, TX"];break;case"elizabethtown-ky":H=["Elizabethtown, KY"];break;case"elk-city-ok":H=["Elk City, OK"];break;case"elkhart-goshen-in":H=["Elkhart-Goshen, IN"];break;case"enterprise-ozark-al":H=["Enterprise-Ozark, AL"];break;case"erie-pa":H=["Erie, PA"];break;case"eugene-springfield-or":H=["Eugene-Springfield, OR"];break;case"evansville-in-ky":H=["Evansville, IN-KY"];break;case"fairmont-mn":H=["Fairmont, MN"];break;case"fargo-nd-mn":H=["Fargo, ND-MN"];break;case"fayetteville-nc":H=["Fayetteville, NC"];break;case"fayetteville-springdale-rogers-ar-mo":H=["Fayetteville-Springdale-Rogers, AR-MO"];break;case"findlay-oh":H=["Findlay, OH"];break;case"flint-mi":H=["Flint, MI"];break;case"florence-sc":H=["Florence, SC"];break;case"fond-du-lac-wi":H=["Fond du Lac, WI"];break;case"fort-collins-loveland-co":H=["Fort Collins-Loveland, CO"];break;case"fort-walton-beach-crestview-destin-fl":H=["Fort Walton Beach-Crestview-Destin, FL"];break;case"fort-wayne-in":H=["Fort Wayne, IN"];break;case"fresno-ca":H=["Fresno, CA"];break;case"gainesville-fl":H=["Gainesville, FL"];break;case"georgetown-sc":H=["Georgetown, SC"];break;case"grand-forks-nd-mn":H=["Grand Forks, ND-MN"];break;case"grand-rapids-wyoming-mi":H=["Grand Rapids-Wyoming, MI"];break;case"green-bay-wi":H=["Green Bay, WI"];break;case"greensboro-high-point-nc":H=["Greensboro-High Point, NC"];break;case"greenville-nc":H=["Greenville, NC"];break;case"greenville-oh":H=["Greenville, OH"];break;case"greenville-mauldin-easley-sc":H=["Greenville-Mauldin-Easley, SC"];break;case"hagerstown-martinsburg-md-wv":H=["Hagerstown-Martinsburg, MD-WV"];break;case"harrisburg-carlisle-pa":H=["Harrisburg-Carlisle, PA"];break;case"harrisonburg-va":H=["Harrisonburg, VA"];break;case"hartford-west-hartford-east-hartford-ct":H=["Hartford-West Hartford-East Hartford, CT"];break;case"hastings-ne":H=["Hastings, NE"];break;case"hickory-lenoir-morganton-nc":H=["Hickory-Lenoir-Morganton, NC"];break;case"hilton-head-island-beaufort-sc":H=["Hilton Head Island-Beaufort, SC"];break;case"holland-grand-haven-mi":H=["Holland-Grand Haven, MI"];break;case"honolulu-hi":H=["Honolulu, HI"];break;case"hot-springs-ar":H=["Hot Springs, AR"];break;case"houma-bayou-cane-thibodaux-la":H=["Houma-Bayou Cane-Thibodaux, LA"];break;case"houston":H=["Houston"];break;case"huntington-in":H=["Huntington, IN"];break;case"huntsville-al":H=["Huntsville, AL"];break;case"idaho-falls-id":H=["Idaho Falls, ID"];break;case"indiana-pa":H=["Indiana, PA"];break;case"indianapolis-in":H=["Indianapolis, IN"];break;case"iowa-city-ia":H=["Iowa City, IA"];break;case"jackson-mi":H=["Jackson, MI"];break;case"jackson-ms":H=["Jackson, MS"];break;case"jacksonville-fl":H=["Jacksonville, FL"];break;case"jamestown-nd":H=["Jamestown, ND"];break;case"janesville-wi":H=["Janesville, WI"];break;case"jefferson-city-mo":H=["Jefferson City, MO"];break;case"johnson-city-tn":H=["Johnson City, TN"];break;case"jonesboro-ar":H=["Jonesboro, AR"];break;case"joplin-mo":H=["Joplin, MO"];break;case"kalamazoo-portage-mi":H=["Kalamazoo-Portage, MI"];break;case"kalispell-mt":H=["Kalispell, MT"];break;case"kansas-city-mo-ks":H=["Kansas City, MO-KS"];break;case"killeen-temple-fort-hood-tx":H=["Killeen-Temple-Fort Hood, TX"];break;case"kingsport-bristol-bristol-tn-va":H=["Kingsport-Bristol-Bristol, TN-VA"];break;case"kingston-ny":H=["Kingston, NY"];break;case"knoxville-tn":H=["Knoxville, TN"];break;case"la-crosse-wi-mn":H=["La Crosse, WI-MN"];break;case"laconia-nh":H=["Laconia, NH"];break;case"lafayette-la":H=["Lafayette, LA"];break;case"lake-charles-la":H=["Lake Charles, LA"];break;case"lancaster-pa":H=["Lancaster, PA"];break;case"lancaster-sc":H=["Lancaster, SC"];break;case"lansing-east-lansing-mi":H=["Lansing-East Lansing, MI"];break;case"laredo-tx":H=["Laredo, TX"];break;case"las-vegas-paradise-nv":H=["Las Vegas-Paradise, NV"];break;case"lawrence-ks":H=["Lawrence, KS"];break;case"lebanon-pa":H=["Lebanon, PA"];break;case"lewiston-auburn-me":H=["Lewiston-Auburn, ME"];break;case"lexington-park-md":H=["Lexington Park, MD"];break;case"lexington-fayette-ky":H=["Lexington-Fayette, KY"];break;case"lima-oh":H=["Lima, OH"];break;case"lincoln-ne":H=["Lincoln, NE"];break;case"little-rock-north-little-rock-conway-ar":H=["Little Rock-North Little Rock-Conway, AR"];break;case"logan-ut-id":H=["Logan, UT-ID"];break;case"longview-wa":H=["Longview, WA"];break;case"los-angeles":H=["Los Angeles"];break;case"louisville/jefferson-ky-in":H=["Louisville/Jefferson, KY-IN"];break;case"lubbock-tx":H=["Lubbock, TX"];break;case"macon-ga":H=["Macon, GA"];break;case"madera-ca":H=["Madera, CA"];break;case"madison-wi":H=["Madison, WI"];break;case"manchester-nashua-nh":H=["Manchester-Nashua, NH"];break;case"manhattan-ks":H=["Manhattan, KS"];break;case"manitowoc-wi":H=["Manitowoc, WI"];break;case"mansfield-oh":H=["Mansfield, OH"];break;case"medford-or":H=["Medford, OR"];break;case"memphis-tn-ms-ar":H=["Memphis, TN-MS-AR"];break;case"miami":H=["Miami"];break;case"michigan-city-la-porte-in":H=["Michigan City-La Porte, IN"];break;case"milwaukee-waukesha-west-allis-wi":H=["Milwaukee-Waukesha-West Allis, WI"];break;case"minneapolis":H=["Minneapolis"];break;case"missoula-mt":H=["Missoula, MT"];break;case"mobile-al":H=["Mobile, AL"];break;case"monroe-la":H=["Monroe, LA"];break;case"monroe-mi":H=["Monroe, MI"];break;case"montgomery-al":H=["Montgomery, AL"];break;case"morehead-city-nc":H=["Morehead City, NC"];break;case"morgantown-wv":H=["Morgantown, WV"];break;case"morristown-tn":H=["Morristown, TN"];break;case"moscow-id":H=["Moscow, ID"];break;case"mount-pleasant-mi":H=["Mount Pleasant, MI"];break;case"myrtle-beach-conway-north-myrtle-beach-sc":H=["Myrtle Beach-Conway-North Myrtle Beach, SC"];break;case"napa-ca":H=["Napa, CA"];break;case"naples-marco-island-fl":H=["Naples-Marco Island, FL"];break;case"nashville":H=["Nashville"];break;case"new-castle-pa":H=["New Castle, PA"];break;case"new-haven-milford-ct":H=["New Haven-Milford, CT"];break;case"new-iberia-la":H=["New Iberia, LA"];break;case"new-orleans-metairie-kenner-la":H=["New Orleans-Metairie-Kenner, LA"];break;case"new-york-city":H=["New York City"];break;case"new-york":H=["New York City"];break;case"newberry-sc":H=["Newberry, SC"];break;case"newport-tn":H=["Newport, TN"];break;case"norwich-new-london-ct":H=["Norwich-New London, CT"];break;case"ocala-fl":H=["Ocala, FL"];break;case"ogden-clearfield-ut":H=["Ogden-Clearfield, UT"];break;case"oklahoma-city-ok":H=["Oklahoma City, OK"];break;case"olympia-wa":H=["Olympia, WA"];break;case"omaha-council-bluffs-ne-ia":H=["Omaha-Council Bluffs, NE-IA"];break;case"orlando-fl":H=["Orlando, FL"];break;case"oshkosh-neenah-wi":H=["Oshkosh-Neenah, WI"];break;case"oskaloosa-ia":H=["Oskaloosa, IA"];break;case"owensboro-ky":H=["Owensboro, KY"];break;case"oxford-ms":H=["Oxford, MS"];break;case"oxnard-thousand-oaks-ventura-ca":H=["Oxnard-Thousand Oaks-Ventura, CA"];break;case"palatka-fl":H=["Palatka, FL"];break;case"palm-bay-melbourne-titusville-fl":H=["Palm Bay-Melbourne-Titusville, FL"];break;case"panama-city-lynn-haven-fl":H=["Panama City-Lynn Haven, FL"];break;case"pensacola-ferry-pass-brent-fl":H=["Pensacola-Ferry Pass-Brent, FL"];break;case"peoria-il":H=["Peoria, IL"];break;case"philadelphia":H=["Philadelphia"];break;case"phoenix":H=["Phoenix"];break;case"pittsburgh-pa":H=["Pittsburgh, PA"];break;case"port-st.-lucie-fl":H=["Port St. Lucie, FL"];break;case"portland-or":H=["Portland, OR"];break;case"portland-south-portland-biddeford-me":H=["Portland-South Portland-Biddeford, ME"];break;case"poughkeepsie-newburgh-middletown-ny":H=["Poughkeepsie-Newburgh-Middletown, NY"];break;case"prescott-az":H=["Prescott, AZ"];break;case"price-ut":H=["Price, UT"];break;case"prineville-or":H=["Prineville, OR"];break;case"providence-new-bedford-fall-river-ri-ma":H=["Providence-New Bedford-Fall River, RI-MA"];break;case"provo-orem-ut":H=["Provo-Orem, UT"];break;case"pueblo-co":H=["Pueblo, CO"];break;case"punta-gorda-fl":H=["Punta Gorda, FL"];break;case"racine-wi":H=["Racine, WI"];break;case"raleigh-cary-nc":H=["Raleigh-Cary, NC"];break;case"reading-pa":H=["Reading, PA"];break;case"red-wing-mn":H=["Red Wing, MN"];break;case"redding-ca":H=["Redding, CA"];break;case"reno-sparks-nv":H=["Reno-Sparks, NV"];break;case"richmond-va":H=["Richmond, VA"];break;case"riverside-san-bernardino-ontario-ca":H=["Riverside-San Bernardino-Ontario, CA"];break;case"roanoke-va":H=["Roanoke, VA"];break;case"rochester-ny":H=["Rochester, NY"];break;case"rockford-il":H=["Rockford, IL"];break;case"rome-ga":H=["Rome, GA"];break;case"roseburg-or":H=["Roseburg, OR"];break;case"ruston-la":H=["Ruston, LA"];break;case"sacramento--arden-arcade--roseville-ca":H=["Sacramento--Arden-Arcade--Roseville, CA"];break;case"saginaw-saginaw-township-north-mi":H=["Saginaw-Saginaw Township North, MI"];break;case"salem-or":H=["Salem, OR"];break;case"salinas-ca":H=["Salinas, CA"];break;case"salisbury-nc":H=["Salisbury, NC"];break;case"salt-lake-city":H=["Salt Lake City"];break;case"san-antonio-tx":H=["San Antonio, TX"];break;case"san-diego":H=["San Diego"];break;case"san-francisco":H=["San Francisco"];break;case"san-jose":H=["San Jose"];break;case"san-juan-caguas-guaynabo-pr":H=["San Juan-Caguas-Guaynabo, PR"];break;case"san-luis-obispo-paso-robles-ca":H=["San Luis Obispo-Paso Robles, CA"];break;case"sandusky-oh":H=["Sandusky, OH"];break;case"santa-barbara-santa-maria-goleta-ca":H=["Santa Barbara-Santa Maria-Goleta, CA"];break;case"santa-cruz-watsonville-ca":H=["Santa Cruz-Watsonville, CA"];break;case"santa-rosa-petaluma-ca":H=["Santa Rosa-Petaluma, CA"];break;case"sarasota-bradenton-venice-fl":H=["Sarasota-Bradenton-Venice, FL"];break;case"savannah-ga":H=["Savannah, GA"];break;case"scranton--wilkes-barre-pa":H=["Scranton--Wilkes-Barre, PA"];break;case"seaford-de":H=["Seaford, DE"];break;case"seattle":H=["Seattle"];break;case"sevierville-tn":H=["Sevierville, TN"];break;case"shreveport-bossier-city-la":H=["Shreveport-Bossier City, LA"];break;case"sioux-city-ia-ne-sd":H=["Sioux City, IA-NE-SD"];break;case"sioux-falls-sd":H=["Sioux Falls, SD"];break;case"somerset-pa":H=["Somerset, PA"];break;case"south-bend-mishawaka-in-mi":H=["South Bend-Mishawaka, IN-MI"];break;case"southern-pines-pinehurst-nc":H=["Southern Pines-Pinehurst, NC"];break;case"spartanburg-sc":H=["Spartanburg, SC"];break;case"spencer-ia":H=["Spencer, IA"];break;case"spokane-wa":H=["Spokane, WA"];break;case"springfield-il":H=["Springfield, IL"];break;case"springfield-ma":H=["Springfield, MA"];break;case"springfield-mo":H=["Springfield, MO"];break;case"springfield-oh":H=["Springfield, OH"];break;case"st.-cloud-mn":H=["St. Cloud, MN"];break;case"st.-louis-mo-il":H=["St. Louis, MO-IL"];break;case"state-college-pa":H=["State College, PA"];break;case"statesville-mooresville-nc":H=["Statesville-Mooresville, NC"];break;case"stillwater-ok":H=["Stillwater, OK"];break;case"stockton-ca":H=["Stockton, CA"];break;case"syracuse-ny":H=["Syracuse, NY"];break;case"tallahassee-fl":H=["Tallahassee, FL"];break;case"tampa":H=["Tampa"];break;case"terre-haute-in":H=["Terre Haute, IN"];break;case"thomasville-lexington-nc":H=["Thomasville-Lexington, NC"];break;case"toledo-oh":H=["Toledo, OH"];break;case"torrington-ct":H=["Torrington, CT"];break;case"traverse-city-mi":H=["Traverse City, MI"];break;case"trenton-ewing-nj":H=["Trenton-Ewing, NJ"];break;case"truckee-grass-valley-ca":H=["Truckee-Grass Valley, CA"];break;case"tucson-az":H=["Tucson, AZ"];break;case"tulsa-ok":H=["Tulsa, OK"];break;case"tyler-tx":H=["Tyler, TX"];break;case"utica-rome-ny":H=["Utica-Rome, NY"];break;case"vallejo-fairfield-ca":H=["Vallejo-Fairfield, CA"];break;case"valley-al":H=["Valley, AL"];break;case"victoria-tx":H=["Victoria, TX"];break;case"virginia-beach-norfolk-newport-news-va-nc":H=["Virginia Beach-Norfolk-Newport News, VA-NC"];break;case"visalia-porterville-ca":H=["Visalia-Porterville, CA"];break;case"warsaw-in":H=["Warsaw, IN"];break;case"washington-dc":H=["Washington, DC"];break;case"waterloo-cedar-falls-ia":H=["Waterloo-Cedar Falls, IA"];break;case"watertown-fort-drum-ny":H=["Watertown-Fort Drum, NY"];break;case"wenatchee-wa":H=["Wenatchee, WA"];break;case"west-point-ms":H=["West Point, MS"];break;case"wichita-ks":H=["Wichita, KS"];break;case"williamsport-pa":H=["Williamsport, PA"];break;case"wilmington-nc":H=["Wilmington, NC"];break;case"winchester-va-wv":H=["Winchester, VA-WV"];break;case"winston-salem-nc":H=["Winston-Salem, NC"];break;case"wooster-oh":H=["Wooster, OH"];break;case"worcester-ma":H=["Worcester, MA"];break;case"youngstown-warren-boardman-oh-pa":H=["Youngstown-Warren-Boardman, OH-PA"]}n()}else if(/industry\/.+$/i.test(location.href)){switch(X[X.length-1]){case"insurance":V=["Insurance"];break;case"financial-services":V=["Financial Services"];break;case"real-estate":V=["Real Estate"];break;case"consumer-products-services":V=["Consumer Products & Services"];break;case"advertising-marketing":V=["Advertising & Marketing"];break;case"logistics-transportation":V=["Logistics & Transportation"];break;case"government-services":V=["Government Services"];break;case"it-services":V=["IT Services"];break;case"software":V=["Software"];break;case"health":V=["Health"];break;case"food-beverage":V=["Food & Beverage"];break;case"media":V=["Media"];break;case"security":V=["Security"];break;case"telecommunications":V=["Telecommunications"];break;case"manufacturing":V=["Manufacturing"];break;case"energy":V=["Energy"];break;case"business-products-services":V=["Business Products & Services"];break;case"retail":V=["Retail"];break;case"education":V=["Education"];break;case"construction":V=["Construction"];break;case"human-resources":V=["Human Resources"];break;case"travel":V=["Travel"];break;case"environmental-services":V=["Environmental Services"];break;case"engineering":V=["Engineering"];break;case"computer-hardware":V=["Computer Hardware"];break;case"business-services":V=["Business Services"];break;case"consumer-products":V=["Consumer Products"];break;case"computers-electronics":V=["Computers & Electronics"];break;case"logistics":V=["Logistics"];break;case"transportation":V=["Transportation"];break;case"defense-contractors":V=["Defense Contractors"];break;case"consulting":V=["Consulting"]}n()}else if(/honorroll?(\/)$/i.test(location.href)){for(i=5;i<=C.length;i++)W.push(i);t("times_on_list"),n()}else if(/multiyear?(\/)$/i.test(location.href)){for(i=2;i<=C.length;i++)W.push(i);t("times_on_list"),n()}else h(y,1,P)}function t(e){F.push(e),F=_.uniq(F),n()}function n(){if(U=P,H.length>0){var e=_.filter(U,function(e){for(i=0;i<H.length;i++)if(e.metro==H[i])return e.metro});U=e}if(V.length>0&&j.length>0){var t=_.filter(U,function(e){for(i=0;i<V.length;i++)if(e.industry==V[i])return e.industry}),n=_.filter(t,function(e){for(i=0;i<j.length;i++)if(e.state_l==j[i])return e.state_l});U=n}else if(V.length>0&&0===j.length){var t=_.filter(U,function(e){for(i=0;i<V.length;i++)if(e.industry==V[i])return e.industry});U=t}else if(0===V.length&&j.length>0){var n=_.filter(U,function(e){for(i=0;i<j.length;i++)if(e.state_l==j[i])return e.state_l});U=n}else 0===H.length&&(U=P);for(x=U,i=0;i<F.length;i++)"employees"==F[i]?u():"times_on_list"==F[i]?o():"revenue"==F[i]&&p();$("#states_select .item").each(function(e){$(this).children("input:checkbox").val()==j[0]&&$(this).addClass("bold").prop("checked",!0)}),h(y,1,U),c(1)}function s(e){$("#times_on_list_options, #mobile_times_on_list").empty();var t=_.pluck(e,"yrs_on_list"),n=_.uniq(t);for(C=_.sortBy(n,function(e){return e}),$("#times_on_list_options").append('<div class="tol_option" data-value="0">All</div>'),$("#mobile_times_on_list").append('<option value="0">All</option>'),i=0;i<C.length;i++)$("#times_on_list_options").append('<div class="tol_option" data-value="'+C[i]+'">'+C[i]+"</div>"),$("#mobile_times_on_list").append('<option value="'+C[i]+'">'+C[i]+"</option>")}function o(){times_on_list=_.filter(U,function(e){for(i=0;i<W.length;i++)if(parseInt(e.yrs_on_list)===W[i])return e}),W.length>1&&(times_on_list=_.sortBy(times_on_list,"yrs_on_list"),times_on_list.reverse()),times_on_list.length>0?U=times_on_list:F.splice(F.indexOf("times_on_list",1))}function a(){var e=[{label:"$2 million",value:0},{label:"$5 million",value:5e6},{label:"$10 million",value:1e7},{label:"$20 million",value:2e7},{label:"$50 million",value:5e7},{label:"$100 million",value:1e8},{label:"$250 million",value:25e7},{label:"$500 million",value:5e8},{label:"$1 billion",value:1e9}],t=[{label:"$5 million",value:5e6},{label:"$10 million",value:1e7},{label:"$20 million",value:2e7},{label:"$50 million",value:5e7},{label:"$100 million",value:1e8},{label:"$250 million",value:25e7},{label:"$500 million",value:5e8},{label:"$1 billion",value:1e9},{label:"$1 billion+",value:1e12}];for(i=0;i<e.length;i++)$("#rev_filter_1_options").append('<div class="revenue_option" data-rev-value="'+e[i].value+'">'+e[i].label+"</div>");for(i=0;i<t.length;i++)$("#rev_filter_2_options").append('<div class="revenue_option" data-rev-value="'+t[i].value+'">'+t[i].label+"</div>");$("#rev_filter_1").html(e[0].label),$("#rev_filter_2").html(t[t.length-1].label)}function r(t,n){$.getJSON(inc.applicationURL+"inc5000list/json/inc5000_"+t+".json",function(t){for(i=0;i<t.length;i++)P[i]=t[i];n===!0&&(I=t.length,$("#page").val(N),N=1,s(t),l(),e(),$("#emp_filter_1").html("No Employees"),$("#emp_filter_2").html("200,000 Employees"),$("#show_field").html(y),c(N),A=$("title").text)})}function l(){if("undefined"!=typeof X){$("#year").html(k),$("#mobile_year option[value="+k+"]").prop("selected","true");var e="/";if(/\d{4}/i.test(X[2])){for(X[2]=k,i=0;i<X.length;i++)e=e+X[i]+"/";window.history.replaceState({},$("title").text(),e)}else{for(i=0;i<X.length;i++)i<2?e=e+X[i]+"/":2==i?e=e+k+"/"+X[2]+"/":i>2&&(e=e+X[i]+"/");inc.i.ops.splice(2,0,k),window.history.replaceState({},$("title").text(),e)}}}function c(e,t){if(w=Math.ceil(I/y),$("#page_tuner_fill").empty(),e>0&&w>e&&$("#mobile_page_tuner_fill").html(e),e>0&&7>e?($("#page_tuner .perm-l").html("2").data("pageflag","2"),$("#page_tuner .perm-r").html("...").data("pageflag",w-1)):e>6&&w-5>e?($("#page_tuner .perm-l").html("...").data("pageflag","2"),$("#page_tuner .perm-r").html("...").data("pageflag",w-1)):e>w-6&&w+1>e&&($("#page_tuner .perm-l").html("...").data("pageflag","2"),$("#page_tuner .perm-r").html(w-1).data("pageflag",w-1)),7>e?(tuner=3,max=tuner+7):e>6&&w-4>e?(tuner=e-3,max=tuner+7):e>w-3&&w>=e&&(tuner=w-8,max=tuner+7),$(".num-l").html("1").data("pageflag","1"),$(".num-r").html(w).data("pageflag",w),/(inc5000)\/?(index\.html)?(\?.+)?$/i.test(window.location.href)||$("#snappy-inc5000").is(":hidden"))if(U.length<P.length)$(".num-l, .num-r, .perm-l, .perm-r").hide(),$("#page_tuner_fill").empty().append("SEARCH RESULTS: "+U.length),w=U.length/y;else if($("#search_company_name").val().length>0)$(".num-l, .num-r, .perm-l, .perm-r").hide(),$("#page_tuner_fill").empty().append("SEARCH RESULTS: "+E.length),w=E.length/y;else for($(".num-l, .num-r, .perm-l, .perm-r").show(),$("#page_tuner_fill").empty(),i=tuner;i<max;i++)$("#page_tuner_fill").append('<div class="gold box b'+i+'" data-pageflag="'+i+'">'+i+"</div>");else $("#snappy-inc5000").is(":visible")&&(U.length<P.length?($("#page_tuner_fill").empty().append("RESULTS: "+U.length),w=U.length/y):$("#search_company_name").val().length>0?($("#page_tuner_fill").empty().append("RESULTS: "+E.length),w=E.length/y):$("#page_tuner_fill").empty().html("PAGE: "+e));switch(e){case 1:$(".box").removeClass("selected"),$(".num-l").addClass("selected");break;case 2:$(".box").removeClass("selected"),$(".perm-l").addClass("selected");break;case w-1:$(".box").removeClass("selected"),$(".perm-r").addClass("selected");break;case w:$(".box").removeClass("selected"),$(".num-r").addClass("selected");break;case N:$(".box").removeClass("selected"),$(".b"+N).addClass("selected")}$("#page").val(e)}function h(e,t,n){$("#data_container table").empty();var s=e*t-e;for(s>I-e&&(s=I-e,N=I-e),0>s&&(s=0,N=0),i=0;i<n.length;i++)if(i>=s&&i<s+e){var o=Math.round(n[i].growth);o=m(o)+"%";var a=Math.round(n[i].workers);a=m(a);var r=f(n[i].revenue),l='<tr class="data_row"><td class="c1">'+n[i].rank+'</td><td class="c2"><a href="/profile/'+n[i].url+'" target="_blank">'+n[i].company+'</a></td><td class="c3">'+o+'</td><td class="c4">'+r+'</td><td class="c5" colspan="2">'+n[i].industry+'</td><td class="c6" colspan="2">'+n[i].state_l+'</td><td class="c7" colspan="2">'+n[i].metro+'</td><td class="c8" colspan="2">'+n[i].workers+"</td></tr>",c='<tr><td colspan="6" id="inc5000listapp-ad-placement-'+i+'" class="list_ad_slot"></td></tr><tr><td colspan="6" class="list_ad_filler"></tr>';10===y&&i===s+5||i===s+20||i===s+30||i===s+40||i===s+70||i===s+90||i===s+110||i===s+130||i===s+150||i===s+170||i===s+190?/(inc5000)\/?(index\.html)?(\?.+)?$/i.test(location.href)?line=l:(line=c+l,inc.ready?inc.adManager.insertInc5000ListAd(i):inc.adManager.queue.push(_.partial(inc.adManager.insertInc5000ListAd,i))):line=l,$("#data_container table").append(line)}v(),N=t,$("#page").val(t),$(".c2").each(function(e){var t=$(this).text(),i=/\s/gi.test(t);t.length>=20&&t.length<24&&i===!1?$(this).addClass("small_16"):t.length>=24&&t.length<26&&i===!1?$(this).addClass("small_14"):t.length>=26&&i===!1&&$(this).addClass("small_13")}),d()}function d(){var e=$(window).width(),t=$("#mobile_search").width(),i=$("#mobile_show_pages").width(),n=e-Math.abs(t)-Math.abs(i);$("#mobile_page_tuner").width(n+"px")}function u(){console.log("emp1: "+L),console.log("emp2: "+B);var e=_.filter(U,function(e){return e.workers>=L&&e.workers<=B?e:void 0}),t=_.sortBy(e,"workers");return U=t}function p(){R=$("#rev1").val(),O=$("#rev2").val();var e=_.filter(U,function(e){return e.revenue>=R&&e.revenue<=O?e:void 0}),t=_.sortBy(e,"revenue");return U=t}function m(e){var t=e.toString().split(".");return t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),t.join(".")}function f(e){var t=Math.round(e),i=t.toString().length,n=[];switch(t=t.toString(),i){case 12:return n[1]=t.substring(0,3),n[2]=t.substring(3,4),n[2]>0?n[0]=".":(n[0]="",n[2]=""),t="$"+n[1]+n[0]+n[2]+"b";case 11:return n[1]=t.substring(0,2),n[2]=t.substring(2,3),n[2]>0?n[0]=".":(n[0]="",n[2]=""),t="$"+n[1]+n[0]+n[2]+"b";case 10:return n[1]=t.substring(0,1),n[2]=t.substring(1,2),n[2]>0?n[0]=".":(n[0]="",n[2]=""),t="$"+n[1]+n[0]+n[2]+"b";case 9:return n[1]=t.substring(0,3),n[2]=t.substring(3,4),n[2]>0?n[0]=".":(n[0]="",n[2]=""),t="$"+n[1]+n[0]+n[2]+"m";case 8:return n[1]=t.substring(0,2),n[2]=t.substring(2,3),n[2]>0?n[0]=".":(n[0]="",n[2]=""),t="$"+n[1]+n[0]+n[2]+"m";case 7:return n[1]=t.substring(0,1),n[2]=t.substring(1,2),n[2]>0?n[0]=".":(n[0]="",n[2]=""),t="$"+n[1]+n[0]+n[2]+"m";case 6:return n[1]=t.substring(0,3),n[2]=t.substring(3,4),n[2]>0?n[0]=".":(n[0]="",n[2]=""),t="$"+n[1]+n[0]+n[2]+"k";case 5:return n[1]=t.substring(0,2),n[2]=t.substring(2,3),n[2]>0?n[0]=".":(n[0]="",n[2]=""),t="$"+n[1]+n[0]+n[2]+"k";case 4:return n[1]=t.substring(0,1),n[2]=t.substring(1,2),n[2]>0?n[0]=".":(n[0]="",n[2]=""),t="$"+n[1]+n[0]+n[2]+"k"}}function g(){E=_.filter(U,function(e){return M.test(e.company)}),T=N,E.length<U.length?($("#reset_search").html("&#xf00d;"),h(y,1,E),c(1),$("#page").val("1")):($("#reset_search").html("&#xf002;"),h(y,T,E),c(T),$("#page").val(T))}function v(){0===D?($("#list_headers .c5").text("INDUSTRY"),$("table .c6, table .c7, table .c8").hide(),$("table .c5").show()):1===D?($("#list_headers .c5").text("STATE"),$("table .c5, table .c7, table .c8").hide(),$("table .c6").show()):2===D?($("#list_headers .c5").text("METRO AREA"),$("table .c5, table .c6, table .c8").hide(),$("table .c7").show()):3===D&&($("#list_headers .c5").text("EMPLOYEES"),$("table .c5, table .c6, table .c7").hide(),$("table .c8").show())}function b(){for(i=0;i<q.length;i++)$("#mobile_year").append('<option value="'+q[i]+'">'+q[i]+"</option>")}var y,w,k,I,C,x,S,T,A,M,P=[],E=[],N=1,D=0,R=0,O=1e12,L=0,B=2e5,F=[],U=P,z=!1,H=[],j=[],V=[],W=[],q=[2015,2014,2013,2012,2011,2010,2009,2008,2007],G=[0,0,0,0,0,0,0,0],Y=navigator.userAgent.toLowerCase(),K=-1!=Y.indexOf("msie")?parseInt(Y.split("msie")[1]):!1;$("#rev1").val("0"),$("#rev2").val("1000000000000");var X=inc.i.ops;for(k="undefined"!=typeof X&&/\d{4}/i.test(X[2])?X[2]:q[0],y=/(inc5000)\/?(index\.html)?(\?.+)?$/i.test(location.href)?10:50,r(k,!0),a(),b(),i=0;i<q.length;i++)$("#year_options").append('<div class="year_option" data-year="'+q[i]+'">'+q[i]+"</div>");$("#year").html(k),$("#rev_filter_1").click(function(){$("#rev_filter_1_options").fadeToggle(150)}),$("#rev_filter_2").click(function(){$("#rev_filter_2_options").fadeToggle(150)}),$("#rev_filter_1_options").on("click",".revenue_option",function(){$("#rev1").val($(this).data("rev-value")),$("#rev_filter_1_options").fadeOut(150),$("#rev_filter_1").html($(this).text()),t("revenue")}),$("#rev_filter_2_options").on("click",".revenue_option",function(){$("#rev2").val($(this).data("rev-value")),$("#rev_filter_2_options").fadeOut(150),$("#rev_filter_2").html($(this).text()),t("revenue")}),$("#emp_filter_1").click(function(){$("#emp_filter_1_options").fadeToggle(150)}),$("#emp_filter_2").click(function(){$("#emp_filter_2_options").fadeToggle(150)}),$("#emp_filter_1_options").on("click",".noe_option",function(){$("#emp1").val($(this).data("value")),L=$("#emp1").val(),$("#emp_filter_1_options").fadeOut(150),$("#emp_filter_1").html($(this).text()),t("employees"),D=3,v()}),$("#emp_filter_2_options").on("click",".noe_option",function(){$("#emp2").val($(this).data("value")),B=$("#emp2").val(),$("#emp_filter_2_options").fadeOut(150),$("#emp_filter_2").html($(this).text()),t("employees"),D=3,v()}),$("#times_on_list").click(function(){$("#times_on_list_options").fadeToggle(150)}),$("#times_on_list_options").on("click",".tol_option",function(){$("#times_on_list").html($(this).text()),$("#times_on_list_options").fadeOut(150),W="All"!=$(this).text()?[parseInt($(this).text())]:[0],W=_.uniq(W),t("times_on_list")}),$("#industry_filter .item").click(function(){$(this).children("input:checkbox").prop("checked")===!1?($(this).addClass("bold"),$(this).children("input:checkbox").prop("checked",!0),V.push($(this).children("input:checkbox").val()),console.log(V)):$(this).children("input:checkbox").prop("checked")===!0&&($(this).removeClass("bold"),$(this).children("input:checkbox").prop("checked",!1),V.splice(V.indexOf($(this).children("input:checkbox").val()),1),console.log(V)),V=_.uniq(V),n()}),$("#location_filter .select").on("click",".item",function(){$(this).children("input:checkbox").prop("checked")===!1?($(this).addClass("bold"),$(this).children("input:checkbox").prop("checked",!0),j.push($(this).children("input:checkbox").val())):$(this).children("input:checkbox").prop("checked")===!0&&($(this).removeClass("bold"),$(this).children("input:checkbox").prop("checked",!1),j.splice(j.indexOf($(this).children("input:checkbox").val()),1)),j=_.uniq(j),n()}),$("#metro_filter .select").on("click",".item",function(){$(this).children("input:checkbox").prop("checked")===!1?($(this).addClass("bold"),$(this).children("input:checkbox").prop("checked",!0),H.push($(this).children("input:checkbox").val())):$(this).children("input:checkbox").prop("checked")===!0&&($(this).removeClass("bold"),$(this).children("input:checkbox").prop("checked",!1),H.splice(H.indexOf($(this).children("input:checkbox").val()),1)),H=_.uniq(H),n()}),$("#reset_form").click(function(){j=[],V=[],F=[],W=[],$("#rev_filter_1_options, #rev_filter_2_options").empty(),a(),W=[0],$("#times_on_list").html("All"),$(":checkbox").prop("checked",!1),$(".item").removeClass("bold"),$("#rev_filter_1,#rev_filter_2").empty(),n(),$(this).addClass("rotateIcon"),setTimeout(function(){$("#reset_form").removeClass("rotateIcon")},1e3)}),$(".close_menu").on("click",function(){$("#year_options, #show_options, #rev_filter_1_options, #rev_filter_2_options").fadeOut(150)}),$("#pageCount").submit(function(e){e.preventDefault(),$("#page").val()<1?$("#page").val(1):$("#page").val()>I/y&&$("#page").val(I/y),N=parseInt($("#page").val()),h(y,N,U),c(N)}),$("#page_tuner").on("click","#page_tuner_fill .box, .perm-l, .perm-r, .num-l, .num-r",function(){N=parseInt($(this).data("pageflag")),$("#page").val(N),h(y,N,U),c(N)}),$(".arrow-r").on("click",function(){w>N&&(N++,""!=$("#search_company_name").val()?(h(y,N,E),c(N)):(h(y,N,U),c(N)),$("#page").val(N))}),$(".arrow-l").on("click",function(){N>1&&(N--,""!=$("#search_company_name").val()?(h(y,N,E),c(N)):(h(y,N,U),c(N)),$("#page").val(N))}),$("#year").click(function(){$("#year_options").fadeToggle(150)}),$(".year_option").click(function(){k=parseInt($(this).data("year")),D=0,pagenum=1,l(),r(k,!0),c(N),$("#year_options").fadeToggle(150)}),$("#show_field").click(function(){$("#show_options").fadeToggle(150)}),$(".show_option").click(function(){var e=y;y=parseInt($(this).text()),w=Math.ceil(I/y),newPage=Math.ceil(N*(e/y)),$("#show_field").html(y),$("#show_options").fadeToggle(150),$("#show").val(y),1>N?$("#page").val(1):N>w?($("#page").val(w),N=w):N=newPage,h(y,N,U),c(N)}),$(".more").click(function(){3>D?D++:D=0,v()}),$("#search_company_name").keyup(function(){M=new RegExp($(this).val(),"ig"),g()}),$("#mobile_search_companies").keyup(function(){M=new RegExp($(this).val(),"ig")}),$("#reset_search").click(function(){if($("#search_company_name").val().length>0){for($("#search_company_name").val(""),M=null;E.length>0;)E.pop();h(y,T,U),c(T),$("#reset_search").html("&#xf002;")}}),$(window).resize(function(){$(this).mousedown()&&d()}),$("#mobile_search").click(function(){$("#mobile_search_panel").animate({top:"58px"},800)}),$("#mobile_search_panel #close").click(function(){$("#mobile_search_panel").animate({top:"100%"},800),n(),void 0!==typeof M&&g()}),$("#mobile_year").change(function(){k=$(this).val(),l(),r(k,!0),s(U)}),$("#mobile_times_on_list").change(function(){W=[$(this).val()],t("times_on_list")}),$("#list_headers .c1").click(function(){$("#list_headers div").not($(this)).removeClass("sortASC").removeClass("sortDSC"),0===G[0]?(S=_.sortBy(U,function(e){return parseInt(e.rank)}),G[0]=1,U=S.reverse(),$("#list_headers .c1").removeClass("sortASC").addClass("sortDSC")):1===G[0]&&(S=_.sortBy(U,function(e){return parseInt(e.rank)}),G[0]=0,U=S,$("#list_headers .c1").removeClass("sortDSC").addClass("sortASC")),h(y,1,U),c(1)}),$("#list_headers .c2").click(function(){$("#list_headers div").not($(this)).removeClass("sortASC").removeClass("sortDSC"),0===G[1]?(S=_.sortBy(U,function(e){return _.isString(e.company)?e.company.toLowerCase():String(e.company)}),G[1]=1,U=S,$("#list_headers .c2").addClass("sortASC")):1===G[1]?(S=_.sortBy(U,function(e){return _.isString(e.company)?e.company.toLowerCase():String(e.company)}),G[1]=2,U=S.reverse(),$("#list_headers .c2").removeClass("sortASC").addClass("sortDSC")):2===G[1]&&(S=_.sortBy(U,"rank"),G[1]=0,U=S,$("#list_headers .c2").removeClass("sortDSC")),h(y,1,U),c(1)}),$("#list_headers .c4").click(function(){$("#list_headers div").not($(this)).removeClass("sortASC").removeClass("sortDSC"),0===G[2]?(S=_.sortBy(U,function(e){return e.revenue}),G[2]=1,U=S,$("#list_headers .c4").addClass("sortASC")):1===G[2]?(S=_.sortBy(U,function(e){return e.revenue}),G[2]=2,U=S.reverse(),$("#list_headers .c4").removeClass("sortASC").addClass("sortDSC")):2===G[2]&&(S=_.sortBy(U,"rank"),G[2]=0,U=S,$("#list_headers .c4").removeClass("sortDSC")),h(y,1,U),c(1)}),$("#list_headers .c5").click(function(){$("#list_headers div").not($(this)).removeClass("sortASC").removeClass("sortDSC"),0===G[3]?(S=_.sortBy(U,function(e){return 0===D?_.isString(e.industry)?e.industry.toLowerCase():String(e.industry):1===D?_.isString(e.state_l)?e.state_l.toLowerCase():String(e.state_l):2===D?_.isString(e.metro)?e.metro.toLowerCase():String(e.metro):3===D?parseInt(e.employees):void 0}),G[3]=1,U=S,$("#list_headers .c5").addClass("sortASC")):1===G[3]?(S=_.sortBy(U,function(e){return 0===D?_.isString(e.industry)?e.industry.toLowerCase():String(e.industry):1===D?_.isString(e.state_l)?e.state_l.toLowerCase():String(e.state_l):2===D?_.isString(e.metro)?e.metro.toLowerCase():String(e.metro):3===D?e.employees:void 0;
}),G[3]=2,U=S.reverse(),$("#list_headers .c5").removeClass("sortASC").addClass("sortDSC")):2===G[3]&&(S=_.sortBy(U,"rank"),G[3]=0,U=S,$("#list_headers .c5").removeClass("sortDSC")),h(y,1,U),c(1)}),$("#more_options").click(function(){if(z===!1){if($("#more_options_container").fadeIn(),$("#more_options span").html("&#xf0d7;"),z=!0,$("#left").height()>$("#data_container").height()){var e=$(document).height();$(document).height($("#left").height()+20)}}else z===!0&&($("#more_options_container").fadeOut(),$("#more_options span").html("&#xf0da;"),z=!1,$("#left").height()>$("#data_container").height()&&$(document).height(e))}),$(window).scroll(function(){inc.user.admin?listDistFromTop=$("#right").offset().top-$(window).scrollTop()-93:inc.user.admin?8===K&&(listDistFromTop=$("#right").offset().top-$(window).scrollTop()):listDistFromTop=$("#right").offset().top-$(window).scrollTop()-58,listDistFromTop<=0&&8!==K&&/(inc5000)\/list\/?(.+)?$/i.test(window.location.href)?($("#page_tuner_fill").addClass("snappy-page_tuner_fill"),$(".num-l, .num-r, .perm-l, .perm-r").hide(),$("#snappy-inc5000").css({"z-index":"20"}),$("#list_headers, #page_tuner").css({"z-index":"21"}),inc.user.admin&&8!==K?($("#list_headers").addClass("fixedHeader").css({top:"145px",border:"none"}),$("#snappy-inc5000").css({top:"143px"}),$("#page_tuner").addClass("fixedHeader").css({top:"152px","margin-left":"-219px",border:"none","float":"right"})):inc.user.admin||8===K||($("#list_headers").addClass("fixedHeader").css({top:"145px",border:"none"}),$("#snappy-inc5000").css({top:"108px"}),$("#page_tuner").addClass("fixedHeader").css({top:"152px","margin-left":"-219px",border:"none","float":"right"})),$("#snappy-inc5000").show(),c(N)):($("#page_tuner").removeClass("fixedHeader").css({"margin-left":"-17px","float":"left"}),$("#page_tuner_fill").removeClass("snappy-page_tuner_fill"),$(".num-l, .num-r, .perm-l, .perm-r").show(),$("#list_headers").removeClass("fixedHeader").css({"border-bottom":"#000000 2px solid"}),$("#snappy-inc5000").hide(),c(N))})}function t(){function e(){if(/country\/.+$/i.test(location.href)){switch(V[V.length-1]){case"austria":B=["Austria"];break;case"belgium":B=["Belgium"];break;case"bosnia-and-herzegovina":B=["Bosnia and Herzegovina"];break;case"bulgaria":B=["Bulgaria"];break;case"croatia":B=["Croatia"];break;case"czech-republic":B=["Czech Republic"];break;case"denmark":B=["Denmark"];break;case"estonia":B=["Estonia"];break;case"finland":B=["Finland"];break;case"france":B=["France"];break;case"germany":B=["Germany"];break;case"greece":B=["Greece"];break;case"hungary":B=["Hungary"];break;case"ireland":B=["Ireland"];break;case"italy":B=["Italy"];break;case"latvia":B=["Latvia"];break;case"lithuania":B=["Lithuania"];break;case"netherlands":B=["Netherlands"];break;case"norway":B=["Norway"];break;case"poland":B=["Poland"];break;case"portugal":B=["Portugal"];break;case"romania":B=["Romania"];break;case"russian-federation":B=["Russian Federation"];break;case"russia":B=["Russian Federation"];break;case"serbia":B=["Serbia"];break;case"slovakia":B=["slovakia"];break;case"spain":B=["spain"];break;case"sweden":B=["sweden"];break;case"switzerland":B=["switzerland"];break;case"turkey":B=["Turkey"];break;case"united-kingdom":B=["United Kingdom"];break;case"uk":B=["United Kingdom"];break;case"england":B=["United Kingdom"];break;case"scotland":B=["United Kingdom"];break;case"wales":B=["United Kingdom"];break;case"nothern-ireland":B=["United Kingdom"];break;default:B=[]}n()}else if(/industry\/.+$/i.test(location.href)){switch(V[V.length-1]){case"insurance":F=["Insurance"];break;case"financial-services":F=["Financial Services"];break;case"real-estate":F=["Real Estate"];break;case"consumer-products-services":F=["Consumer Products & Services"];break;case"advertising-marketing":F=["Advertising & Marketing"];break;case"logistics-transportation":F=["Logistics & Transportation"];break;case"government-services":F=["Government Services"];break;case"it-services":F=["IT Services"];break;case"software":F=["Software"];break;case"health":F=["Health"];break;case"food-beverage":F=["Food & Beverage"];break;case"media":F=["Media"];break;case"security":F=["Security"];break;case"telecommunications":F=["Telecommunications"];break;case"manufacturing":F=["Manufacturing"];break;case"energy":F=["Energy"];break;case"business-products-services":F=["Business Products & Services"];break;case"retail":F=["Retail"];break;case"education":F=["Education"];break;case"construction":F=["Construction"];break;case"human-resources":F=["Human Resources"];break;case"travel":F=["Travel"];break;case"environmental-services":F=["Environmental Services"];break;case"engineering":F=["Engineering"];break;case"computer-hardware":F=["Computer Hardware"];break;case"business-services":F=["Business Services"];break;case"consumer-products":F=["Consumer Products"];break;case"computers-electronics":F=["Computers & Electronics"];break;case"logistics":F=["Logistics"];break;case"transportation":F=["Transportation"];break;case"defense-contractors":F=["Defense Contractors"];break;case"consulting":F=["Consulting"]}n()}else l(b,1,T)}function t(e){D.push(e),D=_.uniq(D),n()}function n(){if(R=T,F.length>0&&B.length>0){var e=_.filter(R,function(e){for(i=0;i<F.length;i++)if(e.industry==F[i])return e.industry}),t=_.filter(e,function(e){for(i=0;i<B.length;i++)if(e.country==B[i])return e.country});R=t}else if(F.length>0&&0===B.length){var e=_.filter(R,function(e){for(i=0;i<F.length;i++)if(e.industry==F[i])return e.industry});R=e}else if(0===F.length&&B.length>0){var t=_.filter(R,function(e){for(i=0;i<B.length;i++)if(e.country==B[i])return e.country});R=t}else R=T;for(I=R,i=0;i<D.length;i++)"employees"==D[i]?h():"times_on_list"==D[i]?filterByTimesOnList():"revenue"==D[i]&&d();console.clear(),console.log("Filter array			"+D.length+"\n Industries array		"+F.length+"\n Locations array		"+B.length+"\n Data count				"+R.length),$("#countries_select .item").each(function(e){$(this).children("input:checkbox").val()==B[0]&&$(this).addClass("bold").prop("checked",!0)}),l(b,1,R),r(1)}function s(){var e=[{label:"< &euro;2 million",value:0},{label:"&euro;2 million",value:2e6},{label:"&euro;5 million",value:5e6},{label:"&euro;10 million",value:1e7},{label:"&euro;20 million",value:2e7},{label:"&euro;50 million",value:5e7},{label:"&euro;100 million",value:1e8},{label:"&euro;250 million",value:25e7},{label:"&euro;500 million",value:5e8},{label:"&euro;1 billion",value:1e9}],t=[{label:"&euro;5 million",value:5e6},{label:"&euro;10 million",value:1e7},{label:"&euro;20 million",value:2e7},{label:"&euro;50 million",value:5e7},{label:"&euro;100 million",value:1e8},{label:"&euro;250 million",value:25e7},{label:"&euro;500 million",value:5e8},{label:"&euro;1 billion",value:1e9},{label:"&euro;1 billion+",value:1e15}];for(i=0;i<e.length;i++)$("#rev_filter_1_options").append('<div class="revenue_option" data-rev-value="'+e[i].value+'">'+e[i].label+"</div>");for(i=0;i<t.length;i++)$("#rev_filter_2_options").append('<div class="revenue_option" data-rev-value="'+t[i].value+'">'+t[i].label+"</div>");$("#rev_filter_1").html(e[0].label),$("#rev_filter_2").html(t[t.length-1].label)}function o(t,n){$.getJSON(inc.applicationURL+"inc5000list/json/inc5000eu_"+t+".json",function(t){for(i=0;i<t.length;i++)T[i]=t[i];n===!0&&(k=t.length,$("#page").val(M),M=1,a(),e(),$("#emp_filter_1").html("No Employees"),$("#emp_filter_2").html("200,000 Employees"),u(),$("#show_field").html(b),r(M))})}function a(){if("undefined"!=typeof V){$("#year").html(w),$("#mobile_year option[value="+w+"]").prop("selected","true"),$(".inc5000-headline").html("Inc. 5000 Europe "+w);var e="/";if(/\d{4}/i.test(V[2])){for(V[2]=w,i=0;i<V.length;i++)e=e+V[i]+"/";window.history.replaceState({},$("title").text(),e)}else{for(i=0;i<V.length;i++)i<2?e=e+V[i]+"/":2==i?e=e+w+"/"+V[2]+"/":i>2&&(e=e+V[i]+"/");inc.i.ops.splice(2,0,w),window.history.replaceState({},$("title").text(),e)}}}function r(e,t){if(y=Math.ceil(k/b),$("#page_tuner_fill").empty(),e>0&&y>e&&$("#mobile_page_tuner_fill").html(e),e>0&&7>e?($("#page_tuner .perm-l").html("2").data("pageflag","2"),$("#page_tuner .perm-r").html("...").data("pageflag",y-1)):e>6&&y-5>e?($("#page_tuner .perm-l").html("...").data("pageflag","2"),$("#page_tuner .perm-r").html("...").data("pageflag",y-1)):e>y-6&&y+1>e&&($("#page_tuner .perm-l").html("...").data("pageflag","2"),$("#page_tuner .perm-r").html(y-1).data("pageflag",y-1)),7>e?(tuner=3,max=tuner+7):e>6&&y-4>e?(tuner=e-3,max=tuner+7):e>y-3&&y>=e&&(tuner=y-8,max=tuner+7),$(".num-l").html("1").data("pageflag","1"),$(".num-r").html(y).data("pageflag",y),/(inc5000eu)\/?(index\.html)?(\?.+)?$/i.test(window.location.href)||$("#snappy-inc5000").is(":hidden"))if(R.length<T.length)$(".num-l, .num-r, .perm-l, .perm-r").hide(),$("#page_tuner_fill").empty().append("SEARCH RESULTS: "+R.length),y=R.length/b;else if($("#search_company_name").val().length>0)$(".num-l, .num-r, .perm-l, .perm-r").hide(),$("#page_tuner_fill").empty().append("SEARCH RESULTS: "+A.length),y=A.length/b;else for($(".num-l, .num-r, .perm-l, .perm-r").show(),$("#page_tuner_fill").empty(),i=tuner;i<max;i++)$("#page_tuner_fill").append('<div class="gold box b'+i+'" data-pageflag="'+i+'">'+i+"</div>");else $("#snappy-inc5000").is(":visible")&&(R.length<T.length?($("#page_tuner_fill").empty().append("RESULTS: "+R.length),y=R.length/b):$("#search_company_name").val().length>0?($("#page_tuner_fill").empty().append("RESULTS: "+A.length),y=A.length/b):$("#page_tuner_fill").empty().html("PAGE: "+e));switch(e){case 1:$(".box").removeClass("selected"),$(".num-l").addClass("selected");break;case 2:$(".box").removeClass("selected"),$(".perm-l").addClass("selected");break;case y-1:$(".box").removeClass("selected"),$(".perm-r").addClass("selected");break;case y:$(".box").removeClass("selected"),$(".num-r").addClass("selected");break;case M:$(".box").removeClass("selected"),$(".b"+M).addClass("selected")}$("#page").val(e)}function l(e,t,n){$("#data_container table").empty();var s=e*t-e;for(s>k-e&&(s=k-e,M=k-e),0>s&&(s=0,M=0),i=0;i<n.length;i++)if(i>=s&&i<s+e){var o=Math.round(n[i].growth);o=p(o)+"%";var a=Math.round(n[i].workers);a=p(a);var r=m(n[i].revenue),l='<tr class="data_row"><td class="c1">'+n[i].rank+'</td><td class="c2"><a href="http://inc.com/profile/'+n[i].url+'" target="_blank">'+n[i].company+'</a></td><td class="c3">'+o+'</td><td class="c4">'+r+'</td><td class="c5" colspan="2">'+n[i].industry+'</td><td class="c6" colspan="2">'+n[i].country+"</td></tr>",h='<tr><td colspan="6" id="inc5000listapp-ad-placement-'+i+'" class="list_ad_slot"></td></tr><tr><td colspan="6" class="list_ad_filler"></tr>';10===b&&i===s+5||i===s+20||i===s+40||i===s+70||i===s+90||i===s+110||i===s+130||i===s+150||i===s+170||i===s+190?/(inc5000eu)\/?(index\.html)?(\?.+)?$/i.test(location.href)?line=l:(line=h+l,inc.ready?inc.adManager.insertInc5000ListAd(i):inc.adManager.queue.push(_.partial(inc.adManager.insertInc5000ListAd,i))):line=l,$("#data_container table").append(line)}g(),M=t,$("#page").val(t),$(".c2").each(function(e){var t=$(this).text(),i=/\s/gi.test(t);t.length>=20&&t.length<24&&i===!1?$(this).addClass("small_16"):t.length>=24&&t.length<26&&i===!1?$(this).addClass("small_14"):t.length>=26&&i===!1&&$(this).addClass("small_13")}),c()}function c(){var e=$(window).width(),t=$("#mobile_search").width(),i=$("#mobile_show_pages").width(),n=e-Math.abs(t)-Math.abs(i);$("#mobile_page_tuner").width(n+"px")}function h(){console.log("emp1: "+emp1),console.log("emp2: "+emp2);var e=_.sortBy(_.filter(R,function(e){return e.workers>=emp1&&e.workers<=emp2?e:void 0}),"workers"),t=_.sortBy(e,"workers");return R=t}function d(){E=$("#rev1").val(),N=$("#rev2").val();var e=_.filter(R,function(e){return e.revenue>=E&&e.revenue<=N?e:void 0}),t=_.sortBy(e,"revenue");return R=t}function u(){for(L=_.sortBy(T,"country"),L=_.pluck(L,"country"),L=_.uniq(L),i=0;i<L.length;i++)$("#countries_select").append('<div class="item"><input type="checkbox" value="'+L[i]+'" />'+L[i]+"</div>")}function p(e){var t=e.toString().split(".");return t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),t.join(".")}function m(e){var t=Math.round(e),i=t.toString().length,n=[];switch(t=t.toString(),i){case 12:return n[1]=t.substring(0,3),n[2]=t.substring(3,4),n[2]>0?n[0]=".":(n[0]="",n[2]=""),t="&euro;"+n[1]+n[0]+n[2]+"b";case 11:return n[1]=t.substring(0,2),n[2]=t.substring(2,3),n[2]>0?n[0]=".":(n[0]="",n[2]=""),t="&euro;"+n[1]+n[0]+n[2]+"b";case 10:return n[1]=t.substring(0,1),n[2]=t.substring(1,2),n[2]>0?n[0]=".":(n[0]="",n[2]=""),t="&euro;"+n[1]+n[0]+n[2]+"b";case 9:return n[1]=t.substring(0,3),n[2]=t.substring(3,4),n[2]>0?n[0]=".":(n[0]="",n[2]=""),t="&euro;"+n[1]+n[0]+n[2]+"m";case 8:return n[1]=t.substring(0,2),n[2]=t.substring(2,3),n[2]>0?n[0]=".":(n[0]="",n[2]=""),t="&euro;"+n[1]+n[0]+n[2]+"m";case 7:return n[1]=t.substring(0,1),n[2]=t.substring(1,2),n[2]>0?n[0]=".":(n[0]="",n[2]=""),t="&euro;"+n[1]+n[0]+n[2]+"m";case 6:return n[1]=t.substring(0,3),n[2]=t.substring(3,4),n[2]>0?n[0]=".":(n[0]="",n[2]=""),t="&euro;"+n[1]+n[0]+n[2]+"k";case 5:return n[1]=t.substring(0,2),n[2]=t.substring(2,3),n[2]>0?n[0]=".":(n[0]="",n[2]=""),t="&euro;"+n[1]+n[0]+n[2]+"k";case 4:return n[1]=t.substring(0,1),n[2]=t.substring(1,2),n[2]>0?n[0]=".":(n[0]="",n[2]=""),t="&euro;"+n[1]+n[0]+n[2]+"k"}}function f(){A=_.filter(R,function(e){return S.test(e.company)}),x=M,A.length<R.length?($("#reset_search").html("&#xf00d;"),l(b,1,A),r(1),$("#page").val("1")):($("#reset_search").html("&#xf002;"),l(b,x,A),r(x),$("#page").val(x))}function g(){0===P?($("#list_headers .c5").text("INDUSTRY"),$("table .c6").hide(),$("table .c5").show()):1===P&&($("#list_headers .c5").text("COUNTRY"),$("table .c5").hide(),$("table .c6").show())}function v(){for(i=0;i<U.length;i++)$("#mobile_year").append('<option value="'+U[i]+'">'+U[i]+"</option>")}var b,y,w,k,I,C,x,S,T=[],A=[],M=1,P=0,E=0,N=1e15,D=[],R=T,O=!1,L=[],B=[],F=[],U=[2015],z=[0,0,0,0,0,0,0,0];$("#rev1").val("0"),$("#rev2").val("1000000000000");var H=navigator.userAgent.toLowerCase(),j=-1!=H.indexOf("msie")?parseInt(H.split("msie")[1]):!1,V=inc.i.ops;for(w="undefined"!=typeof V&&/\d{4}/i.test(V[2])?V[2]:U[0],b=/(inc5000eu)\/?(index\.html)?(\?.+)?$/i.test(location.href)?10:50,console.log("pre-getData"),o(w,!0),console.log("post-getData"),s(),u(),v(),i=0;i<U.length;i++)$("#year_options").append('<div class="year_option" data-year="'+U[i]+'">'+U[i]+"</div>");$("#year").html(w),$("#rev_filter_1").click(function(){$("#rev_filter_1_options").fadeToggle(150)}),$("#rev_filter_2").click(function(){$("#rev_filter_2_options").fadeToggle(150)}),$("#rev_filter_1_options").on("click",".revenue_option",function(){$("#rev1").val($(this).data("rev-value")),$("#rev_filter_1_options").fadeOut(150),$("#rev_filter_1").html($(this).text()),t("revenue")}),$("#rev_filter_2_options").on("click",".revenue_option",function(){$("#rev2").val($(this).data("rev-value")),$("#rev_filter_2_options").fadeOut(150),$("#rev_filter_2").html($(this).text()),t("revenue")}),$("#times_on_list").click(function(){$("#times_on_list_options").fadeToggle(150)}),$("#times_on_list_options").on("click",".tol_option",function(){$("#times_on_list").html($(this).text()),$("#times_on_list_options").fadeOut(150),"All"!=$(this).text()?timesOnList=[parseInt($(this).text())]:timesOnList=[0],timesOnList=_.uniq(timesOnList),t("times_on_list")}),$("#industry_filter .item").click(function(){$(this).children("input:checkbox").prop("checked")===!1?($(this).addClass("bold"),$(this).children("input:checkbox").prop("checked",!0),F.push($(this).children("input:checkbox").val()),console.log(F)):$(this).children("input:checkbox").prop("checked")===!0&&($(this).removeClass("bold"),$(this).children("input:checkbox").prop("checked",!1),F.splice(F.indexOf($(this).children("input:checkbox").val()),1),console.log(F)),F=_.uniq(F),n()}),$("#countries_select").on("click",".item",function(){$(this).children("input:checkbox").prop("checked")===!1?($(this).addClass("bold"),$(this).children("input:checkbox").prop("checked",!0),B.push($(this).children("input:checkbox").val())):$(this).children("input:checkbox").prop("checked")===!0&&($(this).removeClass("bold"),$(this).children("input:checkbox").prop("checked",!1),B.splice(B.indexOf($(this).children("input:checkbox").val()),1)),B=_.uniq(B),n()}),$("#reset_form").click(function(){B=[],F=[],D=[],timesOnList=[],$("#rev_filter_1_options, #rev_filter_2_options").empty(),s(),timesOnList=[0],$("#times_on_list").html("All"),$(":checkbox").prop("checked",!1),$(".item").removeClass("bold"),$("#rev_filter_1,#rev_filter_2").empty(),n(),$(this).addClass("rotateIcon"),setTimeout(function(){$("#reset_form").removeClass("rotateIcon")},1e3)}),$(".close_menu").on("click",function(){$("#year_options, #show_options, #rev_filter_1_options, #rev_filter_2_options").fadeOut(150)}),$("#pageCount").submit(function(e){e.preventDefault(),$("#page").val()<1?$("#page").val(1):$("#page").val()>k/b&&$("#page").val(k/b),M=parseInt($("#page").val()),l(b,M,R),r(M)}),$("#page_tuner").on("click","#page_tuner_fill .box, .perm-l, .perm-r, .num-l, .num-r",function(){M=parseInt($(this).data("pageflag")),$("#page").val(M),l(b,M,R),r(M)}),$(".arrow-r").on("click",function(){y>M&&(M++,""!=$("#search_company_name").val()?(l(b,M,A),r(M)):(l(b,M,R),r(M)),$("#page").val(M))}),$(".arrow-l").on("click",function(){M>1&&(M--,""!=$("#search_company_name").val()?(l(b,M,A),r(M)):(l(b,M,R),r(M)),$("#page").val(M))}),$("#year").click(function(){$("#year_options").fadeToggle(150)}),$(".year_option").click(function(){w=parseInt($(this).data("year")),P=0,pagenum=1,a(),o(w,!0),r(M),$("#year_options").fadeToggle(150)}),$("#show_field").click(function(){$("#show_options").fadeToggle(150)}),$(".show_option").click(function(){var e=b;b=parseInt($(this).text()),y=Math.ceil(k/b),newPage=Math.ceil(M*(e/b)),$("#show_field").html(b),$("#show_options").fadeToggle(150),$("#show").val(b),1>M?$("#page").val(1):M>y?($("#page").val(y),M=y):M=newPage,l(b,M,R),r(M)}),$(".more").on("click",function(){0===P?P=1:1===P&&(P=0),g()}),$("#search_company_name").keyup(function(){S=new RegExp($(this).val(),"ig"),f()}),$("#mobile_search_companies").keyup(function(){S=new RegExp($(this).val(),"ig")}),$("#reset_search").click(function(){if($("#search_company_name").val().length>0){for($("#search_company_name").val(""),S=null;A.length>0;)A.pop();l(b,x,R),r(x),$("#reset_search").html("&#xf002;")}}),$(window).resize(function(){$(this).mousedown()&&c()}),$("#mobile_search").click(function(){$("#mobile_search_panel").animate({top:"58px"},800)}),$("#mobile_search_panel #close").click(function(){$("#mobile_search_panel").animate({top:"100%"},800),n(),void 0!==typeof S&&f()}),$("#mobile_year").change(function(){w=$(this).val(),a(),o(w,!0)}),$("#mobile_times_on_list").change(function(){timesOnList=[$(this).val()],t("times_on_list")}),$("#list_headers .c1").click(function(){$("#list_headers div").not($(this)).removeClass("sortASC").removeClass("sortDSC"),0===z[0]?(C=_.sortBy(R,function(e){return parseInt(e.rank)}),z[0]=1,R=C.reverse(),$("#list_headers .c1").removeClass("sortASC").addClass("sortDSC")):1===z[0]&&(C=_.sortBy(R,function(e){return parseInt(e.rank)}),z[0]=0,R=C,$("#list_headers .c1").removeClass("sortDSC").addClass("sortASC")),l(b,1,R),r(1)}),$("#list_headers .c2").click(function(){$("#list_headers div").not($(this)).removeClass("sortASC").removeClass("sortDSC"),0===z[1]?(C=_.sortBy(R,function(e){return _.isString(e.company)?e.company.toLowerCase():String(e.company)}),z[1]=1,R=C,$("#list_headers .c2").addClass("sortASC")):1===z[1]?(C=_.sortBy(R,function(e){return _.isString(e.company)?e.company.toLowerCase():String(e.company)}),z[1]=2,R=C.reverse(),$("#list_headers .c2").removeClass("sortASC").addClass("sortDSC")):2===z[1]&&(C=_.sortBy(R,"rank"),z[1]=0,R=C,$("#list_headers .c2").removeClass("sortDSC")),l(b,1,R),r(1)}),$("#list_headers .c4").click(function(){$("#list_headers div").not($(this)).removeClass("sortASC").removeClass("sortDSC"),0===z[2]?(C=_.sortBy(R,function(e){return e.revenue}),z[2]=1,R=C,$("#list_headers .c4").addClass("sortASC")):1===z[2]?(C=_.sortBy(R,function(e){return e.revenue}),z[2]=2,R=C.reverse(),$("#list_headers .c4").removeClass("sortASC").addClass("sortDSC")):2===z[2]&&(C=_.sortBy(R,"rank"),z[2]=0,R=C,$("#list_headers .c4").removeClass("sortDSC")),l(b,1,R),r(1)}),$("#list_headers .c5").click(function(){$("#list_headers div").not($(this)).removeClass("sortASC").removeClass("sortDSC"),0===z[3]?(C=_.sortBy(R,function(e){return 0===P?_.isString(e.industry)?e.industry.toLowerCase():String(e.industry):1===P?_.isString(e.country)?e.country.toLowerCase():String(e.country):2===P?_.isString(e.metro)?e.metro.toLowerCase():String(e.metro):3===P?parseInt(e.employees):void 0}),z[3]=1,R=C,$("#list_headers .c5").addClass("sortASC")):1===z[3]?(C=_.sortBy(R,function(e){return 0===P?_.isString(e.industry)?e.industry.toLowerCase():String(e.industry):1===P?_.isString(e.country)?e.country.toLowerCase():String(e.country):2===P?_.isString(e.metro)?e.metro.toLowerCase():String(e.metro):3===P?e.employees:void 0}),z[3]=2,R=C.reverse(),$("#list_headers .c5").removeClass("sortASC").addClass("sortDSC")):2===z[3]&&(C=_.sortBy(R,"rank"),z[3]=0,R=C,$("#list_headers .c5").removeClass("sortDSC")),l(b,1,R),r(1)}),$("#more_options").click(function(){O===!1?($("#more_options_container").fadeIn(),$("#more_options span").html("&#xf0d7;"),O=!0):O===!0&&($("#more_options_container").fadeOut(),$("#more_options span").html("&#xf0da;"),O=!1)}),$(window).scroll(function(){inc.user.admin?listDistFromTop=$("#right").offset().top-$(window).scrollTop()-93:inc.user.admin?8===j&&(listDistFromTop=$("#right").offset().top-$(window).scrollTop()):listDistFromTop=$("#right").offset().top-$(window).scrollTop()-58,listDistFromTop<=0&&8!==j&&/(inc5000eu)\/list\/?(.+)?$/i.test(window.location.href)?($("#page_tuner_fill").addClass("snappy-page_tuner_fill"),$(".num-l, .num-r, .perm-l, .perm-r").hide(),$("#snappy-inc5000").css({"z-index":"20"}),$("#list_headers, #page_tuner").css({"z-index":"21"}),inc.user.admin&&8!==j?($("#list_headers").addClass("fixedHeader").css({top:"93px",border:"none"}),$("#snappy-inc5000").css({top:"93px"}),$("#page_tuner").addClass("fixedHeader").css({top:"101px","margin-left":"-219px",border:"none","float":"right"})):inc.user.admin||8===j||($("#list_headers").addClass("fixedHeader").css({top:"58px",border:"none"}),$("#snappy-inc5000").css({top:"58px"}),$("#page_tuner").addClass("fixedHeader").css({top:"65px","margin-left":"-219px",border:"none","float":"right"})),$("#snappy-inc5000").show(),r(M)):($("#page_tuner").removeClass("fixedHeader").css({"margin-left":"-17px","float":"left"}),$("#page_tuner_fill").removeClass("snappy-page_tuner_fill"),$(".num-l, .num-r, .perm-l, .perm-r").show(),$("#list_headers").removeClass("fixedHeader").css({"border-bottom":"#000000 2px solid"}),$("#snappy-inc5000").hide(),r(M))})}switch(inc.i.op){case"inc5000":e();break;case"article":if(60678!=inc.incid)return;e();break;case"inc5000eu":t();break;default:return void($("body").hasClass("Inc.5000")&&e())}}),Inc.Pages.Video=Inc.Pages.Article.extend({type:"VideoWatchPage",init:function(e){e||(e={}),"create"==inc.i.mod&&(this.model=inc.collections.article.get("NewArticle-"+inc.incid),inc.editing.modelsBeingEdited.push(this.model)),this.model||(this.model=inc.collections.article.get(inc.incid)),Inc.Pages.Archetype.init.apply(this,arguments),this.registerTopOfPageAds(this.model.adinfo),inc.scrollMonitor.showAdhesiveAdContainer=!0,this.clickTrackingObject.thistype="article",this.clickTrackingObject.thisincid=inc.incid,this.impressionsTrackingObject.incid=inc.incid,inc.displayedIDs.push(inc.incid),this.inlineVideoAdvertOn=!1,this.inlineVideoAdvertExpanded=!1,this.loadDisabled=!1,(3==this.model.get("inc_typid")||6==this.model.get("inc_typid"))&&(this.loadDisabled=!0),this.adhesiveAdContainer=null,this.currentSectionIndex=0,this.watchOffset=0,this.watchFilter="popular",this.filterData="",this.loadingArticleSectionData=!1,this.sectionModels=new Inc.Collections.Article,this.sectionModels.add(this.model),inc.scrollMonitor.showBackToTopButton=!1;var t=new Inc.Sections.VideoWatch({el:$(".VideoWatchSection")[0],model:this.model,index:0,impressed:!0,startingScrollPosition:0});return this.sections.push(t),this.setWrapperContainerMinHeight(),this},display:function(){var e=this;return this.sections[0].render(),this.sections[0].hasSidebar&&this.sections[0].model&&!this.sections[0].model.get("inc_hide_article_sidebarflag")&&$(".maincolumn").toggleClass("withsidebar",!0),inc.scrollMonitor.processScroll(),this.loadMoreVideos(),$(".loadMore").on("click",".loadMoreBtn",function(t){e.loadMoreVideos()}),$(".videoMoreMenu").on("click",".menuItemLink",function(t){return $(".VideoWatchBottomBlock .contentContain .videoThumbContent").html(""),$(".menuItemLink").removeClass("active"),$(t.currentTarget).addClass("active"),e.watchOffset=0,e.watchFilter=t.currentTarget.dataset.seriesId,e.loadMoreVideos(),!1}),$(".mobileNav").on("click",".navBtn",function(t){return $(".VideoWatchBottomBlock .contentContain .videoThumbContent").html(""),$(".navBtn").removeClass("active"),$(t.currentTarget).addClass("active"),e.watchOffset=0,e.watchFilter=t.currentTarget.dataset.seriesId,e.loadMoreVideos(),!1}),$(".videoSeriesMenu").on("click",".videoSeriesMenuItem",function(t){return $(".VideoWatchBottomBlock .contentContain .videoThumbContent").html(""),$(".menuItemLink").removeClass("active"),$(t.currentTarget).addClass("active"),e.watchOffset=0,e.watchFilter="series",e.filterData=t.currentTarget.dataset.seriesId,e.loadMoreVideos(),!1}),this},loadMoreVideos:function(){var e={};e.limit=9,e.offset=this.watchOffset,e.filter=this.watchFilter,e.filterdata=this.filterData,$.ajax({type:"POST",dataType:"json",url:inc.restURL+"videowatchstream",data:e,cache:!1}).done(function(t){_.each(t.videos,function(e){e.ser_name||(e.ser_name=""),$(".VideoWatchBottomBlock .contentContain .videoThumbContent").append('					<div class="videoWatchThumbContainer">						<div class="containContainer">							<a class="videoThumbImageContainer" href="'+application_url.concat(e.inc_filelocation)+'">								<div class="playBtn fa-play-circle-o"></div>								<img class="videoThumbImage" src="'+e.small_featured_img+'" />							</a>							<div class="videoThumbMeta">								<div class="metaLeft">									<span class="seriesLabel">'+e.ser_name+'</span>									<span class="duration"> | '+e.vid_duration+'</span>								</div>								<div class="metaRight">									<span class="shares"></span>								</div>							</div>							<div class="videoThumbBody">								<a class="videoThumbTitle" href="http://www.inc.com/'+e.inc_filelocation+'">									'+e.inc_title+"								</a>							</div>						</div>					</div>")}),this.watchOffset=this.watchOffset+e.limit}.bind(this)).fail(function(e){console.log("Failed to load more videos...")}.bind(this))}}),Inc.Views.Welcome=Inc.ToggleView.extend({type:"Welcome",className:"Welcome",template:_.template($("#Welcome-Template").html()),initialize:function(e){e||(e={}),Inc.ToggleView.prototype.initialize.apply(this,arguments),this.$el.attr("id",this.oid),this.interval=null,this.startTime=null,this.timeToExpire=20,inc.adManager.addEmptyAdGroup("welcomead"),inc.adManager.createAds({groupName:"welcomead",options:{name:"welcomead",type:"welcomead",mq:["medium","large"],collapse:!1,pos:"top",callback:_.bind(this.adRenderedCallback,this)}}),this.listenTo(dispatcher,"window:resized",this.reposition)},events:function(){return{"click .close":"close"}},render:function(){return this.$el.html(this.template(this)),this.$(".timer").html(this.timeToExpire),this},close:function(){return Modernizr.csstransitions?(this.$el.css({width:"100%",height:"100%"}),this.$el.on("transitionend webkitTransitionEnd oTransitionEnd otransitionend MSTransitionEnd",_.bind(function(e){this.$el.off("transitionend webkitTransitionEnd oTransitionEnd otransitionend MSTransitionEnd"),this.$el.css({width:"",height:""}),this.trigger("close",this)},this)),this.hide()):(this.hide(),this.trigger("close",this)),clearInterval(this.interval),this},adRenderedCallback:function(e,t){return inc.adManager.checkUnfilled(e,t),e.isEmpty?this.trigger("empty",this):this.trigger("filled",this),this},reposition:function(){if("small"==inc.mqState)return this.close(),this;var e=$(window).height(),t=inc.topNav?inc.topNav.getDistanceOfBottomFromTop():0,i=this.$(".welcomead-central-container"),n=this.$(".scrollable-inner-container").outerHeight(),s=this.$(".welcomead-background");return s.css("top",$(".TopNav").outerHeight(!0)+"px"),0>=e-t-n?(i.css("top",t+"px"),this.$(".scrollable-container").css("height",e-t-this.$(".message-container").outerHeight(!0)+"px")):(i.css("top",Math.round((e-t-(this.$(".message-container").outerHeight(!0)+n))/2+t)+"px"),this.$(".scrollable-container").css("height","")),this},startTimer:function(){if(_.isNumber(this.interval))return this;var e=this;return this.startTime=moment(),this.interval=setInterval(function(){e.updateTimer()},300),this},updateTimer:function(){var e=moment(),t=e.diff(this.startTime,"seconds");return this.timeToExpire-t<=0?(this.close(),this.$(".timer").html(0)):this.$(".timer").html(this.timeToExpire-t),this},show:function(){return this.reposition(),this.hidden&&this.startTimer(),Inc.ToggleView.prototype.show.apply(this,arguments),this},trash:function(){return inc.adManager.removeAdGroup("welcomead"),Inc.ToggleView.prototype.trash.apply(this,arguments),this}}),Inc.Pages.MagazineArchivePage=Inc.Pages.Archetype.extend({init:function(e){return e||(e={}),Inc.Pages.Archetype.init.apply(this,arguments),inc.scrollMonitor.showAdhesiveAdContainer=!0,this.registerTopOfPageAds(),inc.adManager.createAds([{groupName:"scroll0",options:{name:"sidebarFixedRectangle",type:"fixedrectangle",mq:["medium","large"],collapse:!1,pos:"top"}},{groupName:"scroll0",options:{name:"sidebarFixedRectangle2",type:"fixedrectangle",mq:["medium","large"],collapse:!1,pos:"bot"}}]),this.setWrapperContainerMinHeight(),this},display:function(){return inc.scrollMonitor.addScrollUnit("#contentcontainer .Section"),inc.scrollMonitor.processScroll(),this.setupPageShareBoxes("ShareContainer"),this}}),Inc.Pages.DigitalArchive=Inc.Pages.Archetype.extend({type:"DigitalArchivePage",init:function(e){return e||(e={}),Inc.Pages.Archetype.init.apply(this,arguments),inc.scrollMonitor.showAdhesiveAdContainer=!0,this.registerTopOfPageAds(),this.setWrapperContainerMinHeight(),this},display:function(){return inc.scrollMonitor.addScrollUnit("#contentcontainer .Section"),inc.scrollMonitor.processScroll(),this}}),Inc.Apps.Inc={type:"App",extend:Inc.extend,spawn:Inc.spawn,init:function(e){e||(e={});var t=this;this.i={},_.extend(this.i,pageInfo),this.i.ops&&(this.i.ops=_.compact(_.toArray(this.i.ops))),this.i.abgrp=abgrp||void 0,this.i.internationalWallDisplayed=!1,this.i.geo=Inc.Utilities.getCookie("incgeo")||void 0,this.ready=!1,this.displayCompleted=!1,this.fallback=!1,this.alwaysMobileNavigation=!1,this.modes={},this.urlParameters={},this.processURL(),this.i.geo=Inc.Utilities.getCookie("incgeo")||void 0,"true"==this.urlParameters.startInternationalSimulation||""==this.urlParameters.startInternationalSimulation?(this.i.geo="International Simulation",Inc.Utilities.setCookie("incInternationalSimulation",!0,360,{path:"/",domain:this.i.cookieDomain}),Inc.Utilities.setCookie("incgeo",this.i.geo,360,{path:"/",domain:this.i.cookieDomain})):("true"==this.urlParameters.endInternationalSimulation||""==this.urlParameters.endInternationalSimulation)&&(this.i.geo=void 0,Inc.Utilities.deleteCookie("incInternationalSimulation","/",this.i.cookieDomain),Inc.Utilities.deleteCookie("incgeo","/",this.i.cookieDomain)),this.pushState=this.i.pushStateValue,this.displayedIDs=e.displayedIDs||[],this.firstMainDisplayedID=null,this.i.googleClientID="1059395991830.apps.googleusercontent.com",this.gapiQueue=[],this.appNamespace="inc",this.areas=[],this.comments={},this.collections={article:new Inc.Collections.Article,
author:new Inc.Collections.Author([],{admin:!0}),channel:new Inc.Collections.Channel([],{admin:!0}),editor:new Inc.Collections.Editor([],{admin:!0}),gettyimage:new Inc.Collections.Archetype,image:new Inc.Collections.Image,inlineimage:new Inc.Collections.InlineImage,photoEssaySlide:new Inc.Collections.PhotoEssaySlide,slideshow:new Inc.Collections.Slideshow,slide:new Inc.Collections.Slide,video:new Inc.Collections.Video},window.onresize=_.throttle(function(){dispatcher.trigger("window:resized")},500),$.valHooks.textarea={get:function(e){return e.value.replace(/\r?\n/g,"\r\n")}},this.userAgentCheck();var i=this;return $(document).ready(function(){this.topNav=new Inc.Navigation.TopNav({el:document.getElementById("TopNav")}),$(document).on("click.inc",function(){dispatcher.trigger("document:click")})}.bind(this)),"undefined"!=typeof incid&&""!=incid&&0!=incid&&(this.incid=parseInt(incid)),this.mqState=null,this.mq=null,this.applicationURL=application_url,this.uploadedFilesURL=i.i.uploadedFilesURL,this.restURL=this.applicationURL+"rest/",this.currentController=null,this.controllers=[],this.adManager=Inc.Controllers.PromotionManager.spawn(),this.user=Inc.Controllers.User.spawn(),this.admin=Inc.Controllers.Admin.spawn(),this.controllers.push(this.admin),this.editing=Inc.Controllers.Editing.spawn(),this.tileTypeRegistry=Inc.Patterns.TileTypeRegistry.spawn(),this.tracker=Inc.Controllers.Tracker.spawn(),this.scrollMonitor=Inc.Controllers.ScrollMonitor.spawn(),this.leftNavMenu=Inc.Menus.LeftNav.spawn(),this.slideOutMenuBehaviour=Inc.Menus.SlideOutMenuBehaviour.spawn(),this.adops={},this.modalPresenter=Inc.Controllers.ModalPresenter.spawn(),$(_.bind(function(){this.modalPresenter.$wrapper=$("#sitecontainer").children(".ModalWrapper")},this)),this.registerMediaQueries(),this.checkReadyStateInterval=setInterval(function(){t.checkReadyState()},50),this.initialized=!0,this},processURL:function(){-1!=window.location.href.search("preview.inc.com")&&this.addMode("preview");for(var e,t=/\+/g,i=/([^&=]+)=?([^&]*)/g,n=function(e){return decodeURIComponent(e.replace(t," "))},s=window.location.search.substring(1);e=i.exec(s);)this.urlParameters[n(e[1])]=n(e[2]);return this},getArea:function(e){return _.findWhere(this.areas,{oid:e})},parameterSet:function(e){return"undefined"!=typeof this.urlParameters[e]?!0:!1},parameterNotEmpty:function(e){return"undefined"!=typeof this.urlParameters[e]&&this.urlParameters[e]&&""!=this.urlParameters[e]?!0:!1},isMode:function(e){return"undefined"!=typeof this.modes[e]?!0:!1},addMode:function(e){return"undefined"==typeof this.modes[e]&&(this.modes[e]={},dispatcher.trigger("inc:mode:"+e+":on")),this},removeMode:function(e){try{delete this.modes[e],dispatcher.trigger("inc:mode:"+e+":off")}catch(t){}return this},checkReadyState:function(){return this.adManager.ready&&(clearInterval(this.checkReadyStateInterval),this.i.articleseries&&(this.collections.articleseries=new Inc.Collections.Archetype(this.i.articleseries)),this.i.partners&&(this.collections.partner=new Inc.Collections.Archetype(this.i.partners)),this.i.slides&&_.each(this.i.slides,function(e){this.collections.slide.add(e)},this),this.i.slideshows&&_.each(this.i.slideshows,function(e){var t=[];_.each(e.slides,function(e){t.push(this.collections.slide.get(e.id))},this),this.collections.slideshow.add(new Inc.Models.Slideshow(e,{slides:t}))},this),this.i.bootstrappedInlineImages&&_.each(this.i.bootstrappedInlineImages,function(e){this.collections.inlineimage.add(e)},this),this.i.videos&&_.each(this.i.videos,function(e){this.collections.video.add(e)},this),this.route()),this},userAgentCheck:function(){var e=navigator.userAgent.toLowerCase();if((-1!=e.search("msie")||-1!=e.search("trident/7"))&&$(function(){$("body").addClass("ie")}),-1!=e.search("msie 9")&&$(function(){$("body").addClass("ie9")}),-1!=e.search("msie 10")&&$(function(){$("body").addClass("ie10")}),-1!=e.search("msie 8")&&(this.fallback=!0,$(function(){$("body").addClass("ie8")})),navigator.userAgent.match(/IEMobile\/10\.0/)){var t=document.createElement("style");t.appendChild(document.createTextNode("@-ms-viewport{width:auto!important}")),document.getElementsByTagName("head")[0].appendChild(t)}if(-1!=e.search("trident/7")){var t=document.createElement("style");t.appendChild(document.createTextNode("@-ms-viewport{width:device-width}")),document.getElementsByTagName("head")[0].appendChild(t)}return isiPad=null!=navigator.userAgent.match(/iPad/i),$(function(){$("body").toggleClass("touch",Inc.Utilities.touchscreen)}),this},route:function(){switch(this.i.op){case"home":case"404":this.currentController=Inc.Pages.Home.spawn({restURL:this.restURL+"home"});break;case"channel":352==inc.i.cnlid?this.currentController=Inc.Pages.Inc5000Channel.spawn({restURL:this.restURL+"channel/"+inc.i.cnlid}):isChannelPanel?this.currentController=Inc.Pages.ChannelPanel.spawn():this.currentController=Inc.Pages.Channel.spawn({restURL:this.restURL+"channel/"+this.i.channelArray.topid});break;case"article":"create"==this.i.mod&&4!=this.i.inc_typid?this.currentController=Inc.Pages.NewArticle.spawn():4==this.i.inc_typid?this.currentController=Inc.Pages.Video.spawn():this.currentController=Inc.Pages.Article.spawn();break;case"videowatch":this.currentController=Inc.Pages.Video.spawn();break;case"search":this.currentController=Inc.Pages.Search.spawn();break;case"author":this.currentController=Inc.Pages.Author.spawn();break;case"partner":this.currentController=Inc.Pages.Partner.spawn();break;case"eventindex":this.currentController=Inc.Pages.Events.spawn();break;case"login":this.currentController=Inc.Pages.Login.spawn();break;case"reset":case"resetpassword":case"retrievepassword":this.currentController=Inc.Pages.ResetPassword.spawn();break;case"newsletter":this.currentController=Inc.Pages.Newsletters.spawn();break;case"inc5000application":this.currentController=Inc.Pages.Inc5000Application.spawn();break;case"optin":this.currentController=Inc.Pages.Optin.spawn();break;case"inc5000":case"inc5000eu":this.i.showlogo=!0,this.i.ops&&this.i.ops.length>0&&"list"===this.i.ops[1]&&(this.currentController=Inc.Pages.Inc5000List.spawn());break;case"profile":this.i.ops&&this.i.ops.length>0&&"profile"===this.i.ops[0]&&(this.currentController=Inc.Pages.Inc5000Profile.spawn());break;case"staff":this.currentController=Inc.Pages.Staff.spawn();break;case"columnists":this.currentController=Inc.Pages.Columnists.spawn();break;case"videoseries":this.currentController=Inc.Pages.Video.spawn();break;case"videoepisode":this.currentController=Inc.Pages.Video.spawn();break;case"toc":this.currentController=Inc.Pages.MagazineArchivePage.spawn();break;case"mobilelogin":this.currentController=Inc.Pages.Mobilelogin.spawn()}return"undefined"!=typeof this.currentController&&this.currentController&&(this.controllers.push(this.currentController),this.adManager.clearQueue(),this.ready=!0,this.currentController.display(),this.displayCompleted=!0),this.adManager.refreshGroup("default"),this},registerMediaQueries:function(){var e=this;return 1==this.fallback?(this.mqState="large",this.mq={name:"large",retina:!1},void this.trigger("mq:match","large",!1)):(enquire.register("superwide",[{match:function(){this.superWide=!1},unmatch:function(){this.superWide=!0}}]),enquire.register("screen and (min-width: 56.75em)",[{deferSetup:!0,match:function(){var t=e.mqState;if(e.mqState="large",t&&("small"==t||"medium"==t)&&_.isNumber(e.scrollMonitor.scrollPosition)){var i=e.adManager.getAdGroup("scroll"+e.scrollMonitor.scrollPosition);i&&i.refresh()}$("#wrappermask").click(),e.scrollMonitor&&e.scrollMonitor.processScroll()},unmatch:function(){}}]),enquire.register("screen and (min-width: 56.75em) and (max-device-pixel-ratio: 1.9),screen and (min-width: 56.75em) and (-webkit-max-device-pixel-ratio: 1.9), screen and (min-width: 56.75em) and (max--moz-device-pixel-ratio: 1.9), screen and (min-width: 56.75em) and (max-resolution: 191dpi)",[{match:function(){e.mq={name:"large",retina:!1},e.trigger("mq:match","large",!1)}}]),enquire.register("screen and (min-width: 56.75em) and (min-device-pixel-ratio: 2.0),screen and (min-width: 56.75em) and (-webkit-min-device-pixel-ratio: 2.0), screen and (min-width: 56.75em) and (min--moz-device-pixel-ratio: 2.0), screen and (min-width: 56.75em) and (min-resolution: 192dpi)",[{match:function(){e.mq={name:"large",retina:!0},e.trigger("mq:match","large",!0)}}]),enquire.register("screen and (min-width: 48em) and (max-width: 56.7em)",[{deferSetup:!0,setup:function(){},match:function(){var t=e.mqState;if(e.mqState="medium",t&&("small"==t||"large"==t)&&_.isNumber(e.scrollMonitor.scrollPosition)){var i=e.adManager.getAdGroup("scroll"+e.scrollMonitor.scrollPosition);i&&i.refresh()}e.scrollMonitor&&e.scrollMonitor.processScroll()},unmatch:function(){}}]),enquire.register("screen and (min-width: 48em) and (max-width: 56.7em) and (max-device-pixel-ratio: 1.9),screen and (min-width: 48em) and (max-width: 56.7em) and (-webkit-max-device-pixel-ratio: 1.9), screen and (min-width: 48em) and (max-width: 56.7em) and (max--moz-device-pixel-ratio: 1.9), screen and (min-width: 48em) and (max-width: 56.7em) and (max-resolution: 191dpi)",[{match:function(){e.mq={name:"medium",retina:!1},e.trigger("mq:match","medium",!1)}}]),enquire.register("screen and (min-width: 48em) and (max-width: 56.7em) and (min-device-pixel-ratio: 2.0),screen and (min-width: 48em) and (max-width: 56.7em) and (-webkit-min-device-pixel-ratio: 2.0), screen and (min-width: 48em) and (max-width: 56.7em) and (min--moz-device-pixel-ratio: 2.0), screen and (min-width: 48em) and (max-width: 56.7em) and (min-resolution: 192dpi)",[{match:function(){e.mq={name:"medium",retina:!0},e.trigger("mq:match","medium",!0)}}]),enquire.register("screen and (max-width: 47.95em)",[{deferSetup:!0,setup:function(){},match:function(){var t=e.mqState;if(e.mqState="small",t&&("medium"==t||"large"==t)&&_.isNumber(e.scrollMonitor.scrollPosition)){var i=e.adManager.getAdGroup("scroll"+e.scrollMonitor.scrollPosition);i&&i.refresh()}e.scrollMonitor&&e.scrollMonitor.processScroll()},unmatch:function(){}}]),enquire.register("screen and (min-width: 22.5em) and (max-width: 47.95em) and (max-device-pixel-ratio: 1.9),screen and (min-width: 22.5em) and (max-width: 47.95em) and (-webkit-max-device-pixel-ratio: 1.9), screen and (min-width: 22.5em) and (max-width: 47.95em) and (max--moz-device-pixel-ratio: 1.9), screen and (min-width: 22.5em) and (max-width: 47.95em) and (max-resolution: 191dpi)",[{match:function(){e.mq={name:"small-between-medium",retina:!1},e.trigger("mq:match","small-between-medium",!1)}}]),enquire.register("screen and (min-width: 22.5em) and (max-width: 47.95em) and (min-device-pixel-ratio: 2.0),screen and (min-width: 22.5em) and (max-width: 47.95em) and (-webkit-min-device-pixel-ratio: 2.0), screen and (min-width: 22.5em) and (max-width: 47.95em) and (min--moz-device-pixel-ratio: 2.0), screen and (min-width: 22.5em) and (max-width: 47.95em) and (min-resolution: 192dpi)",[{match:function(){e.mq={name:"small-between-medium",retina:!0},e.trigger("mq:match","small-between-medium",!0)}}]),enquire.register("screen and (max-width: 22.45em) and (max-device-pixel-ratio: 1.9),screen and (max-width: 22.45em) and (-webkit-max-device-pixel-ratio: 1.9), screen and (max-width: 22.45em) and (max--moz-device-pixel-ratio: 1.9), screen and (max-width: 22.45em) and (max-resolution: 191dpi)",[{match:function(){e.mq={name:"smallest",retina:!1},e.trigger("mq:match","smallest",!1)}}]),enquire.register("screen and (max-width: 22.45em) and (min-device-pixel-ratio: 2.0),screen and (max-width: 22.45em) and (-webkit-min-device-pixel-ratio: 2.0), screen and (max-width: 22.45em) and (min--moz-device-pixel-ratio: 2.0), screen and (max-width: 22.45em) and (min-resolution: 192dpi)",[{match:function(){e.mq={name:"smallest",retina:!0},e.trigger("mq:match","smallest",!0)}}]),this)},gapiLoaded:function(){for(;this.gapiQueue.length>0;)this.gapiQueue.shift()();return this},eventHandlerWrapper:function(e,t){t.handleObj&&(t.namespace=t.handleObj.namespace);var i=!1;return inc.isMode("edit")&&t.namespace==inc.appNamespace+":content:regular"&&(i=!0),inc.isMode("edit")||t.namespace!=inc.appNamespace+":content:edit"||(i=!0),i?!0:e.call(this,inc,t)},buildOnClick:function(e,t){var i={};return _.extend(i,this.clickTrackingObject),_.extend(i,e),"NULL"!=t.seriesid?(i.thattype="series",i.thatserid=t.seriesid,i.thatincid=t.id):(i.thattype="article",i.thatincid=t.id),"SponsoredTile"==t.tile.className,i.slot=t.tile.$el.attr("pslot"),'event.namespace="inc:content:regular"; return _.wrap(function(app, e){ Inc.Utilities.innerLinkHandler(e);inc.tracker.recordArticleClick('+JSON.stringify(i)+',"'+t.baseurl+t.inc_filelocation+'");return false; }, inc.eventHandlerWrapper)(event);'},recordImpressions:function(e,t,i){var n={};return _.extend(n,this.impressionsTrackingObject),_.extend(n,e),n["incids[]"]=t,n["slots[]"]=i,inc.tracker.recordPatternImpressions(n),this}},_.extend(Inc.Apps.Inc,Backbone.Events);
//# sourceMappingURL=../js/scripts.js.map