<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<!-- saved from url=(0026)http://ss64.com/nt/sc.html -->
<!DOCTYPE html PUBLIC "" ""><HTML lang="en"><HEAD><META content="IE=10.000" 
http-equiv="X-UA-Compatible">

<META charset="UTF-8"> <LINK href="SC%20-%20Service%20Control%20%20Windows%20CMD%20%20SS64_com_files/main.css" 
rel="STYLESHEET" type="text/css"> <TITLE>SC - Service Control | Windows CMD | 
SS64.com</TITLE> 
<META name="GENERATOR" content="MSHTML 10.00.9200.16521"></HEAD>
<BODY><!-- #BeginLibraryItem "/Library/head_nt.lbi" -->
<DIV id="tnav">
<UL> 
  <LI class="tbtn"><A href="http://ss64.com/"> ( &nbsp;SS64 &nbsp;)</A></LI>
  <LI class="tbtn"><A href="http://ss64.com/nt">CMD</A></LI>
  <LI class="tbtn"><A href="http://ss64.com/nt/syntax.html">Syntax</A></LI>
  <LI>
  <DIV id="search">
  <FORM action="http://www.google.com/search" method="get"><BUTTON tabindex="-1" 
  id="q-img" type="submit"></BUTTON> <INPUT name="q" id="q" onclick="if(this.value=='Search…')this.value='';" 
  onblur="if(this.value=='')this.value='Search…';" type="text" size="27" 
  maxlength="255" value="Search…"> <INPUT name="sitesearch" type="hidden" value="ss64.com/nt/"></FORM></DIV></LI></UL></DIV><!-- #EndLibraryItem -->
<H1>SC.exe</H1>
<P> Service Control - Create, Start, Stop, Query or Delete any Windows <A href="http://ss64.com/nt/syntax-services.html">SERVICE</A>. 
 The command <I>options</I> for SC are case sensitive.</P>
<PRE>Syntax
      SC [\\<I>server</I>] [<I>command</I>] [<I>service_name</I>] [<I>Options</I><I></I>]

Key
   <I>server</I>       : The machine where the service is running

   <I>service_name</I> : The KeyName of the service, this is often but not always
                  the same as the DisplayName shown in Control Panel, Services.
                  You can get the KeyName by running: 
                     SC GetKeyName &lt;DisplayName&gt;

   <I>command</I>s:
          <B>query</B>  [<I>qryOpt</I>]   Show status
          <B></B>queryEx [<I>qryOpt</I>]  Show extended info - pid, flags
          <B></B>GetDisplayName    Show the DisplayName
          GetKeyName        Show the ServiceKeyName
          EnumDepend        Show Dependencies
          qc                Show config - dependencies, full path etc
          <B>start</B>          START a service.
          <B>stop</B>           STOP a service
          pause          PAUSE a service.
          continue       CONTINUE a service.
          create         Create a service. (add it to the registry)
          <B>config</B>         permanently change the service configuration
          delete         Delete a service (from the registry)
          control        Send a control to a service
          interrogate    Send an INTERROGATE control request to a service
          Qdescription   Query the description of a service
          description    Change the description of a service
          Qfailure       Query the actions taken by a service upon failure
          failure        Change the actions taken by a service upon failure
          sdShow         Display a service's security descriptor using SDDL
          SdSet          Sets a service's security descriptor using SDDL

   <I>qryOpt</I>:
          type= driver|service|all
                         Query specific types of service
          state= active|inactive|all
                         Query services in a particular state only
          bufsize= <I>bytes</I> 
          ri= <I>resume_index_number</I> (default=0)
          group= <I>groupname</I>
                         Query services in a particular group

   <I>Misc command</I>s that don’t require a service name:
          SC  QueryLock  Query the LockStatus for the ServiceManager Database.
                         this will show if a service request is running
          SC  Lock       Lock the Service Database
          SC  BOOT       Values are {ok | bad} Indicates whether to save  
                         the last restart configuration as the `last-known-good`
                         restart configuration
   Options
     The CREATE and CONFIG commands allow additional service options to be set
     e.g. to disable a service: SC config "Name of Service" start= disabled
     see the built-in help for more: 'SC create' and 'SC config'</PRE>
<P>Note the <SPAN class="code">qryOpt</SPAN> options above are case sensitive - 
they must be entered in lower case, also the position of spaces and = must be 
exactly as shown.</P>
<P>The SC command duplicates some aspects of the <A href="http://ss64.com/nt/net.html">NET</A> 
command but adds the ability to create a service.<BR> SC query will display if a 
service is running, giving output  like this: </P>
<PRE>        SERVICE_NAME       : messenger
        TYPE               : 20  WIN32_SHARE_PROCESS
        STATE              : 4  RUNNING
                                (STOPPABLE,NOT_PAUSABLE,ACCEPTS_SHUTDOWN)
        WIN32_EXIT_CODE    : 0  (0x0)
        SERVICE_EXIT_CODE  : 0  (0x0)
        CHECKPOINT         : 0x0
        WAIT_HINT          : 0x0</PRE>
<P>To retrieve specific information from SC's output, <A href="http://ss64.com/nt/syntax-redirection.html">pipe</A> 
 into <A href="http://ss64.com/nt/find.html">FIND</A> or <A href="http://ss64.com/nt/findstr.html">FindStr</A><BR> 
 e.g.</P>
<PRE>  C:\&gt; SC query messenger | FIND "STATE" | FIND "STOPPED"

  C:\&gt; SC query messenger | FIND "STATE" | FIND "RUNNING"</PRE>
<P>The statements above  will return an %ERRORLEVEL% = 1 if the text is not 
found </P>
<P><SPAN class="code">IF errorlevel 1 GOTO :my_subroutine</SPAN><B><BR></B><BR>
The <A href="http://ss64.com/nt/net.html">NET</A> START command can be used in a 
similar way to  check if a service is running:</P>
<PRE>   NET START | FIND "Service name" &gt; nul
   IF errorlevel 1 ECHO The service is not running</PRE>
<P> The service control manager will normally wait up to 30 seconds to allow a 
service to start, you can modify this time (30,000 milliseconds) in the 
registry</P>
<P class="code">HKLM\SYSTEM\CurrentControlSet\Control<BR>ServicesPipeTimeout 
 (REG_DWORD)</P>
<P>Some options  only take effect at the point when the service is started  e.g. 
the <SPAN class="code">SC config</SPAN> command allows the executable  of a 
service to be changed. When the service next starts up it will run the new 
executable. Config changes  requires the current user to have “permission to 
configure the service”. </P>
<P><B>Examples:</B></P>
<PRE> SC GetKeyName "task scheduler"
 SC GetDisplayName schedule 
 SC start schedule
 SC QUERY schedule
 SC CONFIG "Schedule" start= disabled
 SC QUERY type= driver
 SC QUERY state= all |findstr "DISPLAY_NAME STATE" &gt;svc_installed.txt 
 SC \\myServer CONFIG myService obj= LocalSystem password= mypassword
 SC CONFIG MyService binPath=c:\myprogram.exe obj=".\LocalSystem" password=""
</PRE>
<P> Enable remote registry access on computer64:<BR></P>
<PRE> SC \\computer64 config remoteregistry start= auto
 SC \\computer64 start remoteregistry</PRE>
<P>Watch out for extra spaces: <BR><SPAN class="code">SC QUERY state= all</SPAN> 
Works <BR><SPAN class="code">SC QUERY state =all</SPAN> Fails! <BR><BR><I class="quote">“There 
is always room at the top” ~ Daniel Webster </I> <BR><BR><B>Related:</B><BR><BR> 
DELSRV - Delete a service <BR>INSTSRV - Install a service (run under a specific 
account)<BR><A href="http://ss64.com/nt/net.html">NET</A> - manage network 
resources<BR><A href="http://ss64.com/nt/psservice.html">PsService</A> - View 
and control services<BR> Svcmon - Monitor services and raise an alert if they 
stop. (<A href="http://ss64.com/links/windows.html#kits">Win 2K ResKit</A>) <BR>
Svcacls - Service ACL Editor (<A 
href="http://ss64.com/links/windows.html#kits">Win 2K ResKit</A>)<BR><A href="http://ss64.com/nt/subinacl.html">SUBINACL</A> 
- Set service permissions <SPAN class="code"></SPAN><BR><A href="http://ss64.com/nt/wmic.html">WMIC 
SERVICE</A> - WMI access to services<BR><A href="http://ss64.com/nt/syntax-services.html">List 
of Windows Services</A> <BR><A 
href="http://support.microsoft.com/?kbid=251192">Q251192</A> - Create a Windows 
Service using SC<BR><A 
href="http://support.microsoft.com/?kbid=166819">Q166819</A> - Control Services 
Remotely<BR><A href="http://support.microsoft.com/?kbid=170738">Q170738</A> - 
Debug a Windows  Service<BR>Powershell: <A href="http://ss64.com/ps/get-service.html">Get-Service</A> 
- Get a list of services<BR>Equivalent bash command (Linux): <A href="http://ss64.com/bash/nice.html">nice</A> 
- Change job scheduling priority</P><!-- #BeginLibraryItem "/Library/foot_nt.lbi" -->
<P>
<SCRIPT src="SC%20-%20Service%20Control%20%20Windows%20CMD%20%20SS64_com_files/f.txt" async=""></SCRIPT>
 <!-- windows300 --> <INS class="adsbygoogle" style="width: 300px; height: 250px; display: inline-block;" 
data-ad-slot="7649547908" data-ad-client="ca-pub-6140977852749469"></INS> 
<SCRIPT>
(adsbygoogle = window.adsbygoogle || []).push({});
</SCRIPT>
</P>
<HR>

<DIV class="footer" id="bl"><A href="http://ss64.com/nt/sc.html#"><IMG width="30" 
height="22" alt="Back to the Top" src="SC%20-%20Service%20Control%20%20Windows%20CMD%20%20SS64_com_files/top.png"></A></DIV>
<DIV class="footer, tagline" id="br">© Copyright <A 
href="http://ss64.com/">SS64.com</A> 1999-2015<BR>Some rights reserved</DIV><!-- #EndLibraryItem --> 
</BODY></HTML>
