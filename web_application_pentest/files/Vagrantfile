# vagrant plugin install vagrant-hosts
# vagrant plugin install vagrant-hostsupdater


Vagrant.configure("2") do |config|

  config.vm.provision :shell, path: "provision.sh"

  config.vm.define "support" do |node|
    node.vm.box = "ubuntu/trusty32"
    node.vm.provision :shell, path: "support_server/provision.sh"

    node.vm.network :private_network, :ip => '10.10.0.3'
    node.vm.hostname = "support.ecwi.cysca"
    node.vm.provision :hosts do |provisioner|
      provisioner.autoconfigure = true
      provisioner.sync_hosts = true
      provisioner.add_host '10.10.0.3', ['support.ecwi.cysca']
      provisioner.add_host '10.10.0.2', ['ecwi.cysca', 'www.ecwi.cysca']
    end
  end

  config.vm.define "www" do |node|
    node.vm.box = "ubuntu/trusty32"
    node.vm.provision :shell, path: "www_server/provision.sh"

    node.vm.network :private_network, :ip => '10.10.0.2'
    node.vm.hostname = "www.ecwi.cysca"
    node.vm.provision :hosts do |provisioner|
      provisioner.autoconfigure = true
      provisioner.sync_hosts = true
      provisioner.add_host '10.10.0.3', ['support.ecwi.cysca']
      provisioner.add_host '10.10.0.2', ['ecwi.cysca', 'www.ecwi.cysca']
    end
    
  end
end

# FIX ecwi.cysca domain
