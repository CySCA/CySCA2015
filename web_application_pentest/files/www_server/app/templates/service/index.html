{% extends 'intranet.html' %} 

{% block box %}
<ul class="nav nav-tabs">
  <li class="active"><a data-toggle="tab" href="#leave">Leave</a></li>
  {% if user.executive() %}
    <li><a data-toggle="tab" href="#manage">Requests</a></li>
  {% endif %}
</ul>

<div class="tab-content">

  <div id="leave" class="tab-pane fade in active">
    <a href="/service/leave"><div class="btn-leave">> Submit New Request</div></a>
    <table class="table mail-table">
      <thead>
        <tr>
          <th>From</th>
          <th>To</th>
          <th>Status</th>
          <th>Executive</th>
					<th>File</th>
        </tr>
      </thead>
      <tbody>
        {% for r in req %}
        <tr class="static-row">
          <td>{{ r.getDateStart()  }}</td>
          <td>{{ r.getDateEnd() }}</td>
          <td>{{ r.status }}</td>
          <td>{{ r.getApprover() }}</td>
					<!-- td><a href='/service/uploads/{{ r.filename }}'>{{ r.filename }}</td-->
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
  
  {% if user.executive() %}
  <div id="manage" class="tab-pane fade in">
    {% for r in pending %}
    <div class="leave-request">
      <a href="leave/deny/{{ r.id }}" class="btn-deny">Deny</a>
      <a href="leave/approve/{{ r.id }}" class="btn-approve">Approve</a>
      <div class="label">{{ r.getOwner() }}</div>
      <div class="value">({{ r.getDateStart() }} - {{ r.getDateEnd() }})</div>
      <div class="leave-reason">{{ r.reason | safe }}</div>
    </div>
    {% endfor %}
  </div>
  {% endif %}

</div>
{% endblock %}
